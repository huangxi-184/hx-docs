(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))n(e);new MutationObserver(e=>{for(const s of e)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function r(e){const s={};return e.integrity&&(s.integrity=e.integrity),e.referrerPolicy&&(s.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?s.credentials="include":e.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(e){if(e.ep)return;e.ep=!0;const s=r(e);fetch(e.href,s)}})();var rg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Xa(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Yh={exports:{}},Qa={},Xh={exports:{}},ce={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fs=Symbol.for("react.element"),ig=Symbol.for("react.portal"),sg=Symbol.for("react.fragment"),ag=Symbol.for("react.strict_mode"),og=Symbol.for("react.profiler"),ug=Symbol.for("react.provider"),lg=Symbol.for("react.context"),cg=Symbol.for("react.forward_ref"),fg=Symbol.for("react.suspense"),hg=Symbol.for("react.memo"),dg=Symbol.for("react.lazy"),Bc=Symbol.iterator;function pg(t){return t===null||typeof t!="object"?null:(t=Bc&&t[Bc]||t["@@iterator"],typeof t=="function"?t:null)}var Qh={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},qh=Object.assign,Zh={};function di(t,i,r){this.props=t,this.context=i,this.refs=Zh,this.updater=r||Qh}di.prototype.isReactComponent={};di.prototype.setState=function(t,i){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,i,"setState")};di.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Jh(){}Jh.prototype=di.prototype;function xl(t,i,r){this.props=t,this.context=i,this.refs=Zh,this.updater=r||Qh}var Al=xl.prototype=new Jh;Al.constructor=xl;qh(Al,di.prototype);Al.isPureReactComponent=!0;var Uc=Array.isArray,ed=Object.prototype.hasOwnProperty,Il={current:null},td={key:!0,ref:!0,__self:!0,__source:!0};function nd(t,i,r){var n,e={},s=null,a=null;if(i!=null)for(n in i.ref!==void 0&&(a=i.ref),i.key!==void 0&&(s=""+i.key),i)ed.call(i,n)&&!td.hasOwnProperty(n)&&(e[n]=i[n]);var o=arguments.length-2;if(o===1)e.children=r;else if(1<o){for(var u=Array(o),l=0;l<o;l++)u[l]=arguments[l+2];e.children=u}if(t&&t.defaultProps)for(n in o=t.defaultProps,o)e[n]===void 0&&(e[n]=o[n]);return{$$typeof:fs,type:t,key:s,ref:a,props:e,_owner:Il.current}}function vg(t,i){return{$$typeof:fs,type:t.type,key:i,ref:t.ref,props:t.props,_owner:t._owner}}function Ll(t){return typeof t=="object"&&t!==null&&t.$$typeof===fs}function gg(t){var i={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return i[r]})}var Hc=/\/+/g;function bo(t,i){return typeof t=="object"&&t!==null&&t.key!=null?gg(""+t.key):i.toString(36)}function Ks(t,i,r,n,e){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(s){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case fs:case ig:a=!0}}if(a)return a=t,e=e(a),t=n===""?"."+bo(a,0):n,Uc(e)?(r="",t!=null&&(r=t.replace(Hc,"$&/")+"/"),Ks(e,i,r,"",function(l){return l})):e!=null&&(Ll(e)&&(e=vg(e,r+(!e.key||a&&a.key===e.key?"":(""+e.key).replace(Hc,"$&/")+"/")+t)),i.push(e)),1;if(a=0,n=n===""?".":n+":",Uc(t))for(var o=0;o<t.length;o++){s=t[o];var u=n+bo(s,o);a+=Ks(s,i,r,u,e)}else if(u=pg(t),typeof u=="function")for(t=u.call(t),o=0;!(s=t.next()).done;)s=s.value,u=n+bo(s,o++),a+=Ks(s,i,r,u,e);else if(s==="object")throw i=String(t),Error("Objects are not valid as a React child (found: "+(i==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":i)+"). If you meant to render a collection of children, use an array instead.");return a}function Es(t,i,r){if(t==null)return t;var n=[],e=0;return Ks(t,n,"","",function(s){return i.call(r,s,e++)}),n}function mg(t){if(t._status===-1){var i=t._result;i=i(),i.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=i)}if(t._status===1)return t._result.default;throw t._result}var lt={current:null},Ys={transition:null},yg={ReactCurrentDispatcher:lt,ReactCurrentBatchConfig:Ys,ReactCurrentOwner:Il};function rd(){throw Error("act(...) is not supported in production builds of React.")}ce.Children={map:Es,forEach:function(t,i,r){Es(t,function(){i.apply(this,arguments)},r)},count:function(t){var i=0;return Es(t,function(){i++}),i},toArray:function(t){return Es(t,function(i){return i})||[]},only:function(t){if(!Ll(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ce.Component=di;ce.Fragment=sg;ce.Profiler=og;ce.PureComponent=xl;ce.StrictMode=ag;ce.Suspense=fg;ce.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=yg;ce.act=rd;ce.cloneElement=function(t,i,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=qh({},t.props),e=t.key,s=t.ref,a=t._owner;if(i!=null){if(i.ref!==void 0&&(s=i.ref,a=Il.current),i.key!==void 0&&(e=""+i.key),t.type&&t.type.defaultProps)var o=t.type.defaultProps;for(u in i)ed.call(i,u)&&!td.hasOwnProperty(u)&&(n[u]=i[u]===void 0&&o!==void 0?o[u]:i[u])}var u=arguments.length-2;if(u===1)n.children=r;else if(1<u){o=Array(u);for(var l=0;l<u;l++)o[l]=arguments[l+2];n.children=o}return{$$typeof:fs,type:t.type,key:e,ref:s,props:n,_owner:a}};ce.createContext=function(t){return t={$$typeof:lg,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:ug,_context:t},t.Consumer=t};ce.createElement=nd;ce.createFactory=function(t){var i=nd.bind(null,t);return i.type=t,i};ce.createRef=function(){return{current:null}};ce.forwardRef=function(t){return{$$typeof:cg,render:t}};ce.isValidElement=Ll;ce.lazy=function(t){return{$$typeof:dg,_payload:{_status:-1,_result:t},_init:mg}};ce.memo=function(t,i){return{$$typeof:hg,type:t,compare:i===void 0?null:i}};ce.startTransition=function(t){var i=Ys.transition;Ys.transition={};try{t()}finally{Ys.transition=i}};ce.unstable_act=rd;ce.useCallback=function(t,i){return lt.current.useCallback(t,i)};ce.useContext=function(t){return lt.current.useContext(t)};ce.useDebugValue=function(){};ce.useDeferredValue=function(t){return lt.current.useDeferredValue(t)};ce.useEffect=function(t,i){return lt.current.useEffect(t,i)};ce.useId=function(){return lt.current.useId()};ce.useImperativeHandle=function(t,i,r){return lt.current.useImperativeHandle(t,i,r)};ce.useInsertionEffect=function(t,i){return lt.current.useInsertionEffect(t,i)};ce.useLayoutEffect=function(t,i){return lt.current.useLayoutEffect(t,i)};ce.useMemo=function(t,i){return lt.current.useMemo(t,i)};ce.useReducer=function(t,i,r){return lt.current.useReducer(t,i,r)};ce.useRef=function(t){return lt.current.useRef(t)};ce.useState=function(t){return lt.current.useState(t)};ce.useSyncExternalStore=function(t,i,r){return lt.current.useSyncExternalStore(t,i,r)};ce.useTransition=function(){return lt.current.useTransition()};ce.version="18.3.1";Xh.exports=ce;var Jt=Xh.exports;const _g=Xa(Jt);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sg=Jt,Eg=Symbol.for("react.element"),kg=Symbol.for("react.fragment"),wg=Object.prototype.hasOwnProperty,Tg=Sg.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Cg={key:!0,ref:!0,__self:!0,__source:!0};function id(t,i,r){var n,e={},s=null,a=null;r!==void 0&&(s=""+r),i.key!==void 0&&(s=""+i.key),i.ref!==void 0&&(a=i.ref);for(n in i)wg.call(i,n)&&!Cg.hasOwnProperty(n)&&(e[n]=i[n]);if(t&&t.defaultProps)for(n in i=t.defaultProps,i)e[n]===void 0&&(e[n]=i[n]);return{$$typeof:Eg,type:t,key:s,ref:a,props:e,_owner:Tg.current}}Qa.Fragment=kg;Qa.jsx=id;Qa.jsxs=id;Yh.exports=Qa;var _e=Yh.exports,Eu={},sd={exports:{}},At={},ad={exports:{}},od={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function i(R,V){var G=R.length;R.push(V);e:for(;0<G;){var U=G-1>>>1,ue=R[U];if(0<e(ue,V))R[U]=V,R[G]=ue,G=U;else break e}}function r(R){return R.length===0?null:R[0]}function n(R){if(R.length===0)return null;var V=R[0],G=R.pop();if(G!==V){R[0]=G;e:for(var U=0,ue=R.length,Y=ue>>>1;U<Y;){var tt=2*(U+1)-1,Ye=R[tt],nt=tt+1,Ht=R[nt];if(0>e(Ye,G))nt<ue&&0>e(Ht,Ye)?(R[U]=Ht,R[nt]=G,U=nt):(R[U]=Ye,R[tt]=G,U=tt);else if(nt<ue&&0>e(Ht,G))R[U]=Ht,R[nt]=G,U=nt;else break e}}return V}function e(R,V){var G=R.sortIndex-V.sortIndex;return G!==0?G:R.id-V.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();t.unstable_now=function(){return a.now()-o}}var u=[],l=[],c=1,f=null,h=3,d=!1,p=!1,m=!1,_=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(R){for(var V=r(l);V!==null;){if(V.callback===null)n(l);else if(V.startTime<=R)n(l),V.sortIndex=V.expirationTime,i(u,V);else break;V=r(l)}}function E(R){if(m=!1,S(R),!p)if(r(u)!==null)p=!0,L(T);else{var V=r(l);V!==null&&W(E,V.startTime-R)}}function T(R,V){p=!1,m&&(m=!1,v(D),D=-1),d=!0;var G=h;try{for(S(V),f=r(u);f!==null&&(!(f.expirationTime>V)||R&&!X());){var U=f.callback;if(typeof U=="function"){f.callback=null,h=f.priorityLevel;var ue=U(f.expirationTime<=V);V=t.unstable_now(),typeof ue=="function"?f.callback=ue:f===r(u)&&n(u),S(V)}else n(u);f=r(u)}if(f!==null)var Y=!0;else{var tt=r(l);tt!==null&&W(E,tt.startTime-V),Y=!1}return Y}finally{f=null,h=G,d=!1}}var A=!1,P=null,D=-1,F=5,I=-1;function X(){return!(t.unstable_now()-I<F)}function k(){if(P!==null){var R=t.unstable_now();I=R;var V=!0;try{V=P(!0,R)}finally{V?w():(A=!1,P=null)}}else A=!1}var w;if(typeof y=="function")w=function(){y(k)};else if(typeof MessageChannel<"u"){var C=new MessageChannel,N=C.port2;C.port1.onmessage=k,w=function(){N.postMessage(null)}}else w=function(){_(k,0)};function L(R){P=R,A||(A=!0,w())}function W(R,V){D=_(function(){R(t.unstable_now())},V)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(R){R.callback=null},t.unstable_continueExecution=function(){p||d||(p=!0,L(T))},t.unstable_forceFrameRate=function(R){0>R||125<R?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):F=0<R?Math.floor(1e3/R):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return r(u)},t.unstable_next=function(R){switch(h){case 1:case 2:case 3:var V=3;break;default:V=h}var G=h;h=V;try{return R()}finally{h=G}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(R,V){switch(R){case 1:case 2:case 3:case 4:case 5:break;default:R=3}var G=h;h=R;try{return V()}finally{h=G}},t.unstable_scheduleCallback=function(R,V,G){var U=t.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?U+G:U):G=U,R){case 1:var ue=-1;break;case 2:ue=250;break;case 5:ue=1073741823;break;case 4:ue=1e4;break;default:ue=5e3}return ue=G+ue,R={id:c++,callback:V,priorityLevel:R,startTime:G,expirationTime:ue,sortIndex:-1},G>U?(R.sortIndex=G,i(l,R),r(u)===null&&R===r(l)&&(m?(v(D),D=-1):m=!0,W(E,G-U))):(R.sortIndex=ue,i(u,R),p||d||(p=!0,L(T))),R},t.unstable_shouldYield=X,t.unstable_wrapCallback=function(R){var V=h;return function(){var G=h;h=V;try{return R.apply(this,arguments)}finally{h=G}}}})(od);ad.exports=od;var bg=ad.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pg=Jt,Pt=bg;function H(t){for(var i="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)i+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var ud=new Set,ji={};function wr(t,i){si(t,i),si(t+"Capture",i)}function si(t,i){for(ji[t]=i,t=0;t<i.length;t++)ud.add(i[t])}var _n=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ku=Object.prototype.hasOwnProperty,xg=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,zc={},Vc={};function Ag(t){return ku.call(Vc,t)?!0:ku.call(zc,t)?!1:xg.test(t)?Vc[t]=!0:(zc[t]=!0,!1)}function Ig(t,i,r,n){if(r!==null&&r.type===0)return!1;switch(typeof i){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Lg(t,i,r,n){if(i===null||typeof i>"u"||Ig(t,i,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!i;case 4:return i===!1;case 5:return isNaN(i);case 6:return isNaN(i)||1>i}return!1}function ct(t,i,r,n,e,s,a){this.acceptsBooleans=i===2||i===3||i===4,this.attributeName=n,this.attributeNamespace=e,this.mustUseProperty=r,this.propertyName=t,this.type=i,this.sanitizeURL=s,this.removeEmptyString=a}var Ke={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ke[t]=new ct(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var i=t[0];Ke[i]=new ct(i,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ke[t]=new ct(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ke[t]=new ct(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ke[t]=new ct(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ke[t]=new ct(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ke[t]=new ct(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ke[t]=new ct(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ke[t]=new ct(t,5,!1,t.toLowerCase(),null,!1,!1)});var Dl=/[\-:]([a-z])/g;function Ol(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var i=t.replace(Dl,Ol);Ke[i]=new ct(i,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var i=t.replace(Dl,Ol);Ke[i]=new ct(i,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var i=t.replace(Dl,Ol);Ke[i]=new ct(i,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ke[t]=new ct(t,1,!1,t.toLowerCase(),null,!1,!1)});Ke.xlinkHref=new ct("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ke[t]=new ct(t,1,!1,t.toLowerCase(),null,!0,!0)});function Rl(t,i,r,n){var e=Ke.hasOwnProperty(i)?Ke[i]:null;(e!==null?e.type!==0:n||!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(Lg(i,r,e,n)&&(r=null),n||e===null?Ag(i)&&(r===null?t.removeAttribute(i):t.setAttribute(i,""+r)):e.mustUseProperty?t[e.propertyName]=r===null?e.type===3?!1:"":r:(i=e.attributeName,n=e.attributeNamespace,r===null?t.removeAttribute(i):(e=e.type,r=e===3||e===4&&r===!0?"":""+r,n?t.setAttributeNS(n,i,r):t.setAttribute(i,r))))}var Cn=Pg.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ks=Symbol.for("react.element"),Br=Symbol.for("react.portal"),Ur=Symbol.for("react.fragment"),Ml=Symbol.for("react.strict_mode"),wu=Symbol.for("react.profiler"),ld=Symbol.for("react.provider"),cd=Symbol.for("react.context"),Nl=Symbol.for("react.forward_ref"),Tu=Symbol.for("react.suspense"),Cu=Symbol.for("react.suspense_list"),Fl=Symbol.for("react.memo"),Ln=Symbol.for("react.lazy"),fd=Symbol.for("react.offscreen"),jc=Symbol.iterator;function _i(t){return t===null||typeof t!="object"?null:(t=jc&&t[jc]||t["@@iterator"],typeof t=="function"?t:null)}var Ae=Object.assign,Po;function Ai(t){if(Po===void 0)try{throw Error()}catch(r){var i=r.stack.trim().match(/\n( *(at )?)/);Po=i&&i[1]||""}return`
`+Po+t}var xo=!1;function Ao(t,i){if(!t||xo)return"";xo=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(i)if(i=function(){throw Error()},Object.defineProperty(i.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(i,[])}catch(l){var n=l}Reflect.construct(t,[],i)}else{try{i.call()}catch(l){n=l}t.call(i.prototype)}else{try{throw Error()}catch(l){n=l}t()}}catch(l){if(l&&n&&typeof l.stack=="string"){for(var e=l.stack.split(`
`),s=n.stack.split(`
`),a=e.length-1,o=s.length-1;1<=a&&0<=o&&e[a]!==s[o];)o--;for(;1<=a&&0<=o;a--,o--)if(e[a]!==s[o]){if(a!==1||o!==1)do if(a--,o--,0>o||e[a]!==s[o]){var u=`
`+e[a].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=a&&0<=o);break}}}finally{xo=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?Ai(t):""}function Dg(t){switch(t.tag){case 5:return Ai(t.type);case 16:return Ai("Lazy");case 13:return Ai("Suspense");case 19:return Ai("SuspenseList");case 0:case 2:case 15:return t=Ao(t.type,!1),t;case 11:return t=Ao(t.type.render,!1),t;case 1:return t=Ao(t.type,!0),t;default:return""}}function bu(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ur:return"Fragment";case Br:return"Portal";case wu:return"Profiler";case Ml:return"StrictMode";case Tu:return"Suspense";case Cu:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case cd:return(t.displayName||"Context")+".Consumer";case ld:return(t._context.displayName||"Context")+".Provider";case Nl:var i=t.render;return t=t.displayName,t||(t=i.displayName||i.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Fl:return i=t.displayName||null,i!==null?i:bu(t.type)||"Memo";case Ln:i=t._payload,t=t._init;try{return bu(t(i))}catch{}}return null}function Og(t){var i=t.type;switch(t.tag){case 24:return"Cache";case 9:return(i.displayName||"Context")+".Consumer";case 10:return(i._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=i.render,t=t.displayName||t.name||"",i.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return i;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return bu(i);case 8:return i===Ml?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i}return null}function Kn(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function hd(t){var i=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Rg(t){var i=hd(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,i),n=""+t[i];if(!t.hasOwnProperty(i)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var e=r.get,s=r.set;return Object.defineProperty(t,i,{configurable:!0,get:function(){return e.call(this)},set:function(a){n=""+a,s.call(this,a)}}),Object.defineProperty(t,i,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(a){n=""+a},stopTracking:function(){t._valueTracker=null,delete t[i]}}}}function ws(t){t._valueTracker||(t._valueTracker=Rg(t))}function dd(t){if(!t)return!1;var i=t._valueTracker;if(!i)return!0;var r=i.getValue(),n="";return t&&(n=hd(t)?t.checked?"true":"false":t.value),t=n,t!==r?(i.setValue(t),!0):!1}function ua(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Pu(t,i){var r=i.checked;return Ae({},i,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function Gc(t,i){var r=i.defaultValue==null?"":i.defaultValue,n=i.checked!=null?i.checked:i.defaultChecked;r=Kn(i.value!=null?i.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:i.type==="checkbox"||i.type==="radio"?i.checked!=null:i.value!=null}}function pd(t,i){i=i.checked,i!=null&&Rl(t,"checked",i,!1)}function xu(t,i){pd(t,i);var r=Kn(i.value),n=i.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}i.hasOwnProperty("value")?Au(t,i.type,r):i.hasOwnProperty("defaultValue")&&Au(t,i.type,Kn(i.defaultValue)),i.checked==null&&i.defaultChecked!=null&&(t.defaultChecked=!!i.defaultChecked)}function Wc(t,i,r){if(i.hasOwnProperty("value")||i.hasOwnProperty("defaultValue")){var n=i.type;if(!(n!=="submit"&&n!=="reset"||i.value!==void 0&&i.value!==null))return;i=""+t._wrapperState.initialValue,r||i===t.value||(t.value=i),t.defaultValue=i}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function Au(t,i,r){(i!=="number"||ua(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var Ii=Array.isArray;function Zr(t,i,r,n){if(t=t.options,i){i={};for(var e=0;e<r.length;e++)i["$"+r[e]]=!0;for(r=0;r<t.length;r++)e=i.hasOwnProperty("$"+t[r].value),t[r].selected!==e&&(t[r].selected=e),e&&n&&(t[r].defaultSelected=!0)}else{for(r=""+Kn(r),i=null,e=0;e<t.length;e++){if(t[e].value===r){t[e].selected=!0,n&&(t[e].defaultSelected=!0);return}i!==null||t[e].disabled||(i=t[e])}i!==null&&(i.selected=!0)}}function Iu(t,i){if(i.dangerouslySetInnerHTML!=null)throw Error(H(91));return Ae({},i,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function $c(t,i){var r=i.value;if(r==null){if(r=i.children,i=i.defaultValue,r!=null){if(i!=null)throw Error(H(92));if(Ii(r)){if(1<r.length)throw Error(H(93));r=r[0]}i=r}i==null&&(i=""),r=i}t._wrapperState={initialValue:Kn(r)}}function vd(t,i){var r=Kn(i.value),n=Kn(i.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),i.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function Kc(t){var i=t.textContent;i===t._wrapperState.initialValue&&i!==""&&i!==null&&(t.value=i)}function gd(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Lu(t,i){return t==null||t==="http://www.w3.org/1999/xhtml"?gd(i):t==="http://www.w3.org/2000/svg"&&i==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Ts,md=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(i,r,n,e){MSApp.execUnsafeLocalFunction(function(){return t(i,r,n,e)})}:t}(function(t,i){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=i;else{for(Ts=Ts||document.createElement("div"),Ts.innerHTML="<svg>"+i.valueOf().toString()+"</svg>",i=Ts.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;i.firstChild;)t.appendChild(i.firstChild)}});function Gi(t,i){if(i){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=i;return}}t.textContent=i}var Ri={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Mg=["Webkit","ms","Moz","O"];Object.keys(Ri).forEach(function(t){Mg.forEach(function(i){i=i+t.charAt(0).toUpperCase()+t.substring(1),Ri[i]=Ri[t]})});function yd(t,i,r){return i==null||typeof i=="boolean"||i===""?"":r||typeof i!="number"||i===0||Ri.hasOwnProperty(t)&&Ri[t]?(""+i).trim():i+"px"}function _d(t,i){t=t.style;for(var r in i)if(i.hasOwnProperty(r)){var n=r.indexOf("--")===0,e=yd(r,i[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,e):t[r]=e}}var Ng=Ae({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Du(t,i){if(i){if(Ng[t]&&(i.children!=null||i.dangerouslySetInnerHTML!=null))throw Error(H(137,t));if(i.dangerouslySetInnerHTML!=null){if(i.children!=null)throw Error(H(60));if(typeof i.dangerouslySetInnerHTML!="object"||!("__html"in i.dangerouslySetInnerHTML))throw Error(H(61))}if(i.style!=null&&typeof i.style!="object")throw Error(H(62))}}function Ou(t,i){if(t.indexOf("-")===-1)return typeof i.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ru=null;function Bl(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Mu=null,Jr=null,ei=null;function Yc(t){if(t=ps(t)){if(typeof Mu!="function")throw Error(H(280));var i=t.stateNode;i&&(i=to(i),Mu(t.stateNode,t.type,i))}}function Sd(t){Jr?ei?ei.push(t):ei=[t]:Jr=t}function Ed(){if(Jr){var t=Jr,i=ei;if(ei=Jr=null,Yc(t),i)for(t=0;t<i.length;t++)Yc(i[t])}}function kd(t,i){return t(i)}function wd(){}var Io=!1;function Td(t,i,r){if(Io)return t(i,r);Io=!0;try{return kd(t,i,r)}finally{Io=!1,(Jr!==null||ei!==null)&&(wd(),Ed())}}function Wi(t,i){var r=t.stateNode;if(r===null)return null;var n=to(r);if(n===null)return null;r=n[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(H(231,i,typeof r));return r}var Nu=!1;if(_n)try{var Si={};Object.defineProperty(Si,"passive",{get:function(){Nu=!0}}),window.addEventListener("test",Si,Si),window.removeEventListener("test",Si,Si)}catch{Nu=!1}function Fg(t,i,r,n,e,s,a,o,u){var l=Array.prototype.slice.call(arguments,3);try{i.apply(r,l)}catch(c){this.onError(c)}}var Mi=!1,la=null,ca=!1,Fu=null,Bg={onError:function(t){Mi=!0,la=t}};function Ug(t,i,r,n,e,s,a,o,u){Mi=!1,la=null,Fg.apply(Bg,arguments)}function Hg(t,i,r,n,e,s,a,o,u){if(Ug.apply(this,arguments),Mi){if(Mi){var l=la;Mi=!1,la=null}else throw Error(H(198));ca||(ca=!0,Fu=l)}}function Tr(t){var i=t,r=t;if(t.alternate)for(;i.return;)i=i.return;else{t=i;do i=t,i.flags&4098&&(r=i.return),t=i.return;while(t)}return i.tag===3?r:null}function Cd(t){if(t.tag===13){var i=t.memoizedState;if(i===null&&(t=t.alternate,t!==null&&(i=t.memoizedState)),i!==null)return i.dehydrated}return null}function Xc(t){if(Tr(t)!==t)throw Error(H(188))}function zg(t){var i=t.alternate;if(!i){if(i=Tr(t),i===null)throw Error(H(188));return i!==t?null:t}for(var r=t,n=i;;){var e=r.return;if(e===null)break;var s=e.alternate;if(s===null){if(n=e.return,n!==null){r=n;continue}break}if(e.child===s.child){for(s=e.child;s;){if(s===r)return Xc(e),t;if(s===n)return Xc(e),i;s=s.sibling}throw Error(H(188))}if(r.return!==n.return)r=e,n=s;else{for(var a=!1,o=e.child;o;){if(o===r){a=!0,r=e,n=s;break}if(o===n){a=!0,n=e,r=s;break}o=o.sibling}if(!a){for(o=s.child;o;){if(o===r){a=!0,r=s,n=e;break}if(o===n){a=!0,n=s,r=e;break}o=o.sibling}if(!a)throw Error(H(189))}}if(r.alternate!==n)throw Error(H(190))}if(r.tag!==3)throw Error(H(188));return r.stateNode.current===r?t:i}function bd(t){return t=zg(t),t!==null?Pd(t):null}function Pd(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var i=Pd(t);if(i!==null)return i;t=t.sibling}return null}var xd=Pt.unstable_scheduleCallback,Qc=Pt.unstable_cancelCallback,Vg=Pt.unstable_shouldYield,jg=Pt.unstable_requestPaint,De=Pt.unstable_now,Gg=Pt.unstable_getCurrentPriorityLevel,Ul=Pt.unstable_ImmediatePriority,Ad=Pt.unstable_UserBlockingPriority,fa=Pt.unstable_NormalPriority,Wg=Pt.unstable_LowPriority,Id=Pt.unstable_IdlePriority,qa=null,rn=null;function $g(t){if(rn&&typeof rn.onCommitFiberRoot=="function")try{rn.onCommitFiberRoot(qa,t,void 0,(t.current.flags&128)===128)}catch{}}var $t=Math.clz32?Math.clz32:Xg,Kg=Math.log,Yg=Math.LN2;function Xg(t){return t>>>=0,t===0?32:31-(Kg(t)/Yg|0)|0}var Cs=64,bs=4194304;function Li(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function ha(t,i){var r=t.pendingLanes;if(r===0)return 0;var n=0,e=t.suspendedLanes,s=t.pingedLanes,a=r&268435455;if(a!==0){var o=a&~e;o!==0?n=Li(o):(s&=a,s!==0&&(n=Li(s)))}else a=r&~e,a!==0?n=Li(a):s!==0&&(n=Li(s));if(n===0)return 0;if(i!==0&&i!==n&&!(i&e)&&(e=n&-n,s=i&-i,e>=s||e===16&&(s&4194240)!==0))return i;if(n&4&&(n|=r&16),i=t.entangledLanes,i!==0)for(t=t.entanglements,i&=n;0<i;)r=31-$t(i),e=1<<r,n|=t[r],i&=~e;return n}function Qg(t,i){switch(t){case 1:case 2:case 4:return i+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function qg(t,i){for(var r=t.suspendedLanes,n=t.pingedLanes,e=t.expirationTimes,s=t.pendingLanes;0<s;){var a=31-$t(s),o=1<<a,u=e[a];u===-1?(!(o&r)||o&n)&&(e[a]=Qg(o,i)):u<=i&&(t.expiredLanes|=o),s&=~o}}function Bu(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Ld(){var t=Cs;return Cs<<=1,!(Cs&4194240)&&(Cs=64),t}function Lo(t){for(var i=[],r=0;31>r;r++)i.push(t);return i}function hs(t,i,r){t.pendingLanes|=i,i!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,i=31-$t(i),t[i]=r}function Zg(t,i){var r=t.pendingLanes&~i;t.pendingLanes=i,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=i,t.mutableReadLanes&=i,t.entangledLanes&=i,i=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var e=31-$t(r),s=1<<e;i[e]=0,n[e]=-1,t[e]=-1,r&=~s}}function Hl(t,i){var r=t.entangledLanes|=i;for(t=t.entanglements;r;){var n=31-$t(r),e=1<<n;e&i|t[n]&i&&(t[n]|=i),r&=~e}}var ye=0;function Dd(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Od,zl,Rd,Md,Nd,Uu=!1,Ps=[],Bn=null,Un=null,Hn=null,$i=new Map,Ki=new Map,On=[],Jg="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function qc(t,i){switch(t){case"focusin":case"focusout":Bn=null;break;case"dragenter":case"dragleave":Un=null;break;case"mouseover":case"mouseout":Hn=null;break;case"pointerover":case"pointerout":$i.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ki.delete(i.pointerId)}}function Ei(t,i,r,n,e,s){return t===null||t.nativeEvent!==s?(t={blockedOn:i,domEventName:r,eventSystemFlags:n,nativeEvent:s,targetContainers:[e]},i!==null&&(i=ps(i),i!==null&&zl(i)),t):(t.eventSystemFlags|=n,i=t.targetContainers,e!==null&&i.indexOf(e)===-1&&i.push(e),t)}function em(t,i,r,n,e){switch(i){case"focusin":return Bn=Ei(Bn,t,i,r,n,e),!0;case"dragenter":return Un=Ei(Un,t,i,r,n,e),!0;case"mouseover":return Hn=Ei(Hn,t,i,r,n,e),!0;case"pointerover":var s=e.pointerId;return $i.set(s,Ei($i.get(s)||null,t,i,r,n,e)),!0;case"gotpointercapture":return s=e.pointerId,Ki.set(s,Ei(Ki.get(s)||null,t,i,r,n,e)),!0}return!1}function Fd(t){var i=ur(t.target);if(i!==null){var r=Tr(i);if(r!==null){if(i=r.tag,i===13){if(i=Cd(r),i!==null){t.blockedOn=i,Nd(t.priority,function(){Rd(r)});return}}else if(i===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Xs(t){if(t.blockedOn!==null)return!1;for(var i=t.targetContainers;0<i.length;){var r=Hu(t.domEventName,t.eventSystemFlags,i[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);Ru=n,r.target.dispatchEvent(n),Ru=null}else return i=ps(r),i!==null&&zl(i),t.blockedOn=r,!1;i.shift()}return!0}function Zc(t,i,r){Xs(t)&&r.delete(i)}function tm(){Uu=!1,Bn!==null&&Xs(Bn)&&(Bn=null),Un!==null&&Xs(Un)&&(Un=null),Hn!==null&&Xs(Hn)&&(Hn=null),$i.forEach(Zc),Ki.forEach(Zc)}function ki(t,i){t.blockedOn===i&&(t.blockedOn=null,Uu||(Uu=!0,Pt.unstable_scheduleCallback(Pt.unstable_NormalPriority,tm)))}function Yi(t){function i(e){return ki(e,t)}if(0<Ps.length){ki(Ps[0],t);for(var r=1;r<Ps.length;r++){var n=Ps[r];n.blockedOn===t&&(n.blockedOn=null)}}for(Bn!==null&&ki(Bn,t),Un!==null&&ki(Un,t),Hn!==null&&ki(Hn,t),$i.forEach(i),Ki.forEach(i),r=0;r<On.length;r++)n=On[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<On.length&&(r=On[0],r.blockedOn===null);)Fd(r),r.blockedOn===null&&On.shift()}var ti=Cn.ReactCurrentBatchConfig,da=!0;function nm(t,i,r,n){var e=ye,s=ti.transition;ti.transition=null;try{ye=1,Vl(t,i,r,n)}finally{ye=e,ti.transition=s}}function rm(t,i,r,n){var e=ye,s=ti.transition;ti.transition=null;try{ye=4,Vl(t,i,r,n)}finally{ye=e,ti.transition=s}}function Vl(t,i,r,n){if(da){var e=Hu(t,i,r,n);if(e===null)zo(t,i,n,pa,r),qc(t,n);else if(em(e,t,i,r,n))n.stopPropagation();else if(qc(t,n),i&4&&-1<Jg.indexOf(t)){for(;e!==null;){var s=ps(e);if(s!==null&&Od(s),s=Hu(t,i,r,n),s===null&&zo(t,i,n,pa,r),s===e)break;e=s}e!==null&&n.stopPropagation()}else zo(t,i,n,null,r)}}var pa=null;function Hu(t,i,r,n){if(pa=null,t=Bl(n),t=ur(t),t!==null)if(i=Tr(t),i===null)t=null;else if(r=i.tag,r===13){if(t=Cd(i),t!==null)return t;t=null}else if(r===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;t=null}else i!==t&&(t=null);return pa=t,null}function Bd(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Gg()){case Ul:return 1;case Ad:return 4;case fa:case Wg:return 16;case Id:return 536870912;default:return 16}default:return 16}}var Nn=null,jl=null,Qs=null;function Ud(){if(Qs)return Qs;var t,i=jl,r=i.length,n,e="value"in Nn?Nn.value:Nn.textContent,s=e.length;for(t=0;t<r&&i[t]===e[t];t++);var a=r-t;for(n=1;n<=a&&i[r-n]===e[s-n];n++);return Qs=e.slice(t,1<n?1-n:void 0)}function qs(t){var i=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&i===13&&(t=13)):t=i,t===10&&(t=13),32<=t||t===13?t:0}function xs(){return!0}function Jc(){return!1}function It(t){function i(r,n,e,s,a){this._reactName=r,this._targetInst=e,this.type=n,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(r=t[o],this[o]=r?r(s):s[o]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?xs:Jc,this.isPropagationStopped=Jc,this}return Ae(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=xs)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=xs)},persist:function(){},isPersistent:xs}),i}var pi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Gl=It(pi),ds=Ae({},pi,{view:0,detail:0}),im=It(ds),Do,Oo,wi,Za=Ae({},ds,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Wl,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==wi&&(wi&&t.type==="mousemove"?(Do=t.screenX-wi.screenX,Oo=t.screenY-wi.screenY):Oo=Do=0,wi=t),Do)},movementY:function(t){return"movementY"in t?t.movementY:Oo}}),ef=It(Za),sm=Ae({},Za,{dataTransfer:0}),am=It(sm),om=Ae({},ds,{relatedTarget:0}),Ro=It(om),um=Ae({},pi,{animationName:0,elapsedTime:0,pseudoElement:0}),lm=It(um),cm=Ae({},pi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),fm=It(cm),hm=Ae({},pi,{data:0}),tf=It(hm),dm={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},pm={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},vm={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function gm(t){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(t):(t=vm[t])?!!i[t]:!1}function Wl(){return gm}var mm=Ae({},ds,{key:function(t){if(t.key){var i=dm[t.key]||t.key;if(i!=="Unidentified")return i}return t.type==="keypress"?(t=qs(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?pm[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Wl,charCode:function(t){return t.type==="keypress"?qs(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?qs(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),ym=It(mm),_m=Ae({},Za,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),nf=It(_m),Sm=Ae({},ds,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Wl}),Em=It(Sm),km=Ae({},pi,{propertyName:0,elapsedTime:0,pseudoElement:0}),wm=It(km),Tm=Ae({},Za,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Cm=It(Tm),bm=[9,13,27,32],$l=_n&&"CompositionEvent"in window,Ni=null;_n&&"documentMode"in document&&(Ni=document.documentMode);var Pm=_n&&"TextEvent"in window&&!Ni,Hd=_n&&(!$l||Ni&&8<Ni&&11>=Ni),rf=" ",sf=!1;function zd(t,i){switch(t){case"keyup":return bm.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vd(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Hr=!1;function xm(t,i){switch(t){case"compositionend":return Vd(i);case"keypress":return i.which!==32?null:(sf=!0,rf);case"textInput":return t=i.data,t===rf&&sf?null:t;default:return null}}function Am(t,i){if(Hr)return t==="compositionend"||!$l&&zd(t,i)?(t=Ud(),Qs=jl=Nn=null,Hr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Hd&&i.locale!=="ko"?null:i.data;default:return null}}var Im={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function af(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i==="input"?!!Im[t.type]:i==="textarea"}function jd(t,i,r,n){Sd(n),i=va(i,"onChange"),0<i.length&&(r=new Gl("onChange","change",null,r,n),t.push({event:r,listeners:i}))}var Fi=null,Xi=null;function Lm(t){ep(t,0)}function Ja(t){var i=jr(t);if(dd(i))return t}function Dm(t,i){if(t==="change")return i}var Gd=!1;if(_n){var Mo;if(_n){var No="oninput"in document;if(!No){var of=document.createElement("div");of.setAttribute("oninput","return;"),No=typeof of.oninput=="function"}Mo=No}else Mo=!1;Gd=Mo&&(!document.documentMode||9<document.documentMode)}function uf(){Fi&&(Fi.detachEvent("onpropertychange",Wd),Xi=Fi=null)}function Wd(t){if(t.propertyName==="value"&&Ja(Xi)){var i=[];jd(i,Xi,t,Bl(t)),Td(Lm,i)}}function Om(t,i,r){t==="focusin"?(uf(),Fi=i,Xi=r,Fi.attachEvent("onpropertychange",Wd)):t==="focusout"&&uf()}function Rm(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Ja(Xi)}function Mm(t,i){if(t==="click")return Ja(i)}function Nm(t,i){if(t==="input"||t==="change")return Ja(i)}function Fm(t,i){return t===i&&(t!==0||1/t===1/i)||t!==t&&i!==i}var Xt=typeof Object.is=="function"?Object.is:Fm;function Qi(t,i){if(Xt(t,i))return!0;if(typeof t!="object"||t===null||typeof i!="object"||i===null)return!1;var r=Object.keys(t),n=Object.keys(i);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var e=r[n];if(!ku.call(i,e)||!Xt(t[e],i[e]))return!1}return!0}function lf(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function cf(t,i){var r=lf(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=i&&n>=i)return{node:r,offset:i-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=lf(r)}}function $d(t,i){return t&&i?t===i?!0:t&&t.nodeType===3?!1:i&&i.nodeType===3?$d(t,i.parentNode):"contains"in t?t.contains(i):t.compareDocumentPosition?!!(t.compareDocumentPosition(i)&16):!1:!1}function Kd(){for(var t=window,i=ua();i instanceof t.HTMLIFrameElement;){try{var r=typeof i.contentWindow.location.href=="string"}catch{r=!1}if(r)t=i.contentWindow;else break;i=ua(t.document)}return i}function Kl(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i&&(i==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||i==="textarea"||t.contentEditable==="true")}function Bm(t){var i=Kd(),r=t.focusedElem,n=t.selectionRange;if(i!==r&&r&&r.ownerDocument&&$d(r.ownerDocument.documentElement,r)){if(n!==null&&Kl(r)){if(i=n.start,t=n.end,t===void 0&&(t=i),"selectionStart"in r)r.selectionStart=i,r.selectionEnd=Math.min(t,r.value.length);else if(t=(i=r.ownerDocument||document)&&i.defaultView||window,t.getSelection){t=t.getSelection();var e=r.textContent.length,s=Math.min(n.start,e);n=n.end===void 0?s:Math.min(n.end,e),!t.extend&&s>n&&(e=n,n=s,s=e),e=cf(r,s);var a=cf(r,n);e&&a&&(t.rangeCount!==1||t.anchorNode!==e.node||t.anchorOffset!==e.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(i=i.createRange(),i.setStart(e.node,e.offset),t.removeAllRanges(),s>n?(t.addRange(i),t.extend(a.node,a.offset)):(i.setEnd(a.node,a.offset),t.addRange(i)))}}for(i=[],t=r;t=t.parentNode;)t.nodeType===1&&i.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<i.length;r++)t=i[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Um=_n&&"documentMode"in document&&11>=document.documentMode,zr=null,zu=null,Bi=null,Vu=!1;function ff(t,i,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Vu||zr==null||zr!==ua(n)||(n=zr,"selectionStart"in n&&Kl(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Bi&&Qi(Bi,n)||(Bi=n,n=va(zu,"onSelect"),0<n.length&&(i=new Gl("onSelect","select",null,i,r),t.push({event:i,listeners:n}),i.target=zr)))}function As(t,i){var r={};return r[t.toLowerCase()]=i.toLowerCase(),r["Webkit"+t]="webkit"+i,r["Moz"+t]="moz"+i,r}var Vr={animationend:As("Animation","AnimationEnd"),animationiteration:As("Animation","AnimationIteration"),animationstart:As("Animation","AnimationStart"),transitionend:As("Transition","TransitionEnd")},Fo={},Yd={};_n&&(Yd=document.createElement("div").style,"AnimationEvent"in window||(delete Vr.animationend.animation,delete Vr.animationiteration.animation,delete Vr.animationstart.animation),"TransitionEvent"in window||delete Vr.transitionend.transition);function eo(t){if(Fo[t])return Fo[t];if(!Vr[t])return t;var i=Vr[t],r;for(r in i)if(i.hasOwnProperty(r)&&r in Yd)return Fo[t]=i[r];return t}var Xd=eo("animationend"),Qd=eo("animationiteration"),qd=eo("animationstart"),Zd=eo("transitionend"),Jd=new Map,hf="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Qn(t,i){Jd.set(t,i),wr(i,[t])}for(var Bo=0;Bo<hf.length;Bo++){var Uo=hf[Bo],Hm=Uo.toLowerCase(),zm=Uo[0].toUpperCase()+Uo.slice(1);Qn(Hm,"on"+zm)}Qn(Xd,"onAnimationEnd");Qn(Qd,"onAnimationIteration");Qn(qd,"onAnimationStart");Qn("dblclick","onDoubleClick");Qn("focusin","onFocus");Qn("focusout","onBlur");Qn(Zd,"onTransitionEnd");si("onMouseEnter",["mouseout","mouseover"]);si("onMouseLeave",["mouseout","mouseover"]);si("onPointerEnter",["pointerout","pointerover"]);si("onPointerLeave",["pointerout","pointerover"]);wr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));wr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));wr("onBeforeInput",["compositionend","keypress","textInput","paste"]);wr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));wr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));wr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Di="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Vm=new Set("cancel close invalid load scroll toggle".split(" ").concat(Di));function df(t,i,r){var n=t.type||"unknown-event";t.currentTarget=r,Hg(n,i,void 0,t),t.currentTarget=null}function ep(t,i){i=(i&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],e=n.event;n=n.listeners;e:{var s=void 0;if(i)for(var a=n.length-1;0<=a;a--){var o=n[a],u=o.instance,l=o.currentTarget;if(o=o.listener,u!==s&&e.isPropagationStopped())break e;df(e,o,l),s=u}else for(a=0;a<n.length;a++){if(o=n[a],u=o.instance,l=o.currentTarget,o=o.listener,u!==s&&e.isPropagationStopped())break e;df(e,o,l),s=u}}}if(ca)throw t=Fu,ca=!1,Fu=null,t}function we(t,i){var r=i[Ku];r===void 0&&(r=i[Ku]=new Set);var n=t+"__bubble";r.has(n)||(tp(i,t,2,!1),r.add(n))}function Ho(t,i,r){var n=0;i&&(n|=4),tp(r,t,n,i)}var Is="_reactListening"+Math.random().toString(36).slice(2);function qi(t){if(!t[Is]){t[Is]=!0,ud.forEach(function(r){r!=="selectionchange"&&(Vm.has(r)||Ho(r,!1,t),Ho(r,!0,t))});var i=t.nodeType===9?t:t.ownerDocument;i===null||i[Is]||(i[Is]=!0,Ho("selectionchange",!1,i))}}function tp(t,i,r,n){switch(Bd(i)){case 1:var e=nm;break;case 4:e=rm;break;default:e=Vl}r=e.bind(null,i,r,t),e=void 0,!Nu||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(e=!0),n?e!==void 0?t.addEventListener(i,r,{capture:!0,passive:e}):t.addEventListener(i,r,!0):e!==void 0?t.addEventListener(i,r,{passive:e}):t.addEventListener(i,r,!1)}function zo(t,i,r,n,e){var s=n;if(!(i&1)&&!(i&2)&&n!==null)e:for(;;){if(n===null)return;var a=n.tag;if(a===3||a===4){var o=n.stateNode.containerInfo;if(o===e||o.nodeType===8&&o.parentNode===e)break;if(a===4)for(a=n.return;a!==null;){var u=a.tag;if((u===3||u===4)&&(u=a.stateNode.containerInfo,u===e||u.nodeType===8&&u.parentNode===e))return;a=a.return}for(;o!==null;){if(a=ur(o),a===null)return;if(u=a.tag,u===5||u===6){n=s=a;continue e}o=o.parentNode}}n=n.return}Td(function(){var l=s,c=Bl(r),f=[];e:{var h=Jd.get(t);if(h!==void 0){var d=Gl,p=t;switch(t){case"keypress":if(qs(r)===0)break e;case"keydown":case"keyup":d=ym;break;case"focusin":p="focus",d=Ro;break;case"focusout":p="blur",d=Ro;break;case"beforeblur":case"afterblur":d=Ro;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":d=ef;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":d=am;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":d=Em;break;case Xd:case Qd:case qd:d=lm;break;case Zd:d=wm;break;case"scroll":d=im;break;case"wheel":d=Cm;break;case"copy":case"cut":case"paste":d=fm;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":d=nf}var m=(i&4)!==0,_=!m&&t==="scroll",v=m?h!==null?h+"Capture":null:h;m=[];for(var y=l,S;y!==null;){S=y;var E=S.stateNode;if(S.tag===5&&E!==null&&(S=E,v!==null&&(E=Wi(y,v),E!=null&&m.push(Zi(y,E,S)))),_)break;y=y.return}0<m.length&&(h=new d(h,p,null,r,c),f.push({event:h,listeners:m}))}}if(!(i&7)){e:{if(h=t==="mouseover"||t==="pointerover",d=t==="mouseout"||t==="pointerout",h&&r!==Ru&&(p=r.relatedTarget||r.fromElement)&&(ur(p)||p[Sn]))break e;if((d||h)&&(h=c.window===c?c:(h=c.ownerDocument)?h.defaultView||h.parentWindow:window,d?(p=r.relatedTarget||r.toElement,d=l,p=p?ur(p):null,p!==null&&(_=Tr(p),p!==_||p.tag!==5&&p.tag!==6)&&(p=null)):(d=null,p=l),d!==p)){if(m=ef,E="onMouseLeave",v="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(m=nf,E="onPointerLeave",v="onPointerEnter",y="pointer"),_=d==null?h:jr(d),S=p==null?h:jr(p),h=new m(E,y+"leave",d,r,c),h.target=_,h.relatedTarget=S,E=null,ur(c)===l&&(m=new m(v,y+"enter",p,r,c),m.target=S,m.relatedTarget=_,E=m),_=E,d&&p)t:{for(m=d,v=p,y=0,S=m;S;S=xr(S))y++;for(S=0,E=v;E;E=xr(E))S++;for(;0<y-S;)m=xr(m),y--;for(;0<S-y;)v=xr(v),S--;for(;y--;){if(m===v||v!==null&&m===v.alternate)break t;m=xr(m),v=xr(v)}m=null}else m=null;d!==null&&pf(f,h,d,m,!1),p!==null&&_!==null&&pf(f,_,p,m,!0)}}e:{if(h=l?jr(l):window,d=h.nodeName&&h.nodeName.toLowerCase(),d==="select"||d==="input"&&h.type==="file")var T=Dm;else if(af(h))if(Gd)T=Nm;else{T=Rm;var A=Om}else(d=h.nodeName)&&d.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(T=Mm);if(T&&(T=T(t,l))){jd(f,T,r,c);break e}A&&A(t,h,l),t==="focusout"&&(A=h._wrapperState)&&A.controlled&&h.type==="number"&&Au(h,"number",h.value)}switch(A=l?jr(l):window,t){case"focusin":(af(A)||A.contentEditable==="true")&&(zr=A,zu=l,Bi=null);break;case"focusout":Bi=zu=zr=null;break;case"mousedown":Vu=!0;break;case"contextmenu":case"mouseup":case"dragend":Vu=!1,ff(f,r,c);break;case"selectionchange":if(Um)break;case"keydown":case"keyup":ff(f,r,c)}var P;if($l)e:{switch(t){case"compositionstart":var D="onCompositionStart";break e;case"compositionend":D="onCompositionEnd";break e;case"compositionupdate":D="onCompositionUpdate";break e}D=void 0}else Hr?zd(t,r)&&(D="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(D="onCompositionStart");D&&(Hd&&r.locale!=="ko"&&(Hr||D!=="onCompositionStart"?D==="onCompositionEnd"&&Hr&&(P=Ud()):(Nn=c,jl="value"in Nn?Nn.value:Nn.textContent,Hr=!0)),A=va(l,D),0<A.length&&(D=new tf(D,t,null,r,c),f.push({event:D,listeners:A}),P?D.data=P:(P=Vd(r),P!==null&&(D.data=P)))),(P=Pm?xm(t,r):Am(t,r))&&(l=va(l,"onBeforeInput"),0<l.length&&(c=new tf("onBeforeInput","beforeinput",null,r,c),f.push({event:c,listeners:l}),c.data=P))}ep(f,i)})}function Zi(t,i,r){return{instance:t,listener:i,currentTarget:r}}function va(t,i){for(var r=i+"Capture",n=[];t!==null;){var e=t,s=e.stateNode;e.tag===5&&s!==null&&(e=s,s=Wi(t,r),s!=null&&n.unshift(Zi(t,s,e)),s=Wi(t,i),s!=null&&n.push(Zi(t,s,e))),t=t.return}return n}function xr(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function pf(t,i,r,n,e){for(var s=i._reactName,a=[];r!==null&&r!==n;){var o=r,u=o.alternate,l=o.stateNode;if(u!==null&&u===n)break;o.tag===5&&l!==null&&(o=l,e?(u=Wi(r,s),u!=null&&a.unshift(Zi(r,u,o))):e||(u=Wi(r,s),u!=null&&a.push(Zi(r,u,o)))),r=r.return}a.length!==0&&t.push({event:i,listeners:a})}var jm=/\r\n?/g,Gm=/\u0000|\uFFFD/g;function vf(t){return(typeof t=="string"?t:""+t).replace(jm,`
`).replace(Gm,"")}function Ls(t,i,r){if(i=vf(i),vf(t)!==i&&r)throw Error(H(425))}function ga(){}var ju=null,Gu=null;function Wu(t,i){return t==="textarea"||t==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var $u=typeof setTimeout=="function"?setTimeout:void 0,Wm=typeof clearTimeout=="function"?clearTimeout:void 0,gf=typeof Promise=="function"?Promise:void 0,$m=typeof queueMicrotask=="function"?queueMicrotask:typeof gf<"u"?function(t){return gf.resolve(null).then(t).catch(Km)}:$u;function Km(t){setTimeout(function(){throw t})}function Vo(t,i){var r=i,n=0;do{var e=r.nextSibling;if(t.removeChild(r),e&&e.nodeType===8)if(r=e.data,r==="/$"){if(n===0){t.removeChild(e),Yi(i);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=e}while(r);Yi(i)}function zn(t){for(;t!=null;t=t.nextSibling){var i=t.nodeType;if(i===1||i===3)break;if(i===8){if(i=t.data,i==="$"||i==="$!"||i==="$?")break;if(i==="/$")return null}}return t}function mf(t){t=t.previousSibling;for(var i=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(i===0)return t;i--}else r==="/$"&&i++}t=t.previousSibling}return null}var vi=Math.random().toString(36).slice(2),tn="__reactFiber$"+vi,Ji="__reactProps$"+vi,Sn="__reactContainer$"+vi,Ku="__reactEvents$"+vi,Ym="__reactListeners$"+vi,Xm="__reactHandles$"+vi;function ur(t){var i=t[tn];if(i)return i;for(var r=t.parentNode;r;){if(i=r[Sn]||r[tn]){if(r=i.alternate,i.child!==null||r!==null&&r.child!==null)for(t=mf(t);t!==null;){if(r=t[tn])return r;t=mf(t)}return i}t=r,r=t.parentNode}return null}function ps(t){return t=t[tn]||t[Sn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function jr(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(H(33))}function to(t){return t[Ji]||null}var Yu=[],Gr=-1;function qn(t){return{current:t}}function Te(t){0>Gr||(t.current=Yu[Gr],Yu[Gr]=null,Gr--)}function Ee(t,i){Gr++,Yu[Gr]=t.current,t.current=i}var Yn={},et=qn(Yn),gt=qn(!1),gr=Yn;function ai(t,i){var r=t.type.contextTypes;if(!r)return Yn;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===i)return n.__reactInternalMemoizedMaskedChildContext;var e={},s;for(s in r)e[s]=i[s];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=e),e}function mt(t){return t=t.childContextTypes,t!=null}function ma(){Te(gt),Te(et)}function yf(t,i,r){if(et.current!==Yn)throw Error(H(168));Ee(et,i),Ee(gt,r)}function np(t,i,r){var n=t.stateNode;if(i=i.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var e in n)if(!(e in i))throw Error(H(108,Og(t)||"Unknown",e));return Ae({},r,n)}function ya(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Yn,gr=et.current,Ee(et,t),Ee(gt,gt.current),!0}function _f(t,i,r){var n=t.stateNode;if(!n)throw Error(H(169));r?(t=np(t,i,gr),n.__reactInternalMemoizedMergedChildContext=t,Te(gt),Te(et),Ee(et,t)):Te(gt),Ee(gt,r)}var ln=null,no=!1,jo=!1;function rp(t){ln===null?ln=[t]:ln.push(t)}function Qm(t){no=!0,rp(t)}function Zn(){if(!jo&&ln!==null){jo=!0;var t=0,i=ye;try{var r=ln;for(ye=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}ln=null,no=!1}catch(e){throw ln!==null&&(ln=ln.slice(t+1)),xd(Ul,Zn),e}finally{ye=i,jo=!1}}return null}var Wr=[],$r=0,_a=null,Sa=0,Dt=[],Ot=0,mr=null,hn=1,dn="";function ir(t,i){Wr[$r++]=Sa,Wr[$r++]=_a,_a=t,Sa=i}function ip(t,i,r){Dt[Ot++]=hn,Dt[Ot++]=dn,Dt[Ot++]=mr,mr=t;var n=hn;t=dn;var e=32-$t(n)-1;n&=~(1<<e),r+=1;var s=32-$t(i)+e;if(30<s){var a=e-e%5;s=(n&(1<<a)-1).toString(32),n>>=a,e-=a,hn=1<<32-$t(i)+e|r<<e|n,dn=s+t}else hn=1<<s|r<<e|n,dn=t}function Yl(t){t.return!==null&&(ir(t,1),ip(t,1,0))}function Xl(t){for(;t===_a;)_a=Wr[--$r],Wr[$r]=null,Sa=Wr[--$r],Wr[$r]=null;for(;t===mr;)mr=Dt[--Ot],Dt[Ot]=null,dn=Dt[--Ot],Dt[Ot]=null,hn=Dt[--Ot],Dt[Ot]=null}var Ct=null,Tt=null,be=!1,Wt=null;function sp(t,i){var r=Mt(5,null,null,0);r.elementType="DELETED",r.stateNode=i,r.return=t,i=t.deletions,i===null?(t.deletions=[r],t.flags|=16):i.push(r)}function Sf(t,i){switch(t.tag){case 5:var r=t.type;return i=i.nodeType!==1||r.toLowerCase()!==i.nodeName.toLowerCase()?null:i,i!==null?(t.stateNode=i,Ct=t,Tt=zn(i.firstChild),!0):!1;case 6:return i=t.pendingProps===""||i.nodeType!==3?null:i,i!==null?(t.stateNode=i,Ct=t,Tt=null,!0):!1;case 13:return i=i.nodeType!==8?null:i,i!==null?(r=mr!==null?{id:hn,overflow:dn}:null,t.memoizedState={dehydrated:i,treeContext:r,retryLane:1073741824},r=Mt(18,null,null,0),r.stateNode=i,r.return=t,t.child=r,Ct=t,Tt=null,!0):!1;default:return!1}}function Xu(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Qu(t){if(be){var i=Tt;if(i){var r=i;if(!Sf(t,i)){if(Xu(t))throw Error(H(418));i=zn(r.nextSibling);var n=Ct;i&&Sf(t,i)?sp(n,r):(t.flags=t.flags&-4097|2,be=!1,Ct=t)}}else{if(Xu(t))throw Error(H(418));t.flags=t.flags&-4097|2,be=!1,Ct=t}}}function Ef(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Ct=t}function Ds(t){if(t!==Ct)return!1;if(!be)return Ef(t),be=!0,!1;var i;if((i=t.tag!==3)&&!(i=t.tag!==5)&&(i=t.type,i=i!=="head"&&i!=="body"&&!Wu(t.type,t.memoizedProps)),i&&(i=Tt)){if(Xu(t))throw ap(),Error(H(418));for(;i;)sp(t,i),i=zn(i.nextSibling)}if(Ef(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(H(317));e:{for(t=t.nextSibling,i=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(i===0){Tt=zn(t.nextSibling);break e}i--}else r!=="$"&&r!=="$!"&&r!=="$?"||i++}t=t.nextSibling}Tt=null}}else Tt=Ct?zn(t.stateNode.nextSibling):null;return!0}function ap(){for(var t=Tt;t;)t=zn(t.nextSibling)}function oi(){Tt=Ct=null,be=!1}function Ql(t){Wt===null?Wt=[t]:Wt.push(t)}var qm=Cn.ReactCurrentBatchConfig;function Ti(t,i,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(H(309));var n=r.stateNode}if(!n)throw Error(H(147,t));var e=n,s=""+t;return i!==null&&i.ref!==null&&typeof i.ref=="function"&&i.ref._stringRef===s?i.ref:(i=function(a){var o=e.refs;a===null?delete o[s]:o[s]=a},i._stringRef=s,i)}if(typeof t!="string")throw Error(H(284));if(!r._owner)throw Error(H(290,t))}return t}function Os(t,i){throw t=Object.prototype.toString.call(i),Error(H(31,t==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":t))}function kf(t){var i=t._init;return i(t._payload)}function op(t){function i(v,y){if(t){var S=v.deletions;S===null?(v.deletions=[y],v.flags|=16):S.push(y)}}function r(v,y){if(!t)return null;for(;y!==null;)i(v,y),y=y.sibling;return null}function n(v,y){for(v=new Map;y!==null;)y.key!==null?v.set(y.key,y):v.set(y.index,y),y=y.sibling;return v}function e(v,y){return v=Wn(v,y),v.index=0,v.sibling=null,v}function s(v,y,S){return v.index=S,t?(S=v.alternate,S!==null?(S=S.index,S<y?(v.flags|=2,y):S):(v.flags|=2,y)):(v.flags|=1048576,y)}function a(v){return t&&v.alternate===null&&(v.flags|=2),v}function o(v,y,S,E){return y===null||y.tag!==6?(y=Qo(S,v.mode,E),y.return=v,y):(y=e(y,S),y.return=v,y)}function u(v,y,S,E){var T=S.type;return T===Ur?c(v,y,S.props.children,E,S.key):y!==null&&(y.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===Ln&&kf(T)===y.type)?(E=e(y,S.props),E.ref=Ti(v,y,S),E.return=v,E):(E=ia(S.type,S.key,S.props,null,v.mode,E),E.ref=Ti(v,y,S),E.return=v,E)}function l(v,y,S,E){return y===null||y.tag!==4||y.stateNode.containerInfo!==S.containerInfo||y.stateNode.implementation!==S.implementation?(y=qo(S,v.mode,E),y.return=v,y):(y=e(y,S.children||[]),y.return=v,y)}function c(v,y,S,E,T){return y===null||y.tag!==7?(y=dr(S,v.mode,E,T),y.return=v,y):(y=e(y,S),y.return=v,y)}function f(v,y,S){if(typeof y=="string"&&y!==""||typeof y=="number")return y=Qo(""+y,v.mode,S),y.return=v,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case ks:return S=ia(y.type,y.key,y.props,null,v.mode,S),S.ref=Ti(v,null,y),S.return=v,S;case Br:return y=qo(y,v.mode,S),y.return=v,y;case Ln:var E=y._init;return f(v,E(y._payload),S)}if(Ii(y)||_i(y))return y=dr(y,v.mode,S,null),y.return=v,y;Os(v,y)}return null}function h(v,y,S,E){var T=y!==null?y.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return T!==null?null:o(v,y,""+S,E);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case ks:return S.key===T?u(v,y,S,E):null;case Br:return S.key===T?l(v,y,S,E):null;case Ln:return T=S._init,h(v,y,T(S._payload),E)}if(Ii(S)||_i(S))return T!==null?null:c(v,y,S,E,null);Os(v,S)}return null}function d(v,y,S,E,T){if(typeof E=="string"&&E!==""||typeof E=="number")return v=v.get(S)||null,o(y,v,""+E,T);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case ks:return v=v.get(E.key===null?S:E.key)||null,u(y,v,E,T);case Br:return v=v.get(E.key===null?S:E.key)||null,l(y,v,E,T);case Ln:var A=E._init;return d(v,y,S,A(E._payload),T)}if(Ii(E)||_i(E))return v=v.get(S)||null,c(y,v,E,T,null);Os(y,E)}return null}function p(v,y,S,E){for(var T=null,A=null,P=y,D=y=0,F=null;P!==null&&D<S.length;D++){P.index>D?(F=P,P=null):F=P.sibling;var I=h(v,P,S[D],E);if(I===null){P===null&&(P=F);break}t&&P&&I.alternate===null&&i(v,P),y=s(I,y,D),A===null?T=I:A.sibling=I,A=I,P=F}if(D===S.length)return r(v,P),be&&ir(v,D),T;if(P===null){for(;D<S.length;D++)P=f(v,S[D],E),P!==null&&(y=s(P,y,D),A===null?T=P:A.sibling=P,A=P);return be&&ir(v,D),T}for(P=n(v,P);D<S.length;D++)F=d(P,v,D,S[D],E),F!==null&&(t&&F.alternate!==null&&P.delete(F.key===null?D:F.key),y=s(F,y,D),A===null?T=F:A.sibling=F,A=F);return t&&P.forEach(function(X){return i(v,X)}),be&&ir(v,D),T}function m(v,y,S,E){var T=_i(S);if(typeof T!="function")throw Error(H(150));if(S=T.call(S),S==null)throw Error(H(151));for(var A=T=null,P=y,D=y=0,F=null,I=S.next();P!==null&&!I.done;D++,I=S.next()){P.index>D?(F=P,P=null):F=P.sibling;var X=h(v,P,I.value,E);if(X===null){P===null&&(P=F);break}t&&P&&X.alternate===null&&i(v,P),y=s(X,y,D),A===null?T=X:A.sibling=X,A=X,P=F}if(I.done)return r(v,P),be&&ir(v,D),T;if(P===null){for(;!I.done;D++,I=S.next())I=f(v,I.value,E),I!==null&&(y=s(I,y,D),A===null?T=I:A.sibling=I,A=I);return be&&ir(v,D),T}for(P=n(v,P);!I.done;D++,I=S.next())I=d(P,v,D,I.value,E),I!==null&&(t&&I.alternate!==null&&P.delete(I.key===null?D:I.key),y=s(I,y,D),A===null?T=I:A.sibling=I,A=I);return t&&P.forEach(function(k){return i(v,k)}),be&&ir(v,D),T}function _(v,y,S,E){if(typeof S=="object"&&S!==null&&S.type===Ur&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case ks:e:{for(var T=S.key,A=y;A!==null;){if(A.key===T){if(T=S.type,T===Ur){if(A.tag===7){r(v,A.sibling),y=e(A,S.props.children),y.return=v,v=y;break e}}else if(A.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===Ln&&kf(T)===A.type){r(v,A.sibling),y=e(A,S.props),y.ref=Ti(v,A,S),y.return=v,v=y;break e}r(v,A);break}else i(v,A);A=A.sibling}S.type===Ur?(y=dr(S.props.children,v.mode,E,S.key),y.return=v,v=y):(E=ia(S.type,S.key,S.props,null,v.mode,E),E.ref=Ti(v,y,S),E.return=v,v=E)}return a(v);case Br:e:{for(A=S.key;y!==null;){if(y.key===A)if(y.tag===4&&y.stateNode.containerInfo===S.containerInfo&&y.stateNode.implementation===S.implementation){r(v,y.sibling),y=e(y,S.children||[]),y.return=v,v=y;break e}else{r(v,y);break}else i(v,y);y=y.sibling}y=qo(S,v.mode,E),y.return=v,v=y}return a(v);case Ln:return A=S._init,_(v,y,A(S._payload),E)}if(Ii(S))return p(v,y,S,E);if(_i(S))return m(v,y,S,E);Os(v,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,y!==null&&y.tag===6?(r(v,y.sibling),y=e(y,S),y.return=v,v=y):(r(v,y),y=Qo(S,v.mode,E),y.return=v,v=y),a(v)):r(v,y)}return _}var ui=op(!0),up=op(!1),Ea=qn(null),ka=null,Kr=null,ql=null;function Zl(){ql=Kr=ka=null}function Jl(t){var i=Ea.current;Te(Ea),t._currentValue=i}function qu(t,i,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&i)!==i?(t.childLanes|=i,n!==null&&(n.childLanes|=i)):n!==null&&(n.childLanes&i)!==i&&(n.childLanes|=i),t===r)break;t=t.return}}function ni(t,i){ka=t,ql=Kr=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&i&&(vt=!0),t.firstContext=null)}function Ft(t){var i=t._currentValue;if(ql!==t)if(t={context:t,memoizedValue:i,next:null},Kr===null){if(ka===null)throw Error(H(308));Kr=t,ka.dependencies={lanes:0,firstContext:t}}else Kr=Kr.next=t;return i}var lr=null;function ec(t){lr===null?lr=[t]:lr.push(t)}function lp(t,i,r,n){var e=i.interleaved;return e===null?(r.next=r,ec(i)):(r.next=e.next,e.next=r),i.interleaved=r,En(t,n)}function En(t,i){t.lanes|=i;var r=t.alternate;for(r!==null&&(r.lanes|=i),r=t,t=t.return;t!==null;)t.childLanes|=i,r=t.alternate,r!==null&&(r.childLanes|=i),r=t,t=t.return;return r.tag===3?r.stateNode:null}var Dn=!1;function tc(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function cp(t,i){t=t.updateQueue,i.updateQueue===t&&(i.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function gn(t,i){return{eventTime:t,lane:i,tag:0,payload:null,callback:null,next:null}}function Vn(t,i,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,pe&2){var e=n.pending;return e===null?i.next=i:(i.next=e.next,e.next=i),n.pending=i,En(t,r)}return e=n.interleaved,e===null?(i.next=i,ec(n)):(i.next=e.next,e.next=i),n.interleaved=i,En(t,r)}function Zs(t,i,r){if(i=i.updateQueue,i!==null&&(i=i.shared,(r&4194240)!==0)){var n=i.lanes;n&=t.pendingLanes,r|=n,i.lanes=r,Hl(t,r)}}function wf(t,i){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var e=null,s=null;if(r=r.firstBaseUpdate,r!==null){do{var a={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};s===null?e=s=a:s=s.next=a,r=r.next}while(r!==null);s===null?e=s=i:s=s.next=i}else e=s=i;r={baseState:n.baseState,firstBaseUpdate:e,lastBaseUpdate:s,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=i:t.next=i,r.lastBaseUpdate=i}function wa(t,i,r,n){var e=t.updateQueue;Dn=!1;var s=e.firstBaseUpdate,a=e.lastBaseUpdate,o=e.shared.pending;if(o!==null){e.shared.pending=null;var u=o,l=u.next;u.next=null,a===null?s=l:a.next=l,a=u;var c=t.alternate;c!==null&&(c=c.updateQueue,o=c.lastBaseUpdate,o!==a&&(o===null?c.firstBaseUpdate=l:o.next=l,c.lastBaseUpdate=u))}if(s!==null){var f=e.baseState;a=0,c=l=u=null,o=s;do{var h=o.lane,d=o.eventTime;if((n&h)===h){c!==null&&(c=c.next={eventTime:d,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var p=t,m=o;switch(h=i,d=r,m.tag){case 1:if(p=m.payload,typeof p=="function"){f=p.call(d,f,h);break e}f=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=m.payload,h=typeof p=="function"?p.call(d,f,h):p,h==null)break e;f=Ae({},f,h);break e;case 2:Dn=!0}}o.callback!==null&&o.lane!==0&&(t.flags|=64,h=e.effects,h===null?e.effects=[o]:h.push(o))}else d={eventTime:d,lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},c===null?(l=c=d,u=f):c=c.next=d,a|=h;if(o=o.next,o===null){if(o=e.shared.pending,o===null)break;h=o,o=h.next,h.next=null,e.lastBaseUpdate=h,e.shared.pending=null}}while(!0);if(c===null&&(u=f),e.baseState=u,e.firstBaseUpdate=l,e.lastBaseUpdate=c,i=e.shared.interleaved,i!==null){e=i;do a|=e.lane,e=e.next;while(e!==i)}else s===null&&(e.shared.lanes=0);_r|=a,t.lanes=a,t.memoizedState=f}}function Tf(t,i,r){if(t=i.effects,i.effects=null,t!==null)for(i=0;i<t.length;i++){var n=t[i],e=n.callback;if(e!==null){if(n.callback=null,n=r,typeof e!="function")throw Error(H(191,e));e.call(n)}}}var vs={},sn=qn(vs),es=qn(vs),ts=qn(vs);function cr(t){if(t===vs)throw Error(H(174));return t}function nc(t,i){switch(Ee(ts,i),Ee(es,t),Ee(sn,vs),t=i.nodeType,t){case 9:case 11:i=(i=i.documentElement)?i.namespaceURI:Lu(null,"");break;default:t=t===8?i.parentNode:i,i=t.namespaceURI||null,t=t.tagName,i=Lu(i,t)}Te(sn),Ee(sn,i)}function li(){Te(sn),Te(es),Te(ts)}function fp(t){cr(ts.current);var i=cr(sn.current),r=Lu(i,t.type);i!==r&&(Ee(es,t),Ee(sn,r))}function rc(t){es.current===t&&(Te(sn),Te(es))}var Pe=qn(0);function Ta(t){for(var i=t;i!==null;){if(i.tag===13){var r=i.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if(i.flags&128)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Go=[];function ic(){for(var t=0;t<Go.length;t++)Go[t]._workInProgressVersionPrimary=null;Go.length=0}var Js=Cn.ReactCurrentDispatcher,Wo=Cn.ReactCurrentBatchConfig,yr=0,xe=null,Be=null,je=null,Ca=!1,Ui=!1,ns=0,Zm=0;function Xe(){throw Error(H(321))}function sc(t,i){if(i===null)return!1;for(var r=0;r<i.length&&r<t.length;r++)if(!Xt(t[r],i[r]))return!1;return!0}function ac(t,i,r,n,e,s){if(yr=s,xe=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,Js.current=t===null||t.memoizedState===null?ny:ry,t=r(n,e),Ui){s=0;do{if(Ui=!1,ns=0,25<=s)throw Error(H(301));s+=1,je=Be=null,i.updateQueue=null,Js.current=iy,t=r(n,e)}while(Ui)}if(Js.current=ba,i=Be!==null&&Be.next!==null,yr=0,je=Be=xe=null,Ca=!1,i)throw Error(H(300));return t}function oc(){var t=ns!==0;return ns=0,t}function Zt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return je===null?xe.memoizedState=je=t:je=je.next=t,je}function Bt(){if(Be===null){var t=xe.alternate;t=t!==null?t.memoizedState:null}else t=Be.next;var i=je===null?xe.memoizedState:je.next;if(i!==null)je=i,Be=t;else{if(t===null)throw Error(H(310));Be=t,t={memoizedState:Be.memoizedState,baseState:Be.baseState,baseQueue:Be.baseQueue,queue:Be.queue,next:null},je===null?xe.memoizedState=je=t:je=je.next=t}return je}function rs(t,i){return typeof i=="function"?i(t):i}function $o(t){var i=Bt(),r=i.queue;if(r===null)throw Error(H(311));r.lastRenderedReducer=t;var n=Be,e=n.baseQueue,s=r.pending;if(s!==null){if(e!==null){var a=e.next;e.next=s.next,s.next=a}n.baseQueue=e=s,r.pending=null}if(e!==null){s=e.next,n=n.baseState;var o=a=null,u=null,l=s;do{var c=l.lane;if((yr&c)===c)u!==null&&(u=u.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),n=l.hasEagerState?l.eagerState:t(n,l.action);else{var f={lane:c,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};u===null?(o=u=f,a=n):u=u.next=f,xe.lanes|=c,_r|=c}l=l.next}while(l!==null&&l!==s);u===null?a=n:u.next=o,Xt(n,i.memoizedState)||(vt=!0),i.memoizedState=n,i.baseState=a,i.baseQueue=u,r.lastRenderedState=n}if(t=r.interleaved,t!==null){e=t;do s=e.lane,xe.lanes|=s,_r|=s,e=e.next;while(e!==t)}else e===null&&(r.lanes=0);return[i.memoizedState,r.dispatch]}function Ko(t){var i=Bt(),r=i.queue;if(r===null)throw Error(H(311));r.lastRenderedReducer=t;var n=r.dispatch,e=r.pending,s=i.memoizedState;if(e!==null){r.pending=null;var a=e=e.next;do s=t(s,a.action),a=a.next;while(a!==e);Xt(s,i.memoizedState)||(vt=!0),i.memoizedState=s,i.baseQueue===null&&(i.baseState=s),r.lastRenderedState=s}return[s,n]}function hp(){}function dp(t,i){var r=xe,n=Bt(),e=i(),s=!Xt(n.memoizedState,e);if(s&&(n.memoizedState=e,vt=!0),n=n.queue,uc(gp.bind(null,r,n,t),[t]),n.getSnapshot!==i||s||je!==null&&je.memoizedState.tag&1){if(r.flags|=2048,is(9,vp.bind(null,r,n,e,i),void 0,null),Ge===null)throw Error(H(349));yr&30||pp(r,i,e)}return e}function pp(t,i,r){t.flags|=16384,t={getSnapshot:i,value:r},i=xe.updateQueue,i===null?(i={lastEffect:null,stores:null},xe.updateQueue=i,i.stores=[t]):(r=i.stores,r===null?i.stores=[t]:r.push(t))}function vp(t,i,r,n){i.value=r,i.getSnapshot=n,mp(i)&&yp(t)}function gp(t,i,r){return r(function(){mp(i)&&yp(t)})}function mp(t){var i=t.getSnapshot;t=t.value;try{var r=i();return!Xt(t,r)}catch{return!0}}function yp(t){var i=En(t,1);i!==null&&Kt(i,t,1,-1)}function Cf(t){var i=Zt();return typeof t=="function"&&(t=t()),i.memoizedState=i.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:rs,lastRenderedState:t},i.queue=t,t=t.dispatch=ty.bind(null,xe,t),[i.memoizedState,t]}function is(t,i,r,n){return t={tag:t,create:i,destroy:r,deps:n,next:null},i=xe.updateQueue,i===null?(i={lastEffect:null,stores:null},xe.updateQueue=i,i.lastEffect=t.next=t):(r=i.lastEffect,r===null?i.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,i.lastEffect=t)),t}function _p(){return Bt().memoizedState}function ea(t,i,r,n){var e=Zt();xe.flags|=t,e.memoizedState=is(1|i,r,void 0,n===void 0?null:n)}function ro(t,i,r,n){var e=Bt();n=n===void 0?null:n;var s=void 0;if(Be!==null){var a=Be.memoizedState;if(s=a.destroy,n!==null&&sc(n,a.deps)){e.memoizedState=is(i,r,s,n);return}}xe.flags|=t,e.memoizedState=is(1|i,r,s,n)}function bf(t,i){return ea(8390656,8,t,i)}function uc(t,i){return ro(2048,8,t,i)}function Sp(t,i){return ro(4,2,t,i)}function Ep(t,i){return ro(4,4,t,i)}function kp(t,i){if(typeof i=="function")return t=t(),i(t),function(){i(null)};if(i!=null)return t=t(),i.current=t,function(){i.current=null}}function wp(t,i,r){return r=r!=null?r.concat([t]):null,ro(4,4,kp.bind(null,i,t),r)}function lc(){}function Tp(t,i){var r=Bt();i=i===void 0?null:i;var n=r.memoizedState;return n!==null&&i!==null&&sc(i,n[1])?n[0]:(r.memoizedState=[t,i],t)}function Cp(t,i){var r=Bt();i=i===void 0?null:i;var n=r.memoizedState;return n!==null&&i!==null&&sc(i,n[1])?n[0]:(t=t(),r.memoizedState=[t,i],t)}function bp(t,i,r){return yr&21?(Xt(r,i)||(r=Ld(),xe.lanes|=r,_r|=r,t.baseState=!0),i):(t.baseState&&(t.baseState=!1,vt=!0),t.memoizedState=r)}function Jm(t,i){var r=ye;ye=r!==0&&4>r?r:4,t(!0);var n=Wo.transition;Wo.transition={};try{t(!1),i()}finally{ye=r,Wo.transition=n}}function Pp(){return Bt().memoizedState}function ey(t,i,r){var n=Gn(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},xp(t))Ap(i,r);else if(r=lp(t,i,r,n),r!==null){var e=ot();Kt(r,t,n,e),Ip(r,i,n)}}function ty(t,i,r){var n=Gn(t),e={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(xp(t))Ap(i,e);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=i.lastRenderedReducer,s!==null))try{var a=i.lastRenderedState,o=s(a,r);if(e.hasEagerState=!0,e.eagerState=o,Xt(o,a)){var u=i.interleaved;u===null?(e.next=e,ec(i)):(e.next=u.next,u.next=e),i.interleaved=e;return}}catch{}finally{}r=lp(t,i,e,n),r!==null&&(e=ot(),Kt(r,t,n,e),Ip(r,i,n))}}function xp(t){var i=t.alternate;return t===xe||i!==null&&i===xe}function Ap(t,i){Ui=Ca=!0;var r=t.pending;r===null?i.next=i:(i.next=r.next,r.next=i),t.pending=i}function Ip(t,i,r){if(r&4194240){var n=i.lanes;n&=t.pendingLanes,r|=n,i.lanes=r,Hl(t,r)}}var ba={readContext:Ft,useCallback:Xe,useContext:Xe,useEffect:Xe,useImperativeHandle:Xe,useInsertionEffect:Xe,useLayoutEffect:Xe,useMemo:Xe,useReducer:Xe,useRef:Xe,useState:Xe,useDebugValue:Xe,useDeferredValue:Xe,useTransition:Xe,useMutableSource:Xe,useSyncExternalStore:Xe,useId:Xe,unstable_isNewReconciler:!1},ny={readContext:Ft,useCallback:function(t,i){return Zt().memoizedState=[t,i===void 0?null:i],t},useContext:Ft,useEffect:bf,useImperativeHandle:function(t,i,r){return r=r!=null?r.concat([t]):null,ea(4194308,4,kp.bind(null,i,t),r)},useLayoutEffect:function(t,i){return ea(4194308,4,t,i)},useInsertionEffect:function(t,i){return ea(4,2,t,i)},useMemo:function(t,i){var r=Zt();return i=i===void 0?null:i,t=t(),r.memoizedState=[t,i],t},useReducer:function(t,i,r){var n=Zt();return i=r!==void 0?r(i):i,n.memoizedState=n.baseState=i,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:i},n.queue=t,t=t.dispatch=ey.bind(null,xe,t),[n.memoizedState,t]},useRef:function(t){var i=Zt();return t={current:t},i.memoizedState=t},useState:Cf,useDebugValue:lc,useDeferredValue:function(t){return Zt().memoizedState=t},useTransition:function(){var t=Cf(!1),i=t[0];return t=Jm.bind(null,t[1]),Zt().memoizedState=t,[i,t]},useMutableSource:function(){},useSyncExternalStore:function(t,i,r){var n=xe,e=Zt();if(be){if(r===void 0)throw Error(H(407));r=r()}else{if(r=i(),Ge===null)throw Error(H(349));yr&30||pp(n,i,r)}e.memoizedState=r;var s={value:r,getSnapshot:i};return e.queue=s,bf(gp.bind(null,n,s,t),[t]),n.flags|=2048,is(9,vp.bind(null,n,s,r,i),void 0,null),r},useId:function(){var t=Zt(),i=Ge.identifierPrefix;if(be){var r=dn,n=hn;r=(n&~(1<<32-$t(n)-1)).toString(32)+r,i=":"+i+"R"+r,r=ns++,0<r&&(i+="H"+r.toString(32)),i+=":"}else r=Zm++,i=":"+i+"r"+r.toString(32)+":";return t.memoizedState=i},unstable_isNewReconciler:!1},ry={readContext:Ft,useCallback:Tp,useContext:Ft,useEffect:uc,useImperativeHandle:wp,useInsertionEffect:Sp,useLayoutEffect:Ep,useMemo:Cp,useReducer:$o,useRef:_p,useState:function(){return $o(rs)},useDebugValue:lc,useDeferredValue:function(t){var i=Bt();return bp(i,Be.memoizedState,t)},useTransition:function(){var t=$o(rs)[0],i=Bt().memoizedState;return[t,i]},useMutableSource:hp,useSyncExternalStore:dp,useId:Pp,unstable_isNewReconciler:!1},iy={readContext:Ft,useCallback:Tp,useContext:Ft,useEffect:uc,useImperativeHandle:wp,useInsertionEffect:Sp,useLayoutEffect:Ep,useMemo:Cp,useReducer:Ko,useRef:_p,useState:function(){return Ko(rs)},useDebugValue:lc,useDeferredValue:function(t){var i=Bt();return Be===null?i.memoizedState=t:bp(i,Be.memoizedState,t)},useTransition:function(){var t=Ko(rs)[0],i=Bt().memoizedState;return[t,i]},useMutableSource:hp,useSyncExternalStore:dp,useId:Pp,unstable_isNewReconciler:!1};function jt(t,i){if(t&&t.defaultProps){i=Ae({},i),t=t.defaultProps;for(var r in t)i[r]===void 0&&(i[r]=t[r]);return i}return i}function Zu(t,i,r,n){i=t.memoizedState,r=r(n,i),r=r==null?i:Ae({},i,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var io={isMounted:function(t){return(t=t._reactInternals)?Tr(t)===t:!1},enqueueSetState:function(t,i,r){t=t._reactInternals;var n=ot(),e=Gn(t),s=gn(n,e);s.payload=i,r!=null&&(s.callback=r),i=Vn(t,s,e),i!==null&&(Kt(i,t,e,n),Zs(i,t,e))},enqueueReplaceState:function(t,i,r){t=t._reactInternals;var n=ot(),e=Gn(t),s=gn(n,e);s.tag=1,s.payload=i,r!=null&&(s.callback=r),i=Vn(t,s,e),i!==null&&(Kt(i,t,e,n),Zs(i,t,e))},enqueueForceUpdate:function(t,i){t=t._reactInternals;var r=ot(),n=Gn(t),e=gn(r,n);e.tag=2,i!=null&&(e.callback=i),i=Vn(t,e,n),i!==null&&(Kt(i,t,n,r),Zs(i,t,n))}};function Pf(t,i,r,n,e,s,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,s,a):i.prototype&&i.prototype.isPureReactComponent?!Qi(r,n)||!Qi(e,s):!0}function Lp(t,i,r){var n=!1,e=Yn,s=i.contextType;return typeof s=="object"&&s!==null?s=Ft(s):(e=mt(i)?gr:et.current,n=i.contextTypes,s=(n=n!=null)?ai(t,e):Yn),i=new i(r,s),t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=io,t.stateNode=i,i._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),i}function xf(t,i,r,n){t=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(r,n),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(r,n),i.state!==t&&io.enqueueReplaceState(i,i.state,null)}function Ju(t,i,r,n){var e=t.stateNode;e.props=r,e.state=t.memoizedState,e.refs={},tc(t);var s=i.contextType;typeof s=="object"&&s!==null?e.context=Ft(s):(s=mt(i)?gr:et.current,e.context=ai(t,s)),e.state=t.memoizedState,s=i.getDerivedStateFromProps,typeof s=="function"&&(Zu(t,i,s,r),e.state=t.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof e.getSnapshotBeforeUpdate=="function"||typeof e.UNSAFE_componentWillMount!="function"&&typeof e.componentWillMount!="function"||(i=e.state,typeof e.componentWillMount=="function"&&e.componentWillMount(),typeof e.UNSAFE_componentWillMount=="function"&&e.UNSAFE_componentWillMount(),i!==e.state&&io.enqueueReplaceState(e,e.state,null),wa(t,r,e,n),e.state=t.memoizedState),typeof e.componentDidMount=="function"&&(t.flags|=4194308)}function ci(t,i){try{var r="",n=i;do r+=Dg(n),n=n.return;while(n);var e=r}catch(s){e=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:i,stack:e,digest:null}}function Yo(t,i,r){return{value:t,source:null,stack:r??null,digest:i??null}}function el(t,i){try{console.error(i.value)}catch(r){setTimeout(function(){throw r})}}var sy=typeof WeakMap=="function"?WeakMap:Map;function Dp(t,i,r){r=gn(-1,r),r.tag=3,r.payload={element:null};var n=i.value;return r.callback=function(){xa||(xa=!0,cl=n),el(t,i)},r}function Op(t,i,r){r=gn(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var e=i.value;r.payload=function(){return n(e)},r.callback=function(){el(t,i)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(r.callback=function(){el(t,i),typeof n!="function"&&(jn===null?jn=new Set([this]):jn.add(this));var a=i.stack;this.componentDidCatch(i.value,{componentStack:a!==null?a:""})}),r}function Af(t,i,r){var n=t.pingCache;if(n===null){n=t.pingCache=new sy;var e=new Set;n.set(i,e)}else e=n.get(i),e===void 0&&(e=new Set,n.set(i,e));e.has(r)||(e.add(r),t=_y.bind(null,t,i,r),i.then(t,t))}function If(t){do{var i;if((i=t.tag===13)&&(i=t.memoizedState,i=i!==null?i.dehydrated!==null:!0),i)return t;t=t.return}while(t!==null);return null}function Lf(t,i,r,n,e){return t.mode&1?(t.flags|=65536,t.lanes=e,t):(t===i?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(i=gn(-1,1),i.tag=2,Vn(r,i,1))),r.lanes|=1),t)}var ay=Cn.ReactCurrentOwner,vt=!1;function st(t,i,r,n){i.child=t===null?up(i,null,r,n):ui(i,t.child,r,n)}function Df(t,i,r,n,e){r=r.render;var s=i.ref;return ni(i,e),n=ac(t,i,r,n,s,e),r=oc(),t!==null&&!vt?(i.updateQueue=t.updateQueue,i.flags&=-2053,t.lanes&=~e,kn(t,i,e)):(be&&r&&Yl(i),i.flags|=1,st(t,i,n,e),i.child)}function Of(t,i,r,n,e){if(t===null){var s=r.type;return typeof s=="function"&&!mc(s)&&s.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(i.tag=15,i.type=s,Rp(t,i,s,n,e)):(t=ia(r.type,null,n,i,i.mode,e),t.ref=i.ref,t.return=i,i.child=t)}if(s=t.child,!(t.lanes&e)){var a=s.memoizedProps;if(r=r.compare,r=r!==null?r:Qi,r(a,n)&&t.ref===i.ref)return kn(t,i,e)}return i.flags|=1,t=Wn(s,n),t.ref=i.ref,t.return=i,i.child=t}function Rp(t,i,r,n,e){if(t!==null){var s=t.memoizedProps;if(Qi(s,n)&&t.ref===i.ref)if(vt=!1,i.pendingProps=n=s,(t.lanes&e)!==0)t.flags&131072&&(vt=!0);else return i.lanes=t.lanes,kn(t,i,e)}return tl(t,i,r,n,e)}function Mp(t,i,r){var n=i.pendingProps,e=n.children,s=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(i.mode&1))i.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ee(Xr,kt),kt|=r;else{if(!(r&1073741824))return t=s!==null?s.baseLanes|r:r,i.lanes=i.childLanes=1073741824,i.memoizedState={baseLanes:t,cachePool:null,transitions:null},i.updateQueue=null,Ee(Xr,kt),kt|=t,null;i.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=s!==null?s.baseLanes:r,Ee(Xr,kt),kt|=n}else s!==null?(n=s.baseLanes|r,i.memoizedState=null):n=r,Ee(Xr,kt),kt|=n;return st(t,i,e,r),i.child}function Np(t,i){var r=i.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(i.flags|=512,i.flags|=2097152)}function tl(t,i,r,n,e){var s=mt(r)?gr:et.current;return s=ai(i,s),ni(i,e),r=ac(t,i,r,n,s,e),n=oc(),t!==null&&!vt?(i.updateQueue=t.updateQueue,i.flags&=-2053,t.lanes&=~e,kn(t,i,e)):(be&&n&&Yl(i),i.flags|=1,st(t,i,r,e),i.child)}function Rf(t,i,r,n,e){if(mt(r)){var s=!0;ya(i)}else s=!1;if(ni(i,e),i.stateNode===null)ta(t,i),Lp(i,r,n),Ju(i,r,n,e),n=!0;else if(t===null){var a=i.stateNode,o=i.memoizedProps;a.props=o;var u=a.context,l=r.contextType;typeof l=="object"&&l!==null?l=Ft(l):(l=mt(r)?gr:et.current,l=ai(i,l));var c=r.getDerivedStateFromProps,f=typeof c=="function"||typeof a.getSnapshotBeforeUpdate=="function";f||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==n||u!==l)&&xf(i,a,n,l),Dn=!1;var h=i.memoizedState;a.state=h,wa(i,n,a,e),u=i.memoizedState,o!==n||h!==u||gt.current||Dn?(typeof c=="function"&&(Zu(i,r,c,n),u=i.memoizedState),(o=Dn||Pf(i,r,o,n,h,u,l))?(f||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(i.flags|=4194308)):(typeof a.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=n,i.memoizedState=u),a.props=n,a.state=u,a.context=l,n=o):(typeof a.componentDidMount=="function"&&(i.flags|=4194308),n=!1)}else{a=i.stateNode,cp(t,i),o=i.memoizedProps,l=i.type===i.elementType?o:jt(i.type,o),a.props=l,f=i.pendingProps,h=a.context,u=r.contextType,typeof u=="object"&&u!==null?u=Ft(u):(u=mt(r)?gr:et.current,u=ai(i,u));var d=r.getDerivedStateFromProps;(c=typeof d=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==f||h!==u)&&xf(i,a,n,u),Dn=!1,h=i.memoizedState,a.state=h,wa(i,n,a,e);var p=i.memoizedState;o!==f||h!==p||gt.current||Dn?(typeof d=="function"&&(Zu(i,r,d,n),p=i.memoizedState),(l=Dn||Pf(i,r,l,n,h,p,u)||!1)?(c||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(n,p,u),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(n,p,u)),typeof a.componentDidUpdate=="function"&&(i.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof a.componentDidUpdate!="function"||o===t.memoizedProps&&h===t.memoizedState||(i.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&h===t.memoizedState||(i.flags|=1024),i.memoizedProps=n,i.memoizedState=p),a.props=n,a.state=p,a.context=u,n=l):(typeof a.componentDidUpdate!="function"||o===t.memoizedProps&&h===t.memoizedState||(i.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&h===t.memoizedState||(i.flags|=1024),n=!1)}return nl(t,i,r,n,s,e)}function nl(t,i,r,n,e,s){Np(t,i);var a=(i.flags&128)!==0;if(!n&&!a)return e&&_f(i,r,!1),kn(t,i,s);n=i.stateNode,ay.current=i;var o=a&&typeof r.getDerivedStateFromError!="function"?null:n.render();return i.flags|=1,t!==null&&a?(i.child=ui(i,t.child,null,s),i.child=ui(i,null,o,s)):st(t,i,o,s),i.memoizedState=n.state,e&&_f(i,r,!0),i.child}function Fp(t){var i=t.stateNode;i.pendingContext?yf(t,i.pendingContext,i.pendingContext!==i.context):i.context&&yf(t,i.context,!1),nc(t,i.containerInfo)}function Mf(t,i,r,n,e){return oi(),Ql(e),i.flags|=256,st(t,i,r,n),i.child}var rl={dehydrated:null,treeContext:null,retryLane:0};function il(t){return{baseLanes:t,cachePool:null,transitions:null}}function Bp(t,i,r){var n=i.pendingProps,e=Pe.current,s=!1,a=(i.flags&128)!==0,o;if((o=a)||(o=t!==null&&t.memoizedState===null?!1:(e&2)!==0),o?(s=!0,i.flags&=-129):(t===null||t.memoizedState!==null)&&(e|=1),Ee(Pe,e&1),t===null)return Qu(i),t=i.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(i.mode&1?t.data==="$!"?i.lanes=8:i.lanes=1073741824:i.lanes=1,null):(a=n.children,t=n.fallback,s?(n=i.mode,s=i.child,a={mode:"hidden",children:a},!(n&1)&&s!==null?(s.childLanes=0,s.pendingProps=a):s=oo(a,n,0,null),t=dr(t,n,r,null),s.return=i,t.return=i,s.sibling=t,i.child=s,i.child.memoizedState=il(r),i.memoizedState=rl,t):cc(i,a));if(e=t.memoizedState,e!==null&&(o=e.dehydrated,o!==null))return oy(t,i,a,n,o,e,r);if(s){s=n.fallback,a=i.mode,e=t.child,o=e.sibling;var u={mode:"hidden",children:n.children};return!(a&1)&&i.child!==e?(n=i.child,n.childLanes=0,n.pendingProps=u,i.deletions=null):(n=Wn(e,u),n.subtreeFlags=e.subtreeFlags&14680064),o!==null?s=Wn(o,s):(s=dr(s,a,r,null),s.flags|=2),s.return=i,n.return=i,n.sibling=s,i.child=n,n=s,s=i.child,a=t.child.memoizedState,a=a===null?il(r):{baseLanes:a.baseLanes|r,cachePool:null,transitions:a.transitions},s.memoizedState=a,s.childLanes=t.childLanes&~r,i.memoizedState=rl,n}return s=t.child,t=s.sibling,n=Wn(s,{mode:"visible",children:n.children}),!(i.mode&1)&&(n.lanes=r),n.return=i,n.sibling=null,t!==null&&(r=i.deletions,r===null?(i.deletions=[t],i.flags|=16):r.push(t)),i.child=n,i.memoizedState=null,n}function cc(t,i){return i=oo({mode:"visible",children:i},t.mode,0,null),i.return=t,t.child=i}function Rs(t,i,r,n){return n!==null&&Ql(n),ui(i,t.child,null,r),t=cc(i,i.pendingProps.children),t.flags|=2,i.memoizedState=null,t}function oy(t,i,r,n,e,s,a){if(r)return i.flags&256?(i.flags&=-257,n=Yo(Error(H(422))),Rs(t,i,a,n)):i.memoizedState!==null?(i.child=t.child,i.flags|=128,null):(s=n.fallback,e=i.mode,n=oo({mode:"visible",children:n.children},e,0,null),s=dr(s,e,a,null),s.flags|=2,n.return=i,s.return=i,n.sibling=s,i.child=n,i.mode&1&&ui(i,t.child,null,a),i.child.memoizedState=il(a),i.memoizedState=rl,s);if(!(i.mode&1))return Rs(t,i,a,null);if(e.data==="$!"){if(n=e.nextSibling&&e.nextSibling.dataset,n)var o=n.dgst;return n=o,s=Error(H(419)),n=Yo(s,n,void 0),Rs(t,i,a,n)}if(o=(a&t.childLanes)!==0,vt||o){if(n=Ge,n!==null){switch(a&-a){case 4:e=2;break;case 16:e=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:e=32;break;case 536870912:e=268435456;break;default:e=0}e=e&(n.suspendedLanes|a)?0:e,e!==0&&e!==s.retryLane&&(s.retryLane=e,En(t,e),Kt(n,t,e,-1))}return gc(),n=Yo(Error(H(421))),Rs(t,i,a,n)}return e.data==="$?"?(i.flags|=128,i.child=t.child,i=Sy.bind(null,t),e._reactRetry=i,null):(t=s.treeContext,Tt=zn(e.nextSibling),Ct=i,be=!0,Wt=null,t!==null&&(Dt[Ot++]=hn,Dt[Ot++]=dn,Dt[Ot++]=mr,hn=t.id,dn=t.overflow,mr=i),i=cc(i,n.children),i.flags|=4096,i)}function Nf(t,i,r){t.lanes|=i;var n=t.alternate;n!==null&&(n.lanes|=i),qu(t.return,i,r)}function Xo(t,i,r,n,e){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:e}:(s.isBackwards=i,s.rendering=null,s.renderingStartTime=0,s.last=n,s.tail=r,s.tailMode=e)}function Up(t,i,r){var n=i.pendingProps,e=n.revealOrder,s=n.tail;if(st(t,i,n.children,r),n=Pe.current,n&2)n=n&1|2,i.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=i.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Nf(t,r,i);else if(t.tag===19)Nf(t,r,i);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===i)break e;for(;t.sibling===null;){if(t.return===null||t.return===i)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(Ee(Pe,n),!(i.mode&1))i.memoizedState=null;else switch(e){case"forwards":for(r=i.child,e=null;r!==null;)t=r.alternate,t!==null&&Ta(t)===null&&(e=r),r=r.sibling;r=e,r===null?(e=i.child,i.child=null):(e=r.sibling,r.sibling=null),Xo(i,!1,e,r,s);break;case"backwards":for(r=null,e=i.child,i.child=null;e!==null;){if(t=e.alternate,t!==null&&Ta(t)===null){i.child=e;break}t=e.sibling,e.sibling=r,r=e,e=t}Xo(i,!0,r,null,s);break;case"together":Xo(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function ta(t,i){!(i.mode&1)&&t!==null&&(t.alternate=null,i.alternate=null,i.flags|=2)}function kn(t,i,r){if(t!==null&&(i.dependencies=t.dependencies),_r|=i.lanes,!(r&i.childLanes))return null;if(t!==null&&i.child!==t.child)throw Error(H(153));if(i.child!==null){for(t=i.child,r=Wn(t,t.pendingProps),i.child=r,r.return=i;t.sibling!==null;)t=t.sibling,r=r.sibling=Wn(t,t.pendingProps),r.return=i;r.sibling=null}return i.child}function uy(t,i,r){switch(i.tag){case 3:Fp(i),oi();break;case 5:fp(i);break;case 1:mt(i.type)&&ya(i);break;case 4:nc(i,i.stateNode.containerInfo);break;case 10:var n=i.type._context,e=i.memoizedProps.value;Ee(Ea,n._currentValue),n._currentValue=e;break;case 13:if(n=i.memoizedState,n!==null)return n.dehydrated!==null?(Ee(Pe,Pe.current&1),i.flags|=128,null):r&i.child.childLanes?Bp(t,i,r):(Ee(Pe,Pe.current&1),t=kn(t,i,r),t!==null?t.sibling:null);Ee(Pe,Pe.current&1);break;case 19:if(n=(r&i.childLanes)!==0,t.flags&128){if(n)return Up(t,i,r);i.flags|=128}if(e=i.memoizedState,e!==null&&(e.rendering=null,e.tail=null,e.lastEffect=null),Ee(Pe,Pe.current),n)break;return null;case 22:case 23:return i.lanes=0,Mp(t,i,r)}return kn(t,i,r)}var Hp,sl,zp,Vp;Hp=function(t,i){for(var r=i.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break;for(;r.sibling===null;){if(r.return===null||r.return===i)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};sl=function(){};zp=function(t,i,r,n){var e=t.memoizedProps;if(e!==n){t=i.stateNode,cr(sn.current);var s=null;switch(r){case"input":e=Pu(t,e),n=Pu(t,n),s=[];break;case"select":e=Ae({},e,{value:void 0}),n=Ae({},n,{value:void 0}),s=[];break;case"textarea":e=Iu(t,e),n=Iu(t,n),s=[];break;default:typeof e.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=ga)}Du(r,n);var a;r=null;for(l in e)if(!n.hasOwnProperty(l)&&e.hasOwnProperty(l)&&e[l]!=null)if(l==="style"){var o=e[l];for(a in o)o.hasOwnProperty(a)&&(r||(r={}),r[a]="")}else l!=="dangerouslySetInnerHTML"&&l!=="children"&&l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(ji.hasOwnProperty(l)?s||(s=[]):(s=s||[]).push(l,null));for(l in n){var u=n[l];if(o=e!=null?e[l]:void 0,n.hasOwnProperty(l)&&u!==o&&(u!=null||o!=null))if(l==="style")if(o){for(a in o)!o.hasOwnProperty(a)||u&&u.hasOwnProperty(a)||(r||(r={}),r[a]="");for(a in u)u.hasOwnProperty(a)&&o[a]!==u[a]&&(r||(r={}),r[a]=u[a])}else r||(s||(s=[]),s.push(l,r)),r=u;else l==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,o=o?o.__html:void 0,u!=null&&o!==u&&(s=s||[]).push(l,u)):l==="children"?typeof u!="string"&&typeof u!="number"||(s=s||[]).push(l,""+u):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&(ji.hasOwnProperty(l)?(u!=null&&l==="onScroll"&&we("scroll",t),s||o===u||(s=[])):(s=s||[]).push(l,u))}r&&(s=s||[]).push("style",r);var l=s;(i.updateQueue=l)&&(i.flags|=4)}};Vp=function(t,i,r,n){r!==n&&(i.flags|=4)};function Ci(t,i){if(!be)switch(t.tailMode){case"hidden":i=t.tail;for(var r=null;i!==null;)i.alternate!==null&&(r=i),i=i.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?i||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function Qe(t){var i=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(i)for(var e=t.child;e!==null;)r|=e.lanes|e.childLanes,n|=e.subtreeFlags&14680064,n|=e.flags&14680064,e.return=t,e=e.sibling;else for(e=t.child;e!==null;)r|=e.lanes|e.childLanes,n|=e.subtreeFlags,n|=e.flags,e.return=t,e=e.sibling;return t.subtreeFlags|=n,t.childLanes=r,i}function ly(t,i,r){var n=i.pendingProps;switch(Xl(i),i.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Qe(i),null;case 1:return mt(i.type)&&ma(),Qe(i),null;case 3:return n=i.stateNode,li(),Te(gt),Te(et),ic(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(Ds(i)?i.flags|=4:t===null||t.memoizedState.isDehydrated&&!(i.flags&256)||(i.flags|=1024,Wt!==null&&(dl(Wt),Wt=null))),sl(t,i),Qe(i),null;case 5:rc(i);var e=cr(ts.current);if(r=i.type,t!==null&&i.stateNode!=null)zp(t,i,r,n,e),t.ref!==i.ref&&(i.flags|=512,i.flags|=2097152);else{if(!n){if(i.stateNode===null)throw Error(H(166));return Qe(i),null}if(t=cr(sn.current),Ds(i)){n=i.stateNode,r=i.type;var s=i.memoizedProps;switch(n[tn]=i,n[Ji]=s,t=(i.mode&1)!==0,r){case"dialog":we("cancel",n),we("close",n);break;case"iframe":case"object":case"embed":we("load",n);break;case"video":case"audio":for(e=0;e<Di.length;e++)we(Di[e],n);break;case"source":we("error",n);break;case"img":case"image":case"link":we("error",n),we("load",n);break;case"details":we("toggle",n);break;case"input":Gc(n,s),we("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!s.multiple},we("invalid",n);break;case"textarea":$c(n,s),we("invalid",n)}Du(r,s),e=null;for(var a in s)if(s.hasOwnProperty(a)){var o=s[a];a==="children"?typeof o=="string"?n.textContent!==o&&(s.suppressHydrationWarning!==!0&&Ls(n.textContent,o,t),e=["children",o]):typeof o=="number"&&n.textContent!==""+o&&(s.suppressHydrationWarning!==!0&&Ls(n.textContent,o,t),e=["children",""+o]):ji.hasOwnProperty(a)&&o!=null&&a==="onScroll"&&we("scroll",n)}switch(r){case"input":ws(n),Wc(n,s,!0);break;case"textarea":ws(n),Kc(n);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(n.onclick=ga)}n=e,i.updateQueue=n,n!==null&&(i.flags|=4)}else{a=e.nodeType===9?e:e.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=gd(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=a.createElement(r,{is:n.is}):(t=a.createElement(r),r==="select"&&(a=t,n.multiple?a.multiple=!0:n.size&&(a.size=n.size))):t=a.createElementNS(t,r),t[tn]=i,t[Ji]=n,Hp(t,i,!1,!1),i.stateNode=t;e:{switch(a=Ou(r,n),r){case"dialog":we("cancel",t),we("close",t),e=n;break;case"iframe":case"object":case"embed":we("load",t),e=n;break;case"video":case"audio":for(e=0;e<Di.length;e++)we(Di[e],t);e=n;break;case"source":we("error",t),e=n;break;case"img":case"image":case"link":we("error",t),we("load",t),e=n;break;case"details":we("toggle",t),e=n;break;case"input":Gc(t,n),e=Pu(t,n),we("invalid",t);break;case"option":e=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},e=Ae({},n,{value:void 0}),we("invalid",t);break;case"textarea":$c(t,n),e=Iu(t,n),we("invalid",t);break;default:e=n}Du(r,e),o=e;for(s in o)if(o.hasOwnProperty(s)){var u=o[s];s==="style"?_d(t,u):s==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&md(t,u)):s==="children"?typeof u=="string"?(r!=="textarea"||u!=="")&&Gi(t,u):typeof u=="number"&&Gi(t,""+u):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(ji.hasOwnProperty(s)?u!=null&&s==="onScroll"&&we("scroll",t):u!=null&&Rl(t,s,u,a))}switch(r){case"input":ws(t),Wc(t,n,!1);break;case"textarea":ws(t),Kc(t);break;case"option":n.value!=null&&t.setAttribute("value",""+Kn(n.value));break;case"select":t.multiple=!!n.multiple,s=n.value,s!=null?Zr(t,!!n.multiple,s,!1):n.defaultValue!=null&&Zr(t,!!n.multiple,n.defaultValue,!0);break;default:typeof e.onClick=="function"&&(t.onclick=ga)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(i.flags|=4)}i.ref!==null&&(i.flags|=512,i.flags|=2097152)}return Qe(i),null;case 6:if(t&&i.stateNode!=null)Vp(t,i,t.memoizedProps,n);else{if(typeof n!="string"&&i.stateNode===null)throw Error(H(166));if(r=cr(ts.current),cr(sn.current),Ds(i)){if(n=i.stateNode,r=i.memoizedProps,n[tn]=i,(s=n.nodeValue!==r)&&(t=Ct,t!==null))switch(t.tag){case 3:Ls(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Ls(n.nodeValue,r,(t.mode&1)!==0)}s&&(i.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[tn]=i,i.stateNode=n}return Qe(i),null;case 13:if(Te(Pe),n=i.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(be&&Tt!==null&&i.mode&1&&!(i.flags&128))ap(),oi(),i.flags|=98560,s=!1;else if(s=Ds(i),n!==null&&n.dehydrated!==null){if(t===null){if(!s)throw Error(H(318));if(s=i.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(H(317));s[tn]=i}else oi(),!(i.flags&128)&&(i.memoizedState=null),i.flags|=4;Qe(i),s=!1}else Wt!==null&&(dl(Wt),Wt=null),s=!0;if(!s)return i.flags&65536?i:null}return i.flags&128?(i.lanes=r,i):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(i.child.flags|=8192,i.mode&1&&(t===null||Pe.current&1?He===0&&(He=3):gc())),i.updateQueue!==null&&(i.flags|=4),Qe(i),null);case 4:return li(),sl(t,i),t===null&&qi(i.stateNode.containerInfo),Qe(i),null;case 10:return Jl(i.type._context),Qe(i),null;case 17:return mt(i.type)&&ma(),Qe(i),null;case 19:if(Te(Pe),s=i.memoizedState,s===null)return Qe(i),null;if(n=(i.flags&128)!==0,a=s.rendering,a===null)if(n)Ci(s,!1);else{if(He!==0||t!==null&&t.flags&128)for(t=i.child;t!==null;){if(a=Ta(t),a!==null){for(i.flags|=128,Ci(s,!1),n=a.updateQueue,n!==null&&(i.updateQueue=n,i.flags|=4),i.subtreeFlags=0,n=r,r=i.child;r!==null;)s=r,t=n,s.flags&=14680066,a=s.alternate,a===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=a.childLanes,s.lanes=a.lanes,s.child=a.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=a.memoizedProps,s.memoizedState=a.memoizedState,s.updateQueue=a.updateQueue,s.type=a.type,t=a.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return Ee(Pe,Pe.current&1|2),i.child}t=t.sibling}s.tail!==null&&De()>fi&&(i.flags|=128,n=!0,Ci(s,!1),i.lanes=4194304)}else{if(!n)if(t=Ta(a),t!==null){if(i.flags|=128,n=!0,r=t.updateQueue,r!==null&&(i.updateQueue=r,i.flags|=4),Ci(s,!0),s.tail===null&&s.tailMode==="hidden"&&!a.alternate&&!be)return Qe(i),null}else 2*De()-s.renderingStartTime>fi&&r!==1073741824&&(i.flags|=128,n=!0,Ci(s,!1),i.lanes=4194304);s.isBackwards?(a.sibling=i.child,i.child=a):(r=s.last,r!==null?r.sibling=a:i.child=a,s.last=a)}return s.tail!==null?(i=s.tail,s.rendering=i,s.tail=i.sibling,s.renderingStartTime=De(),i.sibling=null,r=Pe.current,Ee(Pe,n?r&1|2:r&1),i):(Qe(i),null);case 22:case 23:return vc(),n=i.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(i.flags|=8192),n&&i.mode&1?kt&1073741824&&(Qe(i),i.subtreeFlags&6&&(i.flags|=8192)):Qe(i),null;case 24:return null;case 25:return null}throw Error(H(156,i.tag))}function cy(t,i){switch(Xl(i),i.tag){case 1:return mt(i.type)&&ma(),t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 3:return li(),Te(gt),Te(et),ic(),t=i.flags,t&65536&&!(t&128)?(i.flags=t&-65537|128,i):null;case 5:return rc(i),null;case 13:if(Te(Pe),t=i.memoizedState,t!==null&&t.dehydrated!==null){if(i.alternate===null)throw Error(H(340));oi()}return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 19:return Te(Pe),null;case 4:return li(),null;case 10:return Jl(i.type._context),null;case 22:case 23:return vc(),null;case 24:return null;default:return null}}var Ms=!1,Je=!1,fy=typeof WeakSet=="function"?WeakSet:Set,$=null;function Yr(t,i){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){Le(t,i,n)}else r.current=null}function al(t,i,r){try{r()}catch(n){Le(t,i,n)}}var Ff=!1;function hy(t,i){if(ju=da,t=Kd(),Kl(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var e=n.anchorOffset,s=n.focusNode;n=n.focusOffset;try{r.nodeType,s.nodeType}catch{r=null;break e}var a=0,o=-1,u=-1,l=0,c=0,f=t,h=null;t:for(;;){for(var d;f!==r||e!==0&&f.nodeType!==3||(o=a+e),f!==s||n!==0&&f.nodeType!==3||(u=a+n),f.nodeType===3&&(a+=f.nodeValue.length),(d=f.firstChild)!==null;)h=f,f=d;for(;;){if(f===t)break t;if(h===r&&++l===e&&(o=a),h===s&&++c===n&&(u=a),(d=f.nextSibling)!==null)break;f=h,h=f.parentNode}f=d}r=o===-1||u===-1?null:{start:o,end:u}}else r=null}r=r||{start:0,end:0}}else r=null;for(Gu={focusedElem:t,selectionRange:r},da=!1,$=i;$!==null;)if(i=$,t=i.child,(i.subtreeFlags&1028)!==0&&t!==null)t.return=i,$=t;else for(;$!==null;){i=$;try{var p=i.alternate;if(i.flags&1024)switch(i.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var m=p.memoizedProps,_=p.memoizedState,v=i.stateNode,y=v.getSnapshotBeforeUpdate(i.elementType===i.type?m:jt(i.type,m),_);v.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var S=i.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(H(163))}}catch(E){Le(i,i.return,E)}if(t=i.sibling,t!==null){t.return=i.return,$=t;break}$=i.return}return p=Ff,Ff=!1,p}function Hi(t,i,r){var n=i.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var e=n=n.next;do{if((e.tag&t)===t){var s=e.destroy;e.destroy=void 0,s!==void 0&&al(i,r,s)}e=e.next}while(e!==n)}}function so(t,i){if(i=i.updateQueue,i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==i)}}function ol(t){var i=t.ref;if(i!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof i=="function"?i(t):i.current=t}}function jp(t){var i=t.alternate;i!==null&&(t.alternate=null,jp(i)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(i=t.stateNode,i!==null&&(delete i[tn],delete i[Ji],delete i[Ku],delete i[Ym],delete i[Xm])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Gp(t){return t.tag===5||t.tag===3||t.tag===4}function Bf(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Gp(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function ul(t,i,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,i?r.nodeType===8?r.parentNode.insertBefore(t,i):r.insertBefore(t,i):(r.nodeType===8?(i=r.parentNode,i.insertBefore(t,r)):(i=r,i.appendChild(t)),r=r._reactRootContainer,r!=null||i.onclick!==null||(i.onclick=ga));else if(n!==4&&(t=t.child,t!==null))for(ul(t,i,r),t=t.sibling;t!==null;)ul(t,i,r),t=t.sibling}function ll(t,i,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,i?r.insertBefore(t,i):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(ll(t,i,r),t=t.sibling;t!==null;)ll(t,i,r),t=t.sibling}var We=null,Gt=!1;function bn(t,i,r){for(r=r.child;r!==null;)Wp(t,i,r),r=r.sibling}function Wp(t,i,r){if(rn&&typeof rn.onCommitFiberUnmount=="function")try{rn.onCommitFiberUnmount(qa,r)}catch{}switch(r.tag){case 5:Je||Yr(r,i);case 6:var n=We,e=Gt;We=null,bn(t,i,r),We=n,Gt=e,We!==null&&(Gt?(t=We,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):We.removeChild(r.stateNode));break;case 18:We!==null&&(Gt?(t=We,r=r.stateNode,t.nodeType===8?Vo(t.parentNode,r):t.nodeType===1&&Vo(t,r),Yi(t)):Vo(We,r.stateNode));break;case 4:n=We,e=Gt,We=r.stateNode.containerInfo,Gt=!0,bn(t,i,r),We=n,Gt=e;break;case 0:case 11:case 14:case 15:if(!Je&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){e=n=n.next;do{var s=e,a=s.destroy;s=s.tag,a!==void 0&&(s&2||s&4)&&al(r,i,a),e=e.next}while(e!==n)}bn(t,i,r);break;case 1:if(!Je&&(Yr(r,i),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(o){Le(r,i,o)}bn(t,i,r);break;case 21:bn(t,i,r);break;case 22:r.mode&1?(Je=(n=Je)||r.memoizedState!==null,bn(t,i,r),Je=n):bn(t,i,r);break;default:bn(t,i,r)}}function Uf(t){var i=t.updateQueue;if(i!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new fy),i.forEach(function(n){var e=Ey.bind(null,t,n);r.has(n)||(r.add(n),n.then(e,e))})}}function zt(t,i){var r=i.deletions;if(r!==null)for(var n=0;n<r.length;n++){var e=r[n];try{var s=t,a=i,o=a;e:for(;o!==null;){switch(o.tag){case 5:We=o.stateNode,Gt=!1;break e;case 3:We=o.stateNode.containerInfo,Gt=!0;break e;case 4:We=o.stateNode.containerInfo,Gt=!0;break e}o=o.return}if(We===null)throw Error(H(160));Wp(s,a,e),We=null,Gt=!1;var u=e.alternate;u!==null&&(u.return=null),e.return=null}catch(l){Le(e,i,l)}}if(i.subtreeFlags&12854)for(i=i.child;i!==null;)$p(i,t),i=i.sibling}function $p(t,i){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(zt(i,t),Qt(t),n&4){try{Hi(3,t,t.return),so(3,t)}catch(m){Le(t,t.return,m)}try{Hi(5,t,t.return)}catch(m){Le(t,t.return,m)}}break;case 1:zt(i,t),Qt(t),n&512&&r!==null&&Yr(r,r.return);break;case 5:if(zt(i,t),Qt(t),n&512&&r!==null&&Yr(r,r.return),t.flags&32){var e=t.stateNode;try{Gi(e,"")}catch(m){Le(t,t.return,m)}}if(n&4&&(e=t.stateNode,e!=null)){var s=t.memoizedProps,a=r!==null?r.memoizedProps:s,o=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{o==="input"&&s.type==="radio"&&s.name!=null&&pd(e,s),Ou(o,a);var l=Ou(o,s);for(a=0;a<u.length;a+=2){var c=u[a],f=u[a+1];c==="style"?_d(e,f):c==="dangerouslySetInnerHTML"?md(e,f):c==="children"?Gi(e,f):Rl(e,c,f,l)}switch(o){case"input":xu(e,s);break;case"textarea":vd(e,s);break;case"select":var h=e._wrapperState.wasMultiple;e._wrapperState.wasMultiple=!!s.multiple;var d=s.value;d!=null?Zr(e,!!s.multiple,d,!1):h!==!!s.multiple&&(s.defaultValue!=null?Zr(e,!!s.multiple,s.defaultValue,!0):Zr(e,!!s.multiple,s.multiple?[]:"",!1))}e[Ji]=s}catch(m){Le(t,t.return,m)}}break;case 6:if(zt(i,t),Qt(t),n&4){if(t.stateNode===null)throw Error(H(162));e=t.stateNode,s=t.memoizedProps;try{e.nodeValue=s}catch(m){Le(t,t.return,m)}}break;case 3:if(zt(i,t),Qt(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Yi(i.containerInfo)}catch(m){Le(t,t.return,m)}break;case 4:zt(i,t),Qt(t);break;case 13:zt(i,t),Qt(t),e=t.child,e.flags&8192&&(s=e.memoizedState!==null,e.stateNode.isHidden=s,!s||e.alternate!==null&&e.alternate.memoizedState!==null||(dc=De())),n&4&&Uf(t);break;case 22:if(c=r!==null&&r.memoizedState!==null,t.mode&1?(Je=(l=Je)||c,zt(i,t),Je=l):zt(i,t),Qt(t),n&8192){if(l=t.memoizedState!==null,(t.stateNode.isHidden=l)&&!c&&t.mode&1)for($=t,c=t.child;c!==null;){for(f=$=c;$!==null;){switch(h=$,d=h.child,h.tag){case 0:case 11:case 14:case 15:Hi(4,h,h.return);break;case 1:Yr(h,h.return);var p=h.stateNode;if(typeof p.componentWillUnmount=="function"){n=h,r=h.return;try{i=n,p.props=i.memoizedProps,p.state=i.memoizedState,p.componentWillUnmount()}catch(m){Le(n,r,m)}}break;case 5:Yr(h,h.return);break;case 22:if(h.memoizedState!==null){zf(f);continue}}d!==null?(d.return=h,$=d):zf(f)}c=c.sibling}e:for(c=null,f=t;;){if(f.tag===5){if(c===null){c=f;try{e=f.stateNode,l?(s=e.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(o=f.stateNode,u=f.memoizedProps.style,a=u!=null&&u.hasOwnProperty("display")?u.display:null,o.style.display=yd("display",a))}catch(m){Le(t,t.return,m)}}}else if(f.tag===6){if(c===null)try{f.stateNode.nodeValue=l?"":f.memoizedProps}catch(m){Le(t,t.return,m)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;c===f&&(c=null),f=f.return}c===f&&(c=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:zt(i,t),Qt(t),n&4&&Uf(t);break;case 21:break;default:zt(i,t),Qt(t)}}function Qt(t){var i=t.flags;if(i&2){try{e:{for(var r=t.return;r!==null;){if(Gp(r)){var n=r;break e}r=r.return}throw Error(H(160))}switch(n.tag){case 5:var e=n.stateNode;n.flags&32&&(Gi(e,""),n.flags&=-33);var s=Bf(t);ll(t,s,e);break;case 3:case 4:var a=n.stateNode.containerInfo,o=Bf(t);ul(t,o,a);break;default:throw Error(H(161))}}catch(u){Le(t,t.return,u)}t.flags&=-3}i&4096&&(t.flags&=-4097)}function dy(t,i,r){$=t,Kp(t)}function Kp(t,i,r){for(var n=(t.mode&1)!==0;$!==null;){var e=$,s=e.child;if(e.tag===22&&n){var a=e.memoizedState!==null||Ms;if(!a){var o=e.alternate,u=o!==null&&o.memoizedState!==null||Je;o=Ms;var l=Je;if(Ms=a,(Je=u)&&!l)for($=e;$!==null;)a=$,u=a.child,a.tag===22&&a.memoizedState!==null?Vf(e):u!==null?(u.return=a,$=u):Vf(e);for(;s!==null;)$=s,Kp(s),s=s.sibling;$=e,Ms=o,Je=l}Hf(t)}else e.subtreeFlags&8772&&s!==null?(s.return=e,$=s):Hf(t)}}function Hf(t){for(;$!==null;){var i=$;if(i.flags&8772){var r=i.alternate;try{if(i.flags&8772)switch(i.tag){case 0:case 11:case 15:Je||so(5,i);break;case 1:var n=i.stateNode;if(i.flags&4&&!Je)if(r===null)n.componentDidMount();else{var e=i.elementType===i.type?r.memoizedProps:jt(i.type,r.memoizedProps);n.componentDidUpdate(e,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var s=i.updateQueue;s!==null&&Tf(i,s,n);break;case 3:var a=i.updateQueue;if(a!==null){if(r=null,i.child!==null)switch(i.child.tag){case 5:r=i.child.stateNode;break;case 1:r=i.child.stateNode}Tf(i,a,r)}break;case 5:var o=i.stateNode;if(r===null&&i.flags&4){r=o;var u=i.memoizedProps;switch(i.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&r.focus();break;case"img":u.src&&(r.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(i.memoizedState===null){var l=i.alternate;if(l!==null){var c=l.memoizedState;if(c!==null){var f=c.dehydrated;f!==null&&Yi(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(H(163))}Je||i.flags&512&&ol(i)}catch(h){Le(i,i.return,h)}}if(i===t){$=null;break}if(r=i.sibling,r!==null){r.return=i.return,$=r;break}$=i.return}}function zf(t){for(;$!==null;){var i=$;if(i===t){$=null;break}var r=i.sibling;if(r!==null){r.return=i.return,$=r;break}$=i.return}}function Vf(t){for(;$!==null;){var i=$;try{switch(i.tag){case 0:case 11:case 15:var r=i.return;try{so(4,i)}catch(u){Le(i,r,u)}break;case 1:var n=i.stateNode;if(typeof n.componentDidMount=="function"){var e=i.return;try{n.componentDidMount()}catch(u){Le(i,e,u)}}var s=i.return;try{ol(i)}catch(u){Le(i,s,u)}break;case 5:var a=i.return;try{ol(i)}catch(u){Le(i,a,u)}}}catch(u){Le(i,i.return,u)}if(i===t){$=null;break}var o=i.sibling;if(o!==null){o.return=i.return,$=o;break}$=i.return}}var py=Math.ceil,Pa=Cn.ReactCurrentDispatcher,fc=Cn.ReactCurrentOwner,Nt=Cn.ReactCurrentBatchConfig,pe=0,Ge=null,Ne=null,$e=0,kt=0,Xr=qn(0),He=0,ss=null,_r=0,ao=0,hc=0,zi=null,pt=null,dc=0,fi=1/0,un=null,xa=!1,cl=null,jn=null,Ns=!1,Fn=null,Aa=0,Vi=0,fl=null,na=-1,ra=0;function ot(){return pe&6?De():na!==-1?na:na=De()}function Gn(t){return t.mode&1?pe&2&&$e!==0?$e&-$e:qm.transition!==null?(ra===0&&(ra=Ld()),ra):(t=ye,t!==0||(t=window.event,t=t===void 0?16:Bd(t.type)),t):1}function Kt(t,i,r,n){if(50<Vi)throw Vi=0,fl=null,Error(H(185));hs(t,r,n),(!(pe&2)||t!==Ge)&&(t===Ge&&(!(pe&2)&&(ao|=r),He===4&&Rn(t,$e)),yt(t,n),r===1&&pe===0&&!(i.mode&1)&&(fi=De()+500,no&&Zn()))}function yt(t,i){var r=t.callbackNode;qg(t,i);var n=ha(t,t===Ge?$e:0);if(n===0)r!==null&&Qc(r),t.callbackNode=null,t.callbackPriority=0;else if(i=n&-n,t.callbackPriority!==i){if(r!=null&&Qc(r),i===1)t.tag===0?Qm(jf.bind(null,t)):rp(jf.bind(null,t)),$m(function(){!(pe&6)&&Zn()}),r=null;else{switch(Dd(n)){case 1:r=Ul;break;case 4:r=Ad;break;case 16:r=fa;break;case 536870912:r=Id;break;default:r=fa}r=tv(r,Yp.bind(null,t))}t.callbackPriority=i,t.callbackNode=r}}function Yp(t,i){if(na=-1,ra=0,pe&6)throw Error(H(327));var r=t.callbackNode;if(ri()&&t.callbackNode!==r)return null;var n=ha(t,t===Ge?$e:0);if(n===0)return null;if(n&30||n&t.expiredLanes||i)i=Ia(t,n);else{i=n;var e=pe;pe|=2;var s=Qp();(Ge!==t||$e!==i)&&(un=null,fi=De()+500,hr(t,i));do try{my();break}catch(o){Xp(t,o)}while(!0);Zl(),Pa.current=s,pe=e,Ne!==null?i=0:(Ge=null,$e=0,i=He)}if(i!==0){if(i===2&&(e=Bu(t),e!==0&&(n=e,i=hl(t,e))),i===1)throw r=ss,hr(t,0),Rn(t,n),yt(t,De()),r;if(i===6)Rn(t,n);else{if(e=t.current.alternate,!(n&30)&&!vy(e)&&(i=Ia(t,n),i===2&&(s=Bu(t),s!==0&&(n=s,i=hl(t,s))),i===1))throw r=ss,hr(t,0),Rn(t,n),yt(t,De()),r;switch(t.finishedWork=e,t.finishedLanes=n,i){case 0:case 1:throw Error(H(345));case 2:sr(t,pt,un);break;case 3:if(Rn(t,n),(n&130023424)===n&&(i=dc+500-De(),10<i)){if(ha(t,0)!==0)break;if(e=t.suspendedLanes,(e&n)!==n){ot(),t.pingedLanes|=t.suspendedLanes&e;break}t.timeoutHandle=$u(sr.bind(null,t,pt,un),i);break}sr(t,pt,un);break;case 4:if(Rn(t,n),(n&4194240)===n)break;for(i=t.eventTimes,e=-1;0<n;){var a=31-$t(n);s=1<<a,a=i[a],a>e&&(e=a),n&=~s}if(n=e,n=De()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*py(n/1960))-n,10<n){t.timeoutHandle=$u(sr.bind(null,t,pt,un),n);break}sr(t,pt,un);break;case 5:sr(t,pt,un);break;default:throw Error(H(329))}}}return yt(t,De()),t.callbackNode===r?Yp.bind(null,t):null}function hl(t,i){var r=zi;return t.current.memoizedState.isDehydrated&&(hr(t,i).flags|=256),t=Ia(t,i),t!==2&&(i=pt,pt=r,i!==null&&dl(i)),t}function dl(t){pt===null?pt=t:pt.push.apply(pt,t)}function vy(t){for(var i=t;;){if(i.flags&16384){var r=i.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var e=r[n],s=e.getSnapshot;e=e.value;try{if(!Xt(s(),e))return!1}catch{return!1}}}if(r=i.child,i.subtreeFlags&16384&&r!==null)r.return=i,i=r;else{if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Rn(t,i){for(i&=~hc,i&=~ao,t.suspendedLanes|=i,t.pingedLanes&=~i,t=t.expirationTimes;0<i;){var r=31-$t(i),n=1<<r;t[r]=-1,i&=~n}}function jf(t){if(pe&6)throw Error(H(327));ri();var i=ha(t,0);if(!(i&1))return yt(t,De()),null;var r=Ia(t,i);if(t.tag!==0&&r===2){var n=Bu(t);n!==0&&(i=n,r=hl(t,n))}if(r===1)throw r=ss,hr(t,0),Rn(t,i),yt(t,De()),r;if(r===6)throw Error(H(345));return t.finishedWork=t.current.alternate,t.finishedLanes=i,sr(t,pt,un),yt(t,De()),null}function pc(t,i){var r=pe;pe|=1;try{return t(i)}finally{pe=r,pe===0&&(fi=De()+500,no&&Zn())}}function Sr(t){Fn!==null&&Fn.tag===0&&!(pe&6)&&ri();var i=pe;pe|=1;var r=Nt.transition,n=ye;try{if(Nt.transition=null,ye=1,t)return t()}finally{ye=n,Nt.transition=r,pe=i,!(pe&6)&&Zn()}}function vc(){kt=Xr.current,Te(Xr)}function hr(t,i){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,Wm(r)),Ne!==null)for(r=Ne.return;r!==null;){var n=r;switch(Xl(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&ma();break;case 3:li(),Te(gt),Te(et),ic();break;case 5:rc(n);break;case 4:li();break;case 13:Te(Pe);break;case 19:Te(Pe);break;case 10:Jl(n.type._context);break;case 22:case 23:vc()}r=r.return}if(Ge=t,Ne=t=Wn(t.current,null),$e=kt=i,He=0,ss=null,hc=ao=_r=0,pt=zi=null,lr!==null){for(i=0;i<lr.length;i++)if(r=lr[i],n=r.interleaved,n!==null){r.interleaved=null;var e=n.next,s=r.pending;if(s!==null){var a=s.next;s.next=e,n.next=a}r.pending=n}lr=null}return t}function Xp(t,i){do{var r=Ne;try{if(Zl(),Js.current=ba,Ca){for(var n=xe.memoizedState;n!==null;){var e=n.queue;e!==null&&(e.pending=null),n=n.next}Ca=!1}if(yr=0,je=Be=xe=null,Ui=!1,ns=0,fc.current=null,r===null||r.return===null){He=1,ss=i,Ne=null;break}e:{var s=t,a=r.return,o=r,u=i;if(i=$e,o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var l=u,c=o,f=c.tag;if(!(c.mode&1)&&(f===0||f===11||f===15)){var h=c.alternate;h?(c.updateQueue=h.updateQueue,c.memoizedState=h.memoizedState,c.lanes=h.lanes):(c.updateQueue=null,c.memoizedState=null)}var d=If(a);if(d!==null){d.flags&=-257,Lf(d,a,o,s,i),d.mode&1&&Af(s,l,i),i=d,u=l;var p=i.updateQueue;if(p===null){var m=new Set;m.add(u),i.updateQueue=m}else p.add(u);break e}else{if(!(i&1)){Af(s,l,i),gc();break e}u=Error(H(426))}}else if(be&&o.mode&1){var _=If(a);if(_!==null){!(_.flags&65536)&&(_.flags|=256),Lf(_,a,o,s,i),Ql(ci(u,o));break e}}s=u=ci(u,o),He!==4&&(He=2),zi===null?zi=[s]:zi.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,i&=-i,s.lanes|=i;var v=Dp(s,u,i);wf(s,v);break e;case 1:o=u;var y=s.type,S=s.stateNode;if(!(s.flags&128)&&(typeof y.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(jn===null||!jn.has(S)))){s.flags|=65536,i&=-i,s.lanes|=i;var E=Op(s,o,i);wf(s,E);break e}}s=s.return}while(s!==null)}Zp(r)}catch(T){i=T,Ne===r&&r!==null&&(Ne=r=r.return);continue}break}while(!0)}function Qp(){var t=Pa.current;return Pa.current=ba,t===null?ba:t}function gc(){(He===0||He===3||He===2)&&(He=4),Ge===null||!(_r&268435455)&&!(ao&268435455)||Rn(Ge,$e)}function Ia(t,i){var r=pe;pe|=2;var n=Qp();(Ge!==t||$e!==i)&&(un=null,hr(t,i));do try{gy();break}catch(e){Xp(t,e)}while(!0);if(Zl(),pe=r,Pa.current=n,Ne!==null)throw Error(H(261));return Ge=null,$e=0,He}function gy(){for(;Ne!==null;)qp(Ne)}function my(){for(;Ne!==null&&!Vg();)qp(Ne)}function qp(t){var i=ev(t.alternate,t,kt);t.memoizedProps=t.pendingProps,i===null?Zp(t):Ne=i,fc.current=null}function Zp(t){var i=t;do{var r=i.alternate;if(t=i.return,i.flags&32768){if(r=cy(r,i),r!==null){r.flags&=32767,Ne=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{He=6,Ne=null;return}}else if(r=ly(r,i,kt),r!==null){Ne=r;return}if(i=i.sibling,i!==null){Ne=i;return}Ne=i=t}while(i!==null);He===0&&(He=5)}function sr(t,i,r){var n=ye,e=Nt.transition;try{Nt.transition=null,ye=1,yy(t,i,r,n)}finally{Nt.transition=e,ye=n}return null}function yy(t,i,r,n){do ri();while(Fn!==null);if(pe&6)throw Error(H(327));r=t.finishedWork;var e=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(H(177));t.callbackNode=null,t.callbackPriority=0;var s=r.lanes|r.childLanes;if(Zg(t,s),t===Ge&&(Ne=Ge=null,$e=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Ns||(Ns=!0,tv(fa,function(){return ri(),null})),s=(r.flags&15990)!==0,r.subtreeFlags&15990||s){s=Nt.transition,Nt.transition=null;var a=ye;ye=1;var o=pe;pe|=4,fc.current=null,hy(t,r),$p(r,t),Bm(Gu),da=!!ju,Gu=ju=null,t.current=r,dy(r),jg(),pe=o,ye=a,Nt.transition=s}else t.current=r;if(Ns&&(Ns=!1,Fn=t,Aa=e),s=t.pendingLanes,s===0&&(jn=null),$g(r.stateNode),yt(t,De()),i!==null)for(n=t.onRecoverableError,r=0;r<i.length;r++)e=i[r],n(e.value,{componentStack:e.stack,digest:e.digest});if(xa)throw xa=!1,t=cl,cl=null,t;return Aa&1&&t.tag!==0&&ri(),s=t.pendingLanes,s&1?t===fl?Vi++:(Vi=0,fl=t):Vi=0,Zn(),null}function ri(){if(Fn!==null){var t=Dd(Aa),i=Nt.transition,r=ye;try{if(Nt.transition=null,ye=16>t?16:t,Fn===null)var n=!1;else{if(t=Fn,Fn=null,Aa=0,pe&6)throw Error(H(331));var e=pe;for(pe|=4,$=t.current;$!==null;){var s=$,a=s.child;if($.flags&16){var o=s.deletions;if(o!==null){for(var u=0;u<o.length;u++){var l=o[u];for($=l;$!==null;){var c=$;switch(c.tag){case 0:case 11:case 15:Hi(8,c,s)}var f=c.child;if(f!==null)f.return=c,$=f;else for(;$!==null;){c=$;var h=c.sibling,d=c.return;if(jp(c),c===l){$=null;break}if(h!==null){h.return=d,$=h;break}$=d}}}var p=s.alternate;if(p!==null){var m=p.child;if(m!==null){p.child=null;do{var _=m.sibling;m.sibling=null,m=_}while(m!==null)}}$=s}}if(s.subtreeFlags&2064&&a!==null)a.return=s,$=a;else e:for(;$!==null;){if(s=$,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Hi(9,s,s.return)}var v=s.sibling;if(v!==null){v.return=s.return,$=v;break e}$=s.return}}var y=t.current;for($=y;$!==null;){a=$;var S=a.child;if(a.subtreeFlags&2064&&S!==null)S.return=a,$=S;else e:for(a=y;$!==null;){if(o=$,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:so(9,o)}}catch(T){Le(o,o.return,T)}if(o===a){$=null;break e}var E=o.sibling;if(E!==null){E.return=o.return,$=E;break e}$=o.return}}if(pe=e,Zn(),rn&&typeof rn.onPostCommitFiberRoot=="function")try{rn.onPostCommitFiberRoot(qa,t)}catch{}n=!0}return n}finally{ye=r,Nt.transition=i}}return!1}function Gf(t,i,r){i=ci(r,i),i=Dp(t,i,1),t=Vn(t,i,1),i=ot(),t!==null&&(hs(t,1,i),yt(t,i))}function Le(t,i,r){if(t.tag===3)Gf(t,t,r);else for(;i!==null;){if(i.tag===3){Gf(i,t,r);break}else if(i.tag===1){var n=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(jn===null||!jn.has(n))){t=ci(r,t),t=Op(i,t,1),i=Vn(i,t,1),t=ot(),i!==null&&(hs(i,1,t),yt(i,t));break}}i=i.return}}function _y(t,i,r){var n=t.pingCache;n!==null&&n.delete(i),i=ot(),t.pingedLanes|=t.suspendedLanes&r,Ge===t&&($e&r)===r&&(He===4||He===3&&($e&130023424)===$e&&500>De()-dc?hr(t,0):hc|=r),yt(t,i)}function Jp(t,i){i===0&&(t.mode&1?(i=bs,bs<<=1,!(bs&130023424)&&(bs=4194304)):i=1);var r=ot();t=En(t,i),t!==null&&(hs(t,i,r),yt(t,r))}function Sy(t){var i=t.memoizedState,r=0;i!==null&&(r=i.retryLane),Jp(t,r)}function Ey(t,i){var r=0;switch(t.tag){case 13:var n=t.stateNode,e=t.memoizedState;e!==null&&(r=e.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(H(314))}n!==null&&n.delete(i),Jp(t,r)}var ev;ev=function(t,i,r){if(t!==null)if(t.memoizedProps!==i.pendingProps||gt.current)vt=!0;else{if(!(t.lanes&r)&&!(i.flags&128))return vt=!1,uy(t,i,r);vt=!!(t.flags&131072)}else vt=!1,be&&i.flags&1048576&&ip(i,Sa,i.index);switch(i.lanes=0,i.tag){case 2:var n=i.type;ta(t,i),t=i.pendingProps;var e=ai(i,et.current);ni(i,r),e=ac(null,i,n,t,e,r);var s=oc();return i.flags|=1,typeof e=="object"&&e!==null&&typeof e.render=="function"&&e.$$typeof===void 0?(i.tag=1,i.memoizedState=null,i.updateQueue=null,mt(n)?(s=!0,ya(i)):s=!1,i.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,tc(i),e.updater=io,i.stateNode=e,e._reactInternals=i,Ju(i,n,t,r),i=nl(null,i,n,!0,s,r)):(i.tag=0,be&&s&&Yl(i),st(null,i,e,r),i=i.child),i;case 16:n=i.elementType;e:{switch(ta(t,i),t=i.pendingProps,e=n._init,n=e(n._payload),i.type=n,e=i.tag=wy(n),t=jt(n,t),e){case 0:i=tl(null,i,n,t,r);break e;case 1:i=Rf(null,i,n,t,r);break e;case 11:i=Df(null,i,n,t,r);break e;case 14:i=Of(null,i,n,jt(n.type,t),r);break e}throw Error(H(306,n,""))}return i;case 0:return n=i.type,e=i.pendingProps,e=i.elementType===n?e:jt(n,e),tl(t,i,n,e,r);case 1:return n=i.type,e=i.pendingProps,e=i.elementType===n?e:jt(n,e),Rf(t,i,n,e,r);case 3:e:{if(Fp(i),t===null)throw Error(H(387));n=i.pendingProps,s=i.memoizedState,e=s.element,cp(t,i),wa(i,n,null,r);var a=i.memoizedState;if(n=a.element,s.isDehydrated)if(s={element:n,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},i.updateQueue.baseState=s,i.memoizedState=s,i.flags&256){e=ci(Error(H(423)),i),i=Mf(t,i,n,r,e);break e}else if(n!==e){e=ci(Error(H(424)),i),i=Mf(t,i,n,r,e);break e}else for(Tt=zn(i.stateNode.containerInfo.firstChild),Ct=i,be=!0,Wt=null,r=up(i,null,n,r),i.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(oi(),n===e){i=kn(t,i,r);break e}st(t,i,n,r)}i=i.child}return i;case 5:return fp(i),t===null&&Qu(i),n=i.type,e=i.pendingProps,s=t!==null?t.memoizedProps:null,a=e.children,Wu(n,e)?a=null:s!==null&&Wu(n,s)&&(i.flags|=32),Np(t,i),st(t,i,a,r),i.child;case 6:return t===null&&Qu(i),null;case 13:return Bp(t,i,r);case 4:return nc(i,i.stateNode.containerInfo),n=i.pendingProps,t===null?i.child=ui(i,null,n,r):st(t,i,n,r),i.child;case 11:return n=i.type,e=i.pendingProps,e=i.elementType===n?e:jt(n,e),Df(t,i,n,e,r);case 7:return st(t,i,i.pendingProps,r),i.child;case 8:return st(t,i,i.pendingProps.children,r),i.child;case 12:return st(t,i,i.pendingProps.children,r),i.child;case 10:e:{if(n=i.type._context,e=i.pendingProps,s=i.memoizedProps,a=e.value,Ee(Ea,n._currentValue),n._currentValue=a,s!==null)if(Xt(s.value,a)){if(s.children===e.children&&!gt.current){i=kn(t,i,r);break e}}else for(s=i.child,s!==null&&(s.return=i);s!==null;){var o=s.dependencies;if(o!==null){a=s.child;for(var u=o.firstContext;u!==null;){if(u.context===n){if(s.tag===1){u=gn(-1,r&-r),u.tag=2;var l=s.updateQueue;if(l!==null){l=l.shared;var c=l.pending;c===null?u.next=u:(u.next=c.next,c.next=u),l.pending=u}}s.lanes|=r,u=s.alternate,u!==null&&(u.lanes|=r),qu(s.return,r,i),o.lanes|=r;break}u=u.next}}else if(s.tag===10)a=s.type===i.type?null:s.child;else if(s.tag===18){if(a=s.return,a===null)throw Error(H(341));a.lanes|=r,o=a.alternate,o!==null&&(o.lanes|=r),qu(a,r,i),a=s.sibling}else a=s.child;if(a!==null)a.return=s;else for(a=s;a!==null;){if(a===i){a=null;break}if(s=a.sibling,s!==null){s.return=a.return,a=s;break}a=a.return}s=a}st(t,i,e.children,r),i=i.child}return i;case 9:return e=i.type,n=i.pendingProps.children,ni(i,r),e=Ft(e),n=n(e),i.flags|=1,st(t,i,n,r),i.child;case 14:return n=i.type,e=jt(n,i.pendingProps),e=jt(n.type,e),Of(t,i,n,e,r);case 15:return Rp(t,i,i.type,i.pendingProps,r);case 17:return n=i.type,e=i.pendingProps,e=i.elementType===n?e:jt(n,e),ta(t,i),i.tag=1,mt(n)?(t=!0,ya(i)):t=!1,ni(i,r),Lp(i,n,e),Ju(i,n,e,r),nl(null,i,n,!0,t,r);case 19:return Up(t,i,r);case 22:return Mp(t,i,r)}throw Error(H(156,i.tag))};function tv(t,i){return xd(t,i)}function ky(t,i,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mt(t,i,r,n){return new ky(t,i,r,n)}function mc(t){return t=t.prototype,!(!t||!t.isReactComponent)}function wy(t){if(typeof t=="function")return mc(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Nl)return 11;if(t===Fl)return 14}return 2}function Wn(t,i){var r=t.alternate;return r===null?(r=Mt(t.tag,i,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=i,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,i=t.dependencies,r.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function ia(t,i,r,n,e,s){var a=2;if(n=t,typeof t=="function")mc(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case Ur:return dr(r.children,e,s,i);case Ml:a=8,e|=8;break;case wu:return t=Mt(12,r,i,e|2),t.elementType=wu,t.lanes=s,t;case Tu:return t=Mt(13,r,i,e),t.elementType=Tu,t.lanes=s,t;case Cu:return t=Mt(19,r,i,e),t.elementType=Cu,t.lanes=s,t;case fd:return oo(r,e,s,i);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case ld:a=10;break e;case cd:a=9;break e;case Nl:a=11;break e;case Fl:a=14;break e;case Ln:a=16,n=null;break e}throw Error(H(130,t==null?t:typeof t,""))}return i=Mt(a,r,i,e),i.elementType=t,i.type=n,i.lanes=s,i}function dr(t,i,r,n){return t=Mt(7,t,n,i),t.lanes=r,t}function oo(t,i,r,n){return t=Mt(22,t,n,i),t.elementType=fd,t.lanes=r,t.stateNode={isHidden:!1},t}function Qo(t,i,r){return t=Mt(6,t,null,i),t.lanes=r,t}function qo(t,i,r){return i=Mt(4,t.children!==null?t.children:[],t.key,i),i.lanes=r,i.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},i}function Ty(t,i,r,n,e){this.tag=i,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Lo(0),this.expirationTimes=Lo(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Lo(0),this.identifierPrefix=n,this.onRecoverableError=e,this.mutableSourceEagerHydrationData=null}function yc(t,i,r,n,e,s,a,o,u){return t=new Ty(t,i,r,o,u),i===1?(i=1,s===!0&&(i|=8)):i=0,s=Mt(3,null,null,i),t.current=s,s.stateNode=t,s.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},tc(s),t}function Cy(t,i,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Br,key:n==null?null:""+n,children:t,containerInfo:i,implementation:r}}function nv(t){if(!t)return Yn;t=t._reactInternals;e:{if(Tr(t)!==t||t.tag!==1)throw Error(H(170));var i=t;do{switch(i.tag){case 3:i=i.stateNode.context;break e;case 1:if(mt(i.type)){i=i.stateNode.__reactInternalMemoizedMergedChildContext;break e}}i=i.return}while(i!==null);throw Error(H(171))}if(t.tag===1){var r=t.type;if(mt(r))return np(t,r,i)}return i}function rv(t,i,r,n,e,s,a,o,u){return t=yc(r,n,!0,t,e,s,a,o,u),t.context=nv(null),r=t.current,n=ot(),e=Gn(r),s=gn(n,e),s.callback=i??null,Vn(r,s,e),t.current.lanes=e,hs(t,e,n),yt(t,n),t}function uo(t,i,r,n){var e=i.current,s=ot(),a=Gn(e);return r=nv(r),i.context===null?i.context=r:i.pendingContext=r,i=gn(s,a),i.payload={element:t},n=n===void 0?null:n,n!==null&&(i.callback=n),t=Vn(e,i,a),t!==null&&(Kt(t,e,a,s),Zs(t,e,a)),a}function La(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Wf(t,i){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<i?r:i}}function _c(t,i){Wf(t,i),(t=t.alternate)&&Wf(t,i)}function by(){return null}var iv=typeof reportError=="function"?reportError:function(t){console.error(t)};function Sc(t){this._internalRoot=t}lo.prototype.render=Sc.prototype.render=function(t){var i=this._internalRoot;if(i===null)throw Error(H(409));uo(t,i,null,null)};lo.prototype.unmount=Sc.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var i=t.containerInfo;Sr(function(){uo(null,t,null,null)}),i[Sn]=null}};function lo(t){this._internalRoot=t}lo.prototype.unstable_scheduleHydration=function(t){if(t){var i=Md();t={blockedOn:null,target:t,priority:i};for(var r=0;r<On.length&&i!==0&&i<On[r].priority;r++);On.splice(r,0,t),r===0&&Fd(t)}};function Ec(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function co(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function $f(){}function Py(t,i,r,n,e){if(e){if(typeof n=="function"){var s=n;n=function(){var l=La(a);s.call(l)}}var a=rv(i,n,t,0,null,!1,!1,"",$f);return t._reactRootContainer=a,t[Sn]=a.current,qi(t.nodeType===8?t.parentNode:t),Sr(),a}for(;e=t.lastChild;)t.removeChild(e);if(typeof n=="function"){var o=n;n=function(){var l=La(u);o.call(l)}}var u=yc(t,0,!1,null,null,!1,!1,"",$f);return t._reactRootContainer=u,t[Sn]=u.current,qi(t.nodeType===8?t.parentNode:t),Sr(function(){uo(i,u,r,n)}),u}function fo(t,i,r,n,e){var s=r._reactRootContainer;if(s){var a=s;if(typeof e=="function"){var o=e;e=function(){var u=La(a);o.call(u)}}uo(i,a,t,e)}else a=Py(r,i,t,e,n);return La(a)}Od=function(t){switch(t.tag){case 3:var i=t.stateNode;if(i.current.memoizedState.isDehydrated){var r=Li(i.pendingLanes);r!==0&&(Hl(i,r|1),yt(i,De()),!(pe&6)&&(fi=De()+500,Zn()))}break;case 13:Sr(function(){var n=En(t,1);if(n!==null){var e=ot();Kt(n,t,1,e)}}),_c(t,1)}};zl=function(t){if(t.tag===13){var i=En(t,134217728);if(i!==null){var r=ot();Kt(i,t,134217728,r)}_c(t,134217728)}};Rd=function(t){if(t.tag===13){var i=Gn(t),r=En(t,i);if(r!==null){var n=ot();Kt(r,t,i,n)}_c(t,i)}};Md=function(){return ye};Nd=function(t,i){var r=ye;try{return ye=t,i()}finally{ye=r}};Mu=function(t,i,r){switch(i){case"input":if(xu(t,r),i=r.name,r.type==="radio"&&i!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+i)+'][type="radio"]'),i=0;i<r.length;i++){var n=r[i];if(n!==t&&n.form===t.form){var e=to(n);if(!e)throw Error(H(90));dd(n),xu(n,e)}}}break;case"textarea":vd(t,r);break;case"select":i=r.value,i!=null&&Zr(t,!!r.multiple,i,!1)}};kd=pc;wd=Sr;var xy={usingClientEntryPoint:!1,Events:[ps,jr,to,Sd,Ed,pc]},bi={findFiberByHostInstance:ur,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Ay={bundleType:bi.bundleType,version:bi.version,rendererPackageName:bi.rendererPackageName,rendererConfig:bi.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Cn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=bd(t),t===null?null:t.stateNode},findFiberByHostInstance:bi.findFiberByHostInstance||by,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Fs=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Fs.isDisabled&&Fs.supportsFiber)try{qa=Fs.inject(Ay),rn=Fs}catch{}}At.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=xy;At.createPortal=function(t,i){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ec(i))throw Error(H(200));return Cy(t,i,null,r)};At.createRoot=function(t,i){if(!Ec(t))throw Error(H(299));var r=!1,n="",e=iv;return i!=null&&(i.unstable_strictMode===!0&&(r=!0),i.identifierPrefix!==void 0&&(n=i.identifierPrefix),i.onRecoverableError!==void 0&&(e=i.onRecoverableError)),i=yc(t,1,!1,null,null,r,!1,n,e),t[Sn]=i.current,qi(t.nodeType===8?t.parentNode:t),new Sc(i)};At.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var i=t._reactInternals;if(i===void 0)throw typeof t.render=="function"?Error(H(188)):(t=Object.keys(t).join(","),Error(H(268,t)));return t=bd(i),t=t===null?null:t.stateNode,t};At.flushSync=function(t){return Sr(t)};At.hydrate=function(t,i,r){if(!co(i))throw Error(H(200));return fo(null,t,i,!0,r)};At.hydrateRoot=function(t,i,r){if(!Ec(t))throw Error(H(405));var n=r!=null&&r.hydratedSources||null,e=!1,s="",a=iv;if(r!=null&&(r.unstable_strictMode===!0&&(e=!0),r.identifierPrefix!==void 0&&(s=r.identifierPrefix),r.onRecoverableError!==void 0&&(a=r.onRecoverableError)),i=rv(i,null,t,1,r??null,e,!1,s,a),t[Sn]=i.current,qi(t),n)for(t=0;t<n.length;t++)r=n[t],e=r._getVersion,e=e(r._source),i.mutableSourceEagerHydrationData==null?i.mutableSourceEagerHydrationData=[r,e]:i.mutableSourceEagerHydrationData.push(r,e);return new lo(i)};At.render=function(t,i,r){if(!co(i))throw Error(H(200));return fo(null,t,i,!1,r)};At.unmountComponentAtNode=function(t){if(!co(t))throw Error(H(40));return t._reactRootContainer?(Sr(function(){fo(null,null,t,!1,function(){t._reactRootContainer=null,t[Sn]=null})}),!0):!1};At.unstable_batchedUpdates=pc;At.unstable_renderSubtreeIntoContainer=function(t,i,r,n){if(!co(r))throw Error(H(200));if(t==null||t._reactInternals===void 0)throw Error(H(38));return fo(t,i,r,!1,n)};At.version="18.3.1-next-f1338f8080-20240426";function sv(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(sv)}catch(t){console.error(t)}}sv(),sd.exports=At;var Iy=sd.exports,Kf=Iy;Eu.createRoot=Kf.createRoot,Eu.hydrateRoot=Kf.hydrateRoot;function Yf(t,i){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);i&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function Oe(t){for(var i=1;i<arguments.length;i++){var r=arguments[i]!=null?arguments[i]:{};i%2?Yf(Object(r),!0).forEach(function(n){O(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Yf(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function ut(t){"@babel/helpers - typeof";return ut=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},ut(t)}function Q(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}function Xf(t,i){for(var r=0;r<i.length;r++){var n=i[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,av(n.key),n)}}function q(t,i,r){return i&&Xf(t.prototype,i),r&&Xf(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function O(t,i,r){return i=av(i),i in t?Object.defineProperty(t,i,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[i]=r,t}function ee(t,i){if(typeof i!="function"&&i!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(i&&i.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),i&&pl(t,i)}function re(t){return re=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},re(t)}function pl(t,i){return pl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,e){return n.__proto__=e,n},pl(t,i)}function Ly(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function x(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function kc(t,i){if(i&&(typeof i=="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return x(t)}function te(t){var i=Ly();return function(){var n=re(t),e;if(i){var s=re(this).constructor;e=Reflect.construct(n,arguments,s)}else e=n.apply(this,arguments);return kc(this,e)}}function Dy(t,i){for(;!Object.prototype.hasOwnProperty.call(t,i)&&(t=re(t),t!==null););return t}function se(){return typeof Reflect<"u"&&Reflect.get?se=Reflect.get.bind():se=function(i,r,n){var e=Dy(i,r);if(e){var s=Object.getOwnPropertyDescriptor(e,r);return s.get?s.get.call(arguments.length<3?i:n):s.value}},se.apply(this,arguments)}function Yt(t){return Oy(t)||Ry(t)||My(t)||Ny()}function Oy(t){if(Array.isArray(t))return vl(t)}function Ry(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function My(t,i){if(t){if(typeof t=="string")return vl(t,i);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return vl(t,i)}}function vl(t,i){(i==null||i>t.length)&&(i=t.length);for(var r=0,n=new Array(i);r<i;r++)n[r]=t[r];return n}function Ny(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Fy(t,i){if(typeof t!="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,i||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(t)}function av(t){var i=Fy(t,"string");return typeof i=="symbol"?i:String(i)}var ov={exports:{}};(function(t){var i=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function e(u,l,c){this.fn=u,this.context=l,this.once=c||!1}function s(u,l,c,f,h){if(typeof c!="function")throw new TypeError("The listener must be a function");var d=new e(c,f||u,h),p=r?r+l:l;return u._events[p]?u._events[p].fn?u._events[p]=[u._events[p],d]:u._events[p].push(d):(u._events[p]=d,u._eventsCount++),u}function a(u,l){--u._eventsCount===0?u._events=new n:delete u._events[l]}function o(){this._events=new n,this._eventsCount=0}o.prototype.eventNames=function(){var l=[],c,f;if(this._eventsCount===0)return l;for(f in c=this._events)i.call(c,f)&&l.push(r?f.slice(1):f);return Object.getOwnPropertySymbols?l.concat(Object.getOwnPropertySymbols(c)):l},o.prototype.listeners=function(l){var c=r?r+l:l,f=this._events[c];if(!f)return[];if(f.fn)return[f.fn];for(var h=0,d=f.length,p=new Array(d);h<d;h++)p[h]=f[h].fn;return p},o.prototype.listenerCount=function(l){var c=r?r+l:l,f=this._events[c];return f?f.fn?1:f.length:0},o.prototype.emit=function(l,c,f,h,d,p){var m=r?r+l:l;if(!this._events[m])return!1;var _=this._events[m],v=arguments.length,y,S;if(_.fn){switch(_.once&&this.removeListener(l,_.fn,void 0,!0),v){case 1:return _.fn.call(_.context),!0;case 2:return _.fn.call(_.context,c),!0;case 3:return _.fn.call(_.context,c,f),!0;case 4:return _.fn.call(_.context,c,f,h),!0;case 5:return _.fn.call(_.context,c,f,h,d),!0;case 6:return _.fn.call(_.context,c,f,h,d,p),!0}for(S=1,y=new Array(v-1);S<v;S++)y[S-1]=arguments[S];_.fn.apply(_.context,y)}else{var E=_.length,T;for(S=0;S<E;S++)switch(_[S].once&&this.removeListener(l,_[S].fn,void 0,!0),v){case 1:_[S].fn.call(_[S].context);break;case 2:_[S].fn.call(_[S].context,c);break;case 3:_[S].fn.call(_[S].context,c,f);break;case 4:_[S].fn.call(_[S].context,c,f,h);break;default:if(!y)for(T=1,y=new Array(v-1);T<v;T++)y[T-1]=arguments[T];_[S].fn.apply(_[S].context,y)}}return!0},o.prototype.on=function(l,c,f){return s(this,l,c,f,!1)},o.prototype.once=function(l,c,f){return s(this,l,c,f,!0)},o.prototype.removeListener=function(l,c,f,h){var d=r?r+l:l;if(!this._events[d])return this;if(!c)return a(this,d),this;var p=this._events[d];if(p.fn)p.fn===c&&(!h||p.once)&&(!f||p.context===f)&&a(this,d);else{for(var m=0,_=[],v=p.length;m<v;m++)(p[m].fn!==c||h&&!p[m].once||f&&p[m].context!==f)&&_.push(p[m]);_.length?this._events[d]=_.length===1?_[0]:_:a(this,d)}return this},o.prototype.removeAllListeners=function(l){var c;return l?(c=r?r+l:l,this._events[c]&&a(this,c)):(this._events=new n,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=r,o.EventEmitter=o,t.exports=o})(ov);var uv=ov.exports;const gi=Xa(uv);var By=typeof window<"u"&&window.location&&window.location.href.indexOf("xgplayerdebugger=1")>-1,Zo={info:"color: #525252; background-color: #90ee90;",error:"color: #525252; background-color: red;",warn:"color: #525252; background-color: yellow; "},Jo="%c[xgplayer]",he={config:{debug:By?3:0},logInfo:function(i){for(var r,n=arguments.length,e=new Array(n>1?n-1:0),s=1;s<n;s++)e[s-1]=arguments[s];this.config.debug>=3&&(r=console).log.apply(r,[Jo,Zo.info,i].concat(e))},logWarn:function(i){for(var r,n=arguments.length,e=new Array(n>1?n-1:0),s=1;s<n;s++)e[s-1]=arguments[s];this.config.debug>=1&&(r=console).warn.apply(r,[Jo,Zo.warn,i].concat(e))},logError:function(i){var r;if(!(this.config.debug<1)){for(var n=this.config.debug>=2?"trace":"error",e=arguments.length,s=new Array(e>1?e-1:0),a=1;a<e;a++)s[a-1]=arguments[a];(r=console)[n].apply(r,[Jo,Zo.error,i].concat(s))}}};function Uy(t){t.logInfo=he.logInfo.bind(t),t.logWarn=he.logWarn.bind(t),t.logError=he.logError.bind(t)}var Hy=function(){function t(i){Q(this,t),this.bufferedList=i}return q(t,[{key:"start",value:function(r){return this.bufferedList[r].start}},{key:"end",value:function(r){return this.bufferedList[r].end}},{key:"length",get:function(){return this.bufferedList.length}}]),t}(),g={};g.createDom=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"div",i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"",e=document.createElement(t);return e.className=n,e.innerHTML=i,Object.keys(r).forEach(function(s){var a=s,o=r[s];t==="video"||t==="audio"||t==="live-video"?o&&e.setAttribute(a,o):e.setAttribute(a,o)}),e};g.createDomFromHtml=function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"";try{var n=document.createElement("div");n.innerHTML=t;var e=n.children;return n=null,e.length>0?(e=e[0],r&&g.addClass(e,r),i&&Object.keys(i).forEach(function(s){e.setAttribute(s,i[s])}),e):null}catch(s){return he.logError("util.createDomFromHtml",s),null}};g.hasClass=function(t,i){if(!t||!i)return!1;try{return Array.prototype.some.call(t.classList,function(n){return n===i})}catch{var r=t.className&&ut(t.className)==="object"?t.getAttribute("class"):t.className;return r&&!!r.match(new RegExp("(\\s|^)"+i+"(\\s|$)"))}};g.addClass=function(t,i){if(!(!t||!i))try{i.replace(/(^\s+|\s+$)/g,"").split(/\s+/g).forEach(function(r){r&&t.classList.add(r)})}catch{g.hasClass(t,i)||(t.className&&ut(t.className)==="object"?t.setAttribute("class",t.getAttribute("class")+" "+i):t.className+=" "+i)}};g.removeClass=function(t,i){if(!(!t||!i))try{i.replace(/(^\s+|\s+$)/g,"").split(/\s+/g).forEach(function(r){r&&t.classList.remove(r)})}catch{g.hasClass(t,i)&&i.split(/\s+/g).forEach(function(n){var e=new RegExp("(\\s|^)"+n+"(\\s|$)");t.className&&ut(t.className)==="object"?t.setAttribute("class",t.getAttribute("class").replace(e," ")):t.className=t.className.replace(e," ")})}};g.toggleClass=function(t,i){t&&i.split(/\s+/g).forEach(function(r){g.hasClass(t,r)?g.removeClass(t,r):g.addClass(t,r)})};g.classNames=function(){for(var t=arguments,i=[],r=function(s){g.typeOf(t[s])==="String"?i.push(t[s]):g.typeOf(t[s])==="Object"&&Object.keys(t[s]).map(function(a){t[s][a]&&i.push(a)})},n=0;n<arguments.length;n++)r(n);return i.join(" ")};g.findDom=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:document,i=arguments.length>1?arguments[1]:void 0,r;try{r=t.querySelector(i)}catch(n){he.logError("util.findDom",n),i.indexOf("#")===0&&(r=t.getElementById(i.slice(1)))}return r};g.getCss=function(t,i){return t.currentStyle?t.currentStyle[i]:document.defaultView.getComputedStyle(t,!1)[i]};g.padStart=function(t,i,r){for(var n=String(r),e=i>>0,s=Math.ceil(e/n.length),a=[],o=String(t);s--;)a.push(n);return a.join("").substring(0,e-o.length)+o};g.format=function(t){if(window.isNaN(t))return"";t=Math.round(t);var i=g.padStart(Math.floor(t/3600),2,0),r=g.padStart(Math.floor((t-i*3600)/60),2,0),n=g.padStart(Math.floor(t-i*3600-r*60),2,0);return(i==="00"?[r,n]:[i,r,n]).join(":")};g.event=function(t){if(t.touches){var i=t.touches[0]||t.changedTouches[0];t.clientX=i.clientX||0,t.clientY=i.clientY||0,t.offsetX=i.pageX-i.target.offsetLeft,t.offsetY=i.pageY-i.target.offsetTop}t._target=t.target||t.srcElement};g.typeOf=function(t){return Object.prototype.toString.call(t).match(/([^\s.*]+)(?=]$)/g)[0]};g.deepCopy=function(t,i){if(g.typeOf(i)==="Object"&&g.typeOf(t)==="Object")return Object.keys(i).forEach(function(r){g.typeOf(i[r])==="Object"&&!(i[r]instanceof Node)?t[r]===void 0||t[r]===void 0?t[r]=i[r]:g.deepCopy(t[r],i[r]):g.typeOf(i[r])==="Array"?t[r]=g.typeOf(t[r])==="Array"?t[r].concat(i[r]):i[r]:t[r]=i[r]}),t};g.deepMerge=function(t,i){return Object.keys(i).map(function(r){if(g.typeOf(i[r])==="Array"&&g.typeOf(t[r])==="Array"){if(g.typeOf(t[r])==="Array"){var n;(n=t[r]).push.apply(n,Yt(i[r]))}}else g.typeOf(t[r])===g.typeOf(i[r])&&t[r]!==null&&g.typeOf(t[r])==="Object"&&!(i[r]instanceof window.Node)?g.deepMerge(t[r],i[r]):i[r]!==null&&(t[r]=i[r])}),t};g.getBgImage=function(t){var i=(t.currentStyle||window.getComputedStyle(t,null)).backgroundImage;if(!i||i==="none")return"";var r=document.createElement("a");return r.href=i.replace(/url\("|"\)/g,""),r.href};g.copyDom=function(t){if(t&&t.nodeType===1){var i=document.createElement(t.tagName);return Array.prototype.forEach.call(t.attributes,function(r){i.setAttribute(r.name,r.value)}),t.innerHTML&&(i.innerHTML=t.innerHTML),i}else return""};g.setInterval=function(t,i,r,n){t._interval[i]||(t._interval[i]=window.setInterval(r.bind(t),n))};g.clearInterval=function(t,i){clearInterval(t._interval[i]),t._interval[i]=null};g.setTimeout=function(t,i,r){t._timers||(t._timers=[]);var n=setTimeout(function(){i(),g.clearTimeout(t,n)},r);return t._timers.push(n),n};g.clearTimeout=function(t,i){var r=t._timers;if(g.typeOf(r)==="Array"){for(var n=0;n<r.length;n++)if(r[n]===i){r.splice(n,1),clearTimeout(i);break}}else clearTimeout(i)};g.clearAllTimers=function(t){var i=t._timers;g.typeOf(i)==="Array"&&(i.map(function(r){clearTimeout(r)}),t._timerIds=[])};g.createImgBtn=function(t,i,r,n){var e=g.createDom("xg-".concat(t),"",{},"xgplayer-".concat(t,"-img"));if(e.style.backgroundImage='url("'.concat(i,'")'),r&&n){var s,a,o;["px","rem","em","pt","dp","vw","vh","vm","%"].every(function(u){return r.indexOf(u)>-1&&n.indexOf(u)>-1?(s=parseFloat(r.slice(0,r.indexOf(u)).trim()),a=parseFloat(n.slice(0,n.indexOf(u)).trim()),o=u,!1):!0}),e.style.width="".concat(s).concat(o),e.style.height="".concat(a).concat(o),e.style.backgroundSize="".concat(s).concat(o," ").concat(a).concat(o),t==="start"?e.style.margin="-".concat(a/2).concat(o," auto auto -").concat(s/2).concat(o):e.style.margin="auto 5px auto 5px"}return e};g.Hex2RGBA=function(t,i){var r=[];if(/^\#[0-9A-F]{3}$/i.test(t)){var n="#";t.replace(/[0-9A-F]/ig,function(e){n+=e+e}),t=n}return/^#[0-9A-F]{6}$/i.test(t)?(t.replace(/[0-9A-F]{2}/ig,function(e){r.push(parseInt(e,16))}),"rgba(".concat(r.join(","),", ").concat(i,")")):"rgba(255, 255, 255, 0.1)"};g.getFullScreenEl=function(){return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement};g.checkIsFunction=function(t){return t&&typeof t=="function"};g.checkIsObject=function(t){return t!==null&&ut(t)==="object"};g.hide=function(t){t.style.display="none"};g.show=function(t,i){t.style.display=i||"block"};g.isUndefined=function(t){if(typeof t>"u"||t===null)return!0};g.isNotNull=function(t){return t!=null};g.setStyleFromCsstext=function(t,i){if(i)if(g.typeOf(i)==="String"){var r=i.replace(/\s+/g,"").split(";");r.map(function(n){if(n){var e=n.split(":");e.length>1&&(t.style[e[0]]=e[1])}})}else Object.keys(i).map(function(n){t.style[n]=i[n]})};function zy(t,i){for(var r=0,n=i.length;r<n;r++)if(t.indexOf(i[r])>-1)return!0;return!1}g.filterStyleFromText=function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:["width","height","top","left","bottom","right","position","z-index","padding","margin","transform"],r=t.style.cssText;if(!r)return{};var n=r.replace(/\s+/g,"").split(";"),e={},s={};return n.map(function(a){if(a){var o=a.split(":");o.length>1&&(zy(o[0],i)?e[o[0]]=o[1]:s[o[0]]=o[1])}}),t.setAttribute("style",""),Object.keys(s).map(function(a){t.style[a]=s[a]}),e};g.getStyleFromCsstext=function(t){var i=t.style.cssText;if(!i)return{};var r=i.replace(/\s+/g,"").split(";"),n={};return r.map(function(e){if(e){var s=e.split(":");s.length>1&&(n[s[0]]=s[1])}}),n};g.preloadImg=function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(){};if(t){var n=new window.Image;n.onload=function(e){n=null,i&&i(e)},n.onerror=function(e){n=null,r&&r(e)},n.src=t}};g.stopPropagation=function(t){t&&t.stopPropagation()};g.scrollTop=function(){return window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0};g.scrollLeft=function(){return window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0};g.checkTouchSupport=function(){return"ontouchstart"in window};g.getBuffered2=function(t){for(var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:.5,r=[],n=0;n<t.length;n++)r.push({start:t.start(n)<.5?0:t.start(n),end:t.end(n)});r.sort(function(u,l){var c=u.start-l.start;return c||l.end-u.end});var e=[];if(i)for(var s=0;s<r.length;s++){var a=e.length;if(a){var o=e[a-1].end;r[s].start-o<i?r[s].end>o&&(e[a-1].end=r[s].end):e.push(r[s])}else e.push(r[s])}else e=r;return new Hy(e)};g.getEventPos=function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;return t.touches&&t.touches.length>0&&(t=t.touches[0]),{x:t.x/i,y:t.y/i,clientX:t.clientX/i,clientY:t.clientY/i,offsetX:t.offsetX/i,offsetY:t.offsetY/i,pageX:t.pageX/i,pageY:t.pageY/i}};g.requestAnimationFrame=function(t){var i=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame;if(i)return i(t)};g.getHostFromUrl=function(t){if(g.typeOf(t)!=="String")return"";var i=t.split("/"),r="";return i.length>3&&i[2]&&(r=i[2]),r};g.cancelAnimationFrame=function(t){var i=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.cancelRequestAnimationFrame;i&&i(t)};g.isMSE=function(t){return t.media&&(t=t.media),!t||!(t instanceof HTMLMediaElement)?!1:/^blob/.test(t.currentSrc)||/^blob/.test(t.src)};g.isBlob=function(t){return typeof t=="string"&&/^blob/.test(t)};g.generateSessionId=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,i=new Date().getTime();try{t=parseInt(t)}catch{t=0}i+=t,window.performance&&typeof window.performance.now=="function"&&(i+=parseInt(window.performance.now()));var r="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){var e=(i+Math.random()*16)%16|0;return i=Math.floor(i/16),(n==="x"?e:e&3|8).toString(16)});return r};g.createEvent=function(t){var i;return typeof window.Event=="function"?i=new Event(t):(i=document.createEvent("Event"),i.initEvent(t,!0,!0)),i};g.adjustTimeByDuration=function(t,i,r){return!i||!t?t:t>i||r&&t<i?i:t};g.createPositionBar=function(t,i){var r=g.createDom("xg-bar","",{"data-index":-1},t);return i.appendChild(r),r};g.getTransformStyle=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{x:0,y:0,scale:1,rotate:0},i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",r={scale:"".concat(t.scale||1),translate:"".concat(t.x||0,"%, ").concat(t.y||0,"%"),rotate:"".concat(t.rotate||0,"deg")},n=Object.keys(r);return n.forEach(function(e){var s=new RegExp("".concat(e,"\\([^\\(]+\\)"),"g"),a="".concat(e,"(").concat(r[e],")");s.test(i)?(s.lastIndex=-1,i=i.replace(s,a)):i+="".concat(a," ")}),i};g.convertDeg=function(t){return Math.abs(t)<=1?t*360:t%360};g.getIndexByTime=function(t,i){var r=i.length,n=-1;if(r<1)return n;if(t<=i[0].end||r<2)n=0;else if(t>i[r-1].end)n=r-1;else for(var e=1;e<r;e++)if(t>i[e-1].end&&t<=i[e].end){n=e;break}return n};g.getOffsetCurrentTime=function(t,i){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:-1,n=-1;if(r>=0&&r<i.length?n=r:n=g.getIndexByTime(t,i),n<0)return-1;var e=i.length,s=i[n],a=s.start,o=s.end,u=s.cTime,l=s.offset;return t<a?u:t>=a&&t<=o?t-l:t>o&&n>=e-1?o:-1};g.getCurrentTimeByOffset=function(t,i){var r=-1;if(!i||i.length<0)return t;for(var n=0;n<i.length;n++)if(t<=i[n].duration){r=n;break}if(r!==-1){var e=i[r].start;return r-1<0?e+t:e+(t-i[r-1].duration)}return t};function lv(t){var i=ut(t);return t!==null&&(i==="object"||i==="function")}function Vy(t,i,r){var n,e,s,a,o,u,l=0,c=!1,f=!1,h=!0,d=!i&&i!==0&&typeof window.requestAnimationFrame=="function";if(typeof t!="function")throw new TypeError("Expected a function");i=+i||0,lv(r)&&(c=!!r.leading,f="maxWait"in r,s=f?Math.max(+r.maxWait||0,i):s,h="trailing"in r?!!r.trailing:h);function p(I){var X=n,k=e;return n=e=void 0,l=I,a=t.apply(k,X),a}function m(I,X){return d?(window.cancelAnimationFrame(o),window.requestAnimationFrame(I)):setTimeout(I,X)}function _(I){if(d)return window.cancelAnimationFrame(I);clearTimeout(I)}function v(I){return l=I,o=m(E,i),c?p(I):a}function y(I){var X=I-u,k=I-l,w=i-X;return f?Math.min(w,s-k):w}function S(I){var X=I-u,k=I-l;return u===void 0||X>=i||X<0||f&&k>=s}function E(){var I=Date.now();if(S(I))return T(I);o=m(E,y(I))}function T(I){return o=void 0,h&&n?p(I):(n=e=void 0,a)}function A(){o!==void 0&&_(o),l=0,n=u=e=o=void 0}function P(){return o===void 0?a:T(Date.now())}function D(){return o!==void 0}function F(){for(var I=Date.now(),X=S(I),k=arguments.length,w=new Array(k),C=0;C<k;C++)w[C]=arguments[C];if(n=w,e=this,u=I,X){if(o===void 0)return v(u);if(f)return o=m(E,i),p(u)}return o===void 0&&(o=m(E,i)),a}return F.cancel=A,F.flush=P,F.pending=D,F}function jy(t,i,r){var n=!0,e=!0;if(typeof t!="function")throw new TypeError("Expected a function");return lv(r)&&(n="leading"in r?!!r.leading:n,e="trailing"in r?!!r.trailing:e),Vy(t,i,{leading:n,trailing:e,maxWait:i})}function Gy(){var t=(document.documentElement.getAttribute("lang")||navigator.language||"zh-cn").toLocaleLowerCase();return t==="zh-cn"&&(t="zh"),t}function Wy(t,i,r){if(t){var n=t.getAttribute(r);return!!(n&&n===i&&(t.tagName==="VIDEO"||t.tagName==="AUDIO"))}}var Qf={android:/(Android)\s([\d.]+)/,ios:/(Version)\/([\d.]+)/},$y=["avc1.42E01E, mp4a.40.2","avc1.58A01E, mp4a.40.2","avc1.4D401E, mp4a.40.2","avc1.64001E, mp4a.40.2","avc1.42E01E","mp4v.20.8","avc1.42E01E, mp4a.40.2","avc1.58A01E, mp4a.40.2","avc1.4D401E, mp4a.40.2","avc1.64001E, mp4a.40.2","mp4v.20.8, mp4a.40.2","mp4v.20.240, mp4a.40.2"],le={get device(){var t=le.os;return t.isPc?"pc":"mobile"},get browser(){if(typeof navigator>"u")return"";var t=navigator.userAgent.toLowerCase(),i={ie:/rv:([\d.]+)\) like gecko/,firefox:/firefox\/([\d.]+)/,chrome:/chrome\/([\d.]+)/,opera:/opera.([\d.]+)/,safari:/version\/([\d.]+).*safari/};return[].concat(Object.keys(i).filter(function(r){return i[r].test(t)}))[0]},get os(){if(typeof navigator>"u")return{};var t=navigator.userAgent,i=/(?:Windows Phone)/.test(t),r=/(?:SymbianOS)/.test(t)||i,n=/(?:Android)/.test(t),e=/(?:Firefox)/.test(t),s=/(?:iPad|PlayBook)/.test(t)||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1,a=s||n&&!/(?:Mobile)/.test(t)||e&&/(?:Tablet)/.test(t),o=/(?:iPhone)/.test(t)&&!a,u=!o&&!n&&!r&&!a;return{isTablet:a,isPhone:o,isIpad:s,isIos:o||s,isAndroid:n,isPc:u,isSymbian:r,isWindowsPhone:i,isFireFox:e}},get osVersion(){if(typeof navigator>"u")return 0;var t=navigator.userAgent,i="";/(?:iPhone)|(?:iPad|PlayBook)/.test(t)?i=Qf.ios:i=Qf.android;var r=i?i.exec(t):[];if(r&&r.length>=3){var n=r[2].split(".");return n.length>0?parseInt(n[0]):0}return 0},get isWeixin(){if(typeof navigator>"u")return!1;var t=/(micromessenger)\/([\d.]+)/,i=t.exec(navigator.userAgent.toLocaleLowerCase());return!!i},isSupportMP4:function(){var i={isSupport:!1,mime:""};if(typeof document>"u")return i;if(this.supportResult)return this.supportResult;var r=document.createElement("video");return typeof r.canPlayType=="function"&&$y.map(function(n){r.canPlayType('video/mp4; codecs="'.concat(n,'"'))==="probably"&&(i.isSupport=!0,i.mime+="||".concat(n))}),this.supportResult=i,r=null,i},isMSESupport:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:'video/mp4; codecs="avc1.42E01E,mp4a.40.2"';if(typeof MediaSource>"u"||!MediaSource)return!1;try{return MediaSource.isTypeSupported(i)}catch(r){return this._logger.error(i,r),!1}},isHevcSupported:function(){return typeof MediaSource>"u"||!MediaSource.isTypeSupported?!1:MediaSource.isTypeSupported('video/mp4;codecs="hev1.1.6.L120.90"')||MediaSource.isTypeSupported('video/mp4;codecs="hev1.2.4.L120.90"')||MediaSource.isTypeSupported('video/mp4;codecs="hev1.3.E.L120.90"')||MediaSource.isTypeSupported('video/mp4;codecs="hev1.4.10.L120.90"')},probeConfigSupported:function(i){var r={supported:!1,smooth:!1,powerEfficient:!1};if(!i||typeof navigator>"u")return Promise.resolve(r);if(navigator.mediaCapabilities&&navigator.mediaCapabilities.decodingInfo)return navigator.mediaCapabilities.decodingInfo(i);var n=i.video||{},e=i.audio||{};try{var s=MediaSource.isTypeSupported(n.contentType),a=MediaSource.isTypeSupported(e.contentType);return Promise.resolve({supported:s&&a,smooth:!1,powerEfficient:!1})}catch{return Promise.resolve(r)}}},gl="3.0.18",qf={1:"media",2:"media",3:"media",4:"media",5:"media",6:"media"},Zf={1:5101,2:5102,3:5103,4:5104,5:5105,6:5106},as=q(function t(i){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{errorType:"",errorCode:0,errorMessage:"",originError:"",ext:{},mediaError:null};Q(this,t);var n=i&&i.i18n?i.i18n.ERROR_TYPES:null;if(i.media){var e=r.mediaError?r.mediaError:i.media.error||{},s=i.duration,a=i.currentTime,o=i.ended,u=i.src,l=i.currentSrc,c=i.media,f=c.readyState,h=c.networkState,d=r.errorCode||e.code;Zf[d]&&(d=Zf[d]);var p={playerVersion:gl,currentTime:a,duration:s,ended:o,readyState:f,networkState:h,src:u||l,errorType:r.errorType,errorCode:d,message:r.errorMessage||e.message,mediaError:e,originError:r.originError?r.originError.stack:"",host:g.getHostFromUrl(u||l)};return r.ext&&Object.keys(r.ext).map(function(y){p[y]=r.ext[y]}),p}else if(arguments.length>1){for(var m={playerVersion:gl,domain:document.domain},_=["errorType","currentTime","duration","networkState","readyState","src","currentSrc","ended","errd","errorCode","mediaError"],v=0;v<arguments.length;v++)m[_[v]]=arguments[v];return m.ex=n?(n[arguments[0]]||{}).msg:"",m}}),xt="play",wc="playing",Cr="ended",mi="pause",yi="error",ho="seeking",mn="seeked",bt="timeupdate",gs="waiting",pn="canplay",Ky="canplaythrough",Jn="durationchange",cv="volumechange",wn="loadeddata",Yy="loadedmetadata",fv="ratechange",hv="progress",Tc="loadstart",br="emptied",Xy="stalled",Qy="suspend",qy="abort",Zy="bufferedChange",Cc="focus",dv="blur",bc="ready",pv="urlNull",pr="autoplay_started",Pc="autoplay_was_prevented",po="complete",Da="replay",vo="destroy",ms="urlchange",ml="download_speed_change",vv="leaveplayer",gv="enterplayer",mv="loading",cn="fullscreen_change",Oa="cssFullscreen_change",Ra="mini_state_change",xc="definition_change",Jy="before_definition_change",yl="after_definition_change",e0="SEI_PARSED",t0="retry",Xn="video_resize",_l="pip_change",yv="rotate",_v="screenShot",Ma="playnext",Sv="shortcut",Ev="xglog",Na="user_action",go="reset",kv="source_error",wv="source_success",Tv="switch_subtitle",Cv=["play","playing","ended","pause","error","seeking","seeked","timeupdate","waiting","canplay","canplaythrough","durationchange","volumechange","loadeddata","loadedmetadata","ratechange","progress","loadstart","emptied","stalled","suspend","abort","lowdecode"],bv={STATS_INFO:"stats_info",STATS_DOWNLOAD:"stats_download",STATS_RESET:"stats_reset"},Pv="fps_stuck";const n0=Object.freeze(Object.defineProperty({__proto__:null,ABORT:qy,AFTER_DEFINITION_CHANGE:yl,AUTOPLAY_PREVENTED:Pc,AUTOPLAY_STARTED:pr,BEFORE_DEFINITION_CHANGE:Jy,BUFFER_CHANGE:Zy,CANPLAY:pn,CANPLAY_THROUGH:Ky,COMPLETE:po,CSS_FULLSCREEN_CHANGE:Oa,DEFINITION_CHANGE:xc,DESTROY:vo,DOWNLOAD_SPEED_CHANGE:ml,DURATION_CHANGE:Jn,EMPTIED:br,ENDED:Cr,ENTER_PLAYER:gv,ERROR:yi,FPS_STUCK:Pv,FULLSCREEN_CHANGE:cn,LEAVE_PLAYER:vv,LOADED_DATA:wn,LOADED_METADATA:Yy,LOADING:mv,LOAD_START:Tc,MINI_STATE_CHANGE:Ra,PAUSE:mi,PIP_CHANGE:_l,PLAY:xt,PLAYER_BLUR:dv,PLAYER_FOCUS:Cc,PLAYING:wc,PLAYNEXT:Ma,PROGRESS:hv,RATE_CHANGE:fv,READY:bc,REPLAY:Da,RESET:go,RETRY:t0,ROTATE:yv,SCREEN_SHOT:_v,SEEKED:mn,SEEKING:ho,SEI_PARSED:e0,SHORTCUT:Sv,SOURCE_ERROR:kv,SOURCE_SUCCESS:wv,STALLED:Xy,STATS_EVENTS:bv,SUSPEND:Qy,SWITCH_SUBTITLE:Tv,TIME_UPDATE:bt,URL_CHANGE:ms,URL_NULL:pv,USER_ACTION:Na,VIDEO_EVENTS:Cv,VIDEO_RESIZE:Xn,VOLUME_CHANGE:cv,WAITING:gs,XGLOG:Ev},Symbol.toStringTag,{value:"Module"}));function eu(t,i){!this||!this.emit||(t==="error"?this.errorHandler(t,i.error):this.emit(t,i))}function r0(t,i){return function(r,n){var e={player:i,eventName:t,originalEvent:r,detail:r.detail||{},timeStamp:r.timeStamp,currentTime:i.currentTime,duration:i.duration,paused:i.paused,ended:i.ended,isInternalOp:!!i._internalOp[r.type],muted:i.muted,volume:i.volume,host:g.getHostFromUrl(i.currentSrc),vtype:i.vtype};if(i.removeInnerOP(r.type),t==="timeupdate"&&(i._currentTime=i.media&&i.media.currentTime),t==="ratechange"){var s=i.media?i.media.playbackRate:0;if(s&&i._rate===s)return;i._rate=i.media&&i.media.playbackRate}if(t==="durationchange"&&(i._duration=i.media.duration),t==="volumechange"&&(e.isMutedChange=i._lastMuted!==i.muted,i._lastMuted=i.muted),t==="error"&&(e.error=n||i.video.error),i.mediaEventMiddleware[t]){var a=eu.bind(i,t,e);try{i.mediaEventMiddleware[t].call(i,e,a)}catch(o){throw eu.call(i,t,e),o}}else eu.call(i,t,e)}}var i0=function(t){ee(r,t);var i=te(r);function r(n){var e;Q(this,r),e=i.call(this,n),e._hasStart=!1,e._currentTime=0,e._duration=0,e._internalOp={},e._lastMuted=!1,e.vtype="MP4",e._rate=-1,e.mediaConfig=Object.assign({},{controls:!1,autoplay:n.autoplay,playsinline:n.playsinline,"x5-playsinline":n.playsinline,"webkit-playsinline":n.playsinline,"x5-video-player-fullscreen":n["x5-video-player-fullscreen"]||n.x5VideoPlayerFullscreen,"x5-video-orientation":n["x5-video-orientation"]||n.x5VideoOrientation,airplay:n.airplay,"webkit-airplay":n.airplay,tabindex:n.tabindex|0,mediaType:n.mediaType||"video","data-index":-1},n.videoConfig,n.videoAttributes);var s=n["x5-video-player-type"]||n.x5VideoPlayerType;return le.isWeixin&&le.os.isAndroid&&s&&(e.mediaConfig["x5-video-player-type"]=s,delete e.mediaConfig.playsinline,delete e.mediaConfig["webkit-playsinline"],delete e.mediaConfig["x5-playsinline"]),n.loop&&(e.mediaConfig.loop="loop"),n.autoplayMuted&&!Object.prototype.hasOwnProperty.call(e.mediaConfig,"muted")&&(e.mediaConfig.muted=!0),e.media=g.createDom(e.mediaConfig.mediaType,"",e.mediaConfig,""),n.defaultPlaybackRate&&(e.media.defaultPlaybackRate=e.media.playbackRate=n.defaultPlaybackRate),g.typeOf(n.volume)==="Number"&&(e.volume=n.volume),n.autoplayMuted&&(e.media.muted=!0,e._lastMuted=!0),n.autoplay&&(e.media.autoplay=!0),e._interval={},e.mediaEventMiddleware={},e.attachVideoEvents(),e}return q(r,[{key:"setEventsMiddleware",value:function(e){var s=this;Object.keys(e).map(function(a){s.mediaEventMiddleware[a]=e[a]})}},{key:"removeEventsMiddleware",value:function(e){var s=this;Object.keys(e).map(function(a){delete s.mediaEventMiddleware[a]})}},{key:"attachVideoEvents",value:function(){var e=this,s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.media;this._evHandlers||(this._evHandlers=Cv.map(function(a){var o="on".concat(a.charAt(0).toUpperCase()).concat(a.slice(1));return typeof e[o]=="function"&&e.on(a,e[o]),O({},a,r0(a,e))})),this._evHandlers.forEach(function(a){var o=Object.keys(a)[0];s.addEventListener(o,a[o],!1)})}},{key:"detachVideoEvents",value:function(){var e=this,s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.media;this._evHandlers.forEach(function(a){var o=Object.keys(a)[0];s.removeEventListener(o,a[o],!1)}),this._evHandlers.forEach(function(a){var o=Object.keys(a)[0],u="on".concat(o.charAt(0).toUpperCase()).concat(o.slice(1));typeof e[u]=="function"&&e.off(o,e[u])}),this._evHandlers=null}},{key:"_attachSourceEvents",value:function(e,s){var a=this;e.removeAttribute("src"),e.load(),s.forEach(function(f,h){a.media.appendChild(g.createDom("source","",{src:"".concat(f.src),type:"".concat(f.type||""),"data-index":h+1}))});var o=e.children;if(o){this._videoSourceCount=o.length,this._videoSourceIndex=o.length,this._vLoadeddata=function(f){a.emit(wv,{src:f.target.currentSrc,host:g.getHostFromUrl(f.target.currentSrc)})};for(var u=null,l=0;l<this._evHandlers.length;l++)if(Object.keys(this._evHandlers[l])[0]==="error"){u=this._evHandlers[l];break}!this._sourceError&&(this._sourceError=function(f){var h=parseInt(f.target.getAttribute("data-index"),10);if(a._videoSourceIndex--,a._videoSourceIndex===0||h>=a._videoSourceCount){var d={code:4,message:"sources_load_error"};u?u.error(f,d):a.errorHandler("error",d)}var p=qf[4];a.emit(kv,new as(a,{errorType:p,errorCode:4,errorMessage:"sources_load_error",mediaError:{code:4,message:"sources_load_error"},src:f.target.src}))});for(var c=0;c<o.length;c++)o[c].addEventListener("error",this._sourceError);e.addEventListener("loadeddata",this._vLoadeddata)}}},{key:"_detachSourceEvents",value:function(e){var s=e.children;if(!(!s||s.length===0||!this._sourceError)){for(var a=0;a<s.length;a++)s[a].removeEventListener("error",this._sourceError);for(;s.length>0;)e.removeChild(s[0]);this._vLoadeddata&&e.removeEventListener("loadeddata",this._vLoadeddata)}}},{key:"errorHandler",value:function(e){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(this.media&&(this.media.error||s)){var a=this.media.error||s,o=a.code?qf[a.code]:"other",u=a.message;this.media.currentSrc||(u="empty_src",a={code:6,message:u}),this.emit(e,new as(this,{errorType:o,errorCode:a.code,errorMessage:a.message||"",mediaError:a}))}}},{key:"destroy",value:function(){this.media&&(this.media.pause&&(this.media.pause(),this.media.muted=!0),this.media.removeAttribute("src"),this.media.load()),this._currentTime=0,this._duration=0,this.mediaConfig=null;for(var e in this._interval)Object.prototype.hasOwnProperty.call(this._interval,e)&&(clearInterval(this._interval[e]),this._interval[e]=null);this.detachVideoEvents(),this.media=null,this.mediaEventMiddleware={},this.removeAllListeners()}},{key:"video",get:function(){return this.media},set:function(e){this.media=e}},{key:"play",value:function(){var e=this.media?this.media.play():null;return e}},{key:"pause",value:function(){this.media&&this.media.pause()}},{key:"load",value:function(){this.media&&this.media.load()}},{key:"canPlayType",value:function(e){return this.media?this.media.canPlayType(e):!1}},{key:"getBufferedRange",value:function(e){var s=[0,0];if(!this.media)return s;e||(e=this.media.buffered);var a=this.media.currentTime;if(e)for(var o=0,u=e.length;o<u&&(s[0]=e.start(o),s[1]=e.end(o),!(s[0]<=a&&a<=s[1]));o++);return s[0]-a<=0&&a-s[1]<=0?s:[0,0]}},{key:"autoplay",get:function(){return this.media?this.media.autoplay:!1},set:function(e){this.media&&(this.media.autoplay=e)}},{key:"buffered",get:function(){return this.media?this.media.buffered:null}},{key:"buffered2",get:function(){return this.media&&this.media.buffered?g.getBuffered2(this.media.buffered):null}},{key:"bufferedPoint",get:function(){var e={start:0,end:0};if(!this.media)return e;var s=this.media.buffered;if(!s||s.length===0)return e;for(var a=0;a<s.length;a++)if((s.start(a)<=this.currentTime||s.start(a)<.1)&&s.end(a)>=this.currentTime)return{start:s.start(a),end:s.end(a)};return e}},{key:"crossOrigin",get:function(){return this.media?this.media.crossOrigin:""},set:function(e){this.media&&(this.media.crossOrigin=e)}},{key:"currentSrc",get:function(){return this.media?this.media.currentSrc:""},set:function(e){this.media&&(this.media.currentSrc=e)}},{key:"currentTime",get:function(){return this.media?this.media.currentTime!==void 0?this.media.currentTime:this._currentTime:0},set:function(e){this.media&&(this.media.currentTime=e)}},{key:"defaultMuted",get:function(){return this.media?this.media.defaultMuted:!1},set:function(e){this.media&&(this.media.defaultMuted=e)}},{key:"duration",get:function(){return this._duration}},{key:"ended",get:function(){return this.media?this.media.ended:!1}},{key:"error",get:function(){return this.media.error}},{key:"errorNote",get:function(){var e=this.media.error;if(!e)return"";var s=["MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED"];return s[this.media.error.code-1]}},{key:"loop",get:function(){return this.media?this.media.loop:!1},set:function(e){this.media&&(this.media.loop=e)}},{key:"muted",get:function(){return this.media?this.media.muted:!1},set:function(e){!this.media||this.media.muted===e||(this._lastMuted=this.media.muted,this.media.muted=e)}},{key:"networkState",get:function(){return this.media.networkState}},{key:"paused",get:function(){return this.media?this.media.paused:!0}},{key:"playbackRate",get:function(){return this.media?this.media.playbackRate:0},set:function(e){!this.media||e===1/0||(this.media.defaultPlaybackRate=e,this.media.playbackRate=e)}},{key:"played",get:function(){return this.media?this.media.played:null}},{key:"preload",get:function(){return this.media?this.media.preload:!1},set:function(e){this.media&&(this.media.preload=e)}},{key:"readyState",get:function(){return this.media.readyState}},{key:"seekable",get:function(){return this.media?this.media.seekable:!1}},{key:"seeking",get:function(){return this.media?this.media.seeking:!1}},{key:"src",get:function(){return this.media?this.media.src:""},set:function(e){if(this.media){if(this.emit(ms,e),this.emit(gs),this._currentTime=0,this._duration=0,g.isMSE(this.media)){this.onWaiting();return}this._detachSourceEvents(this.media),g.typeOf(e)==="Array"?this._attachSourceEvents(this.media,e):e?this.media.src=e:this.media.removeAttribute("src"),this.load()}}},{key:"volume",get:function(){return this.media?this.media.volume:0},set:function(e){e===1/0||!this.media||(this.media.volume=e)}},{key:"aspectRatio",get:function(){return this.media?this.media.videoWidth/this.media.videoHeight:0}},{key:"addInnerOP",value:function(e){this._internalOp[e]=!0}},{key:"removeInnerOP",value:function(e){delete this._internalOp[e]}},{key:"emit",value:function(e,s){for(var a,o=arguments.length,u=new Array(o>2?o-2:0),l=2;l<o;l++)u[l-2]=arguments[l];(a=se(re(r.prototype),"emit",this)).call.apply(a,[this,e,s].concat(u))}},{key:"on",value:function(e,s){for(var a,o=arguments.length,u=new Array(o>2?o-2:0),l=2;l<o;l++)u[l-2]=arguments[l];(a=se(re(r.prototype),"on",this)).call.apply(a,[this,e,s].concat(u))}},{key:"once",value:function(e,s){for(var a,o=arguments.length,u=new Array(o>2?o-2:0),l=2;l<o;l++)u[l-2]=arguments[l];(a=se(re(r.prototype),"once",this)).call.apply(a,[this,e,s].concat(u))}},{key:"off",value:function(e,s){for(var a,o=arguments.length,u=new Array(o>2?o-2:0),l=2;l<o;l++)u[l-2]=arguments[l];(a=se(re(r.prototype),"off",this)).call.apply(a,[this,e,s].concat(u))}},{key:"offAll",value:function(){se(re(r.prototype),"removeAllListeners",this).call(this)}}]),r}(gi),s0=function(){function t(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{name:"xgplayer",version:1,db:null,ojstore:{name:"xg-m4a",keypath:"vid"}};Q(this,t),this.indexedDB=window.indexedDB||window.webkitindexedDB,this.IDBKeyRange=window.IDBKeyRange||window.webkitIDBKeyRange,this.myDB=i}return q(t,[{key:"openDB",value:function(r){var n=this,e=this,s=this.myDB.version||1,a=e.indexedDB.open(e.myDB.name,s);a.onerror=function(o){},a.onsuccess=function(o){n.myDB.db=o.target.result,r.call(e)},a.onupgradeneeded=function(o){var u=o.target.result;o.target.transaction,u.objectStoreNames.contains(e.myDB.ojstore.name)||u.createObjectStore(e.myDB.ojstore.name,{keyPath:e.myDB.ojstore.keypath})}}},{key:"deletedb",value:function(){var r=this;r.indexedDB.deleteDatabase(this.myDB.name)}},{key:"closeDB",value:function(){this.myDB.db.close()}},{key:"addData",value:function(r,n){for(var e=this.myDB.db.transaction(r,"readwrite").objectStore(r),s,a=0;a<n.length;a++)s=e.add(n[a]),s.onerror=function(){},s.onsuccess=function(){}}},{key:"putData",value:function(r,n){for(var e=this.myDB.db.transaction(r,"readwrite").objectStore(r),s,a=0;a<n.length;a++)s=e.put(n[a]),s.onerror=function(){},s.onsuccess=function(){}}},{key:"getDataByKey",value:function(r,n,e){var s=this,a=this.myDB.db.transaction(r,"readwrite").objectStore(r),o=a.get(n);o.onerror=function(){e.call(s,null)},o.onsuccess=function(u){var l=u.target.result;e.call(s,l)}}},{key:"deleteData",value:function(r,n){var e=this.myDB.db.transaction(r,"readwrite").objectStore(r);e.delete(n)}},{key:"clearData",value:function(r){var n=this.myDB.db.transaction(r,"readwrite").objectStore(r);n.clear()}}]),t}(),Jf=["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],eh=["requestFullscreen","webkitRequestFullscreen","mozRequestFullScreen","msRequestFullscreen"],th=["exitFullscreen","webkitExitFullscreen","mozCancelFullScreen","msExitFullscreen"],ar="data-xgplayerid";function Bs(t,i,r){for(var n=arguments.length,e=new Array(n>3?n-3:0),s=3;s<n;s++)e[s-3]=arguments[s];var a=i.call.apply(i,[t].concat(e));!r||typeof r!="function"||(a&&a.then?a.then(function(){for(var o=arguments.length,u=new Array(o),l=0;l<o;l++)u[l]=arguments[l];r.call.apply(r,[t].concat(u))}):r.call.apply(r,[t].concat(e)))}function Fa(t,i){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{pre:null,next:null};return this.__hooks||(this.__hooks={}),!this.__hooks[t]&&(this.__hooks[t]=null),(function(){var n=arguments,e=this;if(r.pre)try{var s;(s=r.pre).call.apply(s,[this].concat(Array.prototype.slice.call(arguments)))}catch(u){throw u.message="[pluginName: ".concat(this.pluginName,":").concat(t,":pre error] >> ").concat(u.message),u}if(this.__hooks&&this.__hooks[t])try{var a,o=(a=this.__hooks[t]).call.apply(a,[this,this].concat(Array.prototype.slice.call(arguments)));o?o.then?o.then(function(u){u!==!1&&Bs.apply(void 0,[e,i,r.next].concat(Yt(n)))}).catch(function(u){throw u}):Bs.apply(void 0,[this,i,r.next].concat(Array.prototype.slice.call(arguments))):o===void 0&&Bs.apply(void 0,[this,i,r.next].concat(Array.prototype.slice.call(arguments)))}catch(u){throw u.message="[pluginName: ".concat(this.pluginName,":").concat(t,"] >> ").concat(u.message),u}else Bs.apply(void 0,[this,i,r.next].concat(Array.prototype.slice.call(arguments)))}).bind(this)}function Ba(t,i){var r=this.__hooks;if(r)return r.hasOwnProperty(t)?(r&&(r[t]=i),!0):(console.warn("has no supported hook which name [".concat(t,"]")),!1)}function Ua(t,i){var r=this.__hooks;r&&delete r[t]}function nh(t){if(!(!this.plugins||!this.plugins[t.toLowerCase()])){for(var i=this.plugins[t.toLowerCase()],r=arguments.length,n=new Array(r>1?r-1:0),e=1;e<r;e++)n[e-1]=arguments[e];return i.useHooks&&i.useHooks.apply(i,n)}}function rh(t){if(!(!this.plugins||!this.plugins[t.toLowerCase()])){var i=this.plugins[t.toLowerCase()];if(i){for(var r=arguments.length,n=new Array(r>1?r-1:0),e=1;e<r;e++)n[e-1]=arguments[e];return i.removeHooks&&i.removeHooks.apply(i,n)}}}function xv(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];t.__hooks={},i&&i.map(function(r){t.__hooks[r]=null}),Object.defineProperty(t,"hooks",{get:function(){return t.__hooks&&Object.keys(t.__hooks).map(function(n){if(t.__hooks[n])return n})}})}function Av(t){t.__hooks=null}function fn(t,i,r){for(var n=arguments.length,e=new Array(n>3?n-3:0),s=3;s<n;s++)e[s-3]=arguments[s];if(t.__hooks&&t.__hooks[i]){var a,o=(a=t.__hooks[i]).call.apply(a,[t,t].concat(e));if(o&&o.then)o.then(function(u){return u===!1?null:r.call.apply(r,[t,t].concat(e))}).catch(function(u){console.warn("[runHooks]".concat(i," reject"),u.message)});else if(o!==!1)return r.call.apply(r,[t,t].concat(e))}else return r.call.apply(r,[t,t].concat(e))}function tu(t,i){he.logError("[".concat(t,"] event or callback cant be undefined or null when call ").concat(i))}var an=function(){function t(i){Q(this,t),g.checkIsFunction(this.beforeCreate)&&this.beforeCreate(i),xv(this),this.__args=i,this.__events={},this.__onceEvents={},this.config=i.config||{},this.player=null,this.playerConfig={},this.pluginName="",this.__init(i)}return q(t,[{key:"beforeCreate",value:function(r){}},{key:"afterCreate",value:function(){}},{key:"beforePlayerInit",value:function(){}},{key:"onPluginsReady",value:function(){}},{key:"afterPlayerInit",value:function(){}},{key:"destroy",value:function(){}},{key:"__init",value:function(r){this.player=r.player,this.playerConfig=r.player&&r.player.config,this.pluginName=r.pluginName?r.pluginName.toLowerCase():this.constructor.pluginName.toLowerCase(),this.logger=r.player&&r.player.logger}},{key:"updateLang",value:function(r){r||(r=this.lang)}},{key:"lang",get:function(){return this.player.lang}},{key:"i18n",get:function(){return this.player.i18n}},{key:"i18nKeys",get:function(){return this.player.i18nKeys}},{key:"domEventType",get:function(){var r=g.checkTouchSupport()?"touch":"mouse";return this.playerConfig&&(this.playerConfig.domEventType==="touch"||this.playerConfig.domEventType==="mouse")&&(r=this.playerConfig.domEventType),r}},{key:"on",value:function(r,n){var e=this;if(!r||!n||!this.player){tu(this.pluginName,"plugin.on(event, callback)");return}typeof r=="string"?(this.__events[r]=n,this.player.on(r,n)):Array.isArray(r)&&r.forEach(function(s){e.__events[s]=n,e.player.on(s,n)})}},{key:"once",value:function(r,n){var e=this;if(!r||!n||!this.player){tu(this.pluginName,"plugin.once(event, callback)");return}typeof r=="string"?(this.__onceEvents[r]=n,this.player.once(r,n)):Array.isArray(r)&&r.forEach(function(s){e.__onceEvents[s]=n,e.player.once(r,n)})}},{key:"off",value:function(r,n){var e=this;if(!r||!n||!this.player){tu(this.pluginName,"plugin.off(event, callback)");return}typeof r=="string"?(delete this.__events[r],this.player.off(r,n)):Array.isArray(r)&&r.forEach(function(s){delete e.__events[r],e.player.off(s,n)})}},{key:"offAll",value:function(){var r=this;["__events","__onceEvents"].forEach(function(n){Object.keys(r[n]).forEach(function(e){r[n][e]&&r.off(e,r[n][e]),e&&delete r[n][e]})}),this.__events={},this.__onceEvents={}}},{key:"emit",value:function(r){var n;if(this.player){for(var e=arguments.length,s=new Array(e>1?e-1:0),a=1;a<e;a++)s[a-1]=arguments[a];(n=this.player).emit.apply(n,[r].concat(s))}}},{key:"emitUserAction",value:function(r,n){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(this.player){var s=Oe(Oe({},e),{},{pluginName:this.pluginName});this.player.emitUserAction(r,n,s)}}},{key:"hook",value:function(r,n){return Fa.call.apply(Fa,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"useHooks",value:function(r,n){for(var e=arguments.length,s=new Array(e>2?e-2:0),a=2;a<e;a++)s[a-2]=arguments[a];return Ba.call.apply(Ba,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"removeHooks",value:function(r,n){for(var e=arguments.length,s=new Array(e>2?e-2:0),a=2;a<e;a++)s[a-2]=arguments[a];return Ua.call.apply(Ua,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"registerPlugin",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"";if(this.player)return e&&(n.pluginName=e),this.player.registerPlugin({plugin:r,options:n})}},{key:"getPlugin",value:function(r){return this.player?this.player.getPlugin(r):null}},{key:"__destroy",value:function(){var r=this,n=this.player,e=this.pluginName;this.offAll(),g.clearAllTimers(this),g.checkIsFunction(this.destroy)&&this.destroy(),["player","playerConfig","pluginName","logger","__args","__hooks"].map(function(s){r[s]=null}),n.unRegisterPlugin(e),Av(this)}}],[{key:"defineGetterOrSetter",value:function(r,n){for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&Object.defineProperty(r,e,n[e])}},{key:"defaultConfig",get:function(){return{}}},{key:"pluginName",get:function(){return"pluginName"}}]),t}(),a0=9;if(typeof Element<"u"&&!Element.prototype.matches){var Ar=Element.prototype;Ar.matches=Ar.matchesSelector||Ar.mozMatchesSelector||Ar.msMatchesSelector||Ar.oMatchesSelector||Ar.webkitMatchesSelector}function o0(t,i){for(;t&&t.nodeType!==a0;){if(typeof t.matches=="function"&&t.matches(i))return t;t=t.parentNode}}var u0=o0,l0=u0;function nu(t,i,r,n,e){var s=f0.apply(this,arguments);return t.addEventListener(r,s,e),{destroy:function(){t.removeEventListener(r,s,e)}}}function c0(t,i,r,n,e){return typeof t.addEventListener=="function"?nu.apply(null,arguments):typeof r=="function"?nu.bind(null,document).apply(null,arguments):(typeof t=="string"&&(t=document.querySelectorAll(t)),Array.prototype.map.call(t,function(s){return nu(s,i,r,n,e)}))}function f0(t,i,r,n){return function(e){e.delegateTarget=l0(e.target,i),e.delegateTarget&&n.call(t,e)}}var h0=c0;const ih=Xa(h0);var d0={CONTROLS:"controls",ROOT:"root"},ke={ROOT:"root",ROOT_LEFT:"rootLeft",ROOT_RIGHT:"rootRight",ROOT_TOP:"rootTop",CONTROLS_LEFT:"controlsLeft",CONTROLS_RIGTH:"controlsRight",CONTROLS_RIGHT:"controlsRight",CONTROLS_CENTER:"controlsCenter",CONTROLS:"controls"},sh={ICON_DISABLE:"xg-icon-disable",ICON_HIDE:"xg-icon-hide"};function ru(t){return t?t.indexOf&&/^(?:http|data:|\/)/.test(t):!1}function p0(t,i){return ut(t)==="object"&&t.class&&typeof t.class=="string"?"".concat(i," ").concat(t.class):i}function v0(t,i){return ut(t)==="object"&&t.attr&&ut(t.attr)==="object"&&Object.keys(t.attr).map(function(r){i[r]=t.attr[r]}),i}function ah(t,i){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"",n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},e=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"",s=null;if(t instanceof window.Element)return g.addClass(t,r),Object.keys(n).map(function(a){t.setAttribute(a,n[a])}),t;if(ru(t)||ru(t.url))return n.src=ru(t)?t:t.url||"",s=g.createDom(t.tag||"img","",n,"xg-img ".concat(r)),s;if(typeof t=="function")try{return s=t(),s instanceof window.Element?(g.addClass(s,r),Object.keys(n).map(function(a){s.setAttribute(a,n[a])}),s):(he.logWarn("warn>>icons.".concat(i," in config of plugin named [").concat(e,"] is a function mast return an Element Object")),null)}catch(a){return he.logError("Plugin named [".concat(e,"]:createIcon"),a),null}return typeof t=="string"?g.createDomFromHtml(t,n,r):(he.logWarn("warn>>icons.".concat(i," in config of plugin named [").concat(e,"] is invalid")),null)}function g0(t,i){var r=i.config.icons||i.playerConfig.icons;Object.keys(t).map(function(n){var e=t[n],s=e&&e.class?e.class:"",a=e&&e.attr?e.attr:{},o=null;r&&r[n]&&(s=p0(r[n],s),a=v0(r[n],a),o=ah(r[n],n,s,a,i.pluginName)),!o&&e&&(o=ah(e.icon?e.icon:e,a,s,{},i.pluginName)),i.icons[n]=o})}function m0(t,i){Object.keys(t).map(function(r){Object.defineProperty(i.langText,r,{get:function(){var e=i.lang,s=i.i18n;return s[r]?s[r]:t[r]&&t[r][e]||""}})})}var me=function(t){ee(r,t);var i=te(r);function r(){var n,e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Q(this,r),n=i.call(this,e),n.__delegates=[],n}return q(r,[{key:"__init",value:function(e){if(se(re(r.prototype),"__init",this).call(this,e),!!e.root){var s=e.root,a=null;this.icons={},this.root=null,this.parent=null;var o=this.registerIcons()||{};g0(o,this),this.langText={};var u=this.registerLanguageTexts()||{};m0(u,this);var l="";try{l=this.render()}catch(h){throw he.logError("Plugin:".concat(this.pluginName,":render"),h),new Error("Plugin:".concat(this.pluginName,":render:").concat(h.message))}if(l)a=r.insert(l,s,e.index),a.setAttribute("data-index",e.index);else if(e.tag)a=g.createDom(e.tag,"",e.attr,e.name),a.setAttribute("data-index",e.index),s.appendChild(a);else return;this.root=a,this.parent=s;var c=this.config.attr||{},f=this.config.style||{};this.setAttr(c),this.setStyle(f),this.config.index&&this.root.setAttribute("data-index",this.config.index),this.__registerChildren()}}},{key:"__registerChildren",value:function(){var e=this;if(this.root){this._children=[];var s=this.children();s&&ut(s)==="object"&&Object.keys(s).length>0&&Object.keys(s).map(function(a){var o=a,u=s[o],l={root:e.root},c,f;typeof u=="function"?(c=e.config[o]||{},f=u):ut(u)==="object"&&typeof u.plugin=="function"&&(c=u.options?g.deepCopy(e.config[o]||{},u.options):e.config[o]||{},f=u.plugin),l.config=c,c.index!==void 0&&(l.index=c.index),c.root&&(l.root=c.root),e.registerPlugin(f,l,o)})}}},{key:"updateLang",value:function(e){e||(e=this.lang);function s(l,c){for(var f=0;f<l.children.length;f++)l.children[f].children.length>0?s(l.children[f],c):c(l.children[f])}var a=this.root,o=this.i18n,u=this.langText;a&&s(a,function(l){var c=l.getAttribute&&l.getAttribute("lang-key");if(c){var f=o[c.toUpperCase()]||u[c];f&&(l.innerHTML=typeof f=="function"?f(e):f)}})}},{key:"lang",get:function(){return this.player.lang}},{key:"changeLangTextKey",value:function(e){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",a=this.i18n||{},o=this.langText;e.setAttribute&&e.setAttribute("lang-key",s);var u=a[s]||o[s]||"";u&&(e.innerHTML=u)}},{key:"plugins",value:function(){return this._children}},{key:"disable",value:function(){this.config.disable=!0,g.addClass(this.find(".xgplayer-icon"),sh.ICON_DISABLE)}},{key:"enable",value:function(){this.config.disable=!1,g.removeClass(this.find(".xgplayer-icon"),sh.ICON_DISABLE)}},{key:"children",value:function(){return{}}},{key:"registerPlugin",value:function(e){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"";s.root=s.root||this.root;var o=se(re(r.prototype),"registerPlugin",this).call(this,e,s,a);return this._children.push(o),o}},{key:"registerIcons",value:function(){return{}}},{key:"registerLanguageTexts",value:function(){return{}}},{key:"find",value:function(e){if(this.root)return this.root.querySelector(e)}},{key:"bind",value:function(e,s,a){var o=this;if(arguments.length<3&&typeof s=="function")Array.isArray(e)?e.forEach(function(l){o.bindEL(l,s)}):this.bindEL(e,s);else{var u=r.delegate.call(this,this.root,e,s,a);this.__delegates=this.__delegates.concat(u)}}},{key:"unbind",value:function(e,s){var a=this;if(arguments.length<3&&typeof s=="function")Array.isArray(e)?e.forEach(function(l){a.unbindEL(l,s)}):this.unbindEL(e,s);else for(var o="".concat(e,"_").concat(s),u=0;u<this.__delegates.length;u++)if(this.__delegates[u].key===o){this.__delegates[u].destroy(),this.__delegates.splice(u,1);break}}},{key:"setStyle",value:function(e,s){var a=this;if(this.root){if(g.typeOf(e)==="String")return this.root.style[e]=s;g.typeOf(e)==="Object"&&Object.keys(e).map(function(o){a.root.style[o]=e[o]})}}},{key:"setAttr",value:function(e,s){var a=this;if(this.root){if(g.typeOf(e)==="String")return this.root.setAttribute(e,s);g.typeOf(e)==="Object"&&Object.keys(e).map(function(o){a.root.setAttribute(o,e[o])})}}},{key:"setHtml",value:function(e,s){this.root&&(this.root.innerHTML=e,typeof s=="function"&&s())}},{key:"bindEL",value:function(e,s){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;this.root&&"on".concat(e)in this.root&&typeof s=="function"&&this.root.addEventListener(e,s,a)}},{key:"unbindEL",value:function(e,s){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;this.root&&"on".concat(e)in this.root&&typeof s=="function"&&this.root.removeEventListener(e,s,a)}},{key:"show",value:function(e){if(this.root){this.root.style.display=e!==void 0?e:"block";var s=window.getComputedStyle(this.root,null),a=s.getPropertyValue("display");if(a==="none")return this.root.style.display="block"}}},{key:"hide",value:function(){this.root&&(this.root.style.display="none")}},{key:"appendChild",value:function(e,s){if(!this.root)return null;if(arguments.length<2&&arguments[0]instanceof window.Element)return this.root.appendChild(arguments[0]);if(!s||!(s instanceof window.Element))return null;try{return typeof e=="string"?this.find(e).appendChild(s):e.appendChild(s)}catch(a){return he.logError("Plugin:appendChild",a),null}}},{key:"render",value:function(){return""}},{key:"destroy",value:function(){}},{key:"__destroy",value:function(){var e=this,s=this.player;this.__delegates.map(function(a){a.destroy()}),this.__delegates=[],this._children instanceof Array&&(this._children.map(function(a){s.unRegisterPlugin(a.pluginName)}),this._children=null),this.root&&(this.root.hasOwnProperty("remove")?this.root.remove():this.root.parentNode&&this.root.parentNode.removeChild(this.root)),se(re(r.prototype),"__destroy",this).call(this),this.icons={},["root","parent"].map(function(a){e[a]=null})}}],[{key:"insert",value:function(e,s){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,o=s.children.length,u=Number(a),l=e instanceof window.Node;if(o){for(var c=0,f=null,h="";c<o;c++){f=s.children[c];var d=Number(f.getAttribute("data-index"));if(d>=u){h="beforebegin";break}else d<u&&(h="afterend")}return l?h==="afterend"?s.appendChild(e):s.insertBefore(e,f):f.insertAdjacentHTML(h,e),h==="afterend"?s.children[s.children.length-1]:s.children[c]}else return l?s.appendChild(e):s.insertAdjacentHTML("beforeend",e),s.children[s.children.length-1]}},{key:"defaultConfig",get:function(){return{}}},{key:"delegate",value:function(e,s,a,o){var u=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1,l=[];if(e instanceof window.Node&&typeof o=="function")if(Array.isArray(a))a.forEach(function(f){var h=ih(e,s,f,o,u);h.key="".concat(s,"_").concat(f),l.push(h)});else{var c=ih(e,s,a,o,u);c.key="".concat(s,"_").concat(a),l.push(c)}return l}},{key:"ROOT_TYPES",get:function(){return d0}},{key:"POSITIONS",get:function(){return ke}}]),r}(an),y0=function(){function t(){var i=this;if(Q(this,t),O(this,"__trigger",function(r){var n=new Date().getTime();i.timeStamp=n;for(var e=0;e<r.length;e++)i.__runHandler(r[e].target)}),this.__handlers=[],this.timeStamp=0,this.observer=null,!!window.ResizeObserver)try{this.observer=new window.ResizeObserver(jy(this.__trigger,100,{trailing:!0})),this.timeStamp=new Date().getTime()}catch(r){console.error(r)}}return q(t,[{key:"addObserver",value:function(r,n){if(this.observer){this.observer&&this.observer.observe(r);for(var e=r.getAttribute(ar),s=this.__handlers,a=-1,o=0;o<s.length;o++)s[o]&&r===s[o].target&&(a=o);a>-1?this.__handlers[a].handler=n:this.__handlers.push({target:r,handler:n,playerId:e})}}},{key:"unObserver",value:function(r){var n=-1;this.__handlers.map(function(e,s){r===e.target&&(n=s)});try{this.observer&&this.observer.unobserve(r)}catch{}this.observer&&this.observer.unobserve(r),n>-1&&this.__handlers.splice(n,1)}},{key:"destroyObserver",value:function(){this.observer&&this.observer.disconnect(),this.observer=null,this.__handlers=null}},{key:"__runHandler",value:function(r){for(var n=this.__handlers,e=0;e<n.length;e++)if(n[e]&&r===n[e].target){try{n[e].handler(r)}catch(s){console.error(s)}return!0}return!1}}]),t}(),Oi=null;function _0(t,i){return Oi||(Oi=new y0),Oi.addObserver(t,i),Oi}function S0(t,i){Oi.unObserver(t,i)}var qe={pluginGroup:{},init:function(i){var r=i._pluginInfoId;r||(r=new Date().getTime(),i._pluginInfoId=r),!i.config.closeResizeObserver&&_0(i.root,function(){i.resize()}),this.pluginGroup[r]={_originalOptions:i.config||{},_plugins:{}}},formatPluginInfo:function(i,r){var n=null,e=null;return i.plugin&&typeof i.plugin=="function"?(n=i.plugin,e=i.options):(n=i,e={}),r&&(e.config=r||{}),{PLUFGIN:n,options:e}},checkPluginIfExits:function(i,r){for(var n=0;n<r.length;n++)if(i.toLowerCase()===r[n].pluginName.toLowerCase())return!0;return!1},getRootByConfig:function(i,r){for(var n=Object.keys(r),e=null,s=0;s<n.length;s++)if(i.toLowerCase()===n[s].toLowerCase()){e=r[n[s]];break}return g.typeOf(e)==="Object"?{root:e.root,position:e.position}:{}},lazyRegister:function(i,r){var n=this,e=r.timeout||1500;return Promise.race([r.loader().then(function(s){var a;s&&s.__esModule?a=s.default:a=s,n.register(i,a,s.options)}),new Promise(function(s,a){setTimeout(function(){a(new Error("timeout"))},e)})])},register:function(i,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!(!i||!r||typeof r!="function"||r.prototype===void 0)){var e=i._pluginInfoId;if(!(!e||!this.pluginGroup[e])){this.pluginGroup[e]._plugins||(this.pluginGroup[e]._plugins={});var s=this.pluginGroup[e]._plugins,a=this.pluginGroup[e]._originalOptions;n.player=i;var o=n.pluginName||r.pluginName;if(!o)throw new Error("The property pluginName is necessary");if(r.isSupported&&!r.isSupported(i.config.mediaType,i.config.codecType)){console.warn("not supported plugin [".concat(o,"]"));return}n.config||(n.config={});for(var u=Object.keys(a),l=0;l<u.length;l++)if(o.toLowerCase()===u[l].toLowerCase()){var c=a[u[l]];g.typeOf(c)==="Object"?n.config=Object.assign({},n.config,a[u[l]]):g.typeOf(c)==="Boolean"&&(n.config.disable=!c);break}r.defaultConfig&&Object.keys(r.defaultConfig).forEach(function(h){typeof n.config[h]>"u"&&(n.config[h]=r.defaultConfig[h])}),n.root?typeof n.root=="string"&&(n.root=i[n.root]):n.root=i.root,n.index=n.config.index||0;try{s[o.toLowerCase()]&&(this.unRegister(e,o.toLowerCase()),console.warn("the is one plugin with same pluginName [".concat(o,"] exist, destroy the old instance")));var f=new r(n);return s[o.toLowerCase()]=f,s[o.toLowerCase()].func=r,f&&typeof f.afterCreate=="function"&&f.afterCreate(),f}catch(h){throw console.error(h),h}}}},unRegister:function(i,r){i._pluginInfoId&&(i=i._pluginInfoId),r=r.toLowerCase();try{var n=this.pluginGroup[i]._plugins[r];n&&(n.pluginName&&n.__destroy(),delete this.pluginGroup[i]._plugins[r])}catch(e){console.error("[unRegister:".concat(r,"] cgid:[").concat(i,"] error"),e)}},deletePlugin:function(i,r){var n=i._pluginInfoId;n&&this.pluginGroup[n]&&this.pluginGroup[n]._plugins&&delete this.pluginGroup[n]._plugins[r]},getPlugins:function(i){var r=i._pluginInfoId;return r&&this.pluginGroup[r]?this.pluginGroup[r]._plugins:{}},findPlugin:function(i,r){var n=i._pluginInfoId;if(!n||!this.pluginGroup[n])return null;var e=r.toLowerCase();return this.pluginGroup[n]._plugins[e]},beforeInit:function(i){var r=this;function n(e){return!e||!e.then?new Promise(function(s){s()}):e}return new Promise(function(e){if(r.pluginGroup){var s;return i._loadingPlugins&&i._loadingPlugins.length?s=Promise.all(i._loadingPlugins):s=Promise.resolve(),s.then(function(){var a=i._pluginInfoId;if(!r.pluginGroup[a]){e();return}var o=r.pluginGroup[a]._plugins,u=[];Object.keys(o).forEach(function(l){if(o[l]&&o[l].beforePlayerInit)try{var c=o[l].beforePlayerInit();u.push(n(c))}catch(f){throw u.push(n(null)),f}}),Promise.all([].concat(u)).then(function(){e()}).catch(function(l){console.error(l),e()})})}})},afterInit:function(i){var r=i._pluginInfoId;if(!(!r||!this.pluginGroup[r])){var n=this.pluginGroup[r]._plugins;Object.keys(n).forEach(function(e){n[e]&&n[e].afterPlayerInit&&n[e].afterPlayerInit()})}},setLang:function(i,r){var n=r._pluginInfoId;if(!(!n||!this.pluginGroup[n])){var e=this.pluginGroup[n]._plugins;Object.keys(e).forEach(function(s){if(e[s].updateLang)e[s].updateLang(i);else try{e[s].lang=i}catch{console.warn("".concat(s," setLang"))}})}},reRender:function(i){var r=this,n=i._pluginInfoId;if(!(!n||!this.pluginGroup[n])){var e=[],s=this.pluginGroup[n]._plugins;Object.keys(s).forEach(function(a){a!=="controls"&&s[a]&&(e.push({plugin:s[a].func,options:s[a].__args}),r.unRegister(n,a))}),e.forEach(function(a){r.register(i,a.plugin,a.options)})}},onPluginsReady:function(i){var r=i._pluginInfoId;if(!(!r||!this.pluginGroup[r])){var n=this.pluginGroup[r]._plugins||{};Object.keys(n).forEach(function(e){n[e].onPluginsReady&&typeof n[e].onPluginsReady=="function"&&n[e].onPluginsReady()})}},destroy:function(i){var r=i._pluginInfoId;if(this.pluginGroup[r]){S0(i.root);for(var n=this.pluginGroup[r]._plugins,e=0,s=Object.keys(n);e<s.length;e++){var a=s[e];this.unRegister(r,a)}delete this.pluginGroup[r],delete i._pluginInfoId}}},z={DEFAULT:"xgplayer",DEFAULT_SKIN:"xgplayer-skin-default",ENTER:"xgplayer-is-enter",PAUSED:"xgplayer-pause",PLAYING:"xgplayer-playing",ENDED:"xgplayer-ended",CANPLAY:"xgplayer-canplay",LOADING:"xgplayer-isloading",ERROR:"xgplayer-is-error",REPLAY:"xgplayer-replay",NO_START:"xgplayer-nostart",ACTIVE:"xgplayer-active",INACTIVE:"xgplayer-inactive",FULLSCREEN:"xgplayer-is-fullscreen",CSS_FULLSCREEN:"xgplayer-is-cssfullscreen",ROTATE_FULLSCREEN:"xgplayer-rotate-fullscreen",PARENT_ROTATE_FULLSCREEN:"xgplayer-rotate-parent",PARENT_FULLSCREEN:"xgplayer-fullscreen-parent",INNER_FULLSCREEN:"xgplayer-fullscreen-inner",NO_CONTROLS:"no-controls",FLEX_CONTROLS:"flex-controls",CONTROLS_FOLLOW:"controls-follow",CONTROLS_AUTOHIDE:"controls-autohide",TOP_BAR_AUTOHIDE:"top-bar-autohide",NOT_ALLOW_AUTOPLAY:"not-allow-autoplay",SEEKING:"seeking",PC:"xgplayer-pc",MOBILE:"xgplayer-mobile",MINI:"xgplayer-mini"};function oh(){return{id:"",el:null,url:"",domEventType:"default",nullUrlStart:!1,width:600,height:337.5,fluid:!1,fitVideoSize:"fixed",videoFillMode:"auto",volume:.6,autoplay:!1,autoplayMuted:!1,loop:!1,isLive:!1,zoom:1,videoInit:!0,poster:"",isMobileSimulateMode:!1,defaultPlaybackRate:1,execBeforePluginsCall:null,allowSeekAfterEnded:!0,enableContextmenu:!0,closeVideoClick:!1,closeVideoDblclick:!1,closePlayerBlur:!1,closeDelayBlur:!1,leavePlayerTime:3e3,closePlayVideoFocus:!1,closePauseVideoFocus:!1,closeFocusVideoFocus:!0,closeControlsBlur:!0,topBarAutoHide:!0,videoAttributes:{},startTime:0,seekedStatus:"play",miniprogress:!1,disableSwipeHandler:function(){},enableSwipeHandler:function(){},preProcessUrl:null,ignores:[],whitelist:[],inactive:3e3,lang:Gy(),controls:!0,marginControls:!1,fullscreenTarget:null,screenShot:!1,rotate:!1,pip:!1,download:!1,mini:!1,cssFullscreen:!0,keyShortcut:!0,presets:[],plugins:[],playbackRate:1,definition:{list:[]},playsinline:!0,customDuration:0,timeOffset:0,icons:{},i18n:[],tabindex:0,thumbnail:null,videoConfig:{},isHideTips:!1,minWaitDelay:200,commonStyle:{progressColor:"",playedColor:"",cachedColor:"",sliderBtnStyle:{},volumeColor:""}}}var E0=function(i,r){var n,e,s;r.preset&&r.options?s=new r.preset(r.options,i.config):s=new r({},i.config);var a=s,o=a.plugins,u=o===void 0?[]:o,l=a.ignores,c=l===void 0?[]:l,f=a.icons,h=f===void 0?{}:f,d=a.i18n,p=d===void 0?[]:d;i.config.plugins||(i.config.plugins=[]),i.config.ignores||(i.config.ignores=[]),(n=i.config.plugins).push.apply(n,Yt(u)),(e=i.config.ignores).push.apply(e,Yt(c)),Object.keys(h).map(function(_){i.config.icons[_]||(i.config.icons[_]=h[_])});var m=i.config.i18n||[];p.push.apply(p,Yt(m)),i.config.i18n=p},k0=function(t){ee(r,t);var i=te(r);function r(){var n;Q(this,r);for(var e=arguments.length,s=new Array(e),a=0;a<e;a++)s[a]=arguments[a];return n=i.call.apply(i,[this].concat(s)),O(x(n),"onMouseEnter",function(o){var u=x(n),l=u.player,c=u.playerConfig;c.closeControlsBlur&&l.focus({autoHide:!1})}),O(x(n),"onMouseLeave",function(o){var u=x(n),l=u.player;l.focus()}),n}return q(r,[{key:"beforeCreate",value:function(e){!e.config.mode&&le.device==="mobile"&&(e.config.mode="flex"),e.player.config.marginControls&&(e.config.autoHide=!1)}},{key:"afterCreate",value:function(){var e=this,s=this.config,a=s.disable,o=s.height,u=s.mode;if(!a){u==="flex"&&this.player.addClass(z.FLEX_CONTROLS);var l={height:"".concat(o,"px")};Object.keys(l).map(function(f){e.root.style[f]=l[f]}),this.left=this.find("xg-left-grid"),this.center=this.find("xg-center-grid"),this.right=this.find("xg-right-grid"),this.innerRoot=this.find("xg-inner-controls"),this.on(Ra,function(f){f?g.addClass(e.root,"mini-controls"):g.removeClass(e.root,"mini-controls")});var c=this.playerConfig.isMobileSimulateMode;le.device!=="mobile"&&c!=="mobile"&&(this.bind("mouseenter",this.onMouseEnter),this.bind("mouseleave",this.onMouseLeave))}}},{key:"focus",value:function(){this.player.focus({autoHide:!1})}},{key:"focusAwhile",value:function(){this.player.focus({autoHide:!0})}},{key:"blur",value:function(){this.player.blur({ignorePaused:!0})}},{key:"recoverAutoHide",value:function(){this.config.autoHide&&g.addClass(this.root,z.CONTROLS_AUTOHIDE)}},{key:"pauseAutoHide",value:function(){g.removeClass(this.root,z.CONTROLS_AUTOHIDE)}},{key:"show",value:function(e){this.root.style.display="",this.player.focus()}},{key:"hide",value:function(){this.root.style.display="none"}},{key:"mode",get:function(){return this.config.mode}},{key:"registerPlugin",value:function(e){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=arguments.length>2?arguments[2]:void 0;if(this.root){var o=e.defaultConfig||{};if(!s.root){var u=s.position?s.position:s.config&&s.config.position?s.config.position:o.position;switch(u){case ke.CONTROLS_LEFT:s.root=this.left;break;case ke.CONTROLS_RIGHT:s.root=this.right;break;case ke.CONTROLS_CENTER:s.root=this.center;break;case ke.CONTROLS:s.root=this.root;break;default:s.root=this.left}return se(re(r.prototype),"registerPlugin",this).call(this,e,s,a)}}}},{key:"destroy",value:function(){le.device!=="mobile"&&(this.unbind("mouseenter",this.onMouseEnter),this.unbind("mouseleave",this.onMouseLeave))}},{key:"render",value:function(){var e=this.config,s=e.mode,a=e.autoHide,o=e.initShow,u=e.disable;if(!u){var l=g.classNames({"xgplayer-controls":!0},{"flex-controls":s==="flex"},{"bottom-controls":s==="bottom"},O({},z.CONTROLS_AUTOHIDE,a),{"xgplayer-controls-initshow":o||!a});return'<xg-controls class="'.concat(l,`" unselectable="on">
    <xg-inner-controls class="xg-inner-controls xg-pos">
      <xg-left-grid class="xg-left-grid">
      </xg-left-grid>
      <xg-center-grid class="xg-center-grid"></xg-center-grid>
      <xg-right-grid class="xg-right-grid">
      </xg-right-grid>
    </xg-inner-controls>
    </xg-controls>`)}}}],[{key:"pluginName",get:function(){return"controls"}},{key:"defaultConfig",get:function(){return{disable:!1,autoHide:!0,mode:"",initShow:!1}}}]),r}(me),w0={LANG:"en",TEXT:{ERROR_TYPES:{network:{code:1,msg:"video download error"},mse:{code:2,msg:"stream append error"},parse:{code:3,msg:"parsing error"},format:{code:4,msg:"wrong format"},decoder:{code:5,msg:"decoding error"},runtime:{code:6,msg:"grammatical errors"},timeout:{code:7,msg:"play timeout"},other:{code:8,msg:"other errors"}},HAVE_NOTHING:"There is no information on whether audio/video is ready",HAVE_METADATA:"Audio/video metadata is ready ",HAVE_CURRENT_DATA:"Data about the current play location is available, but there is not enough data to play the next frame/millisecond",HAVE_FUTURE_DATA:"Current and at least one frame of data is available",HAVE_ENOUGH_DATA:"The available data is sufficient to start playing",NETWORK_EMPTY:"Audio/video has not been initialized",NETWORK_IDLE:"Audio/video is active and has been selected for resources, but no network is used",NETWORK_LOADING:"The browser is downloading the data",NETWORK_NO_SOURCE:"No audio/video source was found",MEDIA_ERR_ABORTED:"The fetch process is aborted by the user",MEDIA_ERR_NETWORK:"An error occurred while downloading",MEDIA_ERR_DECODE:"An error occurred while decoding",MEDIA_ERR_SRC_NOT_SUPPORTED:"Audio/video is not supported",REPLAY:"Replay",ERROR:"Network is offline",PLAY_TIPS:"Play",PAUSE_TIPS:"Pause",PLAYNEXT_TIPS:"Play next",DOWNLOAD_TIPS:"Download",ROTATE_TIPS:"Rotate",RELOAD_TIPS:"Reload",FULLSCREEN_TIPS:"Fullscreen",EXITFULLSCREEN_TIPS:"Exit fullscreen",CSSFULLSCREEN_TIPS:"Cssfullscreen",EXITCSSFULLSCREEN_TIPS:"Exit cssfullscreen",TEXTTRACK:"Caption",PIP:"PIP",SCREENSHOT:"Screenshot",LIVE:"LIVE",OFF:"Off",OPEN:"Open",MINI_DRAG:"Click and hold to drag",MINISCREEN:"Miniscreen",REFRESH_TIPS:"Please Try",REFRESH:"Refresh",FORWARD:"forward",LIVE_TIP:"Live"}},wt={lang:{},langKeys:[],textKeys:[]};function os(t,i){return Object.keys(i).forEach(function(r){var n=g.typeOf(i[r]),e=g.typeOf(t[r]);if(n==="Array"){var s;e!=="Array"&&(t[r]=[]),(s=t[r]).push.apply(s,Yt(i[r]))}else n==="Object"?(e!=="Object"&&(t[r]={}),os(t[r],i[r])):t[r]=i[r]}),t}function Iv(){Object.keys(wt.lang.en).map(function(t){wt.textKeys[t]=t})}function T0(t,i){var r=[];if(i||(i=wt),!!i.lang){g.typeOf(t)!=="Array"?r=Object.keys(t).map(function(s){var a=s==="zh"?"zh-cn":s;return{LANG:a,TEXT:t[s]}}):r=t;var n=i,e=n.lang;r.map(function(s){s.LANG==="zh"&&(s.LANG="zh-cn"),e[s.LANG]?os(e[s.LANG]||{},s.TEXT||{}):Ac(s,i)}),Iv()}}function Ac(t,i){var r=t.LANG;if(i||(i=wt),!!i.lang){var n=t.TEXT||{};r==="zh"&&(r="zh-cn"),i.lang[r]?os(i.lang[r],n):(i.langKeys.push(r),i.lang[r]=n),Iv()}}function C0(t){var i,r={lang:{},langKeys:[],textKeys:{},pId:t};return os(r.lang,wt.lang),(i=r.langKeys).push.apply(i,Yt(wt.langKeys)),os(r.textKeys,wt.textKeys),r}Ac(w0);var Qr={get textKeys(){return wt.textKeys},get langKeys(){return wt.langKeys},get lang(){var t={};return wt.langKeys.map(function(i){t[i]=wt.lang[i]}),wt.lang["zh-cn"]&&(t.zh=wt.lang["zh-cn"]||{}),t},extend:T0,use:Ac,init:C0},ve={INITIAL:1,READY:2,ATTACHING:3,ATTACHED:4,NOTALLOW:5,RUNNING:6,ENDED:7,DESTROYED:8},uh=["ERROR","INITIAL","READY","ATTACHING","ATTACHED","NOTALLOW","RUNNING","ENDED","DESTROYED"],ht={},iu=null,Lv=function(t){ee(r,t);var i=te(r);function r(){return Q(this,r),i.apply(this,arguments)}return q(r,[{key:"add",value:function(e){e&&(ht[e.playerId]=e,Object.keys(ht).length===1&&this.setActive(e.playerId,!0))}},{key:"remove",value:function(e){e&&(e.isUserActive,delete ht[e.playerId])}},{key:"_iterate",value:function(e){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;for(var a in ht)if(Object.prototype.hasOwnProperty.call(ht,a)){var o=ht[a];if(s){if(e(o))break}else e(o)}}},{key:"forEach",value:function(e){this._iterate(e)}},{key:"find",value:function(e){var s=null;return this._iterate(function(a){var o=e(a);return o&&(s=a),o},!0),s}},{key:"findAll",value:function(e){var s=[];return this._iterate(function(a){e(a)&&s.push(a)}),s}},{key:"setActive",value:function(e){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(ht[e])return s?this.forEach(function(a){e===a.playerId?(a.isUserActive=!0,a.isInstNext=!1):a.isUserActive=!1}):ht[e].isUserActive=s,e}},{key:"getActiveId",value:function(){for(var e=Object.keys(ht),s=0;s<e.length;s++){var a=ht[e[s]];if(a&&a.isUserActive)return e[s]}return null}},{key:"setNext",value:function(e){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(ht[e])return s?this.forEach(function(a){e===a.playerId?(a.isUserActive=!1,a.isInstNext=!0):a.isInstNext=!1}):ht[e].isInstNext=s,e}}],[{key:"getInstance",value:function(){return iu||(iu=new r),iu}}]),r}(uv.EventEmitter);function b0(t){for(var i=Object.keys(ht),r=0;r<i.length;r++){var n=ht[i[r]];if(n.root===t)return n}return null}var P0=["play","pause","replay","retry"],lh=0,ch=0,Pn=null,mo=function(t){ee(r,t);var i=te(r);function r(n){var e;Q(this,r);var s=g.deepMerge(oh(),n);e=i.call(this,s),O(x(e),"canPlayFunc",function(){if(e.config){var p=e.config,m=p.autoplay,_=p.defaultPlaybackRate;he.logInfo("player","canPlayFunc, startTime",e.__startTime),e.__startTime>0&&e.duration>0&&(e.currentTime=e.__startTime>e.duration?e.duration:e.__startTime,e.__startTime=-1),e.playbackRate=_,(m||e._useAutoplay)&&e.mediaPlay(),e.off(pn,e.canPlayFunc),e.removeClass(z.ENTER)}}),O(x(e),"onFullscreenChange",function(p,m){var _=function(){g.setTimeout(x(e),function(){e.resize()},100)},v=g.getFullScreenEl();e._fullActionFrom?e._fullActionFrom="":e.emit(Na,{eventType:"system",action:"switch_fullscreen",pluginName:"player",currentTime:e.currentTime,duration:e.duration,props:[{prop:"fullscreen",from:!0,to:!1}]});var y=Wy(v,e.playerId,ar);if(m||v&&(v===e._fullscreenEl||y))_(),!e.config.closeFocusVideoFocus&&e.media.focus(),e.fullscreen=!0,e.changeFullStyle(e.root,v,z.FULLSCREEN),e.emit(cn,!0,e._fullScreenOffset),e.cssfullscreen&&e.exitCssFullscreen();else if(e.fullscreen){_();var S=x(e),E=S._fullScreenOffset,T=S.config;if(T.needFullscreenScroll?(window.scrollTo(E.left,E.top),g.setTimeout(x(e),function(){e.fullscreen=!1,e._fullScreenOffset=null},100)):(!e.config.closeFocusVideoFocus&&e.media.focus(),e.fullscreen=!1,e._fullScreenOffset=null),e.cssfullscreen)e.removeClass(z.FULLSCREEN);else{var A=e._fullscreenEl;!A&&(e.root.contains(p.target)||p.target===e.root)&&(A=p.target),e.recoverFullStyle(e.root,A,z.FULLSCREEN)}e._fullscreenEl=null,e.emit(cn,!1)}}),O(x(e),"_onWebkitbeginfullscreen",function(p){e._fullscreenEl=e.media,e.onFullscreenChange(p,!0)}),O(x(e),"_onWebkitendfullscreen",function(p){e.onFullscreenChange(p,!1)}),xv(x(e),P0),e.config=s,e._pluginInfoId=g.generateSessionId(),Uy(x(e));var a=e.constructor.defaultPreset;if(e.config.presets.length){var o=e.config.presets.indexOf("default");o>=0&&a&&(e.config.presets[o]=a)}else a&&e.config.presets.push(a);e.userTimer=null,e.waitTimer=null,e.handleSource=!0,e._state=ve.INITIAL,e.isError=!1,e._hasStart=!1,e.isSeeking=!1,e.isCanplay=!1,e._useAutoplay=!1,e.__startTime=-1,e.rotateDeg=0,e.isActive=!1,e.fullscreen=!1,e.cssfullscreen=!1,e.isRotateFullscreen=!1,e._fullscreenEl=null,e.timeSegments=[],e._cssfullscreenEl=null,e.curDefinition=null,e._orgCss="",e._fullScreenOffset=null,e._videoHeight=0,e._videoWidth=0,e.videoPos={pi:1,scale:0,rotate:-1,x:0,y:0,h:-1,w:-1,vy:0,vx:0},e.sizeInfo={width:0,height:0,left:0,top:0},e._accPlayed={t:0,acc:0,loopAcc:0},e._offsetInfo={currentTime:-1,duration:0},e.innerContainer=null,e.controls=null,e.topBar=null,e.root=null,e.__i18n=Qr.init(e._pluginInfoId),le.os.isAndroid&&le.osVersion>0&&le.osVersion<6&&(e.config.autoplay=!1),e.database=new s0,e.isUserActive=!1,e._onceSeekCanplay=null,e._isPauseBeforeSeek=0,e.innerStates={isActiveLocked:!1},e.instManager=Pn;var u=e._initDOM();if(!u)return console.error(new Error("can't find the dom which id is ".concat(e.config.id," or this.config.el does not exist"))),kc(e);var l=e.config,c=l.definition,f=c===void 0?{}:c,h=l.url;if(!h&&f.list&&f.list.length>0){var d=f.list.find(function(p){return p.definition&&p.definition===f.defaultDefinition});d||(f.defaultDefinition=f.list[0].definition,d=f.list[0]),e.config.url=d.url,e.curDefinition=d}return e._bindEvents(),e._registerPresets(),e._registerPlugins(),qe.onPluginsReady(x(e)),e.getInitDefinition(),e.setState(ve.READY),g.setTimeout(x(e),function(){e.emit(bc)},0),e.onReady&&e.onReady(),(e.config.videoInit||e.config.autoplay)&&(!e.hasStart||e.state<ve.ATTACHED)&&e.start(),e}return q(r,[{key:"_initDOM",value:function(){var e,s=this;if(this.root=this.config.id?document.getElementById(this.config.id):null,!this.root){var a=this.config.el;if(a&&a.nodeType===1)this.root=a;else return this.emit(yi,new as("use",this.config.vid,{line:32,handle:"Constructor",msg:"container id can't be empty"})),console.error("this.confg.id or this.config.el can't be empty"),!1}var o=b0(this.root);o&&(he.logWarn("The is an Player instance already exists in this.root, destroy it and reinitialize"),o.destroy()),this.root.setAttribute(ar,this.playerId),(e=Pn)===null||e===void 0||e.add(this),qe.init(this),this._initBaseDoms();var u=this.constructor.XgVideoProxy;if(u&&this.mediaConfig.mediaType===u.mediaType){var l=this.innerContainer||this.root;this.detachVideoEvents(this.media);var c=new u(l,this.config,this.mediaConfig);this.attachVideoEvents(c),this.media=c}if(this.media.setAttribute(ar,this.playerId),this.config.controls){var f=this.config.controls.root||null,h=qe.register(this,k0,{root:f});this.controls=h}var d=this.config.isMobileSimulateMode==="mobile"?"mobile":le.device;if(this.addClass("".concat(z.DEFAULT," ").concat(z.INACTIVE," xgplayer-").concat(d," ").concat(this.config.controls?"":z.NO_CONTROLS)),this.config.autoplay?this.addClass(z.ENTER):this.addClass(z.NO_START),this.config.fluid){var p=this.config,m=p.width,_=p.height;(typeof m!="number"||typeof _!="number")&&(m=600,_=337.5);var v={width:"100%",height:"0","max-width":"100%","padding-top":"".concat(_*100/m,"%")};Object.keys(v).forEach(function(P){s.root.style[P]=v[P]})}else["width","height"].forEach(function(P){s.config[P]&&(typeof s.config[P]!="number"?s.root.style[P]=s.config[P]:s.root.style[P]="".concat(s.config[P],"px"))});var y=this.root.getBoundingClientRect(),S=y.width,E=y.height,T=y.left,A=y.top;return this.sizeInfo.width=S,this.sizeInfo.height=E,this.sizeInfo.left=T,this.sizeInfo.top=A,!0}},{key:"_initBaseDoms",value:function(){this.topBar=null,this.leftBar=null,this.rightBar=null,this.config.marginControls&&(this.innerContainer=g.createDom("xg-video-container","",{"data-index":-1},"xg-video-container"),this.root.appendChild(this.innerContainer))}},{key:"_bindEvents",value:function(){var e=this;["focus","blur"].forEach(function(s){e.on(s,e["on"+s.charAt(0).toUpperCase()+s.slice(1)])}),Jf.forEach(function(s){document&&document.addEventListener(s,e.onFullscreenChange)}),le.os.isIos&&(this.media.addEventListener("webkitbeginfullscreen",this._onWebkitbeginfullscreen),this.media.addEventListener("webkitendfullscreen",this._onWebkitendfullscreen)),this.once(wn,this.resize),this.playFunc=function(){e.config.closeFocusVideoFocus||e.media.focus()},this.once(xt,this.playFunc)}},{key:"_unbindEvents",value:function(){var e=this;this.root.removeEventListener("mousemove",this.mousemoveFunc),Jf.forEach(function(s){document.removeEventListener(s,e.onFullscreenChange)}),this.playFunc&&this.off(xt,this.playFunc),this.off(pn,this.canPlayFunc),this.media.removeEventListener("webkitbeginfullscreen",this._onWebkitbeginfullscreen),this.media.removeEventListener("webkitendfullscreen",this._onWebkitendfullscreen)}},{key:"_clearUserTimer",value:function(){this.userTimer&&(g.clearTimeout(this,this.userTimer),this.userTimer=null)}},{key:"_startInit",value:function(e){var s=this;if(this.media&&!((!e||e===""||g.typeOf(e)==="Array"&&e.length===0)&&(e="",this.emit(pv),he.logWarn("config.url is null, please get url and run player._startInit(url)"),this.config.nullUrlStart))){this.handleSource&&(this._detachSourceEvents(this.media),g.typeOf(e)==="Array"&&e.length>0?this._attachSourceEvents(this.media,e):!this.media.src||this.media.src!==e?this.media.src=e:e||this.media.removeAttribute("src")),g.typeOf(this.config.volume)==="Number"&&(this.volume=this.config.volume);var a=this.innerContainer?this.innerContainer:this.root;this.media instanceof window.Element&&!a.contains(this.media)&&a.insertBefore(this.media,a.firstChild);var o=this.media.readyState;he.logInfo("_startInit readyState",o),this.config.autoplay&&(!g.isMSE(this.media)&&this.load(),(le.os.isIpad||le.os.isPhone)&&this.mediaPlay());var u=this.config.startTime;this.__startTime=u>0?u:-1,this.config.startTime=0,o>=2&&this.duration>0?this.canPlayFunc():this.on(pn,this.canPlayFunc),(!this.hasStart||this.state<ve.ATTACHED)&&qe.afterInit(this),this.hasStart=!0,this.setState(ve.ATTACHED),g.setTimeout(this,function(){s.emit(po)},0)}}},{key:"_registerPlugins",value:function(){var e=this,s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this._loadingPlugins=[];var a=this.config.ignores||[],o=this.config.plugins||[],u=this.config.i18n||[];s&&Qr.extend(u,this.__i18n);var l=a.join("||").toLowerCase().split("||"),c=this.plugins;o.forEach(function(f){try{var h=f.plugin?f.plugin.pluginName:f.pluginName;if(h&&l.indexOf(h.toLowerCase())>-1)return null;if(!s&&c[h.toLowerCase()])return;if(f.lazy&&f.loader){var d=qe.lazyRegister(e,f);f.forceBeforeInit&&(d.then(function(){e._loadingPlugins.splice(e._loadingPlugins.indexOf(d),1)}).catch(function(p){he.logError("_registerPlugins:loadingPlugin",p),e._loadingPlugins.splice(e._loadingPlugins.indexOf(d),1)}),e._loadingPlugins.push(d));return}return e.registerPlugin(f)}catch(p){he.logError("_registerPlugins:",p)}})}},{key:"_registerPresets",value:function(){var e=this;this.config.presets.forEach(function(s){E0(e,s)})}},{key:"_getRootByPosition",value:function(e){var s=null;switch(e){case ke.ROOT_RIGHT:this.rightBar||(this.rightBar=g.createPositionBar("xg-right-bar",this.root)),s=this.rightBar;break;case ke.ROOT_LEFT:this.leftBar||(this.leftBar=g.createPositionBar("xg-left-bar",this.root)),s=this.leftBar;break;case ke.ROOT_TOP:this.topBar||(this.topBar=g.createPositionBar("xg-top-bar",this.root),this.config.topBarAutoHide&&g.addClass(this.topBar,z.TOP_BAR_AUTOHIDE)),s=this.topBar;break;default:s=this.innerContainer||this.root;break}return s}},{key:"registerPlugin",value:function(e,s){var a=qe.formatPluginInfo(e,s),o=a.PLUFGIN,u=a.options,l=this.config.plugins,c=qe.checkPluginIfExits(o.pluginName,l);!c&&l.push(o);var f=qe.getRootByConfig(o.pluginName,this.config);f.root&&(u.root=f.root),f.position&&(u.position=f.position);var h=u.position?u.position:u.config&&u.config.position||o.defaultConfig&&o.defaultConfig.position;return!u.root&&typeof h=="string"&&h.indexOf("controls")>-1?this.controls&&this.controls.registerPlugin(o,u,o.pluginName):(u.root||(u.root=this._getRootByPosition(h)),qe.register(this,o,u))}},{key:"deregister",value:function(e){typeof e=="string"?qe.unRegister(this,e):e instanceof an&&qe.unRegister(this,e.pluginName)}},{key:"unRegisterPlugin",value:function(e){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;this.deregister(e),s&&this.removePluginFromConfig(e)}},{key:"removePluginFromConfig",value:function(e){var s;if(typeof e=="string"?s=e:e instanceof an&&(s=e.pluginName),!!s)for(var a=this.config.plugins.length-1;a>-1;a--){var o=this.config.plugins[a];if(o.pluginName.toLowerCase()===s.toLowerCase()){this.config.plugins.splice(a,1);break}}}},{key:"plugins",get:function(){return qe.getPlugins(this)}},{key:"getPlugin",value:function(e){var s=qe.findPlugin(this,e);return s&&s.pluginName?s:null}},{key:"addClass",value:function(e){this.root&&(g.hasClass(this.root,e)||g.addClass(this.root,e))}},{key:"removeClass",value:function(e){this.root&&g.removeClass(this.root,e)}},{key:"hasClass",value:function(e){if(this.root)return g.hasClass(this.root,e)}},{key:"setAttribute",value:function(e,s){this.root&&this.root.setAttribute(e,s)}},{key:"removeAttribute",value:function(e,s){this.root&&this.root.removeAttribute(e,s)}},{key:"start",value:function(e){var s=this;if(!(this.state>ve.ATTACHING))return!e&&!this.config.url&&this.getInitDefinition(),this.hasStart=!0,this.setState(ve.ATTACHING),this._registerPlugins(!1),qe.beforeInit(this).then(function(){if(s.config){e||(e=s.url||s.config.url);var a=s._preProcessUrl(e),o=s._startInit(a.url);return o}}).catch(function(a){throw a.fileName="player",a.lineNumber="236",he.logError("start:beforeInit:",a),a})}},{key:"switchURL",value:function(e,s){var a=this,o=e;g.typeOf(e)==="Object"&&(o=e.url),o=this._preProcessUrl(o).url;var u=this.currentTime;this.__startTime=u;var l=this.paused&&!this.isError;return this.src=o,new Promise(function(c,f){var h=function(m){a.off("timeupdate",d),a.off("canplay",d),f(m)},d=function(){a.duration>0&&a.__startTime>0&&(a.currentTime=a.__startTime,a.__startTime=-1),l&&a.pause(),a.off("error",h),c(!0)};if(a.once("error",h),!o){a.errorHandler("error",{code:6,message:"empty_src"});return}le.os.isAndroid?a.once("timeupdate",d):a.once("canplay",d),a.play()})}},{key:"videoPlay",value:function(){this.mediaPlay()}},{key:"mediaPlay",value:function(){var e=this;if(!this.hasStart&&this.state<ve.ATTACHED){this.removeClass(z.NO_START),this.addClass(z.ENTER),this.start(),this._useAutoplay=!0;return}this.state<ve.RUNNING&&(this.removeClass(z.NO_START),!this.isCanplay&&this.addClass(z.ENTER));var s=se(re(r.prototype),"play",this).call(this);return s!==void 0&&s&&s.then?s.then(function(){e.removeClass(z.NOT_ALLOW_AUTOPLAY),e.addClass(z.PLAYING),e.state<ve.RUNNING&&(he.logInfo(">>>>playPromise.then"),e.setState(ve.RUNNING),e.emit(pr))}).catch(function(a){if(he.logWarn(">>>>playPromise.catch",a.name),e.media&&e.media.error){e.onError(),e.removeClass(z.ENTER);return}a.name==="NotAllowedError"&&(e._errorTimer=g.setTimeout(e,function(){e._errorTimer=null,e.emit(Pc),e.addClass(z.NOT_ALLOW_AUTOPLAY),e.removeClass(z.ENTER),e.pause(),e.setState(ve.NOTALLOW)},0))}):(he.logWarn("video.play not return promise"),this.state<ve.RUNNING&&(this.setState(ve.RUNNING),this.removeClass(z.NOT_ALLOW_AUTOPLAY),this.removeClass(z.NO_START),this.removeClass(z.ENTER),this.addClass(z.PLAYING),this.emit(pr))),s}},{key:"mediaPause",value:function(){se(re(r.prototype),"pause",this).call(this)}},{key:"videoPause",value:function(){se(re(r.prototype),"pause",this).call(this)}},{key:"play",value:function(){var e=this;return this.removeClass(z.PAUSED),fn(this,"play",function(){return e.mediaPlay()})}},{key:"pause",value:function(){var e=this;fn(this,"pause",function(){se(re(r.prototype),"pause",e).call(e)})}},{key:"seek",value:function(e,s){var a=this;if(!(!this.media||Number.isNaN(Number(e))||!this.hasStart)){var o=this.config,u=o.isSeekedPlay,l=o.seekedStatus,c=s||(u?"play":l);e=e<0?0:e>this.duration?parseInt(this.duration,10):e,!this._isPauseBeforeSeek&&(this._isPauseBeforeSeek=this.paused?2:1),this._onceSeekCanplay&&this.off(mn,this._onceSeekCanplay),this._onceSeekCanplay=function(){switch(a.removeClass(z.ENTER),a.isSeeking=!1,c){case"play":a.play();break;case"pause":a.pause();break;default:a._isPauseBeforeSeek>1||a.paused?a.pause():a.play()}a._isPauseBeforeSeek=0,a._onceSeekCanplay=null},this.once(mn,this._onceSeekCanplay),this.state<ve.RUNNING?(this.removeClass(z.NO_START),this.currentTime=e,this.play()):this.currentTime=e}}},{key:"getInitDefinition",value:function(){var e=this,s=this.config,a=s.definition,o=s.url;!o&&a&&a.list&&a.list.length>0&&a.defaultDefinition&&a.list.map(function(u){u.definition===a.defaultDefinition&&(e.config.url=u.url,e.curDefinition=u)})}},{key:"changeDefinition",value:function(e,s){var a=this,o=this.config.definition;if(Array.isArray(o==null?void 0:o.list)&&o.list.forEach(function(l){(e==null?void 0:e.definition)===l.definition&&(a.curDefinition=l)}),e!=null&&e.bitrate&&typeof e.bitrate!="number"&&(e.bitrate=parseInt(e.bitrate,10)||0),this.emit(xc,{from:s,to:e}),!this.hasStart){this.config.url=e.url;return}var u=this.switchURL(e.url,Oe({seamless:o.seamless!==!1&&typeof MediaSource<"u"&&typeof MediaSource.isTypeSupported=="function"},e));u&&u.then?u.then(function(){a.emit(yl,{from:s,to:e})}):this.emit(yl,{from:s,to:e})}},{key:"reload",value:function(){this.load(),this.reloadFunc=function(){this.play()},this.once(wn,this.reloadFunc)}},{key:"resetState",value:function(){var e=this,s=z.NOT_ALLOW_AUTOPLAY,a=z.PLAYING,o=z.NO_START,u=z.PAUSED,l=z.REPLAY,c=z.ENTER,f=z.ENDED,h=z.ERROR,d=z.LOADING,p=[s,a,o,u,l,c,f,h,d];this.hasStart=!1,this.isError=!1,this._useAutoplay=!1,this.mediaPause(),this._accPlayed.acc=0,this._accPlayed.t=0,this._accPlayed.loopAcc=0,p.forEach(function(m){e.removeClass(m)}),this.addClass(z.NO_START),this.emit(go)}},{key:"reset",value:function(){var e=this,s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],a=arguments.length>1?arguments[1]:void 0;this.resetState();var o=this.plugins;if(o&&(s.map(function(l){e.deregister(l)}),a)){var u=oh();Object.keys(this.config).keys(function(l){e.config[l]!=="undefined"&&(l==="plugins"||l==="presets"||l==="el"||l==="id")&&(e.config[l]=u[l])})}}},{key:"destroy",value:function(){var e,s=this,a=this.innerContainer,o=this.root,u=this.media;if(!(!o||!u)){if(this.hasStart=!1,this._useAutoplay=!1,o.removeAttribute(ar),this.updateAcc("destroy"),this._unbindEvents(),this._detachSourceEvents(this.media),g.clearAllTimers(this),this.emit(vo),(e=Pn)===null||e===void 0||e.remove(this),qe.destroy(this),Av(this),se(re(r.prototype),"destroy",this).call(this),this.fullscreen&&this._fullscreenEl===this.root&&this.exitFullscreen(),a)for(var l=a.children,c=0;c<l.length;c++)a.removeChild(l[c]);!a&&u instanceof window.Node&&o.contains(u)&&o.removeChild(u),["topBar","leftBar","rightBar","innerContainer"].map(function(h){s[h]&&o.removeChild(s[h]),s[h]=null});var f=o.className.split(" ");f.length>0?o.className=f.filter(function(h){return h.indexOf("xgplayer")<0}).join(" "):o.className="",this.removeAttribute("data-xgfill"),["isSeeking","isCanplay","isActive","cssfullscreen","fullscreen"].forEach(function(h){s[h]=!1})}}},{key:"replay",value:function(){var e=this;this.removeClass(z.ENDED),this.currentTime=0,this.isSeeking=!1,fn(this,"replay",function(){e.once(mn,function(){var s=e.mediaPlay();s&&s.catch&&s.catch(function(a){console.log(a)})}),e.emit(Da),e.onPlay()})}},{key:"retry",value:function(){var e=this;this.removeClass(z.ERROR),this.addClass(z.LOADING),fn(this,"retry",function(){var s=e.currentTime,a=e.config.url,o=g.isMSE(e.media)?{url:a}:e._preProcessUrl(a);e.src=o.url,!e.config.isLive&&(e.currentTime=s),e.once(pn,function(){e.mediaPlay()})})}},{key:"changeFullStyle",value:function(e,s,a,o){e&&(o||(o=z.PARENT_FULLSCREEN),this._orgCss||(this._orgCss=g.filterStyleFromText(e)),g.addClass(e,a),s&&s!==e&&!this._orgPCss&&(this._orgPCss=g.filterStyleFromText(s),g.addClass(s,o),s.setAttribute(ar,this.playerId)))}},{key:"recoverFullStyle",value:function(e,s,a,o){o||(o=z.PARENT_FULLSCREEN),this._orgCss&&(g.setStyleFromCsstext(e,this._orgCss),this._orgCss=""),g.removeClass(e,a),s&&s!==e&&this._orgPCss&&(g.setStyleFromCsstext(s,this._orgPCss),this._orgPCss="",g.removeClass(s,o),s.removeAttribute(ar))}},{key:"getFullscreen",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.config.fullscreenTarget,s=this.root,a=this.media;(e==="video"||e==="media")&&(e=this[e]),e||(e=s),this._fullScreenOffset={top:g.scrollTop(),left:g.scrollLeft()},this._fullscreenEl=e,this._fullActionFrom="get";var o=g.getFullScreenEl();if(o===this._fullscreenEl)return this.onFullscreenChange(),Promise.resolve();try{for(var u=0;u<eh.length;u++){var l=eh[u];if(e[l]){var c=l==="webkitRequestFullscreen"?e.webkitRequestFullscreen(window.Element.ALLOW_KEYBOARD_INPUT):e[l]();return c&&c.then?c:Promise.resolve()}}return a.fullscreenEnabled||a.webkitSupportsFullscreen?(a.webkitEnterFullscreen(),Promise.resolve()):Promise.reject(new Error("call getFullscreen fail"))}catch{return Promise.reject(new Error("call getFullscreen fail"))}}},{key:"exitFullscreen",value:function(e){if(this.isRotateFullscreen&&this.exitRotateFullscreen(),!(!this._fullscreenEl&&!g.getFullScreenEl())){this.root;var s=this.media;this._fullActionFrom="exit";try{for(var a=0;a<th.length;a++){var o=th[a];if(document[o]){var u=document[o]();return u&&u.then?u:Promise.resolve()}}return s&&s.webkitSupportsFullscreen?(s.webkitExitFullScreen(),Promise.resolve()):Promise.reject(new Error("call exitFullscreen fail"))}catch{return Promise.reject(new Error("call exitFullscreen fail"))}}}},{key:"getCssFullscreen",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.config.fullscreenTarget;this.isRotateFullscreen?this.exitRotateFullscreen():this.fullscreen&&this.exitFullscreen();var s=e?"".concat(z.INNER_FULLSCREEN," ").concat(z.CSS_FULLSCREEN):z.CSS_FULLSCREEN;this.changeFullStyle(this.root,e,s);var a=this.config.fullscreen,o=a===void 0?{}:a,u=o.useCssFullscreen===!0||typeof o.useCssFullscreen=="function"&&o.useCssFullscreen();u&&(this.fullscreen=!0,this.emit(cn,!0)),this._cssfullscreenEl=e,this.cssfullscreen=!0,this.emit(Oa,!0)}},{key:"exitCssFullscreen",value:function(){var e=this._cssfullscreenEl?"".concat(z.INNER_FULLSCREEN," ").concat(z.CSS_FULLSCREEN):z.CSS_FULLSCREEN;if(!this.fullscreen)this.recoverFullStyle(this.root,this._cssfullscreenEl,e);else{var s=this.config.fullscreen,a=s===void 0?{}:s,o=a.useCssFullscreen===!0||typeof a.useCssFullscreen=="function"&&a.useCssFullscreen();o?(this.recoverFullStyle(this.root,this._cssfullscreenEl,e),this.fullscreen=!1,this.emit(cn,!1)):this.removeClass(e)}this._cssfullscreenEl=null,this.cssfullscreen=!1,this.emit(Oa,!1)}},{key:"getRotateFullscreen",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.config.fullscreenTarget;this.cssfullscreen&&this.exitCssFullscreen(e);var s=e?"".concat(z.INNER_FULLSCREEN," ").concat(z.ROTATE_FULLSCREEN):z.ROTATE_FULLSCREEN;this._fullscreenEl=e||this.root,this.changeFullStyle(this.root,e,s,z.PARENT_ROTATE_FULLSCREEN),this.isRotateFullscreen=!0,this.fullscreen=!0,this.setRotateDeg(90),this._rootStyle=this.root.getAttribute("style"),this.root.style.width="".concat(window.innerHeight,"px"),this.emit(cn,!0)}},{key:"exitRotateFullscreen",value:function(e){var s=this._fullscreenEl!==this.root?"".concat(z.INNER_FULLSCREEN," ").concat(z.ROTATE_FULLSCREEN):z.ROTATE_FULLSCREEN;this.recoverFullStyle(this.root,this._fullscreenEl,s,z.PARENT_ROTATE_FULLSCREEN),this.isRotateFullscreen=!1,this.fullscreen=!1,this.setRotateDeg(0),this.emit(cn,!1),this._rootStyle&&(this.root.style.style=this._rootStyle,this._rootStyle=!1)}},{key:"setRotateDeg",value:function(e){window.orientation===90||window.orientation===-90?this.rotateDeg=0:this.rotateDeg=e}},{key:"focus",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{autoHide:!this.config.closeDelayBlur,delay:this.config.inactive};if(this.isActive){this.onFocus(e);return}this.emit(Cc,Oe({paused:this.paused,ended:this.ended},e))}},{key:"blur",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{ignorePaused:!1};if(!this.isActive){this.onBlur(e);return}this._clearUserTimer(),this.emit(dv,Oe({paused:this.paused,ended:this.ended},e))}},{key:"onFocus",value:function(){var e=this,s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{autoHide:!0,delay:3e3},a=this.innerStates;if(this.isActive=!0,this.removeClass(z.INACTIVE),this._clearUserTimer(),s.isLock!==void 0&&(a.isActiveLocked=s.isLock),s.autoHide===!1||s.isLock===!0||a.isActiveLocked){this._clearUserTimer();return}var o=s&&s.delay?s.delay:this.config.inactive;this.userTimer=g.setTimeout(this,function(){e.userTimer=null,e.blur()},o)}},{key:"onBlur",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=e.ignorePaused,a=s===void 0?!1:s;if(!this.innerStates.isActiveLocked){var o=this.config.closePauseVideoFocus;this.isActive=!1,(a||o||!this.paused&&!this.ended)&&this.addClass(z.INACTIVE)}}},{key:"onEmptied",value:function(){this.updateAcc("emptied")}},{key:"onCanplay",value:function(){this.removeClass(z.ENTER),this.removeClass(z.ERROR),this.removeClass(z.LOADING),this.isCanplay=!0,this.waitTimer&&g.clearTimeout(this,this.waitTimer)}},{key:"onLoadeddata",value:function(){this.isError=!1,this.isSeeking=!1,this.__startTime>0&&this.duration>0&&(this.currentTime=this.__startTime,this.__startTime=-1)}},{key:"onLoadstart",value:function(){this.removeClass(z.ERROR),this.isCanplay=!1}},{key:"onPlay",value:function(){this.state===ve.ENDED&&this.setState(ve.RUNNING),this.removeClass(z.PAUSED),this.ended&&this.removeClass(z.ENDED),!this.config.closePlayVideoFocus&&this.focus()}},{key:"onPause",value:function(){this.addClass(z.PAUSED),this.updateAcc("pause"),this.config.closePauseVideoFocus||(this._clearUserTimer(),this.focus())}},{key:"onEnded",value:function(){this.updateAcc("ended"),this.addClass(z.ENDED),this.setState(ve.ENDED)}},{key:"onError",value:function(){this.isError=!0,this.updateAcc("error"),this.removeClass(z.NOT_ALLOW_AUTOPLAY),this.removeClass(z.NO_START),this.removeClass(z.ENTER),this.removeClass(z.LOADING),this.addClass(z.ERROR)}},{key:"onSeeking",value:function(){this.isSeeking||this.updateAcc("seeking"),this.isSeeking=!0,this.addClass(z.SEEKING)}},{key:"onSeeked",value:function(){this.isSeeking=!1,this.waitTimer&&g.clearTimeout(this,this.waitTimer),this.removeClass(z.LOADING),this.removeClass(z.SEEKING)}},{key:"onWaiting",value:function(){var e=this;this.waitTimer&&g.clearTimeout(this,this.waitTimer),this.updateAcc("waiting"),this.waitTimer=g.setTimeout(this,function(){e.addClass(z.LOADING),e.emit(mv),g.clearTimeout(e,e.waitTimer),e.waitTimer=null},this.config.minWaitDelay)}},{key:"onPlaying",value:function(){var e=this;this.isError=!1;var s=z.NO_START,a=z.PAUSED,o=z.ENDED,u=z.ERROR,l=z.REPLAY,c=z.LOADING,f=[s,a,o,u,l,c];f.forEach(function(h){e.removeClass(h)}),!this._accPlayed.t&&!this.paused&&!this.ended&&(this._accPlayed.t=new Date().getTime())}},{key:"onTimeupdate",value:function(){!this._videoHeight&&this.media.videoHeight&&this.resize(),(this.waitTimer||this.hasClass(z.LOADING))&&this.media.readyState>2&&(this.removeClass(z.LOADING),g.clearTimeout(this,this.waitTimer),this.waitTimer=null),!this.paused&&this.state===ve.NOTALLOW&&this.duration&&(this.setState(ve.RUNNING),this.emit(pr)),!this._accPlayed.t&&!this.paused&&!this.ended&&(this._accPlayed.t=new Date().getTime())}},{key:"onVolumechange",value:function(){g.typeOf(this.config.volume)==="Number"&&(this.config.volume=this.volume)}},{key:"onRatechange",value:function(){this.config.defaultPlaybackRate=this.playbackRate}},{key:"emitUserAction",value:function(e,s,a){if(!(!this.media||!s||!e)){var o=g.typeOf(e)==="String"?e:e.type||"";a.props&&g.typeOf(a.props)!=="Array"&&(a.props=[a.props]),this.emit(Na,Oe({eventType:o,action:s,currentTime:this.currentTime,duration:this.duration,ended:this.ended,event:e},a))}}},{key:"updateAcc",value:function(e){if(this._accPlayed.t){var s=new Date().getTime()-this._accPlayed.t;this._accPlayed.acc+=s,this._accPlayed.t=0,(e==="ended"||this.ended)&&(this._accPlayed.loopAcc=this._accPlayed.acc)}}},{key:"checkBuffer",value:function(e){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{startDiff:0,endDiff:0},a=s||{},o=a.startDiff,u=o===void 0?0:o,l=a.endDiff,c=l===void 0?0:l,f=this.media.buffered;if(!f||f.length===0||!this.duration)return!0;for(var h=e||this.media.currentTime||.2,d=f.length,p=0;p<d;p++)if(f.start(p)+u<=h&&f.end(p)-c>h)return!0;return!1}},{key:"resizePosition",value:function(){var e=this.videoPos,s=e.vy,a=e.vx,o=e.h,u=e.w,l=this.videoPos.rotate;if(!(l<0&&o<0&&u<0)){var c=this.videoPos._pi;if(!c&&this.media.videoHeight&&(c=this.media.videoWidth/this.media.videoHeight*100),!!c){this.videoPos.pi=c,l=l<0?0:l;var f={rotate:l},h=0,d=0,p=1,m=Math.abs(l/90),_=this.root,v=this.innerContainer,y=_.offsetWidth,S=v?v.offsetHeight:_.offsetHeight,E=S,T=y;if(m%2===0)p=o>0?100/o:u>0?100/u:1,f.scale=p,h=s>0?(100-o)/2-s:0,f.y=m===2?0-h:h,d=a>0?(100-u)/2-a:0,f.x=m===2?0-d:d,this.media.style.width="".concat(T,"px"),this.media.style.height="".concat(E,"px");else if(m%2===1){T=S,E=y;var A=S-y;d=-A/2/T*100,f.x=m===3?d+s/2:d-s/2,h=A/2/E*100,f.y=m===3?h+a/2:h-a/2,f.scale=p,this.media.style.width="".concat(T,"px"),this.media.style.height="".concat(E,"px")}var P=g.getTransformStyle(f,this.media.style.transform||this.media.style.webkitTransform);this.media.style.transform=P,this.media.style.webkitTransform=P}}}},{key:"position",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{h:0,y:0,x:0,w:0};if(!(!this.media||!e||!e.h)){var s=this.videoPos;s.h=e.h*100||0,s.w=e.w*100||0,s.vx=e.x*100||0,s.vy=e.y*100||0,this.resizePosition()}}},{key:"setConfig",value:function(e){var s=this;e&&Object.keys(e).map(function(a){if(a!=="plugins"){s.config[a]=e[a];var o=s.plugins[a.toLowerCase()];o&&g.typeOf(o.setConfig)==="Function"&&o.setConfig(e[a])}})}},{key:"playNext",value:function(e){var s=this;this.resetState(),this.setConfig(e),this._currentTime=0,this._duration=0,fn(this,"playnext",function(){s.start(),s.emit(Ma,e)})}},{key:"resize",value:function(){var e=this;if(this.media){var s=this.root.getBoundingClientRect();this.sizeInfo.width=s.width,this.sizeInfo.height=s.height,this.sizeInfo.left=s.left,this.sizeInfo.top=s.top;var a=this.media,o=a.videoWidth,u=a.videoHeight,l=this.config,c=l.fitVideoSize,f=l.videoFillMode;if((f==="fill"||f==="cover"||f==="contain")&&this.setAttribute("data-xgfill",f),!(!u||!o)){this._videoHeight=u,this._videoWidth=o;var h=this.controls&&this.innerContainer?this.controls.root.getBoundingClientRect().height:0,d=s.width,p=s.height-h,m=parseInt(o/u*1e3,10),_=parseInt(d/p*1e3,10),v=d,y=p,S={};c==="auto"&&_>m||c==="fixWidth"?(y=d/m*1e3,this.config.fluid?S.paddingTop="".concat(y*100/v,"%"):S.height="".concat(y+h,"px")):(c==="auto"&&_<m||c==="fixHeight")&&(v=m*p/1e3,S.width="".concat(v,"px")),!this.fullscreen&&!this.cssfullscreen&&Object.keys(S).forEach(function(T){e.root.style[T]=S[T]}),(f==="fillHeight"&&_<m||f==="fillWidth"&&_>m)&&this.setAttribute("data-xgfill","cover");var E={videoScale:m,vWidth:v,vHeight:y,cWidth:v,cHeight:y+h};this.resizePosition(),this.emit(Xn,E)}}}},{key:"updateObjectPosition",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(this.media.updateObjectPosition){this.media.updateObjectPosition(e,s);return}this.media.style.objectPosition="".concat(e*100,"% ").concat(s*100,"%")}},{key:"setState",value:function(e){he.logInfo("setState","state from:".concat(uh[this.state]," to:").concat(uh[e])),this._state=e}},{key:"_preProcessUrl",value:function(e,s){var a=this.config,o=a.preProcessUrl,u=a.preProcessUrlOptions,l=Object.assign({},u,s);return!g.isBlob(e)&&typeof o=="function"?o(e,l):{url:e}}},{key:"state",get:function(){return this._state}},{key:"isFullscreen",get:function(){return this.fullscreen}},{key:"isCssfullScreen",get:function(){return this.cssfullscreen}},{key:"hasStart",get:function(){return this._hasStart},set:function(e){typeof e=="boolean"&&(this._hasStart=e,e===!1&&this.setState(ve.READY),this.emit("hasstart"))}},{key:"isPlaying",get:function(){return this._state===ve.RUNNING||this._state===ve.ENDED},set:function(e){e?this.setState(ve.RUNNING):this._state>=ve.RUNNING&&this.setState(ve.ATTACHED)}},{key:"definitionList",get:function(){return!this.config||!this.config.definition?[]:this.config.definition.list||[]},set:function(e){var s=this,a=this.config.definition,o=null,u=null;a.list=e,this.emit("resourceReady",e),e.forEach(function(l){var c;((c=s.curDefinition)===null||c===void 0?void 0:c.definition)===l.definition&&(o=l),a.defaultDefinition===l.definition&&(u=l)}),!u&&e.length>0&&(u=e[0]),o?this.changeDefinition(o):u&&this.changeDefinition(u)}},{key:"videoFrameInfo",get:function(){var e={total:0,dropped:0,corrupted:0,droppedRate:0,droppedDuration:0};if(!this.media||!this.media.getVideoPlaybackQuality)return e;var s=this.media.getVideoPlaybackQuality();return e.dropped=s.droppedVideoFrames||0,e.total=s.totalVideoFrames||0,e.corrupted=s.corruptedVideoFrames||0,e.total>0&&(e.droppedRate=e.dropped/e.total*100,e.droppedDuration=parseInt(this.cumulateTime/e.total*e.dropped,0)),e}},{key:"lang",get:function(){return this.config.lang},set:function(e){var s=Qr.langKeys.filter(function(a){return a===e});if(s.length===0&&e!=="zh"){console.error("Sorry, set lang fail, because the language [".concat(e,"] is not supported now, list of all supported languages is [").concat(Qr.langKeys.join(),"] "));return}this.config.lang=e,qe.setLang(e,this)}},{key:"i18n",get:function(){var e=this.config.lang;return e==="zh"&&(e="zh-cn"),this.__i18n.lang[e]||this.__i18n.lang.en}},{key:"i18nKeys",get:function(){return this.__i18n.textKeys||{}}},{key:"version",get:function(){return gl}},{key:"playerId",get:function(){return this._pluginInfoId}},{key:"url",get:function(){return this.__url||this.config.url},set:function(e){this.__url=e}},{key:"poster",get:function(){return this.plugins.poster?this.plugins.poster.config.poster:this.config.poster},set:function(e){this.plugins.poster&&this.plugins.poster.update(e)}},{key:"readyState",get:function(){return se(re(r.prototype),"readyState",this)}},{key:"error",get:function(){var e=se(re(r.prototype),"error",this);return this.i18n[e]||e}},{key:"networkState",get:function(){return se(re(r.prototype),"networkState",this)}},{key:"fullscreenChanging",get:function(){return this._fullScreenOffset!==null}},{key:"cumulateTime",get:function(){var e=this._accPlayed,s=e.acc,a=e.t;return a?new Date().getTime()-a+s:s}},{key:"zoom",get:function(){return this.config.zoom},set:function(e){this.config.zoom=e}},{key:"videoRotateDeg",get:function(){return this.videoPos.rotate},set:function(e){e=g.convertDeg(e),!(e%90!==0||e===this.videoPos.rotate)&&(this.videoPos.rotate=e,this.resizePosition())}},{key:"avgSpeed",get:function(){return ch},set:function(e){ch=e}},{key:"realTimeSpeed",get:function(){return lh},set:function(e){lh=e}},{key:"offsetCurrentTime",get:function(){return this._offsetInfo.currentTime||0},set:function(e){this._offsetInfo.currentTime=e}},{key:"offsetDuration",get:function(){return this._offsetInfo.duration||0},set:function(e){this._offsetInfo.duration=e||0}},{key:"hook",value:function(e,s){return Fa.call.apply(Fa,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"useHooks",value:function(e,s){return Ba.call.apply(Ba,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"removeHooks",value:function(e,s){return Ua.call.apply(Ua,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"usePluginHooks",value:function(e,s,a){for(var o=arguments.length,u=new Array(o>3?o-3:0),l=3;l<o;l++)u[l-3]=arguments[l];return nh.call.apply(nh,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"removePluginHooks",value:function(e,s,a){for(var o=arguments.length,u=new Array(o>3?o-3:0),l=3;l<o;l++)u[l-3]=arguments[l];return rh.call.apply(rh,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"setUserActive",value:function(e,s){var a;typeof s=="boolean"&&s!==this.muted&&(this.addInnerOP("volumechange"),g.typeOf(s)===Boolean&&(this.muted=s)),(a=Pn)===null||a===void 0||a.setActive(this.playerId,e)}}],[{key:"debugger",get:function(){return he.config.debug},set:function(e){he.config.debug=e}},{key:"instManager",get:function(){return Pn},set:function(e){Pn=e}},{key:"getCurrentUserActivePlayerId",value:function(){var e;return(e=Pn)===null||e===void 0?void 0:e.getActiveId()}},{key:"setCurrentUserActive",value:function(e,s){var a;(a=Pn)===null||a===void 0||a.setActive(e,s)}},{key:"isHevcSupported",value:function(){return le.isHevcSupported()}},{key:"probeConfigSupported",value:function(e){return le.probeConfigSupported(e)}},{key:"install",value:function(e,s){r.plugins||(r.plugins={}),r.plugins[e]||(r.plugins[e]=s)}},{key:"use",value:function(e,s){r.plugins||(r.plugins={}),r.plugins[e]=s}}]),r}(i0);O(mo,"defaultPreset",null);O(mo,"XgVideoProxy",null);mo.instManager=Lv.getInstance();function rt(){return new Date().getTime()}var xn={LOAD_START:"loadstart",LOADED_DATA:"loadeddata",FIRST_FRAME:"firstFrame",WAIT_START:"waitingStart",WAIT_END:"waitingEnd",SEEK_START:"seekStart",SEEK_END:"seekEnd"},x0=function(t){ee(r,t);var i=te(r);function r(){var n;Q(this,r);for(var e=arguments.length,s=new Array(e),a=0;a<e;a++)s[a]=arguments[a];return n=i.call.apply(i,[this].concat(s)),O(x(n),"_onTimeupdate",function(){n._state.isTimeUpdate=!0,n._state.autoplayStart&&(he.logInfo("[xgLogger]".concat(n.player.playerId," _onTimeupdate")),n._sendFF("onTimeupdate"))}),O(x(n),"_onAutoplayStart",function(){he.logInfo("[xgLogger]".concat(n.player.playerId," _onAutoplayStart")),n._state.autoplayStart=!0,n.vt&&n._sendFF("onAutoplayStart")}),O(x(n),"_onReset",function(){n._state={autoplayStart:!1,isFFLoading:!1,isTimeUpdate:!1,isFFSend:!1,isLs:!1},n.vt=0,n.pt=0,n.fvt=0,n.newPointTime=rt(),n.loadedCostTime=0,n.startCostTime=0,n._isSeeking=!1,n.seekingStart=0,n.waitingStart=0,n.fixedWaitingStart=0,n._isWaiting=!1,n._waitTimer&&g.clearTimeout(x(n),n._waitTimer),n._waittTimer&&g.clearTimeout(x(n),n._waittTimer),n._waitTimer=null,n._waittTimer=null,n._waitType=0}),O(x(n),"_onSeeking",function(){n.seekingStart||(n.suspendWaitingStatus("seek"),n.seekingStart=rt(),n.emitLog(xn.SEEK_START,{start:rt()}))}),O(x(n),"_onSeeked",function(){n.suspendSeekingStatus("seeked")}),O(x(n),"_onWaitingLoadStart",function(){n._isWaiting||n.vt||(n._isWaiting=!0,n.waitingStart=rt(),n.fixedWaitingStart=rt(),n._waitType=1,n.emitLog(xn.WAIT_START,{fixedStart:n.fixedWaitingStart,start:n.waitingStart,type:1,endType:"loadstart"}))}),O(x(n),"_onWaiting",function(){n._isWaiting||!n.vt||(n._isWaiting=!0,n.vt?n.seekingStart?n._waitType=2:n._waitType=0:n._waitType=1,n.fixedWaitingStart=rt(),n._waitTimer=g.setTimeout(x(n),function(){n._isWaiting&&(n.waitingStart=rt(),g.clearTimeout(x(n),n._waitTimer),n._waitTimer=null,n._startWaitTimeout(),n.emitLog(xn.WAIT_START,{fixedStart:n.fixedWaitingStart,start:n.waitingStart,type:n._waitType,endType:n._waitType===2?"seek":"playing"}))},200))}),O(x(n),"_onError",function(){n.suspendSeekingStatus("error"),n.suspendWaitingStatus("error")}),O(x(n),"_onPlaying",function(){n._isWaiting&&n.suspendWaitingStatus("playing")}),n}return q(r,[{key:"afterCreate",value:function(){var e=this;this._onReset(),this._waitType="firstFrame",this._initOnceEvents(),this.newPointTime=rt(),this.loadedCostTime=0,this.startCostTime=0,this.on(Tc,function(){var s=e._state,a=s.autoplayStart,o=s.isFFSend;e.startCostTime=rt()-e.newPointTime,he.logInfo("[xgLogger]".concat(e.player.playerId," LOAD_START"),"autoplayStart:".concat(a," isFFSend:").concat(o," startCostTime:").concat(e.startCostTime," newPointTime").concat(e.newPointTime)),!o&&(!s.isLs&&e.emitLog(xn.LOAD_START,{}),s.isLs=!0,s.isTimeUpdate=!1,s.isFFLoading=!0,e.pt=rt(),e.vt=0,e.fvt=0,e._initOnceEvents(),e._onWaitingLoadStart())}),this.on(wn,function(){e.vt=rt(),e.fvt=e.vt-e.pt,e.loadedCostTime=e.vt-e.newPointTime;var s=e._state,a=s.isTimeUpdate,o=s.isFFSend,u=s.autoplayStart;he.logInfo("[xgLogger]".concat(e.player.playerId," LOADED_DATA"),"fvt:".concat(e.fvt," isTimeUpdate:").concat(e._state.isTimeUpdate," loadedCostTime:").concat(e.loadedCostTime)),(a||u)&&e._sendFF("loadedData"),o||e.emitLog(xn.LOADED_DATA,{}),e.suspendWaitingStatus("loadeddata")}),this.on(ho,this._onSeeking),this.on(mn,this._onSeeked),this.on(vo,function(){e.endState("destroy")}),this.on(ms,function(){e.endState("urlChange"),he.logInfo("[xgLogger]".concat(e.player.playerId," URL_CHANGE")),e._state.isFFSend&&e._onReset()}),this.on([wc,pn],this._onPlaying),this.on(gs,this._onWaiting),this.on(yi,this._onError),this.on(go,function(){he.logInfo("[xgLogger]".concat(e.player.playerId," RESET")),e.endState("reset"),e._initOnceEvents(),e._onReset()})}},{key:"_initOnceEvents",value:function(){this.off(pr,this._onAutoplayStart),this.off(bt,this._onTimeupdate),this.once(pr,this._onAutoplayStart),this.once(bt,this._onTimeupdate)}},{key:"_sendFF",value:function(e){this.s=rt();var s=this._state,a=s.isFFLoading,o=s.isFFSend;he.logInfo("[xgLogger]".concat(this.player.playerId," _sendFF"),"".concat(e," fvt:").concat(this.fvt," isFFLoading:").concat(a," !isFFSend:").concat(!o)),this.vt>0&&a&&!o&&(he.logInfo("[xgLogger]".concat(this.player.playerId," emitLog_firstFrame"),e),this._state.isFFLoading=!1,this._state.isFFSend=!0,this.emitLog(xn.FIRST_FRAME,{fvt:this.fvt,costTime:this.fvt,vt:this.vt,startCostTime:this.startCostTime,loadedCostTime:this.loadedCostTime}))}},{key:"_startWaitTimeout",value:function(){var e=this;this._waittTimer&&g.clearTimeout(this,this._waittTimer),this._waittTimer=g.setTimeout(this,function(){e.suspendWaitingStatus("timeout"),g.clearTimeout(e,e._waittTimer),e._waittTimer=null},this.config.waitTimeout)}},{key:"endState",value:function(e){this.suspendWaitingStatus(e),this.suspendSeekingStatus(e)}},{key:"suspendSeekingStatus",value:function(e){if(this.seekingStart){var s=rt(),a=s-this.seekingStart;this.seekingStart=0,this.emitLog(xn.SEEK_END,{end:s,costTime:a,endType:e})}}},{key:"suspendWaitingStatus",value:function(e){if(this._waitTimer&&(g.clearTimeout(this,this._waitTimer),this._waitTimer=null),this._waittTimer&&(g.clearTimeout(this,this._waittTimer),this._waittTimer=null),this._isWaiting=!1,!!this.waitingStart){var s=rt(),a=s-this.waitingStart,o=s-this.fixedWaitingStart,u=this.config.waitTimeout;this._isWaiting=!1,this.waitingStart=0,this.fixedWaitingStart=0,this.emitLog(xn.WAIT_END,{fixedCostTime:o>u?u:o,costTime:a>u?u:a,type:e==="loadeddata"?1:this._waitType,endType:this._waitType===2?"seek":e})}}},{key:"emitLog",value:function(e,s){var a=this.player;this.emit(Ev,Oe({t:rt(),host:g.getHostFromUrl(a.currentSrc),vtype:a.vtype,eventType:e,currentTime:this.player.currentTime,readyState:a.video.readyState,networkState:a.video.networkState},s))}}],[{key:"pluginName",get:function(){return"xgLogger"}},{key:"defaultConfig",get:function(){return{waitTimeout:1e4}}}]),r}(me);function A0(){return new DOMParser().parseFromString(`<svg class="xgplayer-replay-svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 78 78" width="78" height="78">
  <path fill="#fff" transform="translate(20, 20)" d="M8.22708362,13.8757234 L11.2677371,12.6472196 C11.7798067,12.4403301 12.3626381,12.6877273 12.5695276,13.1997969 L12.9441342,14.1269807 C13.1510237,14.6390502 12.9036264,15.2218816 12.3915569,15.4287712 L6.8284538,17.6764107 L5.90126995,18.0510173 C5.38920044,18.2579068 4.80636901,18.0105096 4.5994795,17.49844 L1.97723335,11.0081531 C1.77034384,10.4960836 2.0177411,9.91325213 2.52981061,9.70636262 L3.45699446,9.33175602 C3.96906396,9.12486652 4.5518954,9.37226378 4.75878491,9.88433329 L5.67885163,12.1615783 C7.99551726,6.6766934 13.3983951,3 19.5,3 C27.7842712,3 34.5,9.71572875 34.5,18 C34.5,26.2842712 27.7842712,33 19.5,33 C15.4573596,33 11.6658607,31.3912946 8.87004692,28.5831991 C8.28554571,27.9961303 8.28762719,27.0463851 8.87469603,26.4618839 C9.46176488,25.8773827 10.4115101,25.8794641 10.9960113,26.466533 C13.2344327,28.7147875 16.263503,30 19.5,30 C26.127417,30 31.5,24.627417 31.5,18 C31.5,11.372583 26.127417,6 19.5,6 C14.4183772,6 9.94214483,9.18783811 8.22708362,13.8757234 Z"></path>
</svg>
`,"image/svg+xml").firstChild}var I0=function(t){ee(r,t);var i=te(r);function r(){return Q(this,r),i.apply(this,arguments)}return q(r,[{key:"registerIcons",value:function(){return{replay:A0}}},{key:"afterCreate",value:function(){var e=this;me.insert(this.icons.replay,this.root,0),this.__handleReplay=this.hook("replayClick",function(){e.player.replay()},{pre:function(a){a.preventDefault(),a.stopPropagation()}}),this.bind(".xgplayer-replay",["click","touchend"],this.__handleReplay),this.on(Cr,function(){if(e.playerConfig.loop||g.addClass(e.player.root,"replay"),!e.config.disable){e.show();var s=e.root.querySelector("path");if(s){var a=window.getComputedStyle(s).getPropertyValue("transform");if(typeof a=="string"&&a.indexOf("none")>-1)return null;s.setAttribute("transform",a)}}}),this.on(xt,function(){e.hide()})}},{key:"handleReplay",value:function(e){e.preventDefault(),e.stopPropagation(),this.player.replay(),g.removeClass(this.player.root,"replay")}},{key:"show",value:function(e){this.config.disable||(this.root.style.display="flex")}},{key:"enable",value:function(){this.config.disable=!1}},{key:"disable",value:function(){this.config.disable=!0,this.hide()}},{key:"destroy",value:function(){this.unbind(".xgplayer-replay",["click","touchend"],this.__handleReplay)}},{key:"render",value:function(){return`<xg-replay class="xgplayer-replay">
      <xg-replay-txt class="xgplayer-replay-txt" lang-key="`.concat(this.i18nKeys.REPLAY,'">').concat(this.i18n.REPLAY,`</xg-replay-txt>
    </xg-replay>`)}}],[{key:"pluginName",get:function(){return"replay"}},{key:"defaultConfig",get:function(){return{disable:!1}}}]),r}(me),L0=function(t){ee(r,t);var i=te(r);function r(){return Q(this,r),i.apply(this,arguments)}return q(r,[{key:"isEndedShow",get:function(){return this.config.isEndedShow},set:function(e){this.config.isEndedShow=e}},{key:"hide",value:function(){g.addClass(this.root,"hide")}},{key:"show",value:function(e){g.removeClass(this.root,"hide")}},{key:"beforeCreate",value:function(e){typeof e.player.config.poster=="string"&&(e.config.poster=e.player.config.poster)}},{key:"afterCreate",value:function(){var e=this;this.on(Cr,function(){e.isEndedShow&&g.removeClass(e.root,"hide")}),this.config.hideCanplay?(this.once(bt,function(){e.onTimeUpdate()}),this.on(ms,function(){g.removeClass(e.root,"hide"),g.addClass(e.root,"xg-showplay"),e.once(bt,function(){e.onTimeUpdate()})})):this.on(xt,function(){g.addClass(e.root,"hide")})}},{key:"setConfig",value:function(e){var s=this;Object.keys(e).forEach(function(o){s.config[o]=e[o]});var a=this.config.poster;this.update(a)}},{key:"onTimeUpdate",value:function(){var e=this;this.player.currentTime?g.removeClass(this.root,"xg-showplay"):this.once(bt,function(){e.onTimeUpdate()})}},{key:"update",value:function(e){e&&(this.config.poster=e,this.root.style.backgroundImage="url(".concat(e,")"))}},{key:"getBgSize",value:function(e){var s="";switch(e){case"cover":s="cover";break;case"contain":s="contain";break;case"fixHeight":s="auto 100%";break;default:s=""}return s?"background-size: ".concat(s,";"):""}},{key:"render",value:function(){var e=this.config,s=e.poster,a=e.hideCanplay,o=e.fillMode,u=e.notHidden,l=this.getBgSize(o),c=s?"background-image:url(".concat(s,");").concat(l):l,f=u?"xg-not-hidden":a?"xg-showplay":"";return'<xg-poster class="xgplayer-poster '.concat(f,'" style="').concat(c,`">
    </xg-poster>`)}}],[{key:"pluginName",get:function(){return"poster"}},{key:"defaultConfig",get:function(){return{isEndedShow:!0,hideCanplay:!1,notHidden:!1,poster:"",fillMode:"fixWidth"}}}]),r}(me);function Ic(){return new DOMParser().parseFromString(`<svg class="play" xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="3 -4 28 40">
  <path fill="#fff" transform="scale(0.0320625 0.0320625)" d="M576,363L810,512L576,661zM342,214L576,363L576,661L342,810z"></path>
</svg>
`,"image/svg+xml").firstChild}function Lc(){return new DOMParser().parseFromString(`<svg class="pause" xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="3 -4 28 40">
  <path fill="#fff" transform="scale(0.0320625 0.0320625)" d="M598,214h170v596h-170v-596zM256 810v-596h170v596h-170z"></path>
</svg>
`,"image/svg+xml").firstChild}var en={};function D0(t,i){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{start:null,end:null};return en[t]&&window.clearTimeout(en[t].id),en[t]={},r.start&&r.start(),en[t].id=window.setTimeout(function(){r.end&&r.end(),window.clearTimeout(en[t].id),delete en[t]},i),en[t].id}function fh(t){if(t){window.clearTimeout(t);return}Object.keys(en).map(function(i){window.clearTimeout(en[i].id),delete en[i]})}var O0=function(t){ee(r,t);var i=te(r);function r(n){var e;return Q(this,r),e=i.call(this,n),O(x(e),"onPlayerReset",function(){e.autoPlayStart=!1;var s=e.config.mode==="auto"?"auto-hide":"hide";e.setAttr("data-state","play"),g.removeClass(e.root,s),e.show()}),O(x(e),"onAutoplayStart",function(){if(!e.autoPlayStart){var s=e.config.mode==="auto"?"auto-hide":"hide";g.addClass(e.root,s),e.autoPlayStart=!0,e.onPlayPause("play")}}),e.autoPlayStart=!1,e}return q(r,[{key:"afterCreate",value:function(){var e=this,s=this.player,a=this.playerConfig;this.initIcons(),this.once(bc,function(){a&&(a.lang&&a.lang==="en"?g.addClass(s.root,"lang-is-en"):a.lang==="jp"&&g.addClass(s.root,"lang-is-jp"))}),this.on(pr,this.onAutoplayStart),a.autoplay||this.show(),this.on(Pc,function(){var o=e.config.mode==="auto"?"auto-hide":"hide";e.setAttr("data-state","play"),g.removeClass(e.root,o),e.show()}),this.on(xt,function(){e.onPlayPause("play")}),this.on(mi,function(){e.onPlayPause("pause")}),this.on(go,function(){e.onPlayerReset()}),this.clickHandler=this.hook("startClick",this.switchPausePlay,{pre:function(u){u.cancelable&&u.preventDefault(),u.stopPropagation();var l=e.player.paused;e.emitUserAction(u,"switch_play_pause",{props:"paused",from:l,to:!l})}}),this.bind(["click","touchend"],this.clickHandler)}},{key:"registerIcons",value:function(){return{startPlay:{icon:Ic,class:"xg-icon-play"},startPause:{icon:Lc,class:"xg-icon-pause"}}}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild("xg-start-inner",e.startPlay),this.appendChild("xg-start-inner",e.startPause)}},{key:"hide",value:function(){g.addClass(this.root,"hide")}},{key:"show",value:function(e){g.removeClass(this.root,"hide")}},{key:"focusHide",value:function(){g.addClass(this.root,"focus-hide")}},{key:"recover",value:function(){g.removeClass(this.root,"focus-hide")}},{key:"switchStatus",value:function(e){e?this.setAttr("data-state",this.player.paused?"pause":"play"):this.setAttr("data-state",this.player.paused?"play":"pause")}},{key:"animate",value:function(e){var s=this;this._animateId=D0("pauseplay",400,{start:function(){g.addClass(s.root,"interact"),s.show(),s.switchStatus(!0)},end:function(){g.removeClass(s.root,"interact"),!e&&s.hide(),s._animateId=null}})}},{key:"endAnimate",value:function(){g.removeClass(this.root,"interact"),fh(this._animateId),this._animateId=null}},{key:"switchPausePlay",value:function(e){var s=this.player;if(e.cancelable&&e.preventDefault(),e.stopPropagation(),!(s.state<ve.READY)){var a=this.player.paused;!a&&s.state===ve.RUNNING?s.pause():s.play()}}},{key:"onPlayPause",value:function(e){var s=this.config,a=this.player;if(!(!a||a.state<ve.RUNNING||!this.autoPlayStart)){if(s.mode==="show"){this.switchStatus(),this.show();return}if(s.mode==="auto"){this.switchStatus();return}if(s.isShowPause&&a.paused&&!a.ended||s.isShowEnd&&a.ended){this.switchStatus(),this.show(),this.endAnimate();return}if(s.disableAnimate){this.switchStatus(),this.hide();return}if(e==="play")this.autoPlayStart?this.animate():this.hide();else{if(!this.autoPlayStart||a.ended)return;this.animate()}}}},{key:"destroy",value:function(){this.unbind(["click","touchend"],this.clickHandler),fh(this._animateId)}},{key:"render",value:function(){var e=this.playerConfig.autoplay?this.config.mode==="auto"?"auto-hide":"hide":"";return`
    <xg-start class="xgplayer-start `.concat(e,`">
    <xg-start-inner></xg-start-inner>
    </xg-start>`)}}],[{key:"pluginName",get:function(){return"start"}},{key:"defaultConfig",get:function(){return{isShowPause:!1,isShowEnd:!1,disableAnimate:!1,mode:"hide"}}}]),r}(me),R0=function(t){ee(r,t);var i=te(r);function r(){return Q(this,r),i.apply(this,arguments)}return q(r,[{key:"render",value:function(){var e=this.config.innerHtml,s=g.createDom("xg-enter","",{},"xgplayer-enter");if(e&&e instanceof window.HTMLElement)s.appendChild(e);else if(e&&typeof e=="string")s.innerHTML=e;else{for(var a="",o=1;o<=12;o++)a+='<div class="xgplayer-enter-bar'.concat(o,'"></div>');s.innerHTML='<div class="xgplayer-enter-spinner">'.concat(a,"</div>")}return s}}],[{key:"pluginName",get:function(){return"enter"}},{key:"defaultConfig",get:function(){return{innerHtml:"",logo:""}}}]),r}(me);function er(t,i,r){try{return' <div class="xg-tips '.concat(r?"hide":" ",'" lang-key="').concat(t.i18nKeys[i],`">
    `).concat(t.i18n[i],`
    </div>`)}catch{return'<div class="xg-tips hide"></div>'}}var hh=function(t){ee(r,t);var i=te(r);function r(){return Q(this,r),i.apply(this,arguments)}return q(r,[{key:"afterCreate",value:function(){this.getMini=this.getMini.bind(this),this.exitMini=this.exitMini.bind(this),this.bind("click",this.getMini)}},{key:"getMini",value:function(){this.config.onClick&&this.config.onClick()}},{key:"exitMini",value:function(){this.config.onClick&&this.config.onClick()}},{key:"destroy",value:function(){this.unbind(["click","touchend"],this.getMini)}},{key:"render",value:function(){var e="MINISCREEN";return`
      <xg-icon class="xgplayer-miniicon">
      <div class="xgplayer-icon btn-text"><span class="icon-text" lang-key="`.concat(this.i18nKeys[e],'">').concat(this.i18n[e],`</span></div>
      </xg-icon>`)}}],[{key:"pluginName",get:function(){return"miniscreenIcon"}},{key:"defaultConfig",get:function(){return{position:ke.CONTROLS_RIGHT,index:10}}}]),r}(me);function dh(t){var i=parseFloat(t),r=t.indexOf("%")===-1&&!Number.isNaN(i);return r&&i}var Dc=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"],Dv=Dc.length;function M0(){for(var t={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},i=0;i<Dv;i++){var r=Dc[i];t[r]=0}return t}function N0(t){var i=window.getComputedStyle(t);return i}function ph(t){if(typeof t=="string"&&(t=document.querySelector(t)),!(!t||ut(t)!=="object"||!t.nodeType)){var i=N0(t);if(i.display==="none")return M0();var r={};r.width=t.offsetWidth,r.height=t.offsetHeight;for(var n=r.isBorderBox=i.boxSizing==="border-box",e=0;e<Dv;e++){var s=Dc[e],a=i[s],o=parseFloat(a);r[s]=Number.isNaN(o)?0:o}var u=r.paddingLeft+r.paddingRight,l=r.paddingTop+r.paddingBottom,c=r.marginLeft+r.marginRight,f=r.marginTop+r.marginBottom,h=r.borderLeftWidth+r.borderRightWidth,d=r.borderTopWidth+r.borderBottomWidth,p=n,m=dh(i.width);m!==!1&&(r.width=m+(p?0:u+h));var _=dh(i.height);return _!==!1&&(r.height=_+(p?0:l+d)),r.innerWidth=r.width-(u+h),r.innerHeight=r.height-(l+d),r.outerWidth=r.width+c,r.outerHeight=r.height+f,r}}function su(t,i){for(var r=0;r<t.length;r++){var n=t[r];if(n.identifier===i)return n}}var au={START:"dragStart",MOVE:"dragMove",ENDED:"dragEnded"},vh={mousedown:["mousemove","mouseup"],touchstart:["touchmove","touchend","touchcancel"],pointerdown:["pointermove","pointerup","pointercancel"]},F0=function(t){ee(r,t);var i=te(r);function r(n){var e,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Q(this,r),e=i.call(this),e.isEnabled=!0,e.isDragging=!1,e.isDown=!1,e.position={},e.downPoint={},e.dragPoint={x:0,y:0},e.startPos={x:0,y:0},e._root=n instanceof Element?n:document.querySelector(n),e._handlerDom=s.handle instanceof Element?s.handle:document.querySelector(s.handle),!e._root||!e._handlerDom?kc(e):(e._bindStartEvent(),e)}return q(r,[{key:"_bindStartEvent",value:function(){var e=this;"ontouchstart"in window?this._startKey="touchstart":this._startKey="mousedown",this["on".concat(this._startKey)]=this["on".concat(this._startKey)].bind(this),this._handlerDom.addEventListener(this._startKey,this["on".concat(this._startKey)]),vh[this._startKey].map(function(s){e["on".concat(s)]=e["on".concat(s)].bind(e)})}},{key:"_unbindStartEvent",value:function(){this._handlerDom.removeEventListener(this._startKey,this["on".concat(this._startKey)])}},{key:"_bindPostStartEvents",value:function(e){var s=this;if(e){var a=vh[this._startKey];a.map(function(o){window.addEventListener(o,s["on".concat(o)])}),this._boundPointerEvents=a}}},{key:"_unbindPostStartEvents",value:function(){var e=this;this._boundPointerEvents&&(this._boundPointerEvents.map(function(s){window.removeEventListener(s,e["on".concat(s)])}),delete this._boundPointerEvents)}},{key:"enable",value:function(){this.isEnabled=!0}},{key:"disable",value:function(){this.isEnabled=!1,this.isDragging&&this.onUp()}},{key:"onDocUp",value:function(e){this.onUp()}},{key:"animate",value:function(){var e=this;this.isDragging&&(this.positionDrag(),window.requestAnimationFrame(function(){e.animate()}))}},{key:"positionDrag",value:function(){var e="translate3d(".concat(this.dragPoint.x,"px, ").concat(this.dragPoint.y,"px, 0)");this._root.style.transform=e,this._root.style.webKitTransform=e}},{key:"setLeftTop",value:function(){this._root.style.left=this.position.x+"px",this._root.style.top=this.position.y+"px"}},{key:"onmousedown",value:function(e){this.dragStart(e,e)}},{key:"onmousemove",value:function(e){this.dragMove(e,e)}},{key:"onmouseup",value:function(e){this.dragEnd(e,e)}},{key:"ontouchstart",value:function(e){var s=e.changedTouches[0];this.dragStart(e,s),this.touchIdentifier=s.pointerId!==void 0?s.pointerId:s.identifier,e.preventDefault()}},{key:"ontouchmove",value:function(e){var s=su(e.changedTouches,this.touchIdentifier);s&&this.dragMove(e,s)}},{key:"ontouchend",value:function(e){var s=su(e.changedTouches,this.touchIdentifier);s&&this.dragEnd(e,s),e.preventDefault()}},{key:"ontouchcancel",value:function(e){var s=su(e.changedTouches,this.touchIdentifier);s&&this.dragCancel(e,s)}},{key:"dragStart",value:function(e,s){if(!(!this._root||this.isDown||!this.isEnabled)){this.downPoint=s,this.dragPoint.x=0,this.dragPoint.y=0,this._getPosition();var a=ph(this._root);this.startPos.x=this.position.x,this.startPos.y=this.position.y,this.startPos.maxY=window.innerHeight-a.height,this.startPos.maxX=window.innerWidth-a.width,this.setLeftTop(),this.isDown=!0,this._bindPostStartEvents(e)}}},{key:"dragRealStart",value:function(e,s){this.isDragging=!0,this.animate(),this.emit(au.START,this.startPos)}},{key:"dragEnd",value:function(e,s){this._root&&(this._unbindPostStartEvents(),this.isDragging&&(this._root.style.transform="",this.setLeftTop(),this.emit(au.ENDED)),this.presetInfo())}},{key:"_dragPointerMove",value:function(e,s){var a={x:s.pageX-this.downPoint.pageX,y:s.pageY-this.downPoint.pageY};return!this.isDragging&&this.hasDragStarted(a)&&this.dragRealStart(e,s),a}},{key:"dragMove",value:function(e,s){if(e=e||window.event,!!this.isDown){var a=this.startPos,o=a.x,u=a.y,l=this._dragPointerMove(e,s),c=l.x,f=l.y;c=this.checkContain("x",c,o),f=this.checkContain("y",f,u),this.position.x=o+c,this.position.y=u+f,this.dragPoint.x=c,this.dragPoint.y=f,this.emit(au.MOVE,this.position)}}},{key:"dragCancel",value:function(e,s){this.dragEnd(e,s)}},{key:"presetInfo",value:function(){this.isDragging=!1,this.startPos={x:0,y:0},this.dragPoint={x:0,y:0},this.isDown=!1}},{key:"destroy",value:function(){this._unbindStartEvent(),this._unbindPostStartEvents(),this.isDragging&&this.dragEnd(),this.removeAllListeners(),this._handlerDom=null}},{key:"hasDragStarted",value:function(e){return Math.abs(e.x)>3||Math.abs(e.y)>3}},{key:"checkContain",value:function(e,s,a){return s+a<0?0-a:e==="x"&&s+a>this.startPos.maxX?this.startPos.maxX-a:e==="y"&&s+a>this.startPos.maxY?this.startPos.maxY-a:s}},{key:"_getPosition",value:function(){var e=window.getComputedStyle(this._root),s=this._getPositionCoord(e.left,"width"),a=this._getPositionCoord(e.top,"height");this.position.x=Number.isNaN(s)?0:s,this.position.y=Number.isNaN(a)?0:a,this._addTransformPosition(e)}},{key:"_addTransformPosition",value:function(e){var s=e.transform;if(s.indexOf("matrix")===0){var a=s.split(","),o=s.indexOf("matrix3d")===0?12:4,u=parseInt(a[o],10),l=parseInt(a[o+1],10);this.position.x+=u,this.position.y+=l}}},{key:"_getPositionCoord",value:function(e,s){if(e.indexOf("%")!==-1){var a=ph(this._root.parentNode);return a?parseFloat(e)/100*a[s]:0}return parseInt(e,10)}}]),r}(gi),B0=function(t){ee(r,t);var i=te(r);function r(n){var e;Q(this,r),e=i.call(this,n),O(x(e),"onCancelClick",function(o){e.exitMini(),e.isClose=!0}),O(x(e),"onCenterClick",function(o){var u=x(e),l=u.player;l.paused?l.play():l.pause()}),O(x(e),"onScroll",function(o){if(!(!window.scrollY&&window.scrollY!==0||Math.abs(window.scrollY-e.pos.scrollY)<50)){var u=parseInt(g.getCss(e.player.root,"height"));u+=e.config.scrollTop,e.pos.scrollY=window.scrollY,window.scrollY>u+5?!e.isMini&&!e.isClose&&e.getMini():window.scrollY<=u&&(e.isMini&&e.exitMini(),e.isClose=!1)}}),e.isMini=!1,e.isClose=!1;var s=x(e),a=s.config;return e.pos={left:a.left<0?window.innerWidth-a.width-20:a.left,top:a.top<0?window.innerHeight-a.height-20:a.top,height:e.config.height,width:e.config.width,scrollY:window.scrollY||0},e.lastStyle=null,e}return q(r,[{key:"beforeCreate",value:function(e){typeof e.player.config.mini=="boolean"&&(e.config.isShowIcon=e.player.config.mini)}},{key:"afterCreate",value:function(){var e=this;this.initIcons(),this.on(mi,function(){e.setAttr("data-state","pause")}),this.on(xt,function(){e.setAttr("data-state","play")})}},{key:"onPluginsReady",value:function(){var e=this,s=this.player,a=this.config;if(!a.disable){if(this.config.isShowIcon){var o={config:{onClick:function(){e.getMini()}}};s.controls.registerPlugin(hh,o,hh.pluginName)}var u=g.checkTouchSupport()?"touchend":"click";this.bind(".mini-cancel-btn",u,this.onCancelClick),this.bind(".play-icon",u,this.onCenterClick),this.config.disableDrag||(this._draggabilly=new F0(this.player.root,{handle:this.root})),this.config.isScrollSwitch&&window.addEventListener("scroll",this.onScroll)}}},{key:"registerIcons",value:function(){return{play:{icon:Ic,class:"xg-icon-play"},pause:{icon:Lc,class:"xg-icon-pause"}}}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild(".play-icon",e.play),this.appendChild(".play-icon",e.pause)}},{key:"getMini",value:function(){var e=this;if(!this.isMini){var s=this.player,a=this.playerConfig,o=this.config.target||this.player.root;this.lastStyle={},g.addClass(s.root,"xgplayer-mini"),["width","height","top","left"].map(function(u){e.lastStyle[u]=o.style[u],o.style[u]="".concat(e.pos[u],"px")}),a.fluid&&(o.style["padding-top"]=""),this.emit(Ra,!0),s.isMini=this.isMini=!0}}},{key:"exitMini",value:function(){var e=this;if(!this.isMini)return!1;var s=this.player,a=this.playerConfig,o=this.config.target||this.player.root;g.removeClass(s.root,"xgplayer-mini"),this.lastStyle&&Object.keys(this.lastStyle).map(function(u){o.style[u]=e.lastStyle[u]}),this.lastStyle=null,a.fluid&&(s.root.style.width="100%",s.root.style.height="0",s.root.style["padding-top"]="".concat(a.height*100/a.width,"%")),this.emit(Ra,!1),this.isMini=s.isMini=!1}},{key:"destroy",value:function(){window.removeEventListener("scroll",this.onScroll);var e=g.checkTouchSupport()?"touchend":"click";this.unbind(".mini-cancel-btn",e,this.onCancelClick),this.unbind(".play-icon",e,this.onCenterClick),this._draggabilly&&this._draggabilly.destroy(),this._draggabilly=null,this.exitMini()}},{key:"render",value:function(){if(!this.config.disable)return`
      <xg-mini-layer class="xg-mini-layer">
      <xg-mini-header class="xgplayer-mini-header">
      `.concat(er(this,"MINI_DRAG",this.playerConfig.isHideTips),`
      </xg-mini-header>
      <div class="mini-cancel-btn">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20">
          <path fill="#fff" fill-rule="evenodd" d="M3.99 3.49a1 1 0 0 1 1.414 0L10 8.085l4.596-4.595a1 1 0 1 1 1.414 1.414L11.414 9.5l4.596 4.596a1 1 0 0 1 .084 1.32l-.084.094a1 1 0 0 1-1.414 0L10 10.914 5.404 15.51a1 1 0 0 1-1.414-1.414L8.585 9.5 3.99 4.904a1 1 0 0 1-.084-1.32z"></path>
        </svg>
      </div>
      <div class="play-icon">
      </div>
      </xg-mini-layer>`)}}],[{key:"pluginName",get:function(){return"miniscreen"}},{key:"defaultConfig",get:function(){return{index:10,disable:!1,width:320,height:180,left:-1,top:-1,isShowIcon:!1,isScrollSwitch:!1,scrollTop:0,disableDrag:!1}}}]),r}(me),Us={mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mousemove:"onMouseMove"},ou=["videoClick","videoDbClick"],uu=function(t){ee(r,t);var i=te(r);function r(){var n;Q(this,r);for(var e=arguments.length,s=new Array(e),a=0;a<e;a++)s[a]=arguments[a];return n=i.call.apply(i,[this].concat(s)),O(x(n),"onMouseMove",function(o){var u=x(n),l=u.player,c=u.playerConfig;l.isActive||(l.focus({autoHide:!c.closeDelayBlur}),!c.closeFocusVideoFocus&&l.media.focus())}),O(x(n),"onMouseEnter",function(o){var u=x(n),l=u.playerConfig,c=u.player;!l.closeFocusVideoFocus&&c.media.focus(),l.closeDelayBlur?c.focus({autoHide:!1}):c.focus(),n.emit(gv)}),O(x(n),"onMouseLeave",function(o){var u=n.playerConfig,l=u.closePlayerBlur,c=u.leavePlayerTime,f=u.closeDelayBlur;!l&&!f&&(c?n.player.focus({autoHide:!0,delay:c}):n.player.blur({ignorePaused:!0})),n.emit(vv)}),O(x(n),"onVideoClick",function(o){var u=x(n),l=u.player,c=u.playerConfig;o.target&&c.closeVideoClick||(o.target===l.root||o.target===l.media||o.target===l.innerContainer||o.target===l.media.__canvas)&&(o.preventDefault(),c.closeVideoStopPropagation||o.stopPropagation(),n._clickCount++,n.clickTimer&&(clearTimeout(n.clickTimer),n.clickTimer=null),n.clickTimer=setTimeout(function(){n._clickCount&&(n._clickCount--,fn(x(n),ou[0],function(f,h){n.switchPlayPause(h.e)},{e:o,paused:l.paused}),clearTimeout(n.clickTimer),n.clickTimer=null)},300))}),O(x(n),"onVideoDblClick",function(o){var u=x(n),l=u.player,c=u.playerConfig;if(!(c.closeVideoDblclick||!o.target||o.target!==l.media&&o.target!==l.media.__canvas)){if(!c.closeVideoClick&&n._clickCount<2){n._clickCount=0;return}n._clickCount=0,n.clickTimer&&(clearTimeout(n.clickTimer),n.clickTimer=null),o.preventDefault(),o.stopPropagation(),fn(x(n),ou[1],function(f,h){n.emitUserAction(h.e,"switch_fullscreen",{props:"fullscreen",from:l.fullscreen,to:!l.fullscreen}),l.fullscreen?l.exitFullscreen():l.getFullscreen()},{e:o,fullscreen:l.fullscreen})}}),n}return q(r,[{key:"afterCreate",value:function(){var e=this;this._clickCount=0,ou.map(function(a){e.__hooks[a]=null});var s=this.playerConfig.isMobileSimulateMode;s==="mobile"||le.device==="mobile"&&!le.os.isIpad||this.initEvents()}},{key:"initEvents",value:function(){var e=this,s=this.player,a=s.media,o=s.root,u=this.playerConfig.enableContextmenu;o&&o.addEventListener("click",this.onVideoClick,!1),o&&o.addEventListener("dblclick",this.onVideoDblClick,!1),Object.keys(Us).map(function(l){o.addEventListener(l,e[Us[l]],!1)}),!u&&a&&a.addEventListener("contextmenu",this.onContextmenu,!1)}},{key:"switchPlayPause",value:function(e){var s=this.player;this.emitUserAction(e,"switch_play_pause",{props:"paused",from:s.paused,to:!s.paused}),s.ended?s.duration!==1/0&&s.duration>0&&s.replay():s.paused?s.play():s.pause()}},{key:"onContextmenu",value:function(e){e=e||window.event,e.preventDefault&&e.preventDefault(),e.stopPropagation?e.stopPropagation():(e.returnValue=!1,e.cancelBubble=!0)}},{key:"destroy",value:function(){var e=this,s=this.player,a=s.video,o=s.root;this.clickTimer&&clearTimeout(this.clickTimer),o.removeEventListener("click",this.onVideoClick,!1),o.removeEventListener("dblclick",this.onVideoDblClick,!1),a.removeEventListener("contextmenu",this.onContextmenu,!1),Object.keys(Us).map(function(u){o.removeEventListener(u,e[Us[u]],!1)})}}],[{key:"pluginName",get:function(){return"pc"}},{key:"defaultConfig",get:function(){return{}}}]),r}(an),An={PRESS:"press",PRESS_END:"pressend",DOUBlE_CLICK:"doubleclick",CLICK:"click",TOUCH_MOVE:"touchmove",TOUCH_START:"touchstart",TOUCH_END:"touchend"},U0={start:"touchstart",end:"touchend",move:"touchmove",cancel:"touchcancel"},H0={start:"mousedown",end:"mouseup",move:"mousemove",cancel:"mouseleave"};function gh(t){return t&&t.length>0?t[t.length-1]:null}function z0(){return{pressDelay:600,dbClickDelay:200,disablePress:!1,disableDbClick:!1,miniStep:2,needPreventDefault:!0}}var V0=function(){function t(i){var r=this,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{eventType:"touch"};Q(this,t),O(this,"onTouchStart",function(e){var s=r._pos,a=r.root,o=gh(e.touches);s.x=o?parseInt(o.pageX,10):e.pageX,s.y=o?parseInt(o.pageX,10):e.pageX,s.start=!0,r.__setPress(e),a.addEventListener(r.events.end,r.onTouchEnd),a.addEventListener(r.events.cancel,r.onTouchCancel),a.addEventListener(r.events.move,r.onTouchMove),r.trigger(An.TOUCH_START,e)}),O(this,"onTouchCancel",function(e){r.onTouchEnd(e)}),O(this,"onTouchEnd",function(e){var s=r._pos,a=r.root;r.__clearPress(),a.removeEventListener(r.events.cancel,r.onTouchCancel),a.removeEventListener(r.events.end,r.onTouchEnd),a.removeEventListener(r.events.move,r.onTouchMove),e.moving=s.moving,e.press=s.press,s.press&&r.trigger(An.PRESS_END,e),r.trigger(An.TOUCH_END,e),!s.press&&!s.moving&&r.__setDb(e),s.press=!1,s.start=!1,s.moving=!1}),O(this,"onTouchMove",function(e){var s=r._pos,a=r.config,o=gh(e.touches),u=o?parseInt(o.pageX,10):e.pageX,l=o?parseInt(o.pageY,10):e.pageX,c=u-s.x,f=l-s.y;Math.abs(f)<a.miniStep&&Math.abs(c)<a.miniStep||(r.__clearPress(),s.press&&r.trigger(An.PRESS_END,e),s.press=!1,s.moving=!0,r.trigger(An.TOUCH_MOVE,e))}),this._pos={moving:!1,start:!1,x:0,y:0},this.config=z0(),Object.keys(n).map(function(e){r.config[e]=n[e]}),this.root=i,this.events=n.eventType==="mouse"?H0:U0,this.pressIntrvalId=null,this.dbIntrvalId=null,this.__handlers={},this._initEvent()}return q(t,[{key:"_initEvent",value:function(){this.root.addEventListener(this.events.start,this.onTouchStart)}},{key:"__setPress",value:function(r){var n=this,e=this.config;this.pressIntrvalId&&this.__clearPress(),this.pressIntrvalId=setTimeout(function(){n.trigger(An.PRESS,r),n._pos.press=!0,n.__clearPress()},e.pressDelay)}},{key:"__clearPress",value:function(){window.clearTimeout(this.pressIntrvalId),this.pressIntrvalId=null}},{key:"__setDb",value:function(r){var n=this,e=this.config;if(this.dbIntrvalId){this.__clearDb(),this.trigger(An.DOUBlE_CLICK,r);return}this.dbIntrvalId=setTimeout(function(){n.__clearDb(),!n._pos.start&&!n._pos.press&&!n._pos.moving&&n.trigger(An.CLICK,r)},e.dbClickDelay)}},{key:"__clearDb",value:function(){clearTimeout(this.dbIntrvalId),this.dbIntrvalId=null}},{key:"on",value:function(r,n){this.__handlers[r]||(this.__handlers[r]=[]),this.__handlers[r].push(n)}},{key:"off",value:function(r,n){if(this.__handlers[r]){for(var e=this.__handlers[r],s=-1,a=0;a<e.length;a++)if(e[a]===n){s=a;break}s>=0&&this.__handlers[r].splice(s,1)}}},{key:"trigger",value:function(r,n){this.__handlers[r]&&this.__handlers[r].map(function(e){try{e(n)}catch(s){console.error("trigger>>:".concat(r),s)}})}},{key:"destroy",value:function(){var r=this,n={touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart"};Object.keys(n).forEach(function(e){r.root.removeEventListener(e,r[n[e]])})}}]),t}();function j0(){return new DOMParser().parseFromString(`<svg width="20" height="9" viewBox="0 0 8 9" fill="none" xmlns="http://www.w3.org/2000/svg"
  xmlns:xlink="http://www.w3.org/1999/xlink">
  <path opacity="0.54"
    d="M7.5 3.63397C8.16667 4.01887 8.16667 4.98113 7.5 5.36603L1.5 8.83013C0.833334 9.21503 0 8.7339 0 7.9641L0 1.0359C0 0.266098 0.833333 -0.215027 1.5 0.169873L7.5 3.63397Z"
    fill="white" />
  <path transform="translate(5 0)" d="M7.5 3.63397C8.16667 4.01887 8.16667 4.98113 7.5 5.36603L1.5 8.83013C0.833334 9.21503 0 8.7339 0 7.9641L0 1.0359C0 0.266098 0.833333 -0.215027 1.5 0.169873L7.5 3.63397Z" fill="white"/>
</svg>`,"image/svg+xml").firstChild}var Ir={AUTO:"auto",SEEKING:"seeking",PLAYBACK:"playbackrate",LIGHT:""},lu=["videoClick","videoDbClick"],G0=function(t){ee(r,t);var i=te(r);function r(n){var e;return Q(this,r),e=i.call(this,n),O(x(e),"onTouchStart",function(s){var a=x(e),o=a.player,u=a.config,l=a.pos,c=a.playerConfig,f=e.getTouche(s);if(f&&!u.disableGesture&&e.duration>0&&!o.ended){l.isStart=!0,e.timer&&clearTimeout(e.timer),g.checkIsFunction(c.disableSwipeHandler)&&c.disableSwipeHandler(),e.find(".xg-dur").innerHTML=g.format(e.duration);var h=e.root.getBoundingClientRect();o.rotateDeg===90?(l.top=h.left,l.left=h.top,l.width=h.height,l.height=h.width):(l.top=h.top,l.left=h.left,l.width=h.width,l.height=h.height);var d=parseInt(f.pageX-l.left,10),p=parseInt(f.pageY-l.top,10);l.x=o.rotateDeg===90?p:d,l.y=o.rotateDeg===90?d:p,l.scopeL=u.scopeL*l.width,l.scopeR=(1-u.scopeR)*l.width,l.scopeM1=l.width*(1-u.scopeM)/2,l.scopeM2=l.width-l.scopeM1}}),O(x(e),"onTouchMove",function(s){var a=e.getTouche(s),o=x(e),u=o.pos,l=o.config,c=o.player;if(!(!a||l.disableGesture||!e.duration||!u.isStart)){var f=l.miniMoveStep,h=l.hideControlsActive,d=parseInt(a.pageX-u.left,10),p=parseInt(a.pageY-u.top,10),m=c.rotateDeg===90?p:d,_=c.rotateDeg===90?d:p;if(Math.abs(m-u.x)>f||Math.abs(_-u.y)>f){var v=m-u.x,y=_-u.y,S=u.scope;if(S===-1&&(S=e.checkScope(m,_,v,y,u),S===0&&(h?c.blur():c.focus({autoHide:!1}),!u.time&&(u.time=parseInt(c.currentTime*1e3,10)+e.timeOffset*1e3)),u.scope=S),S===-1||S>0&&!l.gestureY||S===0&&!l.gestureX)return;e.executeMove(v,y,S,u.width,u.height),u.x=m,u.y=_}}}),O(x(e),"onTouchEnd",function(s){var a=x(e),o=a.player,u=a.pos,l=a.playerConfig;if(setTimeout(function(){o.getPlugin("progress")&&o.getPlugin("progress").resetSeekState()},10),!!u.isStart){u.scope>-1&&s.cancelable&&s.preventDefault();var c=e.config,f=c.disableGesture,h=c.gestureX;!f&&h?e.endLastMove(u.scope):u.time=0,u.scope=-1,e.resetPos(),g.checkIsFunction(l.enableSwipeHandler)&&l.enableSwipeHandler(),e.changeAction(Ir.AUTO)}}),O(x(e),"onRootTouchMove",function(s){e.config.disableGesture||!e.config.gestureX||e.checkIsRootTarget(s)&&(s.stopPropagation(),e.pos.isStart?e.onTouchMove(s):e.onTouchStart(s))}),O(x(e),"onRootTouchEnd",function(s){e.pos.scope>-1&&e.onTouchEnd(s)}),e.pos={isStart:!1,x:0,y:0,time:0,volume:0,rate:1,light:0,width:0,height:0,scopeL:0,scopeR:0,scopeM1:0,scopeM2:0,scope:-1},e.timer=null,e}return q(r,[{key:"duration",get:function(){return this.playerConfig.customDuration||this.player.duration}},{key:"timeOffset",get:function(){return this.playerConfig.timeOffset||0}},{key:"registerIcons",value:function(){return{seekTipIcon:{icon:j0,class:"xg-seek-pre"}}}},{key:"afterCreate",value:function(){var e=this;lu.map(function(h){e.__hooks[h]=null});var s=this.playerConfig,a=this.config,o=this.player;s.closeVideoDblclick===!0&&(a.closedbClick=!0),this.resetPos(),g.isUndefined(s.disableGesture)||(a.disableGesture=!!s.disableGesture),this.appendChild(".xg-seek-icon",this.icons.seekTipIcon),this.xgMask=g.createDom("xg-mask","",{},"xgmask"),o.root.appendChild(this.xgMask),this.initCustomStyle(),this.registerThumbnail();var u=this.domEventType==="mouse"?"mouse":"touch";this.touch=new V0(this.root,{eventType:u,needPreventDefault:!this.config.disableGesture}),this.root.addEventListener("contextmenu",function(h){h.preventDefault()}),o.root.addEventListener("touchmove",this.onRootTouchMove,!0),o.root.addEventListener("touchend",this.onRootTouchEnd,!0),o.root.addEventListener("touchcancel",this.onRootTouchEnd,!0);var l=this.player.controls;l&&l.center&&(l.center.addEventListener("touchmove",this.onRootTouchMove,!0),l.center.addEventListener("touchend",this.onRootTouchEnd,!0),l.center.addEventListener("touchcancel",this.onRootTouchEnd,!0)),this.on(Jn,function(){var h=e.player,d=e.config;h.duration*1e3<d.moveDuration&&(d.moveDuration=h.duration*1e3)}),this.on([pn,Cr],function(){var h=e.pos,d=h.time,p=h.isStart;!p&&d>0&&(e.pos.time=0)});var c={touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onTouchEnd",press:"onPress",pressend:"onPressEnd",click:"onClick",doubleclick:"onDbClick"};if(Object.keys(c).map(function(h){e.touch.on(h,function(d){e[c[h]](d)})}),!a.disableActive){var f=o.plugins.progress;f&&(f.addCallBack("dragmove",function(h){e.activeSeekNote(h.currentTime,h.forward)}),["dragend","click"].forEach(function(h){f.addCallBack(h,function(){e.changeAction(Ir.AUTO)})}))}}},{key:"registerThumbnail",value:function(){var e=this.player,s=e.plugins.thumbnail;if(s&&s.usable){this.thumbnail=s.createThumbnail(null,"mobile-thumbnail");var a=this.find(".time-preview");a.insertBefore(this.thumbnail,a.children[0])}}},{key:"initCustomStyle",value:function(){var e=this.playerConfig||{},s=e.commonStyle,a=s.playedColor,o=s.progressColor,u=s.timePreviewStyle,l=s.curTimeColor,c=s.durationColor;if(a&&(this.find(".xg-curbar").style.backgroundColor=a),o&&(this.find(".xg-bar").style.backgroundColor=o),u){var f=this.find(".time-preview");Object.keys(u).forEach(function(p){f.style[p]=u[p]})}var h=l||a,d=c;h&&(this.find(".xg-cur").style.color=h),d&&(this.find(".xg-dur").style.color=d),this.config.disableTimeProgress&&g.addClass(this.find(".xg-timebar"),"hide")}},{key:"resetPos",value:function(){var e=this;this.pos?(this.pos.isStart=!1,this.pos.scope=-1,["x","y","width","height","scopeL","scopeR","scopeM1","scopeM2"].map(function(s){e.pos[s]=0})):this.pos={isStart:!1,x:0,y:0,volume:0,rate:1,light:0,width:0,height:0,scopeL:0,scopeR:0,scopeM1:0,scopeM2:0,scope:-1,time:0}}},{key:"changeAction",value:function(e){var s=this.player,a=this.root;a.setAttribute("data-xg-action",e);var o=s.plugins.start;o&&o.recover()}},{key:"getTouche",value:function(e){var s=this.player.rotateDeg,a=e.touches&&e.touches.length>0?e.touches[e.touches.length-1]:e;return s===0?{pageX:a.pageX,pageY:a.pageY}:{pageX:a.pageX,pageY:a.pageY}}},{key:"checkScope",value:function(e,s,a,o,u){var l=u.width,c=-1;if(e<0||e>l)return c;var f=Math.abs(o===0?a:a/o);return Math.abs(a)>0&&f>=1.73&&e>u.scopeM1&&e<u.scopeM2?c=0:(Math.abs(a)===0||f<=.57)&&(c=e<u.scopeL?1:e>u.scopeR?2:3),c}},{key:"executeMove",value:function(e,s,a,o,u){switch(a){case 0:this.updateTime(e/o*this.config.scopeM);break;case 1:this.updateBrightness(s/u);break;case 2:le.os.isIos||this.updateVolume(s/u);break}}},{key:"endLastMove",value:function(e){var s=this,a=this.pos,o=this.player,u=this.config,l=(a.time-this.timeOffset)/1e3;switch(e){case 0:o.seek(Number(l).toFixed(1)),u.hideControlsEnd?o.blur():o.focus(),this.timer=setTimeout(function(){s.pos.time=0},500);break}this.changeAction(Ir.AUTO)}},{key:"checkIsRootTarget",value:function(e){var s=this.player.plugins||{};return s.progress&&s.progress.root.contains(e.target)?!1:s.start&&s.start.root.contains(e.target)||s.controls&&s.controls.root.contains(e.target)}},{key:"sendUseAction",value:function(e){var s=this.player.paused;this.emitUserAction(e,"switch_play_pause",{prop:"paused",from:s,to:!s})}},{key:"clickHandler",value:function(e){var s=this.player,a=this.config,o=this.playerConfig;if(s.state<ve.RUNNING){o.closeVideoClick||(this.sendUseAction(g.createEvent("click")),s.play());return}!a.closedbClick||o.closeVideoClick?s.isActive?s.blur():s.focus():o.closeVideoClick||((s.isActive||a.focusVideoClick)&&(this.sendUseAction(g.createEvent("click")),this.switchPlayPause()),s.focus())}},{key:"dbClickHandler",value:function(e){var s=this.config,a=this.player;!s.closedbClick&&a.state>=ve.RUNNING&&(this.sendUseAction(g.createEvent("dblclick")),this.switchPlayPause())}},{key:"onClick",value:function(e){var s=this,a=this.player;fn(this,lu[0],function(o,u){s.clickHandler(u.e)},{e,paused:a.paused})}},{key:"onDbClick",value:function(e){var s=this,a=this.player;fn(this,lu[1],function(o,u){s.dbClickHandler(u.e)},{e,paused:a.paused})}},{key:"onPress",value:function(e){var s=this.pos,a=this.config,o=this.player;a.disablePress||(s.rate=this.player.playbackRate,this.emitUserAction("press","change_rate",{prop:"playbackRate",from:o.playbackRate,to:a.pressRate}),o.playbackRate=a.pressRate,this.changeAction(Ir.PLAYBACK))}},{key:"onPressEnd",value:function(e){var s=this.pos,a=this.config,o=this.player;a.disablePress||(this.emitUserAction("pressend","change_rate",{prop:"playbackRate",from:o.playbackRate,to:s.rate}),o.playbackRate=s.rate,s.rate=1,this.changeAction(Ir.AUTO))}},{key:"updateTime",value:function(e){var s=this.player,a=this.config,o=this.player.duration;e=Number(e.toFixed(4));var u=parseInt(e*a.moveDuration,10)+this.timeOffset;u+=this.pos.time,u=u<0?0:u>o*1e3?o*1e3-200:u,s.getPlugin("time")&&s.getPlugin("time").updateTime(u/1e3),s.getPlugin("progress")&&s.getPlugin("progress").updatePercent(u/1e3/this.duration,!0),this.activeSeekNote(u/1e3,e>0),a.isTouchingSeek&&s.seek(Number((u-this.timeOffset)/1e3).toFixed(1)),this.pos.time=u}},{key:"updateVolume",value:function(e){this.player.rotateDeg&&(e=-e);var s=this.player,a=this.pos;if(e=parseInt(e*100,10),a.volume+=e,!(Math.abs(a.volume)<10)){var o=parseInt(s.volume*10,10)-parseInt(a.volume/10,10);o=o>10?10:o<1?0:o,s.volume=o/10,a.volume=0}}},{key:"updateBrightness",value:function(e){this.player.rotateDeg&&(e=-e);var s=this.pos,a=this.config,o=this.xgMask,u=s.light+.8*e;u=u>a.maxDarkness?a.maxDarkness:u<0?0:u,o&&(o.style.backgroundColor="rgba(0,0,0,".concat(u,")")),s.light=u}},{key:"activeSeekNote",value:function(e){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,a=this.player,o=this.config,u=!(this.duration!==1/0&&this.duration>0);if(!(!e||typeof e!="number"||u||o.disableActive)){e<0?e=0:e>a.duration&&(e=a.duration-.2),this.changeAction(Ir.SEEKING);var l=a.plugins.start;l&&l.focusHide(),this.find(".xg-dur").innerHTML=g.format(this.duration),this.find(".xg-cur").innerHTML=g.format(e),this.find(".xg-curbar").style.width="".concat(e/this.duration*100,"%"),s?g.removeClass(this.find(".xg-seek-show"),"xg-back"):g.addClass(this.find(".xg-seek-show"),"xg-back"),this.updateThumbnails(e)}}},{key:"updateThumbnails",value:function(e){var s=this.player,a=s.plugins.thumbnail;a&&a.usable&&this.thumbnail&&a.update(this.thumbnail,e,160,90)}},{key:"switchPlayPause",value:function(){var e=this.player;if(e.state<ve.ATTACHED)return!1;e.ended||(e.paused?e.play():e.pause())}},{key:"disableGesture",value:function(){this.config.disableGesture=!1}},{key:"enableGesture",value:function(){this.config.disableGesture=!0}},{key:"destroy",value:function(){var e=this.player;this.timer&&clearTimeout(this.timer),this.thumbnail=null,e.root.removeChild(this.xgMask),this.xgMask=null,this.touch&&this.touch.destroy(),this.touch=null,e.root.removeEventListener("touchmove",this.onRootTouchMove,!0),e.root.removeEventListener("touchend",this.onRootTouchEnd,!0),e.root.removeEventListener("touchcancel",this.onRootTouchEnd,!0);var s=this.player.controls;s&&s.center&&(s.center.removeEventListener("touchmove",this.onRootTouchMove,!0),s.center.removeEventListener("touchend",this.onRootTouchEnd,!0),s.center.removeEventListener("touchcancel",this.onRootTouchEnd,!0))}},{key:"render",value:function(){var e=this.config.gradient!=="normal"?"gradient ".concat(this.config.gradient):"gradient";return`
     <xg-trigger class="trigger">
     <div class="`.concat(e,`"></div>
        <div class="time-preview">
            <div class="xg-seek-show `).concat(this.config.disableSeekIcon?" hide-seek-icon":"",`">
              <i class="xg-seek-icon"></i>
              <span class="xg-cur">00:00</span>
              <span class="xg-separator">/</span>
              <span class="xg-dur">00:00</span>
            </div>
              <div class="xg-bar xg-timebar">
                <div class="xg-curbar"></div>
              </div>
        </div>
        <div class="xg-playbackrate xg-top-note">
            <span><i>`).concat(this.config.pressRate,"X</i>").concat(this.i18n.FORWARD,`</span>
        </div>
     </xg-trigger>
    `)}}],[{key:"pluginName",get:function(){return"mobile"}},{key:"defaultConfig",get:function(){return{index:0,disableGesture:!1,gestureX:!0,gestureY:!0,gradient:"normal",isTouchingSeek:!1,miniMoveStep:5,miniYPer:5,scopeL:.25,scopeR:.25,scopeM:.9,pressRate:2,darkness:!0,maxDarkness:.8,disableActive:!1,disableTimeProgress:!1,hideControlsActive:!1,hideControlsEnd:!1,moveDuration:60*6*1e3,closedbClick:!1,disablePress:!0,disableSeekIcon:!1,focusVideoClick:!1}}}]),r}(me);function W0(t){t.preventDefault(),t.returnValue=!1}function mh(t){var i=t.tagName;return!!(i==="INPUT"||i==="TEXTAREA"||t.isContentEditable)}var yh=function(t){ee(r,t);var i=te(r);function r(){var n;Q(this,r);for(var e=arguments.length,s=new Array(e),a=0;a<e;a++)s[a]=arguments[a];return n=i.call.apply(i,[this].concat(s)),O(x(n),"onBodyKeyDown",function(o){if(n.player){var u=o||window.event,l=u.keyCode,c=x(n),f=c._keyState,h=c.player,d=n.config,p=d.disable,m=d.disableBodyTrigger,_=d.isIgnoreUserActive;if(p||m||!(h.isUserActive||_)||mh(u.target)||!n.checkIsVisible()||u.metaKey||u.altKey||u.ctrlKey){f.isBodyKeyDown=!1;return}!o.repeat&&!f.isKeyDown&&((u.target===document.body||n.config.isGlobalTrigger&&!mh(u.target))&&n.checkCode(l,!0)&&(f.isBodyKeyDown=!0),document.addEventListener("keyup",n.onBodyKeyUp)),f.isBodyKeyDown&&n.handleKeyDown(u)}}),O(x(n),"onBodyKeyUp",function(o){n.player&&(document.removeEventListener("keyup",n.onBodyKeyUp),n.handleKeyUp(o))}),O(x(n),"onKeydown",function(o){if(n.player){var u=o||window.event,l=x(n),c=l._keyState;if(!u.repeat){if(n.config.disable||n.config.disableRootTrigger||u.metaKey||u.altKey||u.ctrlKey)return;u&&(u.keyCode===37||n.checkCode(u.keyCode))&&(u.target===n.player.root||u.target===n.player.video||u.target===n.player.controls.el)&&(c.isKeyDown=!0),n.player.root.addEventListener("keyup",n.onKeyup)}c.isKeyDown&&n.handleKeyDown(u)}}),O(x(n),"onKeyup",function(o){n.player&&(n.player.root.removeEventListener("keyup",n.onKeyup),n.handleKeyUp(o))}),n}return q(r,[{key:"mergekeyCodeMap",value:function(){var e=this,s=this.config.keyCodeMap;s&&Object.keys(s).map(function(a){e.keyCodeMap[a]?["keyCode","action","disable","pressAction","disablePress","isBodyTarget"].map(function(o){s[a][o]&&(e.keyCodeMap[a][o]=s[a][o])}):e.keyCodeMap[a]=s[a]})}},{key:"afterCreate",value:function(){this.config.disable=!this.playerConfig.keyShortcut;var e=typeof this.config.seekStep=="function"?this.config.seekStep(this.player):this.config.seekStep;!e||typeof e!="number"||(this.seekStep=e),this.keyCodeMap={space:{keyCode:32,action:"playPause",disable:!1,disablePress:!1,noBodyTarget:!1},up:{keyCode:38,action:"upVolume",disable:!1,disablePress:!1,noBodyTarget:!0},down:{keyCode:40,action:"downVolume",disable:!1,disablePress:!1,noBodyTarget:!0},left:{keyCode:37,action:"seekBack",disablePress:!1,disable:!1},right:{keyCode:39,action:"seek",pressAction:"changePlaybackRate",disablePress:!1,disable:!1},esc:{keyCode:27,action:"exitFullscreen",disablePress:!0,disable:!1}},this.mergekeyCodeMap(),this._keyState={isKeyDown:!1,isBodyKeyDown:!1,isPress:!1,tt:0,playbackRate:0},this.player.root.addEventListener("keydown",this.onKeydown),document.addEventListener("keydown",this.onBodyKeyDown)}},{key:"setConfig",value:function(e){var s=this;Object.keys(e).forEach(function(a){s.config[a]=e[a]})}},{key:"checkIsVisible",value:function(){if(!this.config.checkVisible)return!0;var e=this.player.root.getBoundingClientRect(),s=e.height,a=e.top,o=e.bottom,u=window.innerHeight;return!(a<0&&a<0-s*.9||o>0&&o-u>s*.9)}},{key:"checkCode",value:function(e,s){var a=this,o=!1;return Object.keys(this.keyCodeMap).map(function(u){a.keyCodeMap[u]&&e===a.keyCodeMap[u].keyCode&&!a.keyCodeMap[u].disable&&(o=!s||s&&!a.keyCodeMap[u].noBodyTarget)}),o}},{key:"downVolume",value:function(e){var s=this.player;if(!(s.volume<=0)){var a=parseFloat((s.volume-.1).toFixed(1)),o={volume:{from:s.volume,to:a}};this.emitUserAction(e,"change_volume",{props:o}),a>=0?s.volume=a:s.volume=0}}},{key:"upVolume",value:function(e){var s=this.player;if(!(s.volume>=1)){var a=parseFloat((s.volume+.1).toFixed(1)),o={volume:{from:s.volume,to:a}};this.emitUserAction(e,"change_volume",{props:o}),a<=1?s.volume=a:s.volume=1}}},{key:"seek",value:function(e){var s=this.player,a=s.currentTime,o=s.offsetCurrentTime,u=s.duration,l=s.offsetDuration,c=s.timeSegments,f=o>-1?o:a,h=l||u,d=e.repeat&&this.seekStep>=4?parseInt(this.seekStep/2,10):this.seekStep;f+d<=h?f=f+d:f=h;var p=g.getCurrentTimeByOffset(f,c),m={currentTime:{from:a,to:p}};this.emitUserAction(e,"seek",{props:m}),this.player.currentTime=p}},{key:"seekBack",value:function(e){var s=this.player,a=s.currentTime,o=s.offsetCurrentTime,u=s.timeSegments,l=e.repeat?parseInt(this.seekStep/2,10):this.seekStep,c=o>-1?o:a,f=c-l;f<0&&(f=0),f=g.getCurrentTimeByOffset(f,u);var h={currentTime:{from:a,to:f}};this.emitUserAction(e,"seek",{props:h}),this.player.currentTime=f}},{key:"changePlaybackRate",value:function(e){var s=this._keyState,a=this.config,o=this.player;s.playbackRate===0&&(s.playbackRate=o.playbackRate,o.playbackRate=a.playbackRate)}},{key:"playPause",value:function(e){var s=this.player;s&&(this.emitUserAction(e,"switch_play_pause"),s.paused?s.play():s.pause())}},{key:"exitFullscreen",value:function(e){var s=this.player,a=s.fullscreen,o=s.cssfullscreen;a&&(this.emitUserAction("keyup","switch_fullscreen",{prop:"fullscreen",from:a,to:!a}),s.exitFullscreen()),o&&(this.emitUserAction("keyup","switch_css_fullscreen",{prop:"cssfullscreen",from:o,to:!o}),s.exitCssFullscreen())}},{key:"handleKeyDown",value:function(e){var s=this._keyState;if(e.repeat){s.isPress=!0;var a=Date.now();if(a-s.tt<200)return;s.tt=a}this.handleKeyCode(e.keyCode,e,s.isPress)}},{key:"handleKeyUp",value:function(e){var s=this._keyState;s.playbackRate>0&&(this.player.playbackRate=s.playbackRate,s.playbackRate=0),s.isKeyDown=!1,s.isPress=!1,s.tt=0}},{key:"handleKeyCode",value:function(e,s,a){for(var o=Object.keys(this.keyCodeMap),u=0;u<o.length;u++){var l=this.keyCodeMap[o[u]],c=l.action,f=l.keyCode,h=l.disable,d=l.pressAction,p=l.disablePress;if(f===e){if(!h&&!(a&&p)){var m=a&&d||c;typeof m=="function"?c(s,this.player,a):typeof m=="string"&&typeof this[m]=="function"&&this[m](s,this.player,a),this.emit(Sv,Oe({key:o[u],target:s.target,isPress:a},this.keyCodeMap[o[u]]))}W0(s),s.stopPropagation();break}}}},{key:"destroy",value:function(){this.player.root.removeEventListener("keydown",this.onKeydown),document.removeEventListener("keydown",this.onBodyKeyDown),this.player.root.removeEventListener("keyup",this.onKeyup),document.removeEventListener("keyup",this.onBodyKeyUp)}},{key:"disable",value:function(){this.config.disable=!0}},{key:"enable",value:function(){this.config.disable=!1}}],[{key:"pluginName",get:function(){return"keyboard"}},{key:"defaultConfig",get:function(){return{seekStep:10,checkVisible:!1,disableBodyTrigger:!1,disableRootTrigger:!1,isGlobalTrigger:!0,keyCodeMap:{},disable:!1,playbackRate:2,isIgnoreUserActive:!0}}}]),r}(an);function $0(){return new DOMParser().parseFromString(`<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="-5 -5 110 110">
  <path d="M100,50A50,50,0,1,1,50,0" stroke-width="5" stroke="#ddd" stroke-dasharray="236" fill="none"></path>
</svg>
`,"image/svg+xml").firstChild}var K0=function(t){ee(r,t);var i=te(r);function r(){return Q(this,r),i.apply(this,arguments)}return q(r,[{key:"registerIcons",value:function(){return{loadingIcon:$0}}},{key:"afterCreate",value:function(){this.appendChild("xg-loading-inner",this.icons.loadingIcon)}},{key:"render",value:function(){return`
    <xg-loading class="xgplayer-loading">
      <xg-loading-inner></xg-loading-inner>
    </xg-loading>`}}],[{key:"pluginName",get:function(){return"loading"}},{key:"defaultConfig",get:function(){return{position:ke.ROOT}}}]),r}(me),Y0=[{tag:"xg-cache",className:"xgplayer-progress-cache",styleKey:"cachedColor"},{tag:"xg-played",className:"xgplayer-progress-played",styleKey:"playedColor"}],X0=function(){function t(i){Q(this,t),this.fragments=i.fragments||[],this.fragments.length===0&&this.fragments.push({percent:1}),this._callBack=i.actionCallback,this.fragConfig={fragFocusClass:i.fragFocusClass||"inner-focus-point",fragAutoFocus:!!i.fragAutoFocus,fragClass:i.fragClass||""},this.style=i.style||{playedColor:"",cachedColor:"",progressColor:""},this.duration=0,this.cachedIndex=0,this.playedIndex=0,this.focusIndex=-1}return q(t,[{key:"updateDuration",value:function(r){var n=this;this.duration=r;var e=0,s=this.fragments;this.fragments=s.map(function(a){return a.start=parseInt(e,10),a.end=parseInt(e+a.percent*n.duration,10),a.duration=parseInt(a.percent*n.duration,10),e+=a.percent*n.duration,a})}},{key:"updateProgress",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"played",n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{newIndex:0,curIndex:0,millisecond:0},e=this.progressList,s=this.fragments;if(!(e.length<1)){var a=n.newIndex,o=n.curIndex,u=n.millisecond;a!==o&&e.map(function(f,h){h<a?f[r].style.width="100%":h>a&&(f[r].style.width=0)});var l=s[a],c=u===0?0:(u-l.start)/l.duration;e[a][r].style.width=c<0?0:"".concat(c*100,"%")}}},{key:"updateFocus",value:function(r){if(!(!this.fragConfig.fragAutoFocus||this.fragments.length<2)){if(!r){if(this.focusIndex>-1){this.unHightLight(this.focusIndex);var n={index:-1,preIndex:this.focusIndex,fragment:null};this._callBack&&this._callBack(n),this.focusIndex=-1}return}var e=this.findIndex(r.currentTime*1e3,this.focusIndex);if(e>=0&&e!==this.focusIndex){this.focusIndex>-1&&this.unHightLight(this.focusIndex),this.setHightLight(e);var s={index:e,preIndex:this.focusIndex,fragment:this.fragments[this.focusIndex]};this.focusIndex=e,this._callBack&&this._callBack(s)}}}},{key:"update",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{cached:0,played:0},n=arguments.length>1?arguments[1]:void 0;if(!this.duration||parseInt(n*1e3,10)!==this.duration){if(!n&&n!==0)return;this.updateDuration(parseInt(n*1e3,10))}var e=this.playedIndex,s=this.cachedIndex;if(g.typeOf(r.played)!=="Undefined"){var a=this.findIndex(r.played*1e3,e);if(a<0)return;this.updateProgress("played",{newIndex:a,curIndex:e,millisecond:parseInt(r.played*1e3,10)}),this.playedIndex=a}if(g.typeOf(r.cached)!=="Undefined"){var o=this.findIndex(r.cached*1e3,s);if(o<0)return;this.updateProgress("cached",{newIndex:o,curIndex:s,millisecond:parseInt(r.cached*1e3,10)}),this.cachedIndex=o}}},{key:"findIndex",value:function(r,n){var e=this.fragments;if(!e||e.length===0)return-1;if(e.length===1)return 0;if(n>-1&&n<e.length&&r>e[n].start&&r<e[n].end)return n;if(r>e[e.length-1].start)return e.length-1;for(var s=0;s<e.length;s++)if(r>e[s].start&&r<=e[s].end){n=s;break}return n}},{key:"findHightLight",value:function(){for(var r=this.root.children,n=0;n<r.length;n++)if(g.hasClass(r[n],this.fragConfig.fragFocusClass))return{dom:r[n],pos:r[n].getBoundingClientRect()}}},{key:"findFragment",value:function(r){var n=this.root.children;return r<0||r>=n.length?null:{dom:n[r],pos:n[r].getBoundingClientRect()}}},{key:"unHightLight",value:function(){for(var r=this.root.children,n=0;n<r.length;n++)g.removeClass(r[n],this.fragConfig.fragFocusClass)}},{key:"setHightLight",value:function(r){var n=this.root.children;if(r<n.length)return g.addClass(n[r],this.fragConfig.fragFocusClass),{dom:n[r],pos:n[r].getBoundingClientRect()}}},{key:"destroy",value:function(){this.progressList=null,this.fragments=null,this.root.innerHTML=""}},{key:"reset",value:function(r){var n=this;if(Object.keys(this.fragConfig).forEach(function(s){r[s]!==void 0&&(n.fragConfig[s]=r[s])}),r.fragments){if(this.fragments=r.fragments.length===0?[{percent:1}]:r.fragments,this.updateDuration(this.duration),this.playedIndex=0,this.cachedIndex=0,this.root)for(var e=this.root.children;e.length>0;)this.root.removeChild(e[0]);this.render()}}},{key:"render",value:function(){var r=this,n=this.style.progressColor;if(this.root||(this.root=g.createDom("xg-inners","",{},"progress-list")),this.fragments){var e=this.fragConfig,s=e.fragClass,a=e.fragFocusClass;this.progressList=this.fragments.map(function(o){var u=g.createDom("xg-inner","",{style:n?"background:".concat(n,"; flex: ").concat(o.percent):"flex: ".concat(o.percent)},"".concat(o.isFocus?a:""," xgplayer-progress-inner ").concat(s));return r.root.appendChild(u),Y0.forEach(function(l){u.appendChild(g.createDom(l.tag,"",{style:l.styleKey?"background: ".concat(r.style[l.styleKey],"; width:0;"):"width:0;"},l.className))}),{cached:u.children[0],played:u.children[1]}})}return this.root}}]),t}(),_h={POINT:"inner-focus-point",HIGHLIGHT:"inner-focus-highlight"},Q0=function(t){ee(r,t);var i=te(r);function r(n){var e;return Q(this,r),e=i.call(this,n),O(x(e),"onMoveOnly",function(s,a){var o=x(e),u=o.pos,l=o.config,c=o.player,f=a;if(s){g.event(s);var h=g.getEventPos(s,c.zoom),d=c.rotateDeg===90?h.clientY:h.clientX;if(u.moving&&Math.abs(u.x-d)<l.miniMoveStep)return;u.moving=!0,u.x=d,f=e.computeTime(s,d)}e.triggerCallbacks("dragmove",f,s),e._updateInnerFocus(f)}),O(x(e),"onBodyClick",function(s){e.pos.isLocked&&(e.pos.isLocked=!1,s.preventDefault(),s.stopPropagation())}),O(x(e),"_mouseDownHandler",function(s,a){e._state.time=a.currentTime,e.updateWidth(a.currentTime,a.seekTime,a.percent,0),e._updateInnerFocus(a)}),O(x(e),"_mouseUpHandler",function(s,a){var o=x(e),u=o.pos;u.moving&&e.updateWidth(a.currentTime,a.seekTime,a.percent,2)}),O(x(e),"_mouseMoveHandler",function(s,a){var o=x(e),u=o._state,l=o.pos,c=o.config,f=o.player;u.time<a.currentTime?a.forward=!0:a.forward=!1,u.time=a.currentTime,l.isDown&&!l.moving&&(l.moving=!0,c.isPauseMoving&&f.pause(),e.triggerCallbacks("dragstart",a,s),e.emitUserAction("drag","dragstart",a)),e.updateWidth(a.currentTime,a.seekTime,a.percent,1),e.triggerCallbacks("dragmove",a,s),e._updateInnerFocus(a)}),O(x(e),"onMouseDown",function(s){var a=x(e),o=a._state,u=a.player,l=a.pos,c=a.config,f=a.playerConfig,h=g.getEventPos(s,u.zoom),d=u.rotateDeg===90?h.clientY:h.clientX;if(!(u.isMini||c.closeMoveSeek||!f.allowSeekAfterEnded&&u.ended)){if(!u.duration&&!u.isPlaying){u.play();return}s.stopPropagation(),e.focus(),g.checkIsFunction(f.disableSwipeHandler)&&f.disableSwipeHandler(),g.checkIsFunction(c.onMoveStart)&&c.onMoveStart(),g.event(s),l.x=d,l.isDown=!0,l.moving=!1,o.prePlayTime=u.currentTime,u.focus({autoHide:!1}),e.isProgressMoving=!0,g.addClass(e.progressBtn,"active");var p=e.computeTime(s,d);p.prePlayTime=o.prePlayTime,e._mouseDownHandlerHook(s,p);var m=s.type;return m==="touchstart"?(e.root.addEventListener("touchmove",e.onMouseMove),e.root.addEventListener("touchend",e.onMouseUp),e.root.addEventListener("touchcancel",e.onMouseUp)):(e.unbind("mousemove",e.onMoveOnly),document.addEventListener("mousemove",e.onMouseMove,!1),document.addEventListener("mouseup",e.onMouseUp,!1)),!0}}),O(x(e),"onMouseUp",function(s){var a=x(e),o=a.player,u=a.config,l=a.pos,c=a.playerConfig,f=a._state;s.stopPropagation(),s.preventDefault(),g.checkIsFunction(c.enableSwipeHandler)&&c.enableSwipeHandler(),g.checkIsFunction(u.onMoveEnd)&&u.onMoveEnd(),g.event(s),g.removeClass(e.progressBtn,"active");var h=e.computeTime(s,l.x);h.prePlayTime=f.prePlayTime,l.moving?(e.triggerCallbacks("dragend",h,s),e.emitUserAction("drag","dragend",h)):(e.triggerCallbacks("click",h,s),e.emitUserAction("click","click",h)),e._mouseUpHandlerHook(s,h),l.moving=!1,l.isDown=!1,l.x=0,l.y=0,l.isLocked=!0,f.prePlayTime=0,f.time=0;var d=s.type;d==="touchend"||d==="touchcancel"?(e.root.removeEventListener("touchmove",e.onMouseMove),e.root.removeEventListener("touchend",e.onMouseUp),e.root.removeEventListener("touchcancel",e.onMouseUp),e.blur()):(document.removeEventListener("mousemove",e.onMouseMove,!1),document.removeEventListener("mouseup",e.onMouseUp,!1),l.isEnter?c.isMobileSimulateMode!=="mobile"&&e.bind("mousemove",e.onMoveOnly):e.onMouseLeave(s)),g.setTimeout(x(e),function(){e.resetSeekState()},1),o.focus()}),O(x(e),"onMouseMove",function(s){var a=x(e),o=a._state,u=a.pos,l=a.player,c=a.config;g.checkTouchSupport()&&s.preventDefault(),g.event(s);var f=g.getEventPos(s,l.zoom),h=l.rotateDeg===90?f.clientY:f.clientX,d=Math.abs(u.x-h);if(!(u.moving&&d<c.miniMoveStep||!u.moving&&d<c.miniStartStep)){u.x=h;var p=e.computeTime(s,h);p.prePlayTime=o.prePlayTime,e._mouseMoveHandlerHook(s,p)}}),O(x(e),"onMouseOut",function(s){e.triggerCallbacks("mouseout",null,s)}),O(x(e),"onMouseOver",function(s){e.triggerCallbacks("mouseover",null,s)}),O(x(e),"onMouseEnter",function(s){var a=x(e),o=a.player,u=a.pos;if(!(u.isDown||u.isEnter||o.isMini||!o.config.allowSeekAfterEnded&&o.ended)){u.isEnter=!0,e.bind("mousemove",e.onMoveOnly),e.bind("mouseleave",e.onMouseLeave),g.event(s);var l=g.getEventPos(s,o.zoom),c=o.rotateDeg===90?l.clientY:l.clientX,f=e.computeTime(s,c);e.triggerCallbacks("mouseenter",f,s),e.focus()}}),O(x(e),"onMouseLeave",function(s){e.triggerCallbacks("mouseleave",null,s),e.unlock(),e._updateInnerFocus(null)}),O(x(e),"onVideoResize",function(){var s=e.pos,a=s.x,o=s.isDown,u=s.isEnter;if(u&&!o){var l=e.computeTime(null,a);e.onMoveOnly(null,l)}}),e.useable=!1,e.isProgressMoving=!1,e.__dragCallBacks=[],e._state={now:-1,direc:0,time:0,prePlayTime:-1},e._disableBlur=!1,e}return q(r,[{key:"offsetDuration",get:function(){return this.playerConfig.customDuration||this.player.offsetDuration||this.player.duration}},{key:"duration",get:function(){return this.playerConfig.customDuration||this.player.duration}},{key:"timeOffset",get:function(){return this.playerConfig.timeOffset||0}},{key:"currentTime",get:function(){var e=this.player,s=e.offsetCurrentTime,a=e.currentTime;return s>=0?s:a+this.timeOffset}},{key:"changeState",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.useable=e}},{key:"show",value:function(e){this.root&&(this.root.style.display="flex")}},{key:"_initInner",value:function(){var e=this,s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};(!s||s.length===0)&&(s=[{percent:1}]);var o=Oe(Oe({fragments:s},a),{},{actionCallback:function(l){e.emitUserAction("fragment_focus","fragment_focus",l)}});this.innerList?this.innerList.reset(o):(this.innerList=new X0(o),this.outer.insertBefore(this.innerList.render(),this.outer.children[0]),["findHightLight","unHightLight","setHightLight","findFragment"].map(function(u){e[u]=e.innerList[u].bind(e.innerList)}))}},{key:"_updateInnerFocus",value:function(e){this.innerList&&this.innerList.updateFocus(e)}},{key:"afterCreate",value:function(){var e=this;if(!(this.config.disable||this.playerConfig.isLive)){this.pos={x:0,y:0,moving:!1,isDown:!1,isEnter:!1,isLocked:!1},this.outer=this.find("xg-outer");var s=this.config,a=s.fragFocusClass,o=s.fragAutoFocus,u=s.fragClass;this._initInner(this.config.fragments,{fragFocusClass:a,fragAutoFocus:o,fragClass:u,style:this.playerConfig.commonStyle||{}}),le.device==="mobile"&&(this.config.isDragingSeek=!1,this.isMobile=!0),this.progressBtn=this.find(".xgplayer-progress-btn"),this.on(Jn,function(){e.onMouseLeave()}),this.on(bt,function(){e.onTimeupdate()}),this.on(mn,function(){e.onTimeupdate(),e.onCacheUpdate()}),this.on(hv,function(){e.onCacheUpdate()}),this.on(Cr,function(){e.onCacheUpdate(!0),e.onTimeupdate(!0),e._state.now=0}),this.on(br,function(){e.onReset()}),this.on(Xn,function(){e.onVideoResize()}),this.bindDomEvents(),this.initCustomStyle()}}},{key:"setConfig",value:function(e){var s=this,a=null;Object.keys(e).forEach(function(o){s.config[o]=e[o],o==="fragments"&&(a=e[o])}),a&&this._initInner(a,e)}},{key:"initCustomStyle",value:function(){var e=this.playerConfig||{},s=e.commonStyle,a=s.sliderBtnStyle,o=this.progressBtn;a&&(typeof a=="string"?o.style.boxShadow=a:ut(a)==="object"&&Object.keys(a).map(function(u){o.style[u]=a[u]}))}},{key:"triggerCallbacks",value:function(e,s,a){this.__dragCallBacks.length>0&&this.__dragCallBacks.map(function(o){if(o&&o.handler&&o.type===e)try{o.handler(s,a)}catch(u){console.error("[XGPLAYER][triggerCallbacks] ".concat(o," error"),u)}})}},{key:"addCallBack",value:function(e,s){s&&typeof s=="function"&&this.__dragCallBacks.push({type:e,handler:s})}},{key:"removeCallBack",value:function(e,s){var a=this.__dragCallBacks,o=-1;a.map(function(u,l){u&&u.type===e&&u.handler===s&&(o=l)}),o>-1&&a.splice(o,1)}},{key:"unlock",value:function(){var e=this.player,s=this.pos;if(s.isEnter=!1,s.isLocked=!1,!e.isMini){if(this.unbind("mousemove",this.onMoveOnly),s.isDown){this.unbind("mouseleave",this.onMouseLeave);return}this.blur()}}},{key:"bindDomEvents",value:function(){var e=this.player.config;this._mouseDownHandlerHook=this.hook("dragstart",this._mouseDownHandler),this._mouseUpHandlerHook=this.hook("dragend",this._mouseUpHandler),this._mouseMoveHandlerHook=this.hook("drag",this._mouseMoveHandler),(this.domEventType==="touch"||this.domEventType==="compatible")&&this.root.addEventListener("touchstart",this.onMouseDown),(this.domEventType==="mouse"||this.domEventType==="compatible")&&(this.bind("mousedown",this.onMouseDown),e.isMobileSimulateMode!=="mobile"&&this.bind("mouseenter",this.onMouseEnter),this.bind("mouseover",this.onMouseOver),this.bind("mouseout",this.onMouseOut),this.player.root.addEventListener("click",this.onBodyClick,!0))}},{key:"focus",value:function(){this.player.controls.pauseAutoHide(),g.addClass(this.root,"active")}},{key:"blur",value:function(){this._disableBlur||(this.player.controls.recoverAutoHide(),g.removeClass(this.root,"active"))}},{key:"disableBlur",value:function(){this._disableBlur=!0}},{key:"enableBlur",value:function(){this._disableBlur=!1}},{key:"updateWidth",value:function(e,s,a,o){var u=this.config,l=this.player;if(!(u.isCloseClickSeek&&o===0)){var c=s=s>=l.duration?l.duration-u.endedDiff:Number(s).toFixed(1);this.updatePercent(a),this.updateTime(e),!(o===1&&(!u.isDragingSeek||l.config.mediaType==="audio"))&&(this._state.now=c,this._state.direc=c>l.currentTime?0:1,l.seek(c))}}},{key:"computeTime",value:function(e,s){var a=this.player,o=this.root.getBoundingClientRect(),u=o.width,l=o.height,c=o.top,f=o.left,h,d,p=s;a.rotateDeg===90?(h=l,d=c):(h=u,d=f);var m=p-d;m=m>h?h:m<0?0:m;var _=m/h;_=_<0?0:_>1?1:_;var v=parseInt(_*this.offsetDuration*1e3,10)/1e3,y=g.getCurrentTimeByOffset(v,a.timeSegments);return{percent:_,currentTime:v,seekTime:y,offset:m,width:h,left:d,e}}},{key:"updateTime",value:function(e){var s=this.player,a=this.duration;e>a?e=a:e<0&&(e=0);var o=s.plugins.time;o&&o.updateTime(e)}},{key:"resetSeekState",value:function(){this.isProgressMoving=!1;var e=this.player.plugins.time;e&&e.resetActive()}},{key:"updatePercent",value:function(e,s){if(this.isProgressMoving=!0,!this.config.disable){e=e>1?1:e<0?0:e,this.progressBtn.style.left="".concat(e*100,"%"),this.innerList.update({played:e*this.offsetDuration},this.offsetDuration);var a=this.player.plugins.miniprogress;a&&a.update({played:e*this.offsetDuration},this.offsetDuration)}}},{key:"onTimeupdate",value:function(e){var s=this.player,a=this._state,o=this.offsetDuration;if(!(s.isSeeking&&s.media.seeking||this.isProgressMoving||!s.hasStart)){if(a.now>-1){var u=parseInt(a.now*1e3,10)-parseInt(s.currentTime*1e3,10);if(a.direc===0&&u>300||a.direc===1&&u>-300){a.now=-1;return}else a.now=-1}var l=this.currentTime;l=g.adjustTimeByDuration(l,o,e),this.innerList.update({played:l},o),this.progressBtn.style.left="".concat(l/o*100,"%")}}},{key:"onCacheUpdate",value:function(e){var s=this.player,a=this.duration;if(s){var o=s.bufferedPoint.end;o=g.adjustTimeByDuration(o,a,e),this.innerList.update({cached:o},a)}}},{key:"onReset",value:function(){this.innerList.update({played:0,cached:0},0),this.progressBtn.style.left="0%"}},{key:"destroy",value:function(){var e=this.player;this.thumbnailPlugin=null,this.innerList.destroy(),this.innerList=null;var s=this.domEventType;(s==="touch"||s==="compatible")&&(this.root.removeEventListener("touchstart",this.onMouseDown),this.root.removeEventListener("touchmove",this.onMouseMove),this.root.removeEventListener("touchend",this.onMouseUp),this.root.removeEventListener("touchcancel",this.onMouseUp)),(s==="mouse"||s==="compatible")&&(this.unbind("mousedown",this.onMouseDown),this.unbind("mouseenter",this.onMouseEnter),this.unbind("mousemove",this.onMoveOnly),this.unbind("mouseleave",this.onMouseLeave),document.removeEventListener("mousemove",this.onMouseMove,!1),document.removeEventListener("mouseup",this.onMouseUp,!1),e.root.removeEventListener("click",this.onBodyClick,!0))}},{key:"render",value:function(){if(!(this.config.disable||this.playerConfig.isLive)){var e=this.player.controls?this.player.controls.config.mode:"",s=e==="bottom"?"xgplayer-progress-bottom":"";return`
    <xg-progress class="xgplayer-progress `.concat(s,`">
      <xg-outer class="xgplayer-progress-outer">
        <xg-progress-btn class="xgplayer-progress-btn"></xg-progress-btn>
      </xg-outer>
    </xg-progress>
    `)}}}],[{key:"pluginName",get:function(){return"progress"}},{key:"defaultConfig",get:function(){return{position:ke.CONTROLS_CENTER,index:0,disable:!1,isDragingSeek:!0,closeMoveSeek:!1,isPauseMoving:!1,isCloseClickSeek:!1,fragments:[{percent:1}],fragFocusClass:_h.POINT,fragClass:"",fragAutoFocus:!1,miniMoveStep:5,miniStartStep:2,onMoveStart:function(){},onMoveEnd:function(){},endedDiff:.2}}},{key:"FRAGMENT_FOCUS_CLASS",get:function(){return _h}}]),r}(me),Pr=function(t){ee(r,t);var i=te(r);function r(){var n;Q(this,r);for(var e=arguments.length,s=new Array(e),a=0;a<e;a++)s[a]=arguments[a];return n=i.call.apply(i,[this].concat(s)),O(x(n),"_onMouseenter",function(o){n.emit("icon_mouseenter",{pluginName:n.pluginName})}),O(x(n),"_onMouseLeave",function(o){n.emit("icon_mouseleave",{pluginName:n.pluginName})}),n}return q(r,[{key:"afterCreate",value:function(){this.bind("mouseenter",this._onMouseenter),this.bind("mouseleave",this._onMouseLeave),this.config.disable&&this.disable()}},{key:"destroy",value:function(){this.unbind("mouseenter",this._onMouseenter),this.unbind("mouseleave",this._onMouseLeave)}}]),r}(me),q0=function(t){ee(r,t);var i=te(r);function r(){return Q(this,r),i.apply(this,arguments)}return q(r,[{key:"afterCreate",value:function(){var e=this;se(re(r.prototype),"afterCreate",this).call(this);var s=this.player,a=this.config;a.disable||(this.initIcons(),this.btnClick=this.btnClick.bind(this),this.bind(["touchend","click"],this.btnClick),this.on([mi,yi,br],function(){e.animate(s.paused)}),this.on(xt,function(){e.animate(s.paused)}),this.animate(!0))}},{key:"registerIcons",value:function(){return{play:{icon:Ic,class:"xg-icon-play"},pause:{icon:Lc,class:"xg-icon-pause"}}}},{key:"btnClick",value:function(e){e.preventDefault(),e.stopPropagation();var s=this.player;return this.emitUserAction(e,"switch_play_pause",{prop:"paused",from:s.paused,to:!s.paused}),s.ended?s.replay():s.paused?(s.play(),this.animate(!1)):(s.pause(),this.animate(!0)),!1}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild(".xgplayer-icon",e.play),this.appendChild(".xgplayer-icon",e.pause)}},{key:"animate",value:function(e){if(this.player){var s=this.i18nKeys,a=this.find(".xg-tips");e?(this.setAttr("data-state","pause"),a&&this.changeLangTextKey(a,s.PLAY_TIPS)):(this.setAttr("data-state","play"),a&&this.changeLangTextKey(a,s.PAUSE_TIPS))}}},{key:"destroy",value:function(){se(re(r.prototype),"destroy",this).call(this),this.unbind(["touchend","click"],this.btnClick)}},{key:"render",value:function(){if(!this.config.disable)return`<xg-icon class="xgplayer-play">
    <div class="xgplayer-icon">
    </div>
    `.concat(er(this,"PLAY_TIPS",this.playerConfig.isHideTips),`
    </xg-icon>`)}}],[{key:"pluginName",get:function(){return"play"}},{key:"defaultConfig",get:function(){return{position:ke.CONTROLS_LEFT,index:0,disable:!1}}}]),r}(Pr);function Z0(){return new DOMParser().parseFromString(`<svg width="32px" height="40px" viewBox="0 0 32 32" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
    <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
        <path d="M11.2374369,14 L17.6187184,7.61871843 C17.9604272,7.27700968 17.9604272,6.72299032 17.6187184,6.38128157 C17.2770097,6.03957281 16.7229903,6.03957281 16.3812816,6.38128157 L9.38128157,13.3812816 C9.03957281,13.7229903 9.03957281,14.2770097 9.38128157,14.6187184 L16.3812816,21.6187184 C16.7229903,21.9604272 17.2770097,21.9604272 17.6187184,21.6187184 C17.9604272,21.2770097 17.9604272,20.7229903 17.6187184,20.3812816 L11.2374369,14 L11.2374369,14 Z" fill="#FFFFFF"></path>
    </g>
</svg>`,"image/svg+xml").firstChild}var J0=function(t){ee(r,t);var i=te(r);function r(){return Q(this,r),i.apply(this,arguments)}return q(r,[{key:"afterCreate",value:function(){var e=this;this.initIcons(),this.onClick=function(s){s.preventDefault(),s.stopPropagation(),e.config.onClick(s)},this.bind(["click","touchend"],this.onClick)}},{key:"registerIcons",value:function(){return{screenBack:{icon:Z0,class:"xg-fullscreen-back"}}}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild(this.root,e.screenBack)}},{key:"show",value:function(){g.addClass(this.root,"show")}},{key:"hide",value:function(){g.removeClass(this.root,"show")}},{key:"render",value:function(){return`<xg-icon class="xgplayer-back">
    </xg-icon>`}}],[{key:"pluginName",get:function(){return"topbackicon"}},{key:"defaultConfig",get:function(){return{position:ke.ROOT_TOP,index:0}}}]),r}(me);function e1(){return new DOMParser().parseFromString(`<svg xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="2 -4 28 40">
  <path fill="#fff" transform="scale(0.0320625 0.0320625)" d="M598 214h212v212h-84v-128h-128v-84zM726 726v-128h84v212h-212v-84h128zM214 426v-212h212v84h-128v128h-84zM298 598v128h128v84h-212v-212h84z"></path>
</svg>
`,"image/svg+xml").firstChild}function t1(){return new DOMParser().parseFromString(`<svg xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="2 -4 28 40">
  <path fill="#fff" transform="scale(0.0320625 0.0320625)" d="M682 342h128v84h-212v-212h84v128zM598 810v-212h212v84h-128v128h-84zM342 342v-128h84v212h-212v-84h128zM214 682v-84h212v212h-84v-128h-128z"></path>
</svg>
`,"image/svg+xml").firstChild}var n1=function(t){ee(r,t);var i=te(r);function r(){var n;Q(this,r);for(var e=arguments.length,s=new Array(e),a=0;a<e;a++)s[a]=arguments[a];return n=i.call.apply(i,[this].concat(s)),O(x(n),"_onOrientationChange",function(o){n.player.fullscreen&&n.config.rotateFullscreen&&(window.orientation===90||window.orientation===-90?n.player.setRotateDeg(0):n.player.setRotateDeg(90))}),n}return q(r,[{key:"afterCreate",value:function(){var e=this;se(re(r.prototype),"afterCreate",this).call(this);var s=this.config,a=this.playerConfig;if(!s.disable){s.target&&(this.playerConfig.fullscreenTarget=this.config.target);var o=g.getFullScreenEl();a.fullscreenTarget===o&&this.player.getFullscreen().catch(function(u){}),this.initIcons(),this.handleFullscreen=this.hook("fullscreenChange",this.toggleFullScreen,{pre:function(l){var c=e.player.fullscreen;e.emitUserAction(l,"switch_fullscreen",{prop:"fullscreen",from:c,to:!c})}}),this.bind(".xgplayer-fullscreen",["touchend","click"],this.handleFullscreen),this.on(cn,function(u){var l=e.find(".xg-tips");l&&e.changeLangTextKey(l,u?e.i18nKeys.EXITFULLSCREEN_TIPS:e.i18nKeys.FULLSCREEN_TIPS),e.animate(u)}),this.config.needBackIcon&&(this.topBackIcon=this.player.registerPlugin({plugin:J0,options:{config:{onClick:function(l){e.handleFullscreen(l)}}}})),le.device==="mobile"&&window.addEventListener("orientationchange",this._onOrientationChange)}}},{key:"registerIcons",value:function(){return{fullscreen:{icon:e1,class:"xg-get-fullscreen"},exitFullscreen:{icon:t1,class:"xg-exit-fullscreen"}}}},{key:"destroy",value:function(){se(re(r.prototype),"destroy",this).call(this),this.unbind(".xgplayer-icon",le.device==="mobile"?"touchend":"click",this.handleFullscreen),le.device==="mobile"&&window.removeEventListener("orientationchange",this._onOrientationChange)}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild(".xgplayer-icon",e.fullscreen),this.appendChild(".xgplayer-icon",e.exitFullscreen)}},{key:"toggleFullScreen",value:function(e){e&&(e.preventDefault(),e.stopPropagation());var s=this.player,a=this.config,o=a.useCssFullscreen===!0||typeof a.useCssFullscreen=="function"&&a.useCssFullscreen();o?(s.fullscreen?s.exitCssFullscreen():s.getCssFullscreen(),this.animate(s.fullscreen)):a.rotateFullscreen?(s.fullscreen?s.exitRotateFullscreen():s.getRotateFullscreen(),this.animate(s.fullscreen)):a.switchCallback&&typeof a.switchCallback=="function"?a.switchCallback(s.fullscreen):s.fullscreen?(s.exitFullscreen(),a.useScreenOrientation&&this.unlockScreen()):(s.getFullscreen().catch(function(u){}),a.useScreenOrientation&&s.aspectRatio>1&&this.lockScreen(a.lockOrientationType))}},{key:"animate",value:function(e){e?this.setAttr("data-state","full"):this.setAttr("data-state","normal"),this.topBackIcon&&(e?(this.topBackIcon.show(),this.hide()):(this.topBackIcon.hide(),this.show()))}},{key:"render",value:function(){if(!this.config.disable){var e="FULLSCREEN_TIPS";return`<xg-icon class="xgplayer-fullscreen">
    <div class="xgplayer-icon">
    </div>
    `.concat(er(this,e,this.playerConfig.isHideTips),`
    </xg-icon>`)}}},{key:"lockScreen",value:function(e){try{screen.orientation.lock(e).catch(function(s){})}catch{}}},{key:"unlockScreen",value:function(){try{screen.orientation.unlock().catch(function(e){})}catch{}}}],[{key:"pluginName",get:function(){return"fullscreen"}},{key:"defaultConfig",get:function(){return{position:ke.CONTROLS_RIGHT,index:0,useCssFullscreen:!1,rotateFullscreen:!1,useScreenOrientation:!1,lockOrientationType:"landscape",switchCallback:null,target:null,disable:!1,needBackIcon:!1}}}]),r}(Pr),r1=function(t){ee(r,t);var i=te(r);function r(n){var e;return Q(this,r),e=i.call(this,n),e.isActiving=!1,e}return q(r,[{key:"duration",get:function(){var e=this.player,s=e.offsetDuration,a=e.duration;return this.playerConfig.customDuration||s||a}},{key:"currentTime",get:function(){var e=this.player,s=e.offsetCurrentTime,a=e.currentTime;return s>=0?s:a}},{key:"timeOffset",get:function(){return this.playerConfig.timeOffset||0}},{key:"afterCreate",value:function(){var e=this,s=this.player.controls.config.mode;this.mode=s==="flex"?"flex":"normal",!this.config.disable&&(this.mode==="flex"&&(this.createCenterTime(),this.root.style.display="none"),this.durationDom=this.find(".time-duration"),this.timeDom=this.find(".time-current"),this.on([Jn,mn,bt],function(a){a.eventName==="durationchange"&&(e.isActiving=!1),e.onTimeUpdate()}),this.on(Cr,function(){e.onTimeUpdate(!0)}),this.on(br,function(){e.onReset()}))}},{key:"show",value:function(e){if(this.mode==="flex"){this.centerCurDom&&(this.centerCurDom.style.display="block"),this.centerDurDom&&(this.centerDurDom.style.display="block");return}this.root.style.display="block"}},{key:"hide",value:function(){if(this.mode==="flex"){this.centerCurDom&&(this.centerCurDom.style.display="none"),this.centerDurDom&&(this.centerDurDom.style.display="none");return}this.root.style.display="none"}},{key:"onTimeUpdate",value:function(e){var s=this.player,a=this.config,o=this.duration;if(!(a.disable||this.isActiving||!s.hasStart)){var u=this.currentTime+this.timeOffset;u=g.adjustTimeByDuration(u,o,e),this.mode==="flex"?(this.centerCurDom.innerHTML=this.minWidthTime(g.format(u)),o!==1/0&&o>0&&(this.centerDurDom.innerHTML=g.format(o))):(this.timeDom.innerHTML=this.minWidthTime(g.format(u)),o!==1/0&&o>0&&(this.durationDom.innerHTML=g.format(o)))}}},{key:"onReset",value:function(){this.mode==="flex"?(this.centerCurDom.innerHTML=this.minWidthTime(g.format(0)),this.centerDurDom.innerHTML=g.format(0)):(this.timeDom.innerHTML=this.minWidthTime(g.format(0)),this.durationDom.innerHTML=g.format(0))}},{key:"createCenterTime",value:function(){var e=this.player;if(!(!e.controls||!e.controls.center)){var s=e.controls.center;this.centerCurDom=g.createDom("xg-icon","00:00",{},"xgplayer-time xg-time-left"),this.centerDurDom=g.createDom("xg-icon","00:00",{},"xgplayer-time xg-time-right"),s.children.length>0?s.insertBefore(this.centerCurDom,s.children[0]):s.appendChild(this.centerCurDom),s.appendChild(this.centerDurDom)}}},{key:"afterPlayerInit",value:function(){var e=this.config;if(this.duration===1/0||this.playerConfig.isLive?(g.hide(this.durationDom),g.hide(this.timeDom),g.hide(this.find(".time-separator")),g.show(this.find(".time-live-tag"))):g.hide(this.find(".time-live-tag")),e.hide){this.hide();return}this.show()}},{key:"changeLiveState",value:function(e){e?(g.hide(this.durationDom),g.hide(this.timeDom),g.hide(this.find(".time-separator")),g.show(this.find(".time-live-tag"))):(g.hide(this.find(".time-live-tag")),g.show(this.find(".time-separator")),g.show(this.durationDom),g.show(this.timeDom))}},{key:"updateTime",value:function(e){if(this.isActiving=!0,!(!e&&e!==0||e>this.duration)){if(this.mode==="flex"){this.centerCurDom.innerHTML=this.minWidthTime(g.format(e));return}this.timeDom.innerHTML=this.minWidthTime(g.format(e))}}},{key:"minWidthTime",value:function(e){return e.split(":").map(function(s){return'<span class="time-min-width">'.concat(s,"</span>")}).join(":")}},{key:"resetActive",value:function(){var e=this,s=this.player,a=function(){e.isActiving=!1};this.off(mn,a),s.isSeeking&&s.media.seeking?this.once(mn,a):this.isActiving=!1}},{key:"destroy",value:function(){var e=this.player.controls.center;this.centerCurDom&&e.removeChild(this.centerCurDom),this.centerCurDom=null,this.centerDurDom&&e.removeChild(this.centerDurDom),this.centerDurDom=null}},{key:"render",value:function(){if(!this.config.disable)return`<xg-icon class="xgplayer-time">
    <span class="time-current">00:00</span>
    <span class="time-separator">/</span>
    <span class="time-duration">00:00</span>
    <span class="time-live-tag">`.concat(this.i18n.LIVE_TIP,`</span>
    </xg-icon>`)}}],[{key:"pluginName",get:function(){return"time"}},{key:"defaultConfig",get:function(){return{position:ke.CONTROLS_LEFT,index:2,disable:!1}}}]),r}(me),i1=function(t){ee(r,t);var i=te(r);function r(){var n;Q(this,r);for(var e=arguments.length,s=new Array(e),a=0;a<e;a++)s[a]=arguments[a];return n=i.call.apply(i,[this].concat(s)),O(x(n),"_onDurationChange",function(){n.updateSegments();var o=n.player,u=o.currentTime,l=o.timeSegments;if(n._checkIfEnabled(l)){var c=g.getIndexByTime(u,l),f=g.getOffsetCurrentTime(u,l,c);n.player.offsetCurrentTime=f,n.changeIndex(c,l)}}),O(x(n),"_onLoadedData",function(){var o=n.player.timeSegments;if(n._checkIfEnabled(o)){var u=g.getOffsetCurrentTime(0,o);n.player.offsetCurrentTime=u,n.changeIndex(0,o),n.curPos.start>0&&(n.player.currentTime=n.curPos.start)}}),O(x(n),"_onTimeupdate",function(){var o=n.player,u=o.currentTime,l=o.timeSegments;if(n._checkIfEnabled(l)){var c=l.length;n.lastCurrentTime=u;var f=g.getIndexByTime(u,l);f!==n.curIndex&&n.changeIndex(f,l);var h=g.getOffsetCurrentTime(u,l,f);if(n.player.offsetCurrentTime=h,!!n.curPos){var d=n.curPos,p=d.start,m=d.end;u<p?n.player.currentTime=p:u>m&&f>=c-1&&n.player.pause()}}}),O(x(n),"_onSeeking",function(){var o=n.player,u=o.currentTime,l=o.timeSegments;if(n._checkIfEnabled(l))if(u<l[0].start)n.player.currentTime=l[0].start;else if(u>l[l.length-1].end)n.player.currentTime=l[l.length-1].end;else{var c=g.getIndexByTime(u,l);if(c>=0){var f=n.getSeekTime(u,n.lastCurrentTime,c,l);f>=0&&(n.player.currentTime=f)}}}),O(x(n),"_onPlay",function(){var o=n.player,u=o.currentTime,l=o.timeSegments;n._checkIfEnabled(l)&&u>=l[l.length-1].end&&(n.player.currentTime=l[0].start)}),n}return q(r,[{key:"afterCreate",value:function(){this.curIndex=-1,this.curPos=null,this.lastCurrentTime=0,this.updateSegments(),this.on(Jn,this._onDurationChange),this.on(wn,this._onLoadedData),this.on(bt,this._onTimeupdate),this.on(ho,this._onSeeking),this.on(xt,this._onPlay)}},{key:"setConfig",value:function(e){var s=this;if(e){var a=Object.keys(e);a.length<1||(a.forEach(function(o){s.config[o]=e[o]}),this.updateSegments())}}},{key:"updateSegments",value:function(){var e=this.config,s=e.disable,a=e.segments,o=this.player;if(s||!a||a.length===0)o.timeSegments=[],o.offsetDuration=0,o.offsetCurrentTime=-1;else{var u=this.formatTimeSegments(a,o.duration);o.timeSegments=u,o.offsetDuration=u.length>0?u[u.length-1].duration:0}}},{key:"formatTimeSegments",value:function(e,s){var a=[];return e?(e.sort(function(o,u){return o.start-u.start}),e.forEach(function(o,u){var l={};if(l.start=o.start<0?0:o.start,l.end=s>0&&o.end>s?s:o.end,!(s>0&&l.start>s)){a.push(l);var c=l.end-l.start;if(u===0)l.offset=o.start,l.cTime=0,l.segDuration=c,l.duration=c;else{var f=a[u-1];l.offset=f.offset+(l.start-f.end),l.cTime=f.duration+f.cTime,l.segDuration=c,l.duration=f.duration+c}}}),a):[]}},{key:"getSeekTime",value:function(e,s,a,o){var u=-1,l=o[a],c=l.start,f=l.end;if(e>=c&&e<=f)return u;var h=e-s;if(h<0&&e<c){var d=s>c?s-c:0;return u=a-1>=0?o[a-1].end+h+d:0,u}return-1}},{key:"_checkIfEnabled",value:function(e){return!(!e||e.length<1)}},{key:"changeIndex",value:function(e,s){this.curIndex=e,e>=0&&s.length>0?this.curPos=s[e]:this.curPos=null}}],[{key:"pluginName",get:function(){return"TimeSegmentsControls"}},{key:"defaultConfig",get:function(){return{disable:!0,segments:[]}}}]),r}(an);function s1(){return new DOMParser().parseFromString(`<svg xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="0 -10 28 40">
  <path fill="#fff" transform="scale(0.0220625 0.0220625)" d="M358.4 358.4h-204.8v307.2h204.8l256 256v-819.2l-256 256z"></path>
  <path fill="#fff" transform="scale(0.0220625 0.0220625)" d="M940.632 837.632l-72.192-72.192c65.114-64.745 105.412-154.386 105.412-253.44s-40.299-188.695-105.396-253.424l-0.016-0.016 72.192-72.192c83.639 83.197 135.401 198.37 135.401 325.632s-51.762 242.434-135.381 325.612l-0.020 0.020zM795.648 693.248l-72.704-72.704c27.756-27.789 44.921-66.162 44.921-108.544s-17.165-80.755-44.922-108.546l0.002 0.002 72.704-72.704c46.713 46.235 75.639 110.363 75.639 181.248s-28.926 135.013-75.617 181.227l-0.021 0.021z"></path>
</svg>
`,"image/svg+xml").firstChild}function a1(){return new DOMParser().parseFromString(`<svg xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="0 -10 28 40">
  <path fill="#fff" transform="scale(0.0220625 0.0220625)" d="M358.4 358.4h-204.8v307.2h204.8l256 256v-819.2l-256 256z"></path>
  <path fill="#fff" transform="scale(0.0220625 0.0220625)" d="M795.648 693.248l-72.704-72.704c27.756-27.789 44.921-66.162 44.921-108.544s-17.165-80.755-44.922-108.546l0.002 0.002 72.704-72.704c46.713 46.235 75.639 110.363 75.639 181.248s-28.926 135.013-75.617 181.227l-0.021 0.021zM795.648 693.248l-72.704-72.704c27.756-27.789 44.921-66.162 44.921-108.544s-17.165-80.755-44.922-108.546l0.002 0.002 72.704-72.704c46.713 46.235 75.639 110.363 75.639 181.248s-28.926 135.013-75.617 181.227l-0.021 0.021z"></path>
</svg>
`,"image/svg+xml").firstChild}function o1(){return new DOMParser().parseFromString(`<svg xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="0 -10 28 40">
  <path fill="#fff" transform="scale(0.0220625 0.0220625)" d="M358.4 358.4h-204.8v307.2h204.8l256 256v-819.2l-256 256z"></path>
  <path fill="#fff" transform="scale(0.0220625 0.0220625)" d="M920.4 439.808l-108.544-109.056-72.704 72.704 109.568 108.544-109.056 108.544 72.704 72.704 108.032-109.568 108.544 109.056 72.704-72.704-109.568-108.032 109.056-108.544-72.704-72.704-108.032 109.568z"></path>
</svg>
`,"image/svg+xml").firstChild}var u1=function(t){ee(r,t);var i=te(r);function r(){var n;Q(this,r);for(var e=arguments.length,s=new Array(e),a=0;a<e;a++)s[a]=arguments[a];return n=i.call.apply(i,[this].concat(s)),O(x(n),"onBarMousedown",function(o){var u=x(n),l=u.player,c=n.find(".xgplayer-bar");g.event(o);var f=c.getBoundingClientRect(),h=g.getEventPos(o,l.zoom),d=f.height-(h.clientY-f.top);if(h.h=d,h.barH=f.height,n.pos=h,!(d<-2))return n.updateVolumePos(d,o),document.addEventListener("mouseup",n.onBarMouseUp),n._d.isStart=!0,!1}),O(x(n),"onBarMouseMove",function(o){var u=x(n),l=u._d;if(l.isStart){var c=x(n),f=c.pos,h=c.player;o.preventDefault(),o.stopPropagation(),g.event(o);var d=g.getEventPos(o,h.zoom);l.isMoving=!0;var p=f.h-d.clientY+f.clientY;p>f.barH||n.updateVolumePos(p,o)}}),O(x(n),"onBarMouseUp",function(o){g.event(o),document.removeEventListener("mouseup",n.onBarMouseUp);var u=x(n),l=u._d;l.isStart=!1,l.isMoving=!1}),O(x(n),"onMouseenter",function(o){n._d.isActive=!0,n.focus(),n.emit("icon_mouseenter",{pluginName:n.pluginName})}),O(x(n),"onMouseleave",function(o){n._d.isActive=!1,n.unFocus(100,!1,o),n.emit("icon_mouseleave",{pluginName:n.pluginName})}),O(x(n),"onVolumeChange",function(o){if(n.player){var u=n.player,l=u.muted,c=u.volume;n._d.isMoving||(n.find(".xgplayer-drag").style.height=l||c===0?"4px":"".concat(c*100,"%"),n.config.showValueLabel&&n.updateVolumeValue()),n.animate(l,c)}}),n}return q(r,[{key:"registerIcons",value:function(){return{volumeSmall:{icon:a1,class:"xg-volume-small"},volumeLarge:{icon:s1,class:"xg-volume"},volumeMuted:{icon:o1,class:"xg-volume-mute"}}}},{key:"afterCreate",value:function(){var e=this;if(this._timerId=null,this._d={isStart:!1,isMoving:!1,isActive:!1},!this.config.disable){this.initIcons();var s=this.playerConfig,a=s.commonStyle,o=s.volume;a.volumeColor&&(this.find(".xgplayer-drag").style.backgroundColor=a.volumeColor),this.changeMutedHandler=this.hook("mutedChange",function(u){e.changeMuted(u)},{pre:function(l){l.preventDefault(),l.stopPropagation()}}),this._onMouseenterHandler=this.hook("mouseenter",this.onMouseenter),this._onMouseleaveHandler=this.hook("mouseleave",this.onMouseleave),le.device!=="mobile"&&this.playerConfig.isMobileSimulateMode!=="mobile"&&(this.bind("mouseenter",this._onMouseenterHandler),this.bind(["blur","mouseleave"],this._onMouseleaveHandler),this.bind(".xgplayer-slider","mousedown",this.onBarMousedown),this.bind(".xgplayer-slider","mousemove",this.onBarMouseMove),this.bind(".xgplayer-slider","mouseup",this.onBarMouseUp)),this.bind(".xgplayer-icon",["touchend","click"],this.changeMutedHandler),this.on(cv,this.onVolumeChange),this.once(wn,this.onVolumeChange),g.typeOf(o)!=="Number"&&(this.player.volume=this.config.default),this.onVolumeChange()}}},{key:"updateVolumePos",value:function(e,s){var a=this.player,o=this.find(".xgplayer-drag"),u=this.find(".xgplayer-bar");if(!(!u||!o)){var l=parseInt(e/u.getBoundingClientRect().height*1e3,10);o.style.height="".concat(e,"px");var c=Math.max(Math.min(l/1e3,1),0),f={volume:{from:a.volume,to:c}};a.muted&&(f.muted={from:!0,to:!1}),this.emitUserAction(s,"change_volume",{muted:a.muted,volume:a.volume,props:f}),a.volume=Math.max(Math.min(l/1e3,1),0),a.muted&&(a.muted=!1),this.config.showValueLabel&&this.updateVolumeValue()}}},{key:"updateVolumeValue",value:function(){var e=this.player,s=e.volume,a=e.muted,o=this.find(".xgplayer-value-label"),u=Math.max(Math.min(s,1),0);o.innerText=a?0:Math.round(u*100)}},{key:"focus",value:function(){var e=this.player;e.focus({autoHide:!1}),this._timerId&&(g.clearTimeout(this,this._timerId),this._timerId=null),g.addClass(this.root,"slide-show")}},{key:"unFocus",value:function(){var e=this,s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:100,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,o=arguments.length>2?arguments[2]:void 0,u=this._d,l=this.player;u.isActive||(this._timerId&&(g.clearTimeout(this,this._timerId),this._timerId=null),this._timerId=g.setTimeout(this,function(){u.isActive||(a?l.blur():l.focus(),g.removeClass(e.root,"slide-show"),u.isStart&&e.onBarMouseUp(o)),e._timerId=null},s))}},{key:"changeMuted",value:function(e){e&&e.stopPropagation();var s=this.player,a=this._d;a.isStart&&this.onBarMouseUp(e),this.emitUserAction(e,"change_muted",{muted:s.muted,volume:s.volume,props:{muted:{from:s.muted,to:!s.muted}}}),s.volume>0&&(s.muted=!s.muted),s.volume<.01&&(s.volume=this.config.miniVolume)}},{key:"animate",value:function(e,s){e||s===0?this.setAttr("data-state","mute"):s<.5&&this.icons.volumeSmall?this.setAttr("data-state","small"):this.setAttr("data-state","normal")}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild(".xgplayer-icon",e.volumeSmall),this.appendChild(".xgplayer-icon",e.volumeLarge),this.appendChild(".xgplayer-icon",e.volumeMuted)}},{key:"destroy",value:function(){this._timerId&&(g.clearTimeout(this,this._timerId),this._timerId=null),this.unbind("mouseenter",this.onMouseenter),this.unbind(["blur","mouseleave"],this.onMouseleave),this.unbind(".xgplayer-slider","mousedown",this.onBarMousedown),this.unbind(".xgplayer-slider","mousemove",this.onBarMouseMove),this.unbind(".xgplayer-slider","mouseup",this.onBarMouseUp),document.removeEventListener("mouseup",this.onBarMouseUp),this.unbind(".xgplayer-icon",le.device==="mobile"?"touchend":"click",this.changeMutedHandler)}},{key:"render",value:function(){if(!this.config.disable){var e=this.config.default||this.player.volume,s=this.config.showValueLabel;return`
    <xg-icon class="xgplayer-volume" data-state="normal">
      <div class="xgplayer-icon">
      </div>
      <xg-slider class="xgplayer-slider">
        `.concat(s?'<div class="xgplayer-value-label">'.concat(e*100,"</div>"):"",`
        <div class="xgplayer-bar">
          <xg-drag class="xgplayer-drag" style="height: `).concat(e*100,`%"></xg-drag>
        </div>
      </xg-slider>
    </xg-icon>`)}}}],[{key:"pluginName",get:function(){return"volume"}},{key:"defaultConfig",get:function(){return{position:ke.CONTROLS_RIGHT,index:1,disable:!1,showValueLabel:!1,default:.6,miniVolume:.2}}}]),r}(me);function l1(){return new DOMParser().parseFromString(`<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="-4 -6 40 40" fill="none">
  <g clip-path="url(#clip0)">
    <path transform="scale(1.5 1.5)" d="M11.6665 9.16663H4.1665C2.78579 9.16663 1.6665 10.2859 1.6665 11.6666V15.8333C1.6665 17.214 2.78579 18.3333 4.1665 18.3333H11.6665C13.0472 18.3333 14.1665 17.214 14.1665 15.8333V11.6666C14.1665 10.2859 13.0472 9.16663 11.6665 9.16663Z" fill="white"/>
    <path transform="scale(1.5 1.5)" fill-rule="evenodd" clip-rule="evenodd" d="M3.88148 4.06298C3.75371 4.21005 3.67667 4.40231 3.67749 4.61242C3.67847 4.87253 3.79852 5.10435 3.98581 5.25646L6.99111 8.05895C7.32771 8.37283 7.85502 8.35443 8.16891 8.01782C8.48279 7.68122 8.46437 7.15391 8.12778 6.84003L6.62061 5.43457L9.8198 5.4224C9.82848 5.42239 9.8372 5.42221 9.84591 5.4219C10.9714 5.38233 12.0885 5.6285 13.0931 6.13744C14.0976 6.64635 14.957 7.40148 15.5908 8.33234C16.2246 9.2632 16.6122 10.3394 16.7177 11.4606C16.823 12.5819 16.6427 13.7115 16.1934 14.7442C16.0098 15.1661 16.203 15.6571 16.6251 15.8408C17.0471 16.0243 17.5381 15.8311 17.7216 15.4091C18.2833 14.1183 18.5087 12.7063 18.3771 11.3047C18.2453 9.90318 17.7607 8.55792 16.9684 7.39433C16.1761 6.23073 15.1021 5.28683 13.8463 4.65065C12.5946 4.01651 11.203 3.70872 9.80072 3.75583L6.43415 3.76862L7.96326 2.12885C8.27715 1.79225 8.25872 1.26494 7.92213 0.951061C7.58553 0.63718 7.05822 0.655585 6.74433 0.99219L3.90268 4.0395C3.89545 4.04724 3.88841 4.05509 3.88154 4.06303L3.88148 4.06298Z" fill="white"/>
  </g>
  <defs>
    <clipPath id="clip0">
      <rect width="40" height="40" fill="white"/>
    </clipPath>
  </defs>
</svg>
`,"image/svg+xml").firstChild}var c1=function(t){ee(r,t);var i=te(r);function r(n){var e;return Q(this,r),e=i.call(this,n),e.rotateDeg=e.config.rotateDeg||0,e}return q(r,[{key:"afterCreate",value:function(){var e=this;if(!this.config.disable){se(re(r.prototype),"afterCreate",this).call(this),this.appendChild(".xgplayer-icon",this.icons.rotate),this.onBtnClick=this.onBtnClick.bind(this),this.bind(".xgplayer-icon",["click","touchend"],this.onBtnClick),this.on(Xn,function(){e.rotateDeg&&e.config.innerRotate&&g.setTimeout(e,function(){e.updateRotateDeg(e.rotateDeg,e.config.innerRotate)},100)});var s=this.player.root;this.rootWidth=s.style.width||s.offsetWidth||s.clientWidth,this.rootHeight=s.style.height||s.offsetHeight||s.clientHeight,this.rotateDeg&&this.updateRotateDeg(this.rotateDeg,this.config.innerRotate)}}},{key:"destroy",value:function(){se(re(r.prototype),"destroy",this).call(this),this.unbind(".xgplayer-icon",["click","touchend"],this.onBtnClick)}},{key:"onBtnClick",value:function(e){e.preventDefault(),e.stopPropagation(),this.emitUserAction(e,"rotate"),this.rotate(this.config.clockwise,this.config.innerRotate,1)}},{key:"updateRotateDeg",value:function(e,s){if(e||(e=0),s){this.player.videoRotateDeg=e;return}var a=this.player,o=this.rootWidth,u=this.rootHeight,l=a.root,c=a.innerContainer,f=a.media,h=l.offsetWidth,d=c&&s?c.offsetHeight:l.offsetHeight,p=o,m=u,_=0,v=0;(e===.75||e===.25)&&(p="".concat(d,"px"),m="".concat(h,"px"),_=-(d-h)/2,v=-(h-d)/2);var y="translate(".concat(_,"px,").concat(v,"px) rotate(").concat(e,"turn)"),S={transformOrigin:"center center",transform:y,webKitTransform:y,height:m,width:p},E=s?f:l,T=s?a.getPlugin("poster"):null;Object.keys(S).map(function(A){E.style[A]=S[A],T&&T.root&&(T.root.style[A]=S[A])})}},{key:"rotate",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,o=this.player;this.rotateDeg||(this.rotateDeg=0);var u=e?1:-1;this.rotateDeg=(this.rotateDeg+1+u*.25*a)%1,this.updateRotateDeg(this.rotateDeg,s),o.emit(yv,this.rotateDeg*360)}},{key:"registerIcons",value:function(){return{rotate:l1}}},{key:"render",value:function(){if(!this.config.disable)return`
    <xg-icon class="xgplayer-rotate">
      <div class="xgplayer-icon">
      </div>
      `.concat(er(this,"ROTATE_TIPS",this.playerConfig.isHideTips),`
    </xg-icon>`)}}],[{key:"pluginName",get:function(){return"rotate"}},{key:"defaultConfig",get:function(){return{position:ke.CONTROLS_RIGHT,index:6,innerRotate:!0,clockwise:!1,rotateDeg:0,disable:!1}}}]),r}(Pr);function f1(){return new DOMParser().parseFromString(`<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
  <path fill-rule="evenodd" clip-rule="evenodd"
    d="M16.5 4.3H3.5C3.38954 4.3 3.3 4.38954 3.3 4.5V15.5C3.3 15.6105 3.38954 15.7 3.5 15.7H8.50005L8.50006 17.5H3.5C2.39543 17.5 1.5 16.6046 1.5 15.5V4.5C1.5 3.39543 2.39543 2.5 3.5 2.5H16.5C17.6046 2.5 18.5 3.39543 18.5 4.5V8.5H16.7V4.5C16.7 4.38954 16.6105 4.3 16.5 4.3ZM12 11.5C11.4477 11.5 11 11.9477 11 12.5L11 16.5C11 17.0523 11.4478 17.5 12 17.5H17.5C18.0523 17.5 18.5 17.0523 18.5 16.5L18.5 12.5C18.5 11.9477 18.0523 11.5 17.5 11.5H12Z"
    fill="white" />
</svg>`,"image/svg+xml").firstChild}function h1(){return new DOMParser().parseFromString(`<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
  <path fill-rule="evenodd" clip-rule="evenodd"
    d="M16.5 4.3H3.5C3.38954 4.3 3.3 4.38954 3.3 4.5V15.5C3.3 15.6105 3.38954 15.7 3.5 15.7H8.50005L8.50006 17.5H3.5C2.39543 17.5 1.5 16.6046 1.5 15.5V4.5C1.5 3.39543 2.39543 2.5 3.5 2.5H16.5C17.6046 2.5 18.5 3.39543 18.5 4.5V8.5H16.7V4.5C16.7 4.38954 16.6105 4.3 16.5 4.3ZM12 11.5C11.4477 11.5 11 11.9477 11 12.5L11 16.5C11 17.0523 11.4478 17.5 12 17.5H17.5C18.0523 17.5 18.5 17.0523 18.5 16.5L18.5 12.5C18.5 11.9477 18.0523 11.5 17.5 11.5H12Z"
    fill="white" />
  <path fill-rule="evenodd" clip-rule="evenodd"
    d="M9.4998 7.7C9.77595 7.7 9.9998 7.47614 9.9998 7.2V6.5C9.9998 6.22386 9.77595 6 9.4998 6H5.5402L5.52754 6.00016H5.5C5.22386 6.00016 5 6.22401 5 6.50016V10.4598C5 10.7359 5.22386 10.9598 5.5 10.9598H6.2C6.47614 10.9598 6.7 10.7359 6.7 10.4598V8.83005L8.76983 10.9386C8.96327 11.1357 9.27984 11.1386 9.47691 10.9451L9.97645 10.4548C10.1735 10.2613 10.1764 9.94476 9.983 9.7477L7.97289 7.7H9.4998Z"
    fill="white" />
</svg>`,"image/svg+xml").firstChild}var Lr={PIP:"picture-in-picture",INLINE:"inline",FULLSCREEN:"fullscreen"},d1=function(t){ee(r,t);var i=te(r);function r(){var n;Q(this,r);for(var e=arguments.length,s=new Array(e),a=0;a<e;a++)s[a]=arguments[a];return n=i.call.apply(i,[this].concat(s)),O(x(n),"switchPIP",function(o){if(!n.isPIPAvailable())return!1;o.stopPropagation&&o.stopPropagation(),n.isPip?(n.exitPIP(),n.emitUserAction(o,"change_pip",{props:"pip",from:!0,to:!1}),n.setAttr("data-state","normal")):n.player.media.readyState===4&&(n.requestPIP(),n.emitUserAction(o,"change_pip",{props:"pip",from:!1,to:!0}),n.setAttr("data-state","pip"))}),n}return q(r,[{key:"beforeCreate",value:function(e){typeof e.player.config.pip=="boolean"&&(e.config.showIcon=e.player.config.pip)}},{key:"afterCreate",value:function(){var e=this;this.isPIPAvailable()&&(se(re(r.prototype),"afterCreate",this).call(this),this.pMode=Lr.INLINE,this.initPipEvents(),this.config.showIcon&&this.initIcons(),this.once(po,function(){e.config.showIcon&&(g.removeClass(e.find(".xgplayer-icon"),"xg-icon-disable"),e.bind("click",e.switchPIP))}))}},{key:"registerIcons",value:function(){return{pipIcon:{icon:f1,class:"xg-get-pip"},pipIconExit:{icon:h1,class:"xg-exit-pip"}}}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild(".xgplayer-icon",e.pipIcon),this.appendChild(".xgplayer-icon",e.pipIconExit)}},{key:"initPipEvents",value:function(){var e=this,s=this.player;this.leavePIPCallback=function(){var a=s.paused;g.setTimeout(e,function(){!a&&s.mediaPlay()},0),!a&&s.mediaPlay(),e.setAttr("data-state","normal"),e.pipWindow=null,s.emit(_l,!1)},this.enterPIPCallback=function(a){s.emit(_l,!0),a!=null&&a.pictureInPictureWindow&&(e.pipWindow=a.pictureInPictureWindow),e.setAttr("data-state","pip")},this.onWebkitpresentationmodechanged=function(a){var o=s.media.webkitPresentationMode;e.pMode===Lr.FULLSCREEN&&o!==Lr.FULLSCREEN&&s.onFullscreenChange(null,!1),e.pMode=o,o===Lr.PIP?e.enterPIPCallback(a):o===Lr.INLINE&&e.leavePIPCallback(a)},s.media&&(s.media.addEventListener("enterpictureinpicture",this.enterPIPCallback),s.media.addEventListener("leavepictureinpicture",this.leavePIPCallback),r.checkWebkitSetPresentationMode(s.media)&&s.media.addEventListener("webkitpresentationmodechanged",this.onWebkitpresentationmodechanged))}},{key:"copyStyleIntoPiPWindow",value:function(e){var s=Yt(document.styleSheets).map(function(o){try{return Yt(o.cssRules).map(function(l){return l.cssText}).join("")}catch{var u=document.createElement("link");u.rel="stylesheet",u.type=o.type,u.media=o.media,u.href=o.href,e.document.head.appendChild(u)}return""}).filter(Boolean).join(`
`),a=document.createElement("style");a.textContent=s,e.document.head.appendChild(a)}},{key:"requestPIP",value:function(){var e=this,s=this.player,a=this.playerConfig,o=this.config;if(!(!this.isPIPAvailable()||this.isPip))try{var u=a.poster;if(u&&(s.media.poster=g.typeOf(u)==="String"?u:u.poster),o.preferDocument&&this.isDocPIPAvailable()){var l={};if(o.width&&o.height)l.width=o.width,l.height=o.height;else{var c=s.root.getBoundingClientRect();l.width=c.width,l.height=c.height}documentPictureInPicture.requestWindow(l).then(function(f){var h=o.docPiPNode,d=o.docPiPStyle;e.enterPIPCallback();var p=h||s.root,m=p.parentElement,_=p.previousSibling,v=p.nextSibling;e.copyStyleIntoPiPWindow(f);var y=document.createElement("style");if(y.append("body{padding:0; margin:0;}"),d){var S="";typeof d=="string"?S=d:typeof d=="function"&&(S=d.call(o)),S&&y.append(S)}else p===s.root&&y.append(`
              .xgplayer{width: 100%!important; height: 100%!important;}
            `);f.document.head.append(y),f.document.body.append(p),f.addEventListener("pagehide",function(E){m&&(v?m.insertBefore(p,v):_?m.insertBefore(p,_.nextSibling):m.appendChild(p)),e.leavePIPCallback()},{once:!0})})}else r.checkWebkitSetPresentationMode(s.media)?s.media.webkitSetPresentationMode("picture-in-picture"):s.media.requestPictureInPicture();return!0}catch(f){return console.error("requestPiP",f),!1}}},{key:"exitPIP",value:function(){var e=this.player;try{if(this.isPIPAvailable()&&this.isPip){var s;this.isDocPIPAvailable()&&(s=documentPictureInPicture)!==null&&s!==void 0&&s.window?documentPictureInPicture.window.close():r.checkWebkitSetPresentationMode(e.media)?e.media.webkitSetPresentationMode("inline"):document.exitPictureInPicture()}return!0}catch(a){return console.error("exitPIP",a),!1}}},{key:"isPip",get:function(){var e,s=this.player;return!!(this.isDocPIPAvailable()&&(e=documentPictureInPicture)!==null&&e!==void 0&&e.window)||document.pictureInPictureElement&&document.pictureInPictureElement===s.media||s.media.webkitPresentationMode===Lr.PIP}},{key:"isPIPAvailable",value:function(){var e=this.player.media,s=g.typeOf(document.pictureInPictureEnabled)==="Boolean"?document.pictureInPictureEnabled:!0;return s&&(g.typeOf(e.disablePictureInPicture)==="Boolean"&&!e.disablePictureInPicture||e.webkitSupportsPresentationMode&&g.typeOf(e.webkitSetPresentationMode)==="Function")||this.isDocPIPAvailable()}},{key:"isDocPIPAvailable",value:function(){return"documentPictureInPicture"in window&&/^(https|file)/.test(location.protocol)}},{key:"destroy",value:function(){se(re(r.prototype),"destroy",this).call(this);var e=this.player;e.media.removeEventListener("enterpictureinpicture",this.enterPIPCallback),e.media.removeEventListener("leavepictureinpicture",this.leavePIPCallback),r.checkWebkitSetPresentationMode(e.media)&&e.media.removeEventListener("webkitpresentationmodechanged",this.onWebkitpresentationmodechanged),this.exitPIP(),this.unbind("click",this.btnClick)}},{key:"render",value:function(){if(!(!this.config.showIcon||!this.isPIPAvailable()))return`<xg-icon class="xgplayer-pip">
      <div class="xgplayer-icon xg-icon-disable">
      </div>
      `.concat(er(this,"PIP",this.playerConfig.isHideTips),`
    </xg-icon>`)}}],[{key:"pluginName",get:function(){return"pip"}},{key:"defaultConfig",get:function(){return{position:ke.CONTROLS_RIGHT,index:6,showIcon:!1,preferDocument:!1,width:void 0,height:void 0,docPiPNode:void 0,docPiPStyle:void 0}}},{key:"checkWebkitSetPresentationMode",value:function(e){return typeof e.webkitSetPresentationMode=="function"}}]),r}(Pr);function p1(){return new DOMParser().parseFromString(`<svg xmlns="http://www.w3.org/2000/svg" width="24" height="40" viewBox="10 0 24 40">
  <path transform="scale(0.038 0.028)" d="M800 380v768h-128v-352l-320 320v-704l320 320v-352z"></path>
</svg>
`,"image/svg+xml").firstChild}var v1=function(t){ee(r,t);var i=te(r);function r(n){var e;return Q(this,r),e=i.call(this,n),O(x(e),"playNext",function(s){var a=x(e),o=a.player;s.preventDefault(),s.stopPropagation(),e.idx+1<e.config.urlList.length?(e.idx++,e.nextHandler(e.config.urlList[e.idx],e.idx),o.emit(Ma,e.idx+1)):(e.nextHandler(),o.emit(Ma))}),e.idx=-1,e}return q(r,[{key:"afterCreate",value:function(){!this.config.urlList||this.config.urlList.length===0||(this.appendChild(".xgplayer-icon",this.icons.playNext),this.initEvents())}},{key:"registerIcons",value:function(){return{playNext:p1}}},{key:"initEvents",value:function(){this.nextHandler=this.hook("nextClick",this.changeSrc);var e=le.device==="mobile"?"touchend":"click";this.bind(e,this.playNext),this.show()}},{key:"changeSrc",value:function(e){var s=this.player;e&&(s.pause(),s.currentTime=0,s.switchURL?s.switchURL(e):s.src=e,s.config.url=e,s.play())}},{key:"destroy",value:function(){this.unbind(["touchend","click"],this.playNext)}},{key:"render",value:function(){if(!(!this.config.urlList||this.config.urlList.length===0))return`
     <xg-icon class="xgplayer-playnext">
      <div class="xgplayer-icon">
      </div>
      `.concat(er(this,"PLAYNEXT_TIPS",this.playerConfig.isHideTips),`
     </xg-icon>
    `)}}],[{key:"pluginName",get:function(){return"playNext"}},{key:"defaultConfig",get:function(){return{position:ke.CONTROLS_LEFT,index:1,url:null,urlList:[]}}}]),r}(me),Ov={exports:{}};(function(t,i){(function(r,n){t.exports=n()})(rg,function(){return function r(n,e,s){var a=window,o="application/octet-stream",u=s||o,l=n,c=!e&&!s&&l,f=document.createElement("a"),h=function(P){return String(P)},d=a.Blob||a.MozBlob||a.WebKitBlob||h,p=e||"download",m,_;if(d=d.call?d.bind(a):Blob,String(this)==="true"&&(l=[l,u],u=l[0],l=l[1]),c&&c.length<2048&&(p=c.split("/").pop().split("?")[0],f.href=c,f.href.indexOf(c)!==-1)){var v=new XMLHttpRequest;return v.open("GET",c,!0),v.responseType="blob",v.onload=function(P){r(P.target.response,p,o)},setTimeout(function(){v.send()},0),v}if(/^data:([\w+-]+\/[\w+.-]+)?[,;]/.test(l))if(l.length>1024*1024*1.999&&d!==h)l=T(l),u=l.type||o;else return navigator.msSaveBlob?navigator.msSaveBlob(T(l),p):A(l);else if(/([\x80-\xff])/.test(l)){var y=0,S=new Uint8Array(l.length),E=S.length;for(y;y<E;++y)S[y]=l.charCodeAt(y);l=new d([S],{type:u})}m=l instanceof d?l:new d([l],{type:u});function T(P){var D=P.split(/[:;,]/),F=D[1],I=D[2]=="base64"?atob:decodeURIComponent,X=I(D.pop()),k=X.length,w=0,C=new Uint8Array(k);for(w;w<k;++w)C[w]=X.charCodeAt(w);return new d([C],{type:F})}function A(P,D){if("download"in f)return f.href=P,f.setAttribute("download",p),f.className="download-js-link",f.innerHTML="downloading...",f.style.display="none",document.body.appendChild(f),setTimeout(function(){f.click(),document.body.removeChild(f),D===!0&&setTimeout(function(){a.URL.revokeObjectURL(f.href)},250)},66),!0;if(/(Version)\/(\d+)\.(\d+)(?:\.(\d+))?.*Safari\//.test(navigator.userAgent))return/^data:/.test(P)&&(P="data:"+P.replace(/^data:([\w\/\-\+]+)/,o)),window.open(P)||confirm(`Displaying New Document

Use Save As... to download, then click back to return to this page.`)&&(location.href=P),!0;var F=document.createElement("iframe");document.body.appendChild(F),!D&&/^data:/.test(P)&&(P="data:"+P.replace(/^data:([\w\/\-\+]+)/,o)),F.src=P,setTimeout(function(){document.body.removeChild(F)},333)}if(navigator.msSaveBlob)return navigator.msSaveBlob(m,p);if(a.URL)A(a.URL.createObjectURL(m),!0);else{if(typeof m=="string"||m.constructor===h)try{return A("data:"+u+";base64,"+a.btoa(m))}catch{return A("data:"+u+","+encodeURIComponent(m))}_=new FileReader,_.onload=function(P){A(this.result)},_.readAsDataURL(m)}return!0}})})(Ov);var g1=Ov.exports;const m1=Xa(g1);function y1(){return new DOMParser().parseFromString(`<svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" viewBox="0 0 24 24">
  <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
    <g transform="translate(-488.000000, -340.000000)" fill="#FFFFFF">
      <g id="Group-2">
        <g id="volme_big-copy" transform="translate(488.000000, 340.000000)">
          <rect id="Rectangle-18" x="11" y="4" width="2" height="12" rx="1"></rect>
          <rect id="Rectangle-2" x="3" y="18" width="18" height="2" rx="1"></rect>
          <rect id="Rectangle-2" transform="translate(4.000000, 17.500000) rotate(90.000000) translate(-4.000000, -17.500000) " x="1.5" y="16.5" width="5" height="2" rx="1"></rect><rect id="Rectangle-2-Copy-3" transform="translate(20.000000, 17.500000) rotate(90.000000) translate(-20.000000, -17.500000) " x="17.5" y="16.5" width="5" height="2" rx="1"></rect>
          <path d="M9.48791171,8.26502656 L9.48791171,14.2650266 C9.48791171,14.8173113 9.04019646,15.2650266 8.48791171,15.2650266 C7.93562696,15.2650266 7.48791171,14.8173113 7.48791171,14.2650266 L7.48791171,7.26502656 C7.48791171,6.71274181 7.93562696,6.26502656 8.48791171,6.26502656 L15.4879117,6.26502656 C16.0401965,6.26502656 16.4879117,6.71274181 16.4879117,7.26502656 C16.4879117,7.81731131 16.0401965,8.26502656 15.4879117,8.26502656 L9.48791171,8.26502656 Z" id="Combined-Shape" transform="translate(11.987912, 10.765027) scale(1, -1) rotate(45.000000) translate(-11.987912, -10.765027) "></path>
        </g>
      </g>
    </g>
  </g>
</svg>
`,"image/svg+xml").firstChild}var _1=function(t){ee(r,t);var i=te(r);function r(n){var e;return Q(this,r),e=i.call(this,n),O(x(e),"download",function(s){if(!e.isLock){e.emitUserAction(s,"download");var a=e.playerConfig.url,o="";g.typeOf(a)==="String"?o=a:g.typeOf(a)==="Array"&&a.length>0&&(o=a[0].src);var u=e.getAbsoluteURL(o);m1(u),e.isLock=!0,e.timer=window.setTimeout(function(){e.isLock=!1,window.clearTimeout(e.timer),e.timer=null},300)}}),e.timer=null,e.isLock=!1,e}return q(r,[{key:"afterCreate",value:function(){se(re(r.prototype),"afterCreate",this).call(this),!this.config.disable&&(this.appendChild(".xgplayer-icon",this.icons.download),this._handler=this.hook("click",this.download,{pre:function(s){s.preventDefault(),s.stopPropagation()}}),this.bind(["click","touchend"],this._handler))}},{key:"registerIcons",value:function(){return{download:y1}}},{key:"getAbsoluteURL",value:function(e){if(!e.match(/^https?:\/\//)){var s=document.createElement("div");s.innerHTML='<a href="'.concat(e,'">x</a>'),e=s.firstChild.href}return e}},{key:"destroy",value:function(){se(re(r.prototype),"destroy",this).call(this),this.unbind(["click","touchend"],this.download),window.clearTimeout(this.timer),this.timer=null}},{key:"render",value:function(){if(!this.config.disable)return`<xg-icon class="xgplayer-download">
   <div class="xgplayer-icon">
   </div>
   `.concat(er(this,"DOWNLOAD_TIPS",this.playerConfig.isHideTips),`
    </xg-icon>`)}}],[{key:"pluginName",get:function(){return"download"}},{key:"defaultConfig",get:function(){return{position:ke.CONTROLS_RIGHT,index:3,disable:!0}}}]),r}(Pr),S1=function(t){ee(r,t);var i=te(r);function r(){return Q(this,r),i.apply(this,arguments)}return q(r,[{key:"beforeCreate",value:function(e){typeof e.player.config.screenShot=="boolean"&&(e.config.disable=!e.player.config.screenShot)}},{key:"afterCreate",value:function(){se(re(r.prototype),"afterCreate",this).call(this),this.appendChild(".xgplayer-icon",this.icons.screenshotIcon);var e=this.config;this.initSize=function(s){e.fitVideo&&(e.width=s.vWidth,e.height=s.vHeight)},this.once(Xn,this.initSize)}},{key:"onPluginsReady",value:function(){this.show(),this.onClickBtn=this.onClickBtn.bind(this),this.bind(["click","touchend"],this.onClickBtn)}},{key:"saveScreenShot",value:function(e,s){var a=document.createElement("a");a.href=e,a.download=s;var o;try{typeof MouseEvent<"u"?o=new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window}):(o=document.createEvent("MouseEvents"),o.initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null))}catch(u){console.error("MouseEvent unsupported",u)}o&&a.dispatchEvent(o)}},{key:"createCanvas",value:function(e,s){var a=document.createElement("canvas"),o=a.getContext("2d");this.canvasCtx=o,this.canvas=a,a.width=e||this.config.width,a.height=s||this.config.height,o.imageSmoothingEnabled=!0,o.imageSmoothingEnabled&&(o.imageSmoothingQuality="high")}},{key:"onClickBtn",value:function(e){var s=this;e.preventDefault(),e.stopPropagation(),this.emitUserAction(e,"shot");var a=this.config;this.shot(a.width,a.height).then(function(o){s.emit(_v,o),a.saveImg&&s.saveScreenShot(o,a.name+a.format)})}},{key:"shot",value:function(e,s){var a=this,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{quality:.92,type:"image/png"},u=this.config,l=this.player,c=o.quality||u.quality,f=o.type||u.type;return new Promise(function(h,d){var p=null,m;if(l.media.canvas)p=l.media.canvas;else{a.canvas?(a.canvas.width=e||u.width,a.canvas.height=s||u.height):a.createCanvas(e,s),p=a.canvas,m=a.canvasCtx;var _=l.media.videoWidth/l.media.videoHeight,v=p.width/p.height,y=0,S=0,E=l.media.videoWidth,T=l.media.videoHeight,A,P,D,F;_>v?(D=p.width,F=p.width/_,A=0,P=Math.round((p.height-F)/2)):_===v?(D=p.width,F=p.height,A=0,P=0):_<v&&(D=p.height*_,F=p.height,A=Math.round((p.width-D)/2),P=0),m.drawImage(l.media,y,S,E,T,A,P,D,F)}var I=p.toDataURL(f,c).replace(f,"image/octet-stream");I=I.replace(/^data:image\/[^;]+/,"data:application/octet-stream"),h(I)})}},{key:"registerIcons",value:function(){return{screenshotIcon:null}}},{key:"destroy",value:function(){se(re(r.prototype),"destroy",this).call(this),this.unbind(["click","touchend"],this.onClickBtn),this.off(Xn,this.initSize)}},{key:"render",value:function(){if(!this.config.disable){var e=this.icons.screenshotIcon?"xgplayer-icon":"xgplayer-icon btn-text",s="SCREENSHOT";return`
      <xg-icon class="xgplayer-shot">
      <div class="`.concat(e,`">
      `).concat(this.icons.screenshotIcon?"":'<span lang-key="'.concat(this.i18nKeys[s],'">').concat(this.i18n[s],"</span>"),`
      </div>
    </xg-icon>`)}}}],[{key:"pluginName",get:function(){return"screenShot"}},{key:"defaultConfig",get:function(){return{position:ke.CONTROLS_RIGHT,index:5,quality:.92,type:"image/png",format:".png",width:600,height:337,saveImg:!0,fitVideo:!0,disable:!1,name:"screenshot"}}}]),r}(Pr),E1=function(){function t(i){Q(this,t),this.config=i.config,this.parent=i.root,this.root=g.createDom("ul","",{},"xg-options-list xg-list-slide-scroll ".concat(this.config.className)),i.root.appendChild(this.root);var r=this.config.maxHeight;r&&this.setStyle({maxHeight:r}),this.onItemClick=this.onItemClick.bind(this),this.renderItemList();var n=this.config.domEventType==="touch"?"touchend":"click";this._delegates=me.delegate.call(this,this.root,"li",n,this.onItemClick)}return q(t,[{key:"renderItemList",value:function(r){var n=this,e=this.config,s=this.root;r?e.data=r:r=e.data,e.style&&Object.keys(e.style).map(function(a){s.style[a]=e[a]}),r.length>0&&(this.attrKeys=Object.keys(r[0])),this.root.innerHTML="",r.map(function(a,o){var u=a.selected?"option-item selected":"option-item";a["data-index"]=o,n.root.appendChild(g.createDom("li","<span>".concat(a.showText,"</span>"),a,u))})}},{key:"onItemClick",value:function(r){r.delegateTarget||(r.delegateTarget=r.target);var n=r.delegateTarget;if(n&&g.hasClass(n,"selected"))return!1;var e=typeof this.config.onItemClick=="function"?this.config.onItemClick:null,s=this.root.querySelector(".selected");g.addClass(n,"selected"),s&&g.removeClass(s,"selected"),e(r,{from:s?this.getAttrObj(s,this.attrKeys):null,to:this.getAttrObj(n,this.attrKeys)})}},{key:"getAttrObj",value:function(r,n){if(!r||!n)return{};var e={};n.map(function(a){e[a]=r.getAttribute(a)});var s=r.getAttribute("data-index");return s&&(e.index=Number(s)),e}},{key:"show",value:function(){g.removeClass(this.root,"hide"),g.addClass(this.root,"active")}},{key:"hide",value:function(){g.removeClass(this.root,"active"),g.addClass(this.root,"hide")}},{key:"setStyle",value:function(r){var n=this;Object.keys(r).forEach(function(e){n.root.style[e]=r[e]})}},{key:"destroy",value:function(){this._delegates&&(this._delegates.map(function(r){r.destroy&&r.destroy()}),this._delegates=null),this.root.innerHTML=null,this.parent.removeChild(this.root),this.root=null}}]),t}(),qt={SIDE:"side",MIDDLE:"middle",DEFAULT:"default"},Dr={CLICK:"click",HOVER:"hover"};function k1(t,i){return t===qt.SIDE?i===ke.CONTROLS_LEFT?"xg-side-list xg-left-side":"xg-side-list xg-right-side":""}var rr=le.device==="mobile",Ha=function(t){ee(r,t);var i=te(r);function r(n){var e;return Q(this,r),e=i.call(this,n),O(x(e),"onEnter",function(s){s.stopPropagation(),e.emit("icon_mouseenter",{pluginName:e.pluginName}),e.switchActiveState(s)}),O(x(e),"switchActiveState",function(s){s.stopPropagation();var a=e.config.toggleMode;a===Dr.CLICK?e.toggle(!e.isActive):e.toggle(!0)}),O(x(e),"onLeave",function(s){s.stopPropagation(),e.emit("icon_mouseleave",{pluginName:e.pluginName}),e.config.listType!==qt.SIDE&&e.isActive&&e.toggle(!1)}),O(x(e),"onListEnter",function(s){e.enterType=2}),O(x(e),"onListLeave",function(s){e.enterType=0,e.isActive&&e.toggle(!1)}),e.isIcons=!1,e.isActive=!1,e.curValue=null,e.curIndex=0,e}return q(r,[{key:"updateLang",value:function(e){this.renderItemList(this.config.list,this.curIndex)}},{key:"afterCreate",value:function(){var e=this,s=this.config;this.initIcons(),rr=rr||this.domEventType==="touch",rr&&le.device==="mobile"&&s.listType===qt.DEFAULT&&(s.listType=qt.SIDE),s.hidePortrait&&g.addClass(this.root,"portrait"),this.on([Xn,cn],function(){e._resizeList()}),this.once(pn,function(){s.list&&s.list.length>0&&(e.renderItemList(s.list),e.show())}),rr&&this.on(Cc,function(){e.isActive&&(e.optionsList&&e.optionsList.hide(),e.isActive=!1)}),rr?(s.toggleMode=Dr.CLICK,this.activeEvent="touchend"):this.activeEvent=s.toggleMode===Dr.CLICK?"click":"mouseenter",s.toggleMode===Dr.CLICK?this.bind(this.activeEvent,this.switchActiveState):(this.bind(this.activeEvent,this.onEnter),this.bind("mouseleave",this.onLeave)),this.isIcons&&this.bind("click",this.onIconClick)}},{key:"initIcons",value:function(){var e=this,s=this.icons,a=Object.keys(s),o=!1;a.length>0&&(a.forEach(function(u){e.appendChild(".xgplayer-icon",s[u]),!o&&(o=s[u])}),this.isIcons=o),!o&&(this.appendChild(".xgplayer-icon",g.createDom("span","",{},"icon-text")),g.addClass(this.find(".xgplayer-icon"),"btn-text"))}},{key:"show",value:function(e){!this.config.list||this.config.list.length<2||g.addClass(this.root,"show")}},{key:"hide",value:function(){g.removeClass(this.root,"show")}},{key:"getTextByLang",value:function(e,s,a){if(e===void 0)return"";var o=this.config.list;!a&&(a=this.player.lang),s=!s||g.isUndefined(e[s])?"text":s,typeof e=="number"&&(e=o[e]);try{return ut(e[s])==="object"?e[s][a]||e[s].en:e[s]}catch(u){return console.warn(u),""}}},{key:"toggle",value:function(e){if(!(e===this.isActive||this.config.disable)){var s=this.player.controls,a=this.config.listType;e?(a===qt.SIDE?s.blur():s.focus(),this.optionsList&&this.optionsList.show()):(a===qt.SIDE?s.focus():s.focusAwhile(),this.optionsList&&this.optionsList.hide()),this.isActive=e}}},{key:"onItemClick",value:function(e,s){e.stopPropagation();var a=this.config,o=a.listType,u=a.list;this.curIndex=s.to.index,this.curItem=u[this.curIndex],this.changeCurrentText();var l=this.config.isItemClickHide;(l||rr||o===qt.SIDE)&&this.toggle(!1)}},{key:"onIconClick",value:function(e){}},{key:"changeCurrentText",value:function(){if(!this.isIcons){var e=this.config.list,s=this.curIndex<e.length?this.curIndex:0,a=e[s];a&&(this.find(".icon-text").innerHTML=this.getTextByLang(a,"iconText"))}}},{key:"renderItemList",value:function(e,s){var a=this,o=this.config,u=this.optionsList,l=this.player;if(typeof s=="number"&&(this.curIndex=s,this.curItem=o.list[s]),u){u.renderItemList(e),this.changeCurrentText();return}var c={config:{data:e||[],className:k1(o.listType,o.position),onItemClick:function(m,_){a.onItemClick(m,_)},domEventType:rr?"touch":"mouse"},root:o.listType===qt.SIDE?l.innerContainer||l.root:this.root};if(this.config.isShowIcon){var f=this.player.root.getBoundingClientRect(),h=f.height,d=o.listType===qt.MIDDLE?h-50:h;d&&o.heightLimit&&(c.config.maxHeight="".concat(d,"px")),this.optionsList=new E1(c),this.changeCurrentText(),this.show()}this._resizeList()}},{key:"_resizeList",value:function(){if(this.config.heightLimit){var e=this.player.root.getBoundingClientRect(),s=e.height,a=this.config.listType===qt.MIDDLE?s-50:s;this.optionsList&&this.optionsList.setStyle({maxHeight:"".concat(a,"px")})}}},{key:"destroy",value:function(){var e=this.config;e.toggleMode===Dr.CLICK?this.unbind(this.activeEvent,this.switchActiveState):(this.unbind(this.activeEvent,this.onEnter),this.unbind("mouseleave",this.onLeave)),this.isIcons&&this.unbind("click",this.onIconClick),this.optionsList&&(this.optionsList.destroy(),this.optionsList=null)}},{key:"render",value:function(){if(this.config.isShowIcon)return'<xg-icon class="xg-options-icon '.concat(this.config.className||"",`">
    <div class="xgplayer-icon">
    </div>
   </xg-icon>`)}}],[{key:"pluginName",get:function(){return"optionsIcon"}},{key:"defaultConfig",get:function(){return{position:ke.CONTROLS_RIGHT,index:100,list:[],listType:"default",listStyle:{},hidePortrait:!0,isShowIcon:!1,isItemClickHide:!0,toggleMode:Dr.HOVER,heightLimit:!0}}}]),r}(me),w1=function(t){ee(r,t);var i=te(r);function r(n){var e;return Q(this,r),e=i.call(this,n),e.curTime=0,e.isPaused=!0,e}return q(r,[{key:"beforeCreate",value:function(e){var s=e.config.list;Array.isArray(s)&&s.length>0&&(e.config.list=s.map(function(a){return!a.text&&a.name&&(a.text=a.name),a.text||(a.text=a.definition),a}))}},{key:"afterCreate",value:function(){var e=this;se(re(r.prototype),"afterCreate",this).call(this),this.on("resourceReady",function(s){e.changeDefinitionList(s)}),this.on(xc,function(s){e.renderItemList(e.config.list,s.to)}),this.player.definitionList.length<2&&this.hide()}},{key:"show",value:function(e){!this.config.list||this.config.list.length<2||g.addClass(this.root,"show")}},{key:"initDefinition",value:function(){var e=this.config,s=e.list,a=e.defaultDefinition;if(s.length>0){var o=null;s.map(function(u){u.definition===a&&(o=u)}),o||(o=s[0]),this.changeDefinition(o)}}},{key:"renderItemList",value:function(){var e=this,s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.config.list||[],a=arguments.length>1?arguments[1]:void 0,o=a&&a.definition?a.definition:this.config.defaultDefinition;a&&s.forEach(function(c){c.selected=!1});var u=0,l=s.map(function(c,f){var h=Oe(Oe({},c),{},{showText:e.getTextByLang(c)||c.definition,selected:!1});return(c.selected||c.definition&&c.definition==o)&&(h.selected=!0,u=f),h});se(re(r.prototype),"renderItemList",this).call(this,l,u)}},{key:"changeDefinitionList",value:function(e){Array.isArray(e)&&(this.config.list=e.map(function(s){return!s.text&&s.name&&(s.text=s.name),s.text||(s.text=s.definition),s}),this.renderItemList(),this.config.list.length<2?this.hide():this.show())}},{key:"changeDefinition",value:function(e,s){this.player.changeDefinition(e,s)}},{key:"onItemClick",value:function(e,s){var a=this.player.definitionList;se(re(r.prototype),"onItemClick",this).apply(this,arguments),this.emitUserAction(e,"change_definition",{from:s.from,to:s.to});for(var o=0;o<a.length;o++)s.to&&a[o].definition===s.to.definition&&(s.to.url=a[o].url),s.from&&a[o].definition===s.from.definition&&(s.from.url=a[o].url);this.player.changeDefinition(s.to,s.from)}}],[{key:"pluginName",get:function(){return"definition"}},{key:"defaultConfig",get:function(){return Oe(Oe({},Ha.defaultConfig),{},{position:ke.CONTROLS_RIGHT,index:3,list:[],defaultDefinition:"",disable:!1,hidePortrait:!1,className:"xgplayer-definition",isShowIcon:!0})}}]),r}(Ha),T1=function(t){ee(r,t);var i=te(r);function r(n){var e;return Q(this,r),e=i.call(this,n),e.curRate=1,e}return q(r,[{key:"beforeCreate",value:function(e){var s=e.player.config.playbackRate,a=s?Array.isArray(s)?s:e.config.list:[];Array.isArray(a)&&(e.config.list=a.map(function(o){return typeof o=="number"?o={rate:o,text:"".concat(o,"x")}:!o.text&&o.rate&&(o.text="".concat(o.rate,"x")),o}))}},{key:"afterCreate",value:function(){var e=this;se(re(r.prototype),"afterCreate",this).call(this),this.on(fv,function(){e.curValue!==e.player.playbackRate&&e.renderItemList()}),this.renderItemList()}},{key:"show",value:function(e){!this.config.list||this.config.list.length===0||se(re(r.prototype),"show",this).call(this)}},{key:"onItemClick",value:function(e,s){se(re(r.prototype),"onItemClick",this).call(this,e,s);var a=e.delegateTarget,o=Number(a.getAttribute("rate"));if(!o||o===this.curValue)return!1;var u={playbackRate:{from:this.player.playbackRate,to:o}};this.emitUserAction(e,"change_rate",{props:u}),this.curValue=o,this.player.playbackRate=o}},{key:"renderItemList",value:function(){var e=this,s=this.player.playbackRate||1;this.curValue=s;var a=-1,o=this.config.list.map(function(u,l){var c={rate:u.rate};return c.rate===s&&(c.selected=!0,a=l),c.showText=e.getTextByLang(u),c});se(re(r.prototype),"renderItemList",this).call(this,o,a)}},{key:"changeCurrentText",value:function(){if(!this.isIcons){var e=this.config.list,s=this.curIndex<e.length?this.curIndex:0,a=e[s],o="";!a||this.curIndex<0?o="".concat(this.player.playbackRate,"x"):o=this.getTextByLang(a,"iconText"),this.find(".icon-text").innerHTML=o}}},{key:"destroy",value:function(){se(re(r.prototype),"destroy",this).call(this)}}],[{key:"pluginName",get:function(){return"playbackRate"}},{key:"defaultConfig",get:function(){return Oe(Oe({},Ha.defaultConfig),{},{position:ke.CONTROLS_RIGHT,index:4,list:[2,1.5,1,.75,.5],className:"xgplayer-playbackrate",isShowIcon:!0,hidePortrait:!1})}}]),r}(Ha);function C1(){return new DOMParser().parseFromString(`<svg xmlns="http://www.w3.org/2000/svg" width="31" height="40" viewBox="0 -5 31 40">
  <path fill="#fff" transform="scale(1.3, 1.3)" class='path_full' d="M9,10v1a.9.9,0,0,1-1,1,.9.9,0,0,1-1-1V9A.9.9,0,0,1,8,8h2a.9.9,0,0,1,1,1,.9.9,0,0,1-1,1Zm6,4V13a1,1,0,0,1,2,0v2a.9.9,0,0,1-1,1H14a1,1,0,0,1,0-2Zm3-7H6V17H18Zm2,0V17a2,2,0,0,1-2,2H6a2,2,0,0,1-2-2V7A2,2,0,0,1,6,5H18A2,2,0,0,1,20,7Z"></path>
</svg>
`,"image/svg+xml").firstChild}function b1(){return new DOMParser().parseFromString(`<svg xmlns="http://www.w3.org/2000/svg" width="31" height="40" viewBox="0 -5 31 40">
  <path fill="#fff" transform="scale(1.3, 1.3)" d="M9,10V9a.9.9,0,0,1,1-1,.9.9,0,0,1,1,1v2a.9.9,0,0,1-1,1H8a.9.9,0,0,1-1-1,.9.9,0,0,1,1-1Zm6,4v1a1,1,0,0,1-2,0V13a.9.9,0,0,1,1-1h2a1,1,0,0,1,0,2Zm3-7H6V17H18Zm2,0V17a2,2,0,0,1-2,2H6a2,2,0,0,1-2-2V7A2,2,0,0,1,6,5H18A2,2,0,0,1,20,7Z"></path>
</svg>
`,"image/svg+xml").firstChild}var Sh=function(t){ee(r,t);var i=te(r);function r(){return Q(this,r),i.apply(this,arguments)}return q(r,[{key:"beforeCreate",value:function(e){typeof e.player.config.cssFullscreen=="boolean"&&(e.config.disable=!e.player.config.cssFullscreen)}},{key:"afterCreate",value:function(){var e=this;se(re(r.prototype),"afterCreate",this).call(this),!this.config.disable&&(this.config.target&&(this.playerConfig.fullscreenTarget=this.config.target),this.initIcons(),this.on(Oa,function(s){e.animate(s)}),this.btnClick=this.btnClick.bind(this),this.handleCssFullscreen=this.hook("cssFullscreen_change",this.btnClick,{pre:function(a){a.preventDefault(),a.stopPropagation()}}),this.bind(["click","touchend"],this.handleCssFullscreen))}},{key:"initIcons",value:function(){var e=this.icons,s=this.find(".xgplayer-icon");s.appendChild(e.cssFullscreen),s.appendChild(e.exitCssFullscreen)}},{key:"btnClick",value:function(e){e.preventDefault(),e.stopPropagation();var s=this.player.isCssfullScreen;this.emitUserAction(e,"switch_cssfullscreen",{cssfullscreen:s}),s?this.player.exitCssFullscreen():this.player.getCssFullscreen()}},{key:"animate",value:function(e){this.root&&(e?this.setAttr("data-state","full"):this.setAttr("data-state","normal"),this.switchTips(e))}},{key:"switchTips",value:function(e){var s=this.i18nKeys,a=this.find(".xg-tips");a&&this.changeLangTextKey(a,e?s.EXITCSSFULLSCREEN_TIPS:s.CSSFULLSCREEN_TIPS)}},{key:"registerIcons",value:function(){return{cssFullscreen:{icon:C1,class:"xg-get-cssfull"},exitCssFullscreen:{icon:b1,class:"xg-exit-cssfull"}}}},{key:"destroy",value:function(){se(re(r.prototype),"destroy",this).call(this),this.unbind(["click","touchend"],this.btnClick)}},{key:"render",value:function(){if(!this.config.disable)return`<xg-icon class='xgplayer-cssfullscreen'>
    <div class="xgplayer-icon">
    </div>
    `.concat(er(this,"CSSFULLSCREEN_TIPS",this.playerConfig.isHideTips),`
    </xg-icon>`)}}],[{key:"pluginName",get:function(){return"cssFullscreen"}},{key:"defaultConfig",get:function(){return{position:ke.CONTROLS_RIGHT,index:1,disable:!1,target:null}}}]),r}(Pr),P1=function(t){ee(r,t);var i=te(r);function r(){return Q(this,r),i.apply(this,arguments)}return q(r,[{key:"afterCreate",value:function(){var e=this;this.clickHandler=this.hook("errorRetry",this.errorRetry,{pre:function(a){a.preventDefault(),a.stopPropagation()}}),this.onError=this.hook("showError",this.handleError),this.bind(".xgplayer-error-refresh","click",this.clickHandler),this.on(yi,function(s){e.onError(s)})}},{key:"errorRetry",value:function(e){this.emitUserAction(e,"error_retry",{}),this.player.retry()}},{key:"handleError",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=this.player,a=e.errorType,o=s.errorNote?this.i18n[s.errorNote]:"";if(!o)switch(a){case"decoder":o=this.i18n.MEDIA_ERR_DECODE;break;case"network":o=this.i18n.MEDIA_ERR_NETWORK;break;default:o=this.i18n.MEDIA_ERR_SRC_NOT_SUPPORTED}this.find(".xgplayer-error-text").innerHTML=o,this.find(".xgplayer-error-tips").innerHTML="".concat(this.i18n.REFRESH_TIPS,'<span class="xgplayer-error-refresh">').concat(this.i18n.REFRESH,"</span>")}},{key:"destroy",value:function(){this.unbind(".xgplayer-error-refresh","click",this.clickHandler)}},{key:"render",value:function(){return`<xg-error class="xgplayer-error">
      <div class="xgplayer-errornote">
       <span class="xgplayer-error-text"></span>
       <span class="xgplayer-error-tips"><em class="xgplayer-error-refresh"></em></span>
      </div>
    </xg-error>`}}],[{key:"pluginName",get:function(){return"error"}}]),r}(me),x1=function(t){ee(r,t);var i=te(r);function r(){return Q(this,r),i.apply(this,arguments)}return q(r,[{key:"afterCreate",value:function(){var e=this;this.intervalId=0,this.customConfig=null,this.bind(".highlight",["click","touchend"],function(s){(e.config.onClick||e.customOnClick)&&(s.preventDefault(),s.stopPropagation(),e.customOnClick?e.customOnClick(s):e.config.onClick(s))}),this.player.showPrompt=function(){e.showPrompt.apply(e,arguments)},this.player.hidePrompt=function(){e.hide()}}},{key:"setStyle",value:function(e){var s=this;Object.keys(e).map(function(a){s.root.style[a]=e[a]})}},{key:"showPrompt",value:function(e){var s=this,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(){};if(e){this.customOnClick=o;var u=this.config.interval;this.intervalId&&(clearTimeout(this.intervalId),this.intervalId=null),g.addClass(this.root,"show"),a.mode==="arrow"&&g.addClass(this.root,"arrow"),typeof e=="string"?this.find(".xgplayer-prompt-detail").innerHTML=e:this.find(".xgplayer-prompt-detail").innerHTML="".concat(e.text||"")+"".concat(e.highlight?'<i class="highlight">'.concat(e.highlight,"</i>"):""),a.style&&this.setStyle(a.style);var l=typeof a.autoHide=="boolean"?a.autoHide:this.config.autoHide;if(l){var c=a.interval||u;this.intervalId=setTimeout(function(){s.hide()},c)}}}},{key:"hide",value:function(){g.removeClass(this.root,"show"),g.removeClass(this.root,"arrow"),this.root.removeAttribute("style"),this.customOnClick=null}},{key:"render",value:function(){return'<xg-prompt class="xgplayer-prompt '.concat(z.CONTROLS_FOLLOW,`">
    <span class="xgplayer-prompt-detail"></span>
    </xg-prompt>`)}}],[{key:"pluginName",get:function(){return"prompt"}},{key:"defaultConfig",get:function(){return{interval:3e3,style:{},mode:"arrow",autoHide:!0,detail:{text:"",highlight:""},onClick:function(){}}}}]),r}(me),Eh={time:0,text:"",id:1,duration:1,color:"#fff",style:{},width:6,height:6};function Rv(t){Object.keys(Eh).map(function(i){t[i]===void 0&&(t[i]=Eh[i])})}var kh={_updateDotDom:function(i,r){if(r){var n=this.calcuPosition(i.time,i.duration),e=i.style||{};e.left="".concat(n.left,"%"),e.width="".concat(n.width,"%"),r.setAttribute("data-text",i.text),r.setAttribute("data-time",i.time),n.isMini?g.addClass(r,"mini"):g.removeClass(r,"mini"),Object.keys(e).map(function(s){r.style[s]=e[s]})}},initDots:function(){var i=this;this._ispots.map(function(r){i.createDot(r,!1)}),this.ispotsInit=!0},createDot:function(i){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,n=this.player.plugins.progress;if(n&&(r&&(Rv(i),this._ispots.push(i)),!(!this.ispotsInit&&r))){var e=this.calcuPosition(i.time,i.duration),s=i.style||{};s.left="".concat(e.left,"%"),s.width="".concat(e.width,"%");var a="xgspot_".concat(i.id," xgplayer-spot");e.isMini&&(a+=" mini");var o=i.template?'<div class="xgplayer-spot-pop">'.concat(i.template,"</div>"):"",u=g.createDom("xg-spot",o,{"data-text":i.text,"data-time":i.time,"data-id":i.id},a);Object.keys(s).map(function(l){u.style[l]=s[l]}),n.outer&&n.outer.appendChild(u),this.positionDot(u,i.id)}},findDot:function(i){if(this.player.plugins.progress){var r=this._ispots.filter(function(n,e){return n.id===i});return r.length>0?r[0]:null}},updateDot:function(i){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=this.player.plugins.progress;if(n){var e=this.findDot(i.id);if(e&&Object.keys(i).map(function(a){e[a]=i[a]}),!!this.ispotsInit){var s=n.find('xg-spot[data-id="'.concat(i.id,'"]'));s&&(this._updateDotDom(i,s),r&&this.showDot(i.id))}}},deleteDot:function(i){var r=this._ispots,n=this.player.plugins.progress;if(n){for(var e=[],s=0;s<r.length;s++)r[s].id===i&&e.push(s);for(var a=e.length,o=a-1;o>=0;o--)if(r.splice(e[o],1),this.ispotsInit){var u=n.find('xg-spot[data-id="'.concat(i,'"]'));u&&u.parentElement.removeChild(u)}}},deleteAllDots:function(){var i=this.player.plugins.progress;if(i){if(!this.ispotsInit){this._ispots=[];return}for(var r=i.root.getElementsByTagName("xg-spot"),n=r.length-1;n>=0;n--)i.outer.removeChild(r[n]);this._ispots=[]}},updateAllDots:function(){var i=this,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=this.player.plugins.progress;if(n){if(!this.ispotsInit){this._ispots=r;return}this._ispots=[];var e=n.root.getElementsByTagName("xg-spot"),s=e.length;if(s>r.length)for(var a=s-1;a>r.length-1;a--)n.outer.removeChild(e[a]);r.forEach(function(o,u){u<s?(e[u].setAttribute("data-id","".concat(o.id)),i._ispots.push(o),i.updateDot(o)):i.createDot(o)})}},positionDots:function(){var i=this,r=this._ispots,n=this.playerSize,e=this.player.sizeInfo,s=this.player.plugins.progress;!s||e.width===n.width||(n.width=e.width,n.left=e.left,r.forEach(function(a){var o=s.find('xg-spot[data-id="'.concat(a.id,'"]'));o&&i.positionDot(o,a.id)}))},positionDot:function(i,r){var n=g.findDom(i,".xgplayer-spot-pop");if(n){var e=this.playerSize,s=i.getBoundingClientRect(),a=n.getBoundingClientRect(),o=s.left-e.left,u=e.width-o-s.width/2;if(o<a.width/2||e.width<a.width){var l=a.width/2-o;n.style.left="".concat(l,"px")}else if(u<a.width/2){var c=u-a.width/2+s.width/2;n.style.left="".concat(c,"px")}else n.style.left="50%"}},updateDuration:function(){var i=this,r=this.player.plugins.progress;if(r){var n=this._ispots;n.forEach(function(e){var s=r.find('xg-spot[data-id="'.concat(e.id,'"]'));i._updateDotDom(e,s)})}},getAllDotsDom:function(){var i=this.player.plugins.progress;if(!i)return[];var r=i.root.getElementsByTagName("xg-spot");return r},getDotDom:function(i){var r=this.player.plugins.progress;if(r)return r.find('xg-spot[data-id="'.concat(i,'"]'))}};function A1(t){var i=t.config,r=t.player;Object.keys(kh).map(function(e){t[e]=kh[e].bind(t)});var n=r.config.progressDot||i.ispots||[];t._ispots=n.map(function(e){return Rv(e),e}),t.ispotsInit=!1,t.playerSize={left:r.sizeInfo.left,width:r.sizeInfo.width},t.on(Jn,function(){t.ispotsInit?t.updateDuration():t.initDots()}),t.on(Xn,function(){t.positionDots()})}var Or={dragmove:"onProgressMove",dragstart:"onProgressDragStart",dragend:"onProgressDragEnd",click:"onProgressClick",mouseover:"onProgressMouseOver",mouseenter:"onProgressMouseOver"},I1=function(t){ee(r,t);var i=te(r);function r(n){var e;return Q(this,r),e=i.call(this,n),O(x(e),"onMousemove",function(s){if(!e.config.disable){if(g.hasClass(s.target,"xg-spot-content")&&e.config.isHideThumbnailHover){e.player.plugins.progress.onMouseLeave(s);return}(e._state.f||g.hasClass(s.target,"xg-spot-content"))&&(g.event(s),s.stopPropagation())}}),O(x(e),"onMousedown",function(s){e.config.disable||(e._state.f||g.hasClass(s.target,"xg-spot-content"))&&(g.event(s),s.stopPropagation())}),O(x(e),"onMouseup",function(s){if(e.isDrag){var a=e.player.plugins.progress;a&&a.pos&&(a.onMouseUp(s),!a.pos.isEnter&&a.onMouseLeave(s))}}),O(x(e),"onDotMouseLeave",function(s){if(!e.config.disable){e._curDot.removeEventListener("mouseleave",e.onDotMouseLeave),e.blurDot(s.target),e._curDot=null;var a=e.player.plugins.progress;a&&a.enableBlur(),e.show()}}),O(x(e),"onProgressMouseOver",function(s,a){if(!e.config.disable&&g.hasClass(a.target,"xgplayer-spot")&&!e._curDot){e._curDot=a.target,e.focusDot(a.target),e._curDot.children.length>0&&e.hide();var o=e.player.plugins.progress;o&&o.disableBlur(),e._curDot.addEventListener("mouseleave",e.onDotMouseLeave)}}),e._ispots=[],e.videoPreview=null,e.videothumbnail=null,e.thumbnail=null,e.timeStr="",e._state={now:0,f:!1},e}return q(r,[{key:"beforeCreate",value:function(e){var s=e.player.plugins.progress;s&&(e.root=s.root)}},{key:"afterCreate",value:function(){var e=this;this._curDot=null,this.handlerSpotClick=this.hook("spotClick",function(s,a){a.seekTime&&e.player.seek(a.seekTime)}),this.transformTimeHook=this.hook("transformTime",function(s){e.setTimeContent(g.format(s))}),A1(this),this.on(Jn,function(){e.show()}),this.config.disable&&this.disable(),this.extTextRoot=this.find(".xg-spot-ext-text")}},{key:"setConfig",value:function(e){var s=this;e&&Object.keys(e).map(function(a){s.config[a]=e[a]})}},{key:"onPluginsReady",value:function(){var e=this.player;e.plugins.progress&&(this.previewLine=this.find(".xg-spot-line"),this.timePoint=this.find(".xgplayer-progress-point"),this.timeText=this.find(".xg-spot-time"),this.tipText=this.find(".spot-inner-text"),this._hasThumnail=!1,this.registerThumbnail(),this.bindEvents())}},{key:"bindEvents",value:function(){var e=this,s=this.player.plugins.progress;if(s&&(Object.keys(Or).map(function(o){e[Or[o]]=e[Or[o]].bind(e),s.addCallBack(o,e[Or[o]])}),le.device!=="mobile")){this.bind(".xg-spot-info","mousemove",this.onMousemove),this.bind(".xg-spot-info","mousedown",this.onMousedown),this.bind(".xg-spot-info","mouseup",this.onMouseup);var a=this.hook("previewClick",function(){});this.handlerPreviewClick=function(o){o.stopPropagation(),a(parseInt(e._state.now*1e3,10)/1e3,o)},this.bind(".xg-spot-content","mouseup",this.handlerPreviewClick)}}},{key:"onProgressMove",value:function(e,s){this.config.disable||!this.player.duration||this.updatePosition(e.offset,e.width,e.currentTime,e.e)}},{key:"onProgressDragStart",value:function(e){this.config.disable||!this.player.duration||(this.isDrag=!0,this.videoPreview&&g.addClass(this.videoPreview,"show"))}},{key:"onProgressDragEnd",value:function(e){this.config.disable||!this.player.duration||(this.isDrag=!1,this.videoPreview&&g.removeClass(this.videoPreview,"show"))}},{key:"onProgressClick",value:function(e,s){this.config.disable||g.hasClass(s.target,"xgplayer-spot")&&(s.stopPropagation(),s.preventDefault(),["time","id","text"].map(function(a){e[a]=s.target.getAttribute("data-".concat(a))}),e.time&&(e.time=Number(e.time)),this.handlerSpotClick(s,e))}},{key:"updateLinePos",value:function(e,s){var a=this.root,o=this.previewLine,u=this.player,l=this.config,c=u.controls.mode,f=c==="flex",h=a.getBoundingClientRect().width;if(!(!h&&this._hasThumnail)){h=this._hasThumnail&&h<l.width?l.width:h;var d=e-h/2,p;d<0&&!f?(d=0,p=e-h/2):d>s-h&&!f?(p=d-(s-h),d=s-h):p=0,p!==void 0&&(o.style.transform="translateX(".concat(p.toFixed(2),"px)")),a.style.transform="translateX(".concat(d.toFixed(2),"px) translateZ(0)")}}},{key:"updateTimeText",value:function(e){var s=this.timeText,a=this.timePoint;s.innerHTML=e,!this.thumbnail&&(a.innerHTML=e)}},{key:"updatePosition",value:function(e,s,a,o){var u=this.root,l=this.config,c=this._state;if(u){c.now=a,this.transformTimeHook(a);var f=this.timeStr;o&&o.target&&g.hasClass(o.target,"xgplayer-spot")?(this.showTips(o.target.getAttribute("data-text"),!1,f),this.focusDot(o.target),c.f=!0,l.isFocusDots&&c.f&&(c.now=parseInt(o.target.getAttribute("data-time"),10))):l.defaultText?(c.f=!1,this.showTips(l.defaultText,!0,f)):(c.f=!1,this.hideTips("")),this.updateTimeText(f),this.updateThumbnails(c.now),this.updateLinePos(e,s)}}},{key:"setTimeContent",value:function(e){this.timeStr=e}},{key:"updateThumbnails",value:function(e){var s=this.player,a=this.videoPreview,o=this.config,u=s.plugins.thumbnail;if(u&&u.usable){this.thumbnail&&u.update(this.thumbnail,e,o.width,o.height);var l=a&&a.getBoundingClientRect();this.videothumbnail&&u.update(this.videothumbnail,e,l.width,l.height)}}},{key:"registerThumbnail",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(le.device!=="mobile"){var s=this.player,a=this.config,o=s.getPlugin("thumbnail");if(o&&o.setConfig(e),!o||!o.usable||!a.isShowThumbnail){g.addClass(this.root,"short-line no-thumbnail");return}else g.removeClass(this.root,"short-line no-thumbnail");a.mode==="short"&&g.addClass(this.root,"short-line"),this._hasThumnail=!0;var u=this.find(".xg-spot-thumbnail");this.thumbnail=o.createThumbnail(u,"progress-thumbnail"),a.isShowCoverPreview&&(this.videoPreview=g.createDom("xg-video-preview","",{},"xgvideo-preview"),s.root.appendChild(this.videoPreview),this.videothumbnail=o.createThumbnail(this.videoPreview,"xgvideo-thumbnail")),this.updateThumbnails(0)}}},{key:"calcuPosition",value:function(e,s){var a=this.player.plugins.progress,o=this.player,u=a.root.getBoundingClientRect().width,l=o.duration/u*6;return e+s>o.duration&&(s=o.duration-e),e/o.duration*100,s/o.duration,{left:e/o.duration*100,width:s/o.duration*100,isMini:s<l}}},{key:"showDot",value:function(e){var s=this.findDot(e);if(s){var a=this.root.getBoundingClientRect(),o=a.width,u=s.time/this.player.duration*o;this.updatePosition(u,o,s.time)}}},{key:"focusDot",value:function(e,s){e&&(s||(s=e.getAttribute("data-id")),g.addClass(e,"active"),this._activeDotId=s)}},{key:"blurDot",value:function(e){if(!e){var s=this._activeDotId;e=this.getDotDom(s)}e&&(g.removeClass(e,"active"),this._activeDotId=null)}},{key:"showTips",value:function(e,s){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"";g.addClass(this.root,"no-timepoint"),e&&(g.addClass(this.find(".xg-spot-content"),"show-text"),s&&this.config.mode==="production"?(g.addClass(this.root,"product"),this.tipText.textContent=e):(g.removeClass(this.root,"product"),this.tipText.textContent=this._hasThumnail?e:"".concat(a," ").concat(e)))}},{key:"hideTips",value:function(){g.removeClass(this.root,"no-timepoint"),this.tipText.textContent="",g.removeClass(this.find(".xg-spot-content"),"show-text"),g.removeClass(this.root,"product")}},{key:"hide",value:function(){g.addClass(this.root,"hide")}},{key:"show",value:function(e){g.removeClass(this.root,"hide")}},{key:"enable",value:function(){var e=this.config,s=this.playerConfig;this.config.disable=!1,this.show(),!this.thumbnail&&e.isShowThumbnail&&this.registerThumbnail(s.thumbnail||{})}},{key:"disable",value:function(){this.config.disable=!0,this.hide()}},{key:"destroy",value:function(){var e=this,s=this.player.plugins.progress;s&&Object.keys(Or).map(function(a){s.removeCallBack(a,e[Or[a]])}),this.videothumbnail=null,this.thumbnail=null,this.videoPreview&&this.player.root.removeChild(this.videoPreview),this.unbind(".xg-spot-info","mousemove",this.onMousemove),this.unbind(".xg-spot-info","mousedown",this.onMousedown),this.unbind(".xg-spot-info","mouseup",this.onMouseup),this.unbind(".xg-spot-content","mouseup",this.handlerPreviewClick)}},{key:"render",value:function(){return le.device==="mobile"||this.playerConfig.isMobileSimulateMode==="mobile"?"":'<div class="xg-spot-info hide '.concat(this.config.mode==="short"?"short-line":"",`">
      <div class="xg-spot-content">
        <div class="xg-spot-thumbnail">
          <span class="xg-spot-time"></span>
        </div>
        <div class="xg-spot-text"><span class="spot-inner-text"></span></div>
      </div>
      <div class="xgplayer-progress-point">00:00</div>
      <div class="xg-spot-ext-text"></div>
      <div class="xg-spot-line"></div>
    </div>`)}}],[{key:"pluginName",get:function(){return"progresspreview"}},{key:"defaultConfig",get:function(){return{index:1,miniWidth:6,ispots:[],defaultText:"",isFocusDots:!0,isHideThumbnailHover:!0,isShowThumbnail:!0,isShowCoverPreview:!1,mode:"",disable:!1,width:160,height:90}}}]),r}(me),L1=function(t){ee(r,t);var i=te(r);function r(n){var e;return Q(this,r),e=i.call(this,n),e.ratio=1,e.interval=null,e._preloadMark={},e}return q(r,[{key:"afterCreate",value:function(){var e=this;this.usable&&this.initThumbnail(),this.on([Jn],function(){var s=e.config,a=s.pic_num,o=s.interval;e.usable&&(e.interval=o>0?o:Math.round(e.player.duration*1e3/a)/1e3)})}},{key:"setConfig",value:function(e){var s=this;if(e){var a=Object.keys(e);a.length<1||(a.forEach(function(o){s.config[o]=e[o]}),this.usable&&this.initThumbnail())}}},{key:"usable",get:function(){var e=this.config,s=e.urls,a=e.pic_num;return s&&s.length>0&&a>0}},{key:"initThumbnail",value:function(){var e=this.config,s=e.width,a=e.height,o=e.pic_num,u=e.interval;this.ratio=s/a*100,this.interval=u||Math.round(this.player.duration/o),this._preloadMark={}}},{key:"getUrlByIndex",value:function(e){return e>=0&&e<this.config.urls.length?this.config.urls[e]:""}},{key:"preload",value:function(e){var s=this;if(!this._preloadMark[e]){var a=this.config.urls,o=a.length,u=[];e>0&&u.push(e-1),u.push(e),e>0&&e<o-1&&u.push(e+1),u.map(function(l){!s._preloadMark[l]&&l>=0&&l<o&&(s._preloadMark[l]=1,g.preloadImg(a[l],function(){s._preloadMark[l]=2}))})}}},{key:"getPosition",value:function(e){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,o=this.config,u=o.pic_num,l=o.row,c=o.col,f=o.width,h=o.height;this.interval=Math.round(this.player.duration/u);var d=Math.ceil(e/this.interval);d=d>u?u:d;var p=d<l*c?0:Math.ceil(d/(l*c))-1,m=d-p*(c*l),_=m>0?Math.ceil(m/c)-1:0,v=m>0?m-_*c-1:0,y=0,S=0;if(s&&a){var E=s/a;E<f/h?(S=a,y=S*(f/h)):(y=s,S=y/(f/h))}else a?s||(S=a||h,y=S*(f/h)):(y=s||f,S=y/(f/h));var T=this.getUrlByIndex(p);return{urlIndex:p,rowIndex:_,colIndex:v,url:T,height:S,width:y,style:{backgroundImage:"url(".concat(T,")"),backgroundSize:"".concat(y*c,"px auto"),backgroundPosition:"-".concat(v*y,"px -").concat(_*S,"px"),width:"".concat(y,"px"),height:"".concat(S,"px")}}}},{key:"update",value:function(e,s){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,u=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"",l=this.config,c=l.pic_num,f=l.urls;if(!(c<=0||!f||f.length===0)){var h=this.getPosition(s,a,o);this.preload(h.urlIndex),Object.keys(h.style).map(function(d){e.style[d]=h.style[d]}),Object.keys(u).map(function(d){e.style[d]=u[d]})}}},{key:"changeConfig",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.setConfig(e)}},{key:"createThumbnail",value:function(e,s){var a=g.createDom("xg-thumbnail","",{},"thumbnail ".concat(s));return e&&e.appendChild(a),a}}],[{key:"pluginName",get:function(){return"thumbnail"}},{key:"defaultConfig",get:function(){return{isShow:!1,urls:[],pic_num:0,col:0,row:0,height:90,width:160,scale:1,className:"",hidePortrait:!1}}}]),r}(me);function cu(t){return t?"background:".concat(t,";"):""}var D1=function(t){ee(r,t);var i=te(r);function r(){var n;Q(this,r);for(var e=arguments.length,s=new Array(e),a=0;a<e;a++)s[a]=arguments[a];return n=i.call.apply(i,[this].concat(s)),O(x(n),"onTimeupdate",function(){var o=n.player.ended,u=x(n),l=u.offsetDuration,c=n.currentTime;c=g.adjustTimeByDuration(c,l,o),n.update({played:c},l)}),n}return q(r,[{key:"offsetDuration",get:function(){return this.playerConfig.customDuration||this.player.offsetDuration||this.player.duration}},{key:"currentTime",get:function(){var e=this.player,s=e.offsetCurrentTime,a=e.currentTime;return s>=0?s:a}},{key:"afterCreate",value:function(){var e=this;this.root&&(this.on(bt,this.onTimeupdate),this.on(br,function(){e.reset()}))}},{key:"reset",value:function(){this.update({played:0,cached:0},0)}},{key:"update",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{cached:0,played:0},s=arguments.length>1?arguments[1]:void 0;!s||!this.root||(e.cached&&(this.find("xg-mini-progress-cache").style.width="".concat(e.cached/s*100,"%")),e.played&&(this.find("xg-mini-progress-played").style.width="".concat(e.played/s*100,"%")))}},{key:"render",value:function(){var e=this.playerConfig,s=e.commonStyle,a=e.miniprogress;if(a){var o=this.config,u=o.mode,l=o.height,c={cached:cu(s.cachedColor),played:cu(s.playedColor),progress:cu(s.progressColor),height:l>0&&l!==2?"height: ".concat(l,"px;"):""},f=u==="show"?"xg-mini-progress-show":"";return'<xg-mini-progress class="xg-mini-progress '.concat(f,'" style="').concat(c.progress," ").concat(c.height,`">
    <xg-mini-progress-cache class="xg-mini-progress-cache" style="`).concat(c.cached,`"></xg-mini-progress-cache>
    <xg-mini-progress-played class="xg-mini-progress-played" style="`).concat(c.played,`"></xg-mini-progress-played>
    </xg-mini-progress>`)}}}],[{key:"pluginName",get:function(){return"MiniProgress"}},{key:"defaultConfig",get:function(){return{mode:"auto",height:2}}}]),r}(me),Rr={REAL_TIME:"realtime",FIRST_FRAME:"firstframe",FRAME_RATE:"framerate",POSTER:"poster"};function O1(){try{return parseInt(window.performance.now(),10)}catch{return new Date().getTime()}}function R1(){try{var t=document.createElement("canvas").getContext;return!!t}catch{return!1}}var Hs=null,M1=function(t){ee(r,t);var i=te(r);function r(){var n;Q(this,r);for(var e=arguments.length,s=new Array(e),a=0;a<e;a++)s[a]=arguments[a];return n=i.call.apply(i,[this].concat(s)),O(x(n),"onLoadedData",function(o){n.player&&(n._frameCount=n.config.startFrameCount,n.stop(),n.renderOnTimeupdate(o),n.off(bt,n.renderOnTimeupdate),n.on(bt,n.renderOnTimeupdate))}),O(x(n),"onVisibilitychange",function(o){document.visibilityState==="visible"?n._checkIfCanStart()&&n.start():document.visibilityState==="hidden"&&n.stop()}),O(x(n),"renderOnTimeupdate",function(o){if(n._frameCount>0)n.renderOnce(),n._frameCount--;else{n._isLoaded=!0,n.off(bt,n.renderOnTimeupdate);var u=n.config.startInterval;!n.player.paused&&n._checkIfCanStart()&&n.start(0,u)}}),O(x(n),"start",function(o,u){var l=n.player.video,c=O1(),f=n.checkVideoIsSupport(l);!f||!n.canvasCtx||(u||(u=n.interval),n.stop(),l.videoWidth&&l.videoHeight&&(n.videoPI=l.videoHeight>0?parseInt(l.videoWidth/l.videoHeight*100,10):0,(n.config.mode===Rr.REAL_TIME||c-n.preTime>=u)&&(l&&l.videoWidth&&n.update(f,n.videoPI),n.preTime=c)),n.frameId=n._loopType==="timer"?g.setTimeout(x(n),n.start,u):g.requestAnimationFrame(n.start))}),O(x(n),"stop",function(){n.frameId&&(n._loopType==="timer"?g.clearTimeout(x(n),n.frameId):g.cancelAnimationFrame(n.frameId),n.frameId=null)}),n}return q(r,[{key:"afterCreate",value:function(){var e=this;this.playerConfig.dynamicBg===!0&&(this.config.disable=!1),r.isSupport||(this.config.disable=!0);var s=this.config,a=s.disable,o=s.mode,u=s.frameRate;a||(this._pos={width:0,height:0,rwidth:0,rheight:0,x:0,y:0,pi:0},this.isStart=!1,this._isLoaded=!1,this.videoPI=0,this.preTime=0,this.interval=parseInt(1e3/u,10),this.canvas=null,this.canvasCtx=null,this._frameCount=0,this._loopType=this.config.mode!==Rr.REAL_TIME&&this.interval>=1e3?"timer":"animation",this.once(po,function(){e.player&&(e.init(),e.renderByPoster(),e.player.paused||e.start())}),o!==Rr.POSTER&&(o!==Rr.FIRST_FRAME&&(this.on(br,function(){e.stop()}),this.on(xt,function(){var l=e.config.startInterval;e._checkIfCanStart()&&e.start(0,l)}),this.on(mi,function(){e.stop()})),this.on(wn,this.onLoadedData),this.on(Tc,function(){e._isLoaded=!1,e.stop()}),document.addEventListener("visibilitychange",this.onVisibilitychange)))}},{key:"setConfig",value:function(e){var s=this;Object.keys(e).forEach(function(a){a==="root"&&e[a]!==s.config[a]?s.reRender(e[a]):a==="frameRate"?s.interval=parseInt(1e3/e[a],10):a==="disable"&&e[a]&&s.stop(),s.config[a]=e[a]})}},{key:"init",value:function(e){var s=this.player,a=this.config;this.canvasFilter=r.supportCanvasFilter();try{var o=e||a.root;o||(o=a.isInnerRender&&s.innerContainer||s.root),o.insertAdjacentHTML("afterbegin",'<div class="xgplayer-dynamic-bg" data-index="'.concat(a.index,`"><canvas>
        </canvas><xgmask></xgmask></div>`)),this.root=o.children[0],this.canvas=this.find("canvas"),this.canvasFilter||(this.canvas.style.filter=a.filter,this.canvas.style.webkitFilter=a.filter),this.mask=this.find("xgmask"),a.addMask&&(this.mask.style.background=a.maskBg),this.canvasCtx=this.canvas.getContext("2d")}catch(u){he.logError("plugin:DynamicBg",u)}}},{key:"reRender",value:function(e){var s=this.config.disable;if(!(!s&&!this.root)){this.stop();var a=this.root?this.root.parentElement:null;if(a!==e&&a.removeChild(this.root),!e){this.root=null;return}this.init(e),this.renderOnce();var o=this.config.startInterval;this._checkIfCanStart()&&this.start(0,o)}}},{key:"checkVideoIsSupport",value:function(e){if(!e)return null;var s=e&&e instanceof window.HTMLVideoElement?e:e.canvas?e.canvas:e.flyVideo?e.flyVideo:null;if(s&&!(le.browser==="safari"&&g.isMSE(s)))return s;var a=s?s.tagName.toLowerCase():"";return a==="canvas"||a==="img"?s:null}},{key:"renderByPoster",value:function(){var e=this.playerConfig.poster;if(e){var s=g.typeOf(e)==="String"?e:g.typeOf(e.poster)==="String"?e.poster:null;this.updateImg(s)}}},{key:"_checkIfCanStart",value:function(){var e=this.config.mode;return this._isLoaded&&!this.player.paused&&e!==Rr.FIRST_FRAME&&e!==Rr.POSTER}},{key:"renderOnce",value:function(){var e=this.player.video;if(!(!e.videoWidth||!e.videoHeight)){this.videoPI=parseInt(e.videoWidth/e.videoHeight*100,10);var s=this.checkVideoIsSupport(e);s&&this.update(s,this.videoPI)}}},{key:"updateImg",value:function(e){var s=this;if(e){var a=this.canvas.getBoundingClientRect(),o=a.width,u=a.height,l=new window.Image;l.onload=function(){if(!(!s.canvas||s.frameId||s.isStart)){s.canvas.height=u,s.canvas.width=o;var c=parseInt(o/u*100,10);s.update(l,c),l=null}},l.src=e}}},{key:"update",value:function(e,s){if(!(!this.canvas||!this.canvasCtx||!s))try{var a=this._pos,o=this.config,u=this.canvas.getBoundingClientRect(),l=u.width,c=u.height;if(l!==a.width||c!==a.height||a.pi!==s){var f=parseInt(l/c*100,10);a.pi=s,a.width!==l&&(a.width=this.canvas.width=l),a.height!==c&&(a.height=this.canvas.height=c);var h=c,d=l;f<s?d=parseInt(c*s/100,10):f>s&&(h=parseInt(l*100/s,10)),a.rwidth=d*o.multiple,a.rheight=h*o.multiple,a.x=(l-a.rwidth)/2,a.y=(c-a.rheight)/2}this.canvasFilter&&(this.canvasCtx.filter=o.filter),this.canvasCtx.drawImage(e,a.x,a.y,a.rwidth,a.rheight)}catch(p){he.logError("plugin:DynamicBg",p)}}},{key:"destroy",value:function(){this.stop(),document.removeEventListener("visibilitychange",this.onVisibilitychange),this.canvasCtx=null,this.canvas=null}},{key:"render",value:function(){return""}}],[{key:"pluginName",get:function(){return"dynamicBg"}},{key:"defaultConfig",get:function(){return{isInnerRender:!1,disable:!0,index:-1,mode:"framerate",frameRate:10,filter:"blur(50px)",startFrameCount:2,startInterval:0,addMask:!0,multiple:1.2,maskBg:"rgba(0,0,0,0.7)"}}},{key:"isSupport",get:function(){return typeof Hs=="boolean"||(Hs=R1()),Hs}},{key:"supportCanvasFilter",value:function(){return!(le.browser==="safari"||le.browser==="firefox")}}]),r}(me),N1={LANG:"zh-cn",TEXT:{ERROR_TYPES:{network:{code:1,msg:""},mse:{code:2,msg:""},parse:{code:3,msg:""},format:{code:4,msg:""},decoder:{code:5,msg:""},runtime:{code:6,msg:""},timeout:{code:7,msg:""},other:{code:8,msg:""}},HAVE_NOTHING:"/",HAVE_METADATA:"/",HAVE_CURRENT_DATA:"/",HAVE_FUTURE_DATA:"",HAVE_ENOUGH_DATA:"",NETWORK_EMPTY:"/",NETWORK_IDLE:"/",NETWORK_LOADING:"",NETWORK_NO_SOURCE:"/",MEDIA_ERR_ABORTED:"",MEDIA_ERR_NETWORK:"",MEDIA_ERR_DECODE:"",MEDIA_ERR_SRC_NOT_SUPPORTED:"/",REPLAY:"",ERROR:"",PLAY_TIPS:"",PAUSE_TIPS:"",PLAYNEXT_TIPS:"",DOWNLOAD_TIPS:"",ROTATE_TIPS:"",RELOAD_TIPS:"",FULLSCREEN_TIPS:"",EXITFULLSCREEN_TIPS:"",CSSFULLSCREEN_TIPS:"",EXITCSSFULLSCREEN_TIPS:"",TEXTTRACK:"",PIP:"",SCREENSHOT:"",LIVE:"",OFF:"",OPEN:"",MINI_DRAG:"",MINISCREEN:"",REFRESH_TIPS:"",REFRESH:"",FORWARD:"",LIVE_TIP:""}},Pi="info",fu=bv,F1=function(t){ee(r,t);var i=te(r);function r(){var n;Q(this,r);for(var e=arguments.length,s=new Array(e),a=0;a<e;a++)s[a]=arguments[a];return n=i.call.apply(i,[this].concat(s)),O(x(n),"_recordUserActions",function(o){var u=n._getTime(),l=Object.assign({},o,{msg:o.msg||o.action});n._stats[Pi].push(Oe(Oe({type:"userAction"},u),{},{payload:l}))}),O(x(n),"_onReset",function(){n.reset()}),O(x(n),"_recordInfo",function(o){n.info(o)}),O(x(n),"_downloadStats",function(){var o=n.getStats(),u=new Blob([JSON.stringify(o)],{type:"application/json"}),l=window.URL.createObjectURL(u),c=document.createElement("a");c.style.display="none",c.href=l,c.download="player.txt",c.disabled=!1,c.click()}),n}return q(r,[{key:"_getTime",value:function(){return{timestamp:Date.now(),timeFormat:new Date().toISOString()}}},{key:"afterCreate",value:function(){this.reset(),this.on(Na,this._recordUserActions),this.on(fu.STATS_INFO,this._recordInfo),this.on(fu.STATS_DOWNLOAD,this._downloadStats),this.on(fu.STATS_RESET,this._onReset)}},{key:"destroy",value:function(){this.offAll()}},{key:"downloadStats",value:function(){this._downloadStats()}},{key:"info",value:function(e){e.profile?this._infoProfile(e):this._info(e)}},{key:"_info",value:function(e){var s=this._getTime();this._stats[Pi].push(Oe(Oe({},s),{},{payload:e}))}},{key:"_infoProfile",value:function(e){if(e&&e.startMs){var s=Date.now(),a=s-e.startMs,o=Oe({cat:"function",dur:a,name:e.name||e.msg,ph:"X",pid:0,tid:0,ts:e.startMs,profile:!0},e);this._info(o)}else console.warn("infoProfile need object data, include startMs")}},{key:"reset",value:function(){var e;this._stats=(e={},O(e,Pi,[]),O(e,"media",{}),e)}},{key:"getStats",value:function(){for(var e=this.player,s=e.media,a=[],o=0;o<s.buffered.length;o++)a.push({start:s.buffered.start(o),end:s.buffered.end(o)});var u={currentTime:s.currentTime,readyState:s.readyState,buffered:a,paused:s.paused,ended:s.ended};return this._stats.media=u,{raw:this._stats,timestat:this._getTimeStats(),profile:this._getProfile()}}},{key:"_getTimeStats",value:function(){var e=this._stats[Pi],s=e.map(function(a){var o=a.payload.data,u="";try{o instanceof Error?u=o.msg:o!==void 0&&(u=JSON.stringify(o))}catch(l){console.log("err",l)}return"[".concat(a.timeFormat,"] : ").concat(a.payload.msg," ").concat(u," ")});return s}},{key:"_getProfile",value:function(){var e={traceEvents:[]},s=this._stats[Pi];return s.forEach(function(a){a.payload.profile&&e.traceEvents.push(a.payload)}),e}}],[{key:"pluginName",get:function(){return"stats"}},{key:"defaultConfig",get:function(){return{}}}]),r}(an),Mv=function(t){ee(r,t);var i=te(r);function r(){var n;Q(this,r);for(var e=arguments.length,s=new Array(e),a=0;a<e;a++)s[a]=arguments[a];return n=i.call.apply(i,[this].concat(s)),O(x(n),"onGapJump",function(){var o=x(n),u=o.player,l=o.config;if(u.media.readyState!==HTMLMediaElement.HAVE_NOTHING){if(u.media.seeking){if(!n.seekingEventReceived)return}else n.seekingEventReceived=!1;if(!(u.media.paused&&u.media.currentTime!==0&&n.hasPlayed)){var c=u.media.buffered,f=l.smallGapLimit||.5,h=l.gapDetectionThreshold||.3,d=u.media.currentTime,p=n._getIndex(c,d,h);if(!(p===null||p===0)){console.log("GapJump  bufferRange ",c.start(p),c.end(p));var m=c.start(p)+.1,_=u.media.duration;if(!(m>_)){var v=m-d,y=v<=f;v<r.BROWSER_GAP_TOLERANCE||y&&(l.useGapJump!==!1&&(u.media.currentTime=n.isSafari?m+.1:m),n.player&&n.player.emit("detectGap"),console.log("gapJump gapIndex",p," isGapSamll:",y," currentTime:",u.media.currentTime," jumpSize:",d-u.media.currentTime),m!==.08&&u&&u.emit("log",{type:"oneevent",end_type:"gap",vid:u.config.vid,ext:{video_postion:Math.floor(m*1e3)}}))}}}}}),n}return q(r,[{key:"afterCreate",value:function(){var e=this,s=this.config.useGapJump;s!==!1&&(this.hasPlayed=!1,this.seekingEventReceived=!1,this.isSafari=/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),this.on(gs,this.onGapJump),this.on(xt,function(){e.hasPlayed=!0}),this.on(ho,function(){e.seekingEventReceived=!0}))}},{key:"_getIndex",value:function(e,s,a){if(!e||!e.length||e.length===1&&e.end(0)-e.start(0)<1e-6)return null;for(var o=this._getBuffered(e),u=null,l=0;l<o.length;l++){var c=o[l];if(c.start>s&&(l===0||o[l-1].end-s<=a)){u=l;break}}return u}},{key:"_getBuffered",value:function(e){if(!e)return[];for(var s=[],a=0;a<e.length;a++)s.push({start:e.start(a),end:e.end(a)});return s}}],[{key:"pluginName",get:function(){return"gapJump"}},{key:"defaultConfig",get:function(){return{useGapJump:!1,smallGapLimit:.5,gapDetectionThreshold:.3}}}]),r}(me);Mv.BROWSER_GAP_TOLERANCE=.001;var B1=function(t){ee(r,t);var i=te(r);function r(){var n;Q(this,r);for(var e=arguments.length,s=new Array(e),a=0;a<e;a++)s[a]=arguments[a];return n=i.call.apply(i,[this].concat(s)),O(x(n),"onWaiting",function(){var o=x(n),u=o.config;n.jumpCnt>u.jumpCntMax||n.timer||u.useWaitingTimeoutJump===!1||(n.timer=setTimeout(n.onJump,u.waitingTime*1e3))}),O(x(n),"onJump",function(){var o=x(n),u=o.player,l=o.config;if(clearTimeout(n.timer),n.timer=null,!(n.jumpCnt>l.jumpCntMax||l.useWaitingTimeoutJump===!1)&&!(u.media.paused&&u.media.currentTime!==0&&n.hasPlayed)){n.jumpSize=l.jumpSize*(n.jumpCnt+1),n.jumpCnt===l.jumpSize&&n.jumpSize<6&&(n.jumpSize=6);var c=u.currentTime+n.jumpSize,f=u.media.duration;c>f||(n.jumpCnt++,u.currentTime=c)}}),n}return q(r,[{key:"afterCreate",value:function(){var e=this,s=this.config,a=s.useWaitingTimeoutJump,o=s.jumpSize;a!==!1&&(this.hasPlayed=!1,this.jumpCnt=0,this.timer=null,this.jumpSize=o,this.on(gs,this.onWaiting),this.on([wc,pn],function(){clearTimeout(e.timer),e.timer=null,e.jumpSize=e.config.jumpSize}),this.on(xt,function(){e.hasPlayed=!0}))}}],[{key:"pluginName",get:function(){return"waitingTimeoutJump"}},{key:"defaultConfig",get:function(){return{useWaitingTimeoutJump:!1,waitingTime:15,jumpSize:2,jumpCntMax:4}}}]),r}(me),Mr="cdn",zs=["cdn"],U1=function(t){ee(r,t);var i=te(r);function r(){var n;Q(this,r);for(var e=arguments.length,s=new Array(e),a=0;a<e;a++)s[a]=arguments[a];return n=i.call.apply(i,[this].concat(s)),O(x(n),"getSpeed",function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Mr;if(!n.speedListCache||!n.speedListCache[o]||n.speedListCache[o].length<=0)return 0;var u=0;return n.speedListCache[o].map(function(l){u+=l}),Math.floor(u/n.speedListCache[o].length)}),O(x(n),"startTimer",function(){g.isMSE(n.player.video)||(n.initSpeedList(),n.cnt=0,n.timer=setTimeout(n.testSpeed,n.config.testTimeStep))}),O(x(n),"initSpeedList",function(){n.speedListCache={},zs.forEach(function(o){n.speedListCache[o]=[]})}),O(x(n),"_onRealSpeedChange",function(o){o.speed&&n.appendList(o.speed,o.type||Mr)}),O(x(n),"testSpeed",function(){if(clearTimeout(n.timer),n.timer=null,!(!n.player||!n.config.openSpeed)){var o=n.config,u=o.url,l=o.loadSize,c=o.testCnt,f=o.testTimeStep,h=u+(u.indexOf("?")<0?"?testst=":"&testst=")+Date.now();if(!(n.cnt>=c)){n.cnt++;try{var d=new Date().getTime(),p=null,m=new XMLHttpRequest;n.xhr=m,m.open("GET",h);var _={},v=Math.floor(Math.random()*10);_.Range="bytes="+v+"-"+(l+v),_&&Object.keys(_).forEach(function(y){m.setRequestHeader(y,_[y])}),m.onreadystatechange=function(){if(m.readyState===4){n.xhr=null,p=new Date().getTime();var y=m.getResponseHeader("Content-Length")/1024*8,S=Math.round(y*1e3/(p-d));n.appendList(S),n.timer=setTimeout(n.testSpeed,f)}},m.send()}catch(y){console.error(y)}}}}),O(x(n),"appendList",function(o){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Mr;if(!(!n.speedListCache||!n.speedListCache[u])){var l=n.config.saveSpeedMax;n.speedListCache[u].length>=l&&n.speedListCache[u].shift(),n.speedListCache[u].push(o);var c=x(n),f=c.player;f&&(u===Mr?f.realTimeSpeed=o:f[n.getSpeedName("realTime",u)]=o),n.updateSpeed(u)}}),O(x(n),"updateSpeed",function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Mr,u=n.getSpeed(o),l=x(n),c=l.player;if(c)if(o===Mr)(!c.avgSpeed||u!==c.avgSpeed)&&(c.avgSpeed=u,c.emit(ml,{speed:u,realTimeSpeed:c.realTimeSpeed}));else{var f=n.getSpeedName("avg",o);(!c[f]||u!==c[f])&&(c[f]=u,c.emit(ml,{speed:u,realTimeSpeed:c.realTimeSpeed}))}}),n}return q(r,[{key:"afterCreate",value:function(){var e=this.config,s=e.openSpeed,a=e.addSpeedTypeList;(a==null?void 0:a.length)>0&&zs.push.apply(zs,Yt(a)),this.initSpeedList(),this.on("real_time_speed",this._onRealSpeedChange),this.timer=null,this.cnt=0,this.xhr=null,s&&this.on([wn,Da],this.startTimer)}},{key:"getSpeedName",value:function(e,s){return e+"Speed"+s.toUpperCase()}},{key:"openSpeed",get:function(){return this.config.openSpeed},set:function(e){if(this.config.openSpeed=e,!e&&this.timer){clearTimeout(this.timer),this.timer=null;return}if(this.config.openSpeed){if(this.timer)return;this.timer=setTimeout(this.testSpeed,this.config.testTimeStep)}}},{key:"destroy",value:function(){var e=this;this.off("real_time_speed",this._onRealSpeedChange),this.off([wn,Da],this.startTimer),zs.forEach(function(s){e.speedListCache&&e.speedListCache[s]&&(e.speedListCache[s]=[])}),this.speedListCache&&(this.speedListCache={}),clearTimeout(this.timer),this.timer=null,this.xhr&&this.xhr.readyState!==4&&(this.xhr.cancel&&this.xhr.cancel(),this.xhr=null)}}],[{key:"pluginName",get:function(){return"testspeed"}},{key:"defaultConfig",get:function(){return{openSpeed:!1,testCnt:3,loadSize:200*1024,testTimeStep:3e3,url:"",saveSpeedMax:5,addSpeedTypeList:[]}}}]),r}(me),H1=function(t){ee(r,t);var i=te(r);function r(){return Q(this,r),i.apply(this,arguments)}return q(r,[{key:"afterCreate",value:function(){var e=this,s=this.player,a=this.config,o=s.media||s.video;if(this.timer=null,this._lastDecodedFrames=0,this._currentStuckCount=0,this._lastCheckPoint=null,this._payload=[],!a.disabled){var u=o.getVideoPlaybackQuality;u&&(this.on(xt,function(){e._startTick()}),this.on(mi,function(){e._stopTick()}),this.on(Cr,function(){e._stopTick()}),this.on(br,function(){e._stopTick()}))}}},{key:"_startTick",value:function(){var e=this;this._stopTick(),this._timer=setTimeout(function(){e._checkDecodeFPS(),e._startTick()},this.config.tick)}},{key:"_stopTick",value:function(){clearTimeout(this._timer),this._timer=null}},{key:"_checkBuffer",value:function(e,s){for(var a=!1,o=[],u=0;u<s.length;u++){var l=s.start(u),c=s.end(u);if(o.push({start:l,end:c}),l<=e&&e<=c-1){a=!0;break}}return{enoughBuffer:a,buffers:o}}},{key:"_checkStuck",value:function(e,s,a,o){var u=this.player.media||this.player.video,l=document.hidden,c=u.paused,f=u.readyState,h=u.currentTime,d=u.buffered;if(!(l||c||f<4)){var p=this._checkBuffer(h,d),m=p.enoughBuffer,_=p.buffers;m&&(e<=this.config.reportFrame?(this._currentStuckCount++,this._payload.push({currentTime:h,buffers:_,curDecodedFrames:e,totalVideoFrames:s,droppedVideoFrames:a,checkInterval:o}),this._currentStuckCount>=this.config.stuckCount&&(this.emit(Pv,this._payload),this._reset())):this._reset())}}},{key:"_reset",value:function(){this._payload=[],this._currentStuckCount=0}},{key:"_checkDecodeFPS",value:function(){var e=this.player.media||this.player.video;if(e){var s=e.getVideoPlaybackQuality(),a=s.totalVideoFrames,o=s.droppedVideoFrames,u=performance.now();if(a&&this._lastCheckPoint){var l=a-this._lastDecodedFrames,c=u-this._lastCheckPoint;this._checkStuck(l,a,o,c)}this._lastDecodedFrames=a,this._lastCheckPoint=u}}},{key:"destroy",value:function(){this._stopTick()}}],[{key:"pluginName",get:function(){return"FpsDetect"}},{key:"defaultConfig",get:function(){return{disabled:!1,tick:1e3,stuckCount:3,reportFrame:0}}}]),r}(me);Qr.use(N1);var z1=q(function t(i,r){var n,e,s;Q(this,t);var a=r&&r.isMobileSimulateMode==="mobile",o=r.isLive,u=o?[]:[i1,Q0,D1,I1,r1],l=[].concat(u,[q0,n1,c1,v1,w1,T1,_1,S1,u1,d1]),c=[I0,L0,O0,K0,R0,P1,x1,L1,B0];this.plugins=[F1,x0].concat(Yt(l),c,[Mv,B1]);var f=a?"mobile":le.device;switch(f){case"pc":(n=this.plugins).push.apply(n,[yh,uu,Sh,U1,H1]);break;case"mobile":(e=this.plugins).push.apply(e,[G0]);break;default:(s=this.plugins).push.apply(s,[yh,uu,Sh])}(le.os.isIpad||f==="pc")&&this.plugins.push(M1),le.os.isIpad&&this.plugins.push(uu),this.ignores=[],this.i18n=[]}),Ut=function(t){ee(r,t);var i=te(r);function r(){return Q(this,r),i.apply(this,arguments)}return q(r)}(mo);O(Ut,"defaultPreset",z1);O(Ut,"Util",g);O(Ut,"Sniffer",le);O(Ut,"Errors",as);O(Ut,"Events",n0);O(Ut,"Plugin",me);O(Ut,"BasePlugin",an);O(Ut,"I18N",Qr);O(Ut,"STATE_CLASS",z);O(Ut,"InstManager",Lv);function V1(t,i){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,e,s,a,o=[],u=!0,l=!1;try{if(s=(r=r.call(t)).next,i===0){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=s.call(r)).done)&&(o.push(n.value),o.length!==i);u=!0);}catch(c){l=!0,e=c}finally{try{if(!u&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw e}}return o}}function wh(t,i){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);i&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function de(t){for(var i=1;i<arguments.length;i++){var r=arguments[i]!=null?arguments[i]:{};i%2?wh(Object(r),!0).forEach(function(n){b(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):wh(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function K(){K=function(){return t};var t={},i=Object.prototype,r=i.hasOwnProperty,n=Object.defineProperty||function(k,w,C){k[w]=C.value},e=typeof Symbol=="function"?Symbol:{},s=e.iterator||"@@iterator",a=e.asyncIterator||"@@asyncIterator",o=e.toStringTag||"@@toStringTag";function u(k,w,C){return Object.defineProperty(k,w,{value:C,enumerable:!0,configurable:!0,writable:!0}),k[w]}try{u({},"")}catch{u=function(w,C,N){return w[C]=N}}function l(k,w,C,N){var L=w&&w.prototype instanceof h?w:h,W=Object.create(L.prototype),R=new F(N||[]);return n(W,"_invoke",{value:T(k,C,R)}),W}function c(k,w,C){try{return{type:"normal",arg:k.call(w,C)}}catch(N){return{type:"throw",arg:N}}}t.wrap=l;var f={};function h(){}function d(){}function p(){}var m={};u(m,s,function(){return this});var _=Object.getPrototypeOf,v=_&&_(_(I([])));v&&v!==i&&r.call(v,s)&&(m=v);var y=p.prototype=h.prototype=Object.create(m);function S(k){["next","throw","return"].forEach(function(w){u(k,w,function(C){return this._invoke(w,C)})})}function E(k,w){function C(L,W,R,V){var G=c(k[L],k,W);if(G.type!=="throw"){var U=G.arg,ue=U.value;return ue&&typeof ue=="object"&&r.call(ue,"__await")?w.resolve(ue.__await).then(function(Y){C("next",Y,R,V)},function(Y){C("throw",Y,R,V)}):w.resolve(ue).then(function(Y){U.value=Y,R(U)},function(Y){return C("throw",Y,R,V)})}V(G.arg)}var N;n(this,"_invoke",{value:function(L,W){function R(){return new w(function(V,G){C(L,W,V,G)})}return N=N?N.then(R,R):R()}})}function T(k,w,C){var N="suspendedStart";return function(L,W){if(N==="executing")throw new Error("Generator is already running");if(N==="completed"){if(L==="throw")throw W;return X()}for(C.method=L,C.arg=W;;){var R=C.delegate;if(R){var V=A(R,C);if(V){if(V===f)continue;return V}}if(C.method==="next")C.sent=C._sent=C.arg;else if(C.method==="throw"){if(N==="suspendedStart")throw N="completed",C.arg;C.dispatchException(C.arg)}else C.method==="return"&&C.abrupt("return",C.arg);N="executing";var G=c(k,w,C);if(G.type==="normal"){if(N=C.done?"completed":"suspendedYield",G.arg===f)continue;return{value:G.arg,done:C.done}}G.type==="throw"&&(N="completed",C.method="throw",C.arg=G.arg)}}}function A(k,w){var C=w.method,N=k.iterator[C];if(N===void 0)return w.delegate=null,C==="throw"&&k.iterator.return&&(w.method="return",w.arg=void 0,A(k,w),w.method==="throw")||C!=="return"&&(w.method="throw",w.arg=new TypeError("The iterator does not provide a '"+C+"' method")),f;var L=c(N,k.iterator,w.arg);if(L.type==="throw")return w.method="throw",w.arg=L.arg,w.delegate=null,f;var W=L.arg;return W?W.done?(w[k.resultName]=W.value,w.next=k.nextLoc,w.method!=="return"&&(w.method="next",w.arg=void 0),w.delegate=null,f):W:(w.method="throw",w.arg=new TypeError("iterator result is not an object"),w.delegate=null,f)}function P(k){var w={tryLoc:k[0]};1 in k&&(w.catchLoc=k[1]),2 in k&&(w.finallyLoc=k[2],w.afterLoc=k[3]),this.tryEntries.push(w)}function D(k){var w=k.completion||{};w.type="normal",delete w.arg,k.completion=w}function F(k){this.tryEntries=[{tryLoc:"root"}],k.forEach(P,this),this.reset(!0)}function I(k){if(k){var w=k[s];if(w)return w.call(k);if(typeof k.next=="function")return k;if(!isNaN(k.length)){var C=-1,N=function L(){for(;++C<k.length;)if(r.call(k,C))return L.value=k[C],L.done=!1,L;return L.value=void 0,L.done=!0,L};return N.next=N}}return{next:X}}function X(){return{value:void 0,done:!0}}return d.prototype=p,n(y,"constructor",{value:p,configurable:!0}),n(p,"constructor",{value:d,configurable:!0}),d.displayName=u(p,o,"GeneratorFunction"),t.isGeneratorFunction=function(k){var w=typeof k=="function"&&k.constructor;return!!w&&(w===d||(w.displayName||w.name)==="GeneratorFunction")},t.mark=function(k){return Object.setPrototypeOf?Object.setPrototypeOf(k,p):(k.__proto__=p,u(k,o,"GeneratorFunction")),k.prototype=Object.create(y),k},t.awrap=function(k){return{__await:k}},S(E.prototype),u(E.prototype,a,function(){return this}),t.AsyncIterator=E,t.async=function(k,w,C,N,L){L===void 0&&(L=Promise);var W=new E(l(k,w,C,N),L);return t.isGeneratorFunction(w)?W:W.next().then(function(R){return R.done?R.value:W.next()})},S(y),u(y,o,"Generator"),u(y,s,function(){return this}),u(y,"toString",function(){return"[object Generator]"}),t.keys=function(k){var w=Object(k),C=[];for(var N in w)C.push(N);return C.reverse(),function L(){for(;C.length;){var W=C.pop();if(W in w)return L.value=W,L.done=!1,L}return L.done=!0,L}},t.values=I,F.prototype={constructor:F,reset:function(k){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(D),!k)for(var w in this)w.charAt(0)==="t"&&r.call(this,w)&&!isNaN(+w.slice(1))&&(this[w]=void 0)},stop:function(){this.done=!0;var k=this.tryEntries[0].completion;if(k.type==="throw")throw k.arg;return this.rval},dispatchException:function(k){if(this.done)throw k;var w=this;function C(G,U){return W.type="throw",W.arg=k,w.next=G,U&&(w.method="next",w.arg=void 0),!!U}for(var N=this.tryEntries.length-1;N>=0;--N){var L=this.tryEntries[N],W=L.completion;if(L.tryLoc==="root")return C("end");if(L.tryLoc<=this.prev){var R=r.call(L,"catchLoc"),V=r.call(L,"finallyLoc");if(R&&V){if(this.prev<L.catchLoc)return C(L.catchLoc,!0);if(this.prev<L.finallyLoc)return C(L.finallyLoc)}else if(R){if(this.prev<L.catchLoc)return C(L.catchLoc,!0)}else{if(!V)throw new Error("try statement without catch or finally");if(this.prev<L.finallyLoc)return C(L.finallyLoc)}}}},abrupt:function(k,w){for(var C=this.tryEntries.length-1;C>=0;--C){var N=this.tryEntries[C];if(N.tryLoc<=this.prev&&r.call(N,"finallyLoc")&&this.prev<N.finallyLoc){var L=N;break}}L&&(k==="break"||k==="continue")&&L.tryLoc<=w&&w<=L.finallyLoc&&(L=null);var W=L?L.completion:{};return W.type=k,W.arg=w,L?(this.method="next",this.next=L.finallyLoc,f):this.complete(W)},complete:function(k,w){if(k.type==="throw")throw k.arg;return k.type==="break"||k.type==="continue"?this.next=k.arg:k.type==="return"?(this.rval=this.arg=k.arg,this.method="return",this.next="end"):k.type==="normal"&&w&&(this.next=w),f},finish:function(k){for(var w=this.tryEntries.length-1;w>=0;--w){var C=this.tryEntries[w];if(C.finallyLoc===k)return this.complete(C.completion,C.afterLoc),D(C),f}},catch:function(k){for(var w=this.tryEntries.length-1;w>=0;--w){var C=this.tryEntries[w];if(C.tryLoc===k){var N=C.completion;if(N.type==="throw"){var L=N.arg;D(C)}return L}}throw new Error("illegal catch attempt")},delegateYield:function(k,w,C){return this.delegate={iterator:I(k),resultName:w,nextLoc:C},this.method==="next"&&(this.arg=void 0),f}},t}function za(t){"@babel/helpers - typeof";return za=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},za(t)}function Th(t,i,r,n,e,s,a){try{var o=t[s](a),u=o.value}catch(l){r(l);return}o.done?i(u):Promise.resolve(u).then(n,e)}function ge(t){return function(){var i=this,r=arguments;return new Promise(function(n,e){var s=t.apply(i,r);function a(u){Th(s,n,e,a,o,"next",u)}function o(u){Th(s,n,e,a,o,"throw",u)}a(void 0)})}}function ze(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}function Ch(t,i){for(var r=0;r<i.length;r++){var n=i[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Fv(n.key),n)}}function Ve(t,i,r){return i&&Ch(t.prototype,i),r&&Ch(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function b(t,i,r){return i=Fv(i),i in t?Object.defineProperty(t,i,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[i]=r,t}function yo(t,i){if(typeof i!="function"&&i!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(i&&i.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),i&&Sl(t,i)}function Va(t){return Va=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Va(t)}function Sl(t,i){return Sl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,e){return n.__proto__=e,n},Sl(t,i)}function j1(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function G1(t,i){if(t==null)return{};var r={},n=Object.keys(t),e,s;for(s=0;s<n.length;s++)e=n[s],!(i.indexOf(e)>=0)&&(r[e]=t[e]);return r}function bh(t,i){if(t==null)return{};var r=G1(t,i),n,e;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(e=0;e<s.length;e++)n=s[e],!(i.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function ne(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function W1(t,i){if(i&&(typeof i=="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ne(t)}function _o(t){var i=j1();return function(){var n=Va(t),e;if(i){var s=Va(this).constructor;e=Reflect.construct(n,arguments,s)}else e=n.apply(this,arguments);return W1(this,e)}}function Tn(t,i){return Y1(t)||V1(t,i)||Nv(t,i)||q1()}function $1(t){return K1(t)||X1(t)||Nv(t)||Q1()}function K1(t){if(Array.isArray(t))return El(t)}function Y1(t){if(Array.isArray(t))return t}function X1(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Nv(t,i){if(t){if(typeof t=="string")return El(t,i);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return El(t,i)}}function El(t,i){(i==null||i>t.length)&&(i=t.length);for(var r=0,n=new Array(i);r<i;r++)n[r]=t[r];return n}function Q1(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function q1(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Z1(t,i){if(typeof t!="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,i||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(t)}function Fv(t){var i=Z1(t,"string");return typeof i=="symbol"?i:String(i)}function Ph(t,i){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);i&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function us(t){for(var i=1;i<arguments.length;i++){var r=arguments[i]!=null?arguments[i]:{};i%2?Ph(Object(r),!0).forEach(function(n){M(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ph(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Ue(){Ue=function(){return t};var t={},i=Object.prototype,r=i.hasOwnProperty,n=Object.defineProperty||function(k,w,C){k[w]=C.value},e=typeof Symbol=="function"?Symbol:{},s=e.iterator||"@@iterator",a=e.asyncIterator||"@@asyncIterator",o=e.toStringTag||"@@toStringTag";function u(k,w,C){return Object.defineProperty(k,w,{value:C,enumerable:!0,configurable:!0,writable:!0}),k[w]}try{u({},"")}catch{u=function(w,C,N){return w[C]=N}}function l(k,w,C,N){var L=w&&w.prototype instanceof h?w:h,W=Object.create(L.prototype),R=new F(N||[]);return n(W,"_invoke",{value:T(k,C,R)}),W}function c(k,w,C){try{return{type:"normal",arg:k.call(w,C)}}catch(N){return{type:"throw",arg:N}}}t.wrap=l;var f={};function h(){}function d(){}function p(){}var m={};u(m,s,function(){return this});var _=Object.getPrototypeOf,v=_&&_(_(I([])));v&&v!==i&&r.call(v,s)&&(m=v);var y=p.prototype=h.prototype=Object.create(m);function S(k){["next","throw","return"].forEach(function(w){u(k,w,function(C){return this._invoke(w,C)})})}function E(k,w){function C(L,W,R,V){var G=c(k[L],k,W);if(G.type!=="throw"){var U=G.arg,ue=U.value;return ue&&typeof ue=="object"&&r.call(ue,"__await")?w.resolve(ue.__await).then(function(Y){C("next",Y,R,V)},function(Y){C("throw",Y,R,V)}):w.resolve(ue).then(function(Y){U.value=Y,R(U)},function(Y){return C("throw",Y,R,V)})}V(G.arg)}var N;n(this,"_invoke",{value:function(L,W){function R(){return new w(function(V,G){C(L,W,V,G)})}return N=N?N.then(R,R):R()}})}function T(k,w,C){var N="suspendedStart";return function(L,W){if(N==="executing")throw new Error("Generator is already running");if(N==="completed"){if(L==="throw")throw W;return X()}for(C.method=L,C.arg=W;;){var R=C.delegate;if(R){var V=A(R,C);if(V){if(V===f)continue;return V}}if(C.method==="next")C.sent=C._sent=C.arg;else if(C.method==="throw"){if(N==="suspendedStart")throw N="completed",C.arg;C.dispatchException(C.arg)}else C.method==="return"&&C.abrupt("return",C.arg);N="executing";var G=c(k,w,C);if(G.type==="normal"){if(N=C.done?"completed":"suspendedYield",G.arg===f)continue;return{value:G.arg,done:C.done}}G.type==="throw"&&(N="completed",C.method="throw",C.arg=G.arg)}}}function A(k,w){var C=w.method,N=k.iterator[C];if(N===void 0)return w.delegate=null,C==="throw"&&k.iterator.return&&(w.method="return",w.arg=void 0,A(k,w),w.method==="throw")||C!=="return"&&(w.method="throw",w.arg=new TypeError("The iterator does not provide a '"+C+"' method")),f;var L=c(N,k.iterator,w.arg);if(L.type==="throw")return w.method="throw",w.arg=L.arg,w.delegate=null,f;var W=L.arg;return W?W.done?(w[k.resultName]=W.value,w.next=k.nextLoc,w.method!=="return"&&(w.method="next",w.arg=void 0),w.delegate=null,f):W:(w.method="throw",w.arg=new TypeError("iterator result is not an object"),w.delegate=null,f)}function P(k){var w={tryLoc:k[0]};1 in k&&(w.catchLoc=k[1]),2 in k&&(w.finallyLoc=k[2],w.afterLoc=k[3]),this.tryEntries.push(w)}function D(k){var w=k.completion||{};w.type="normal",delete w.arg,k.completion=w}function F(k){this.tryEntries=[{tryLoc:"root"}],k.forEach(P,this),this.reset(!0)}function I(k){if(k){var w=k[s];if(w)return w.call(k);if(typeof k.next=="function")return k;if(!isNaN(k.length)){var C=-1,N=function L(){for(;++C<k.length;)if(r.call(k,C))return L.value=k[C],L.done=!1,L;return L.value=void 0,L.done=!0,L};return N.next=N}}return{next:X}}function X(){return{value:void 0,done:!0}}return d.prototype=p,n(y,"constructor",{value:p,configurable:!0}),n(p,"constructor",{value:d,configurable:!0}),d.displayName=u(p,o,"GeneratorFunction"),t.isGeneratorFunction=function(k){var w=typeof k=="function"&&k.constructor;return!!w&&(w===d||(w.displayName||w.name)==="GeneratorFunction")},t.mark=function(k){return Object.setPrototypeOf?Object.setPrototypeOf(k,p):(k.__proto__=p,u(k,o,"GeneratorFunction")),k.prototype=Object.create(y),k},t.awrap=function(k){return{__await:k}},S(E.prototype),u(E.prototype,a,function(){return this}),t.AsyncIterator=E,t.async=function(k,w,C,N,L){L===void 0&&(L=Promise);var W=new E(l(k,w,C,N),L);return t.isGeneratorFunction(w)?W:W.next().then(function(R){return R.done?R.value:W.next()})},S(y),u(y,o,"Generator"),u(y,s,function(){return this}),u(y,"toString",function(){return"[object Generator]"}),t.keys=function(k){var w=Object(k),C=[];for(var N in w)C.push(N);return C.reverse(),function L(){for(;C.length;){var W=C.pop();if(W in w)return L.value=W,L.done=!1,L}return L.done=!0,L}},t.values=I,F.prototype={constructor:F,reset:function(k){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(D),!k)for(var w in this)w.charAt(0)==="t"&&r.call(this,w)&&!isNaN(+w.slice(1))&&(this[w]=void 0)},stop:function(){this.done=!0;var k=this.tryEntries[0].completion;if(k.type==="throw")throw k.arg;return this.rval},dispatchException:function(k){if(this.done)throw k;var w=this;function C(G,U){return W.type="throw",W.arg=k,w.next=G,U&&(w.method="next",w.arg=void 0),!!U}for(var N=this.tryEntries.length-1;N>=0;--N){var L=this.tryEntries[N],W=L.completion;if(L.tryLoc==="root")return C("end");if(L.tryLoc<=this.prev){var R=r.call(L,"catchLoc"),V=r.call(L,"finallyLoc");if(R&&V){if(this.prev<L.catchLoc)return C(L.catchLoc,!0);if(this.prev<L.finallyLoc)return C(L.finallyLoc)}else if(R){if(this.prev<L.catchLoc)return C(L.catchLoc,!0)}else{if(!V)throw new Error("try statement without catch or finally");if(this.prev<L.finallyLoc)return C(L.finallyLoc)}}}},abrupt:function(k,w){for(var C=this.tryEntries.length-1;C>=0;--C){var N=this.tryEntries[C];if(N.tryLoc<=this.prev&&r.call(N,"finallyLoc")&&this.prev<N.finallyLoc){var L=N;break}}L&&(k==="break"||k==="continue")&&L.tryLoc<=w&&w<=L.finallyLoc&&(L=null);var W=L?L.completion:{};return W.type=k,W.arg=w,L?(this.method="next",this.next=L.finallyLoc,f):this.complete(W)},complete:function(k,w){if(k.type==="throw")throw k.arg;return k.type==="break"||k.type==="continue"?this.next=k.arg:k.type==="return"?(this.rval=this.arg=k.arg,this.method="return",this.next="end"):k.type==="normal"&&w&&(this.next=w),f},finish:function(k){for(var w=this.tryEntries.length-1;w>=0;--w){var C=this.tryEntries[w];if(C.finallyLoc===k)return this.complete(C.completion,C.afterLoc),D(C),f}},catch:function(k){for(var w=this.tryEntries.length-1;w>=0;--w){var C=this.tryEntries[w];if(C.tryLoc===k){var N=C.completion;if(N.type==="throw"){var L=N.arg;D(C)}return L}}throw new Error("illegal catch attempt")},delegateYield:function(k,w,C){return this.delegate={iterator:I(k),resultName:w,nextLoc:C},this.method==="next"&&(this.arg=void 0),f}},t}function Er(t){"@babel/helpers - typeof";return Er=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},Er(t)}function xh(t,i,r,n,e,s,a){try{var o=t[s](a),u=o.value}catch(l){r(l);return}o.done?i(u):Promise.resolve(u).then(n,e)}function yn(t){return function(){var i=this,r=arguments;return new Promise(function(n,e){var s=t.apply(i,r);function a(u){xh(s,n,e,a,o,"next",u)}function o(u){xh(s,n,e,a,o,"throw",u)}a(void 0)})}}function _t(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}function Ah(t,i){for(var r=0;r<i.length;r++){var n=i[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Uv(n.key),n)}}function St(t,i,r){return i&&Ah(t.prototype,i),r&&Ah(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function M(t,i,r){return i=Uv(i),i in t?Object.defineProperty(t,i,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[i]=r,t}function ys(t,i){if(typeof i!="function"&&i!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(i&&i.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),i&&ls(t,i)}function kr(t){return kr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},kr(t)}function ls(t,i){return ls=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,e){return n.__proto__=e,n},ls(t,i)}function Bv(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function sa(t,i,r){return Bv()?sa=Reflect.construct.bind():sa=function(e,s,a){var o=[null];o.push.apply(o,s);var u=Function.bind.apply(e,o),l=new u;return a&&ls(l,a.prototype),l},sa.apply(null,arguments)}function J1(t){return Function.toString.call(t).indexOf("[native code]")!==-1}function ja(t){var i=typeof Map=="function"?new Map:void 0;return ja=function(n){if(n===null||!J1(n))return n;if(typeof n!="function")throw new TypeError("Super expression must either be null or a function");if(typeof i<"u"){if(i.has(n))return i.get(n);i.set(n,e)}function e(){return sa(n,arguments,kr(this).constructor)}return e.prototype=Object.create(n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),ls(e,n)},ja(t)}function e_(t,i){if(t==null)return{};var r={},n=Object.keys(t),e,s;for(s=0;s<n.length;s++)e=n[s],!(i.indexOf(e)>=0)&&(r[e]=t[e]);return r}function t_(t,i){if(t==null)return{};var r=e_(t,i),n,e;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(e=0;e<s.length;e++)n=s[e],!(i.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Z(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function n_(t,i){if(i&&(typeof i=="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Z(t)}function _s(t){var i=Bv();return function(){var n=kr(t),e;if(i){var s=kr(this).constructor;e=Reflect.construct(n,arguments,s)}else e=n.apply(this,arguments);return n_(this,e)}}function r_(t,i){for(;!Object.prototype.hasOwnProperty.call(t,i)&&(t=kr(t),t!==null););return t}function aa(){return typeof Reflect<"u"&&Reflect.get?aa=Reflect.get.bind():aa=function(i,r,n){var e=r_(i,r);if(e){var s=Object.getOwnPropertyDescriptor(e,r);return s.get?s.get.call(arguments.length<3?i:n):s.value}},aa.apply(this,arguments)}function i_(t,i){if(t){if(typeof t=="string")return Ih(t,i);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ih(t,i)}}function Ih(t,i){(i==null||i>t.length)&&(i=t.length);for(var r=0,n=new Array(i);r<i;r++)n[r]=t[r];return n}function s_(t,i){var r=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=i_(t))||i){r&&(t=r);var n=0,e=function(){};return{s:e,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(u){throw u},f:e}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,a=!1,o;return{s:function(){r=r.call(t)},n:function(){var u=r.next();return s=u.done,u},e:function(u){a=!0,o=u},f:function(){try{!s&&r.return!=null&&r.return()}finally{if(a)throw o}}}}function a_(t,i){if(typeof t!="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,i||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(t)}function Uv(t){var i=a_(t,"string");return typeof i=="symbol"?i:String(i)}var at=function(){function t(){_t(this,t)}return St(t,null,[{key:"start",value:function(r){return!r||!r.length||r.length===1&&r.end(0)-r.start(0)<1e-6||r.length===1&&r.start(0)<0?0:r.start(0)}},{key:"end",value:function(r){return!r||!r.length||r.length===1&&r.end(0)-r.start(0)<1e-6?0:r.end(r.length-1)}},{key:"get",value:function(r){if(r)try{return r.buffered}catch{}}},{key:"buffers",value:function(r,n){if(!r||!r.length)return[];for(var e=[],s=0,a=r.length;s<a;s++){var o=e.length;if(!o||!n)e.push([r.start(s),r.end(s)]);else{var u=e[o-1],l=u[1],c=r.start(s);if(c-l<=n){var f=r.end(s);f>l&&(u[1]=f)}else e.push([r.start(s),r.end(s)])}}return e}},{key:"totalLength",value:function(r){return!r||!r.length?0:r.reduce(function(n,e){return n+=e[1]-e[0]},0)}},{key:"info",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;if(!r||!r.length)return{start:0,end:0,buffers:[]};for(var s=0,a=0,o=0,u=0,l=0,c=0,f=0,h=t.buffers(r,e),d=0,p=h.length;d<p;d++){var m=h[d];if(n+e>=m[0]&&n<=m[1])s=m[0],a=m[1],o=d;else if(n+e<m[0]){u=m[0],l=m[1];break}else n+e>m[1]&&(c=m[0],f=m[1])}return{start:s,end:a,index:o,buffers:h,nextStart:u,nextEnd:l,prevStart:c,prevEnd:f,currentTime:n,behind:n-s,remaining:a?a-n:0,length:t.totalLength&&t.totalLength(h)}}}]),t}(),o_=typeof window<"u",ft,oe={MANIFEST:"manifest",NETWORK:"network",NETWORK_TIMEOUT:"network_timeout",NETWORK_FORBIDDEN:"network_forbidden",NETWORK_NOTFOUND:"network_notfound",NETWROK_RANGE_NOT_SATISFIABLE:"network_range_not_satisfiable",DEMUX:"demux",REMUX:"remux",MEDIA:"media",DRM:"drm",OTHER:"other",RUNTIME:"runtime",SUB_TYPES:{FLV:"FLV",HLS:"HLS",MP4:"MP4",FMP4:"FMP4",MSE_ADD_SB:"MSE_ADD_SB",MSE_APPEND_BUFFER:"MSE_APPEND_BUFFER",MSE_OTHER:"MSE_OTHER",MSE_FULL:"MSE_FULL",MSE_CHANGE_TYPE:"MSE_CHANGE_TYPE",OPTION:"OPTION",DASH:"DASH",LICENSE:"LICENSE",CUSTOM_LICENSE:"CUSTOM_LICENSE",MSE_HIJACK:"MSE_HIJACK",EME_HIJACK:"EME_HIJACK",SIDX:"SIDX",NO_CANPLAY_ERROR:"NO_CANPLAY_ERROR",BUFFERBREAK_ERROR:"BUFFERBREAK_ERROR",WAITING_TIMEOUT_ERROR:"WAITING_TIMEOUT_ERROR",MEDIA_ERR_ABORTED:"MEDIA_ERR_ABORTED",MEDIA_ERR_NETWORK:"MEDIA_ERR_NETWORK",MEDIA_ERR_DECODE:"MEDIA_ERR_DECODE",MEDIA_ERR_SRC_NOT_SUPPORTED:"MEDIA_ERR_SRC_NOT_SUPPORTED",MEDIA_ERR_CODEC_NOT_SUPPORTED:"MEDIA_ERR_CODEC_NOT_SUPPORTED",MEDIA_ERR_URL_EMPTY:"MEDIA_ERR_URL_EMPTY"}},hu=(ft={},M(ft,oe.MANIFEST,{HLS:1100,DASH:1200}),M(ft,oe.NETWORK,2100),M(ft,oe.NETWORK_TIMEOUT,2101),M(ft,oe.NETWORK_FORBIDDEN,2103),M(ft,oe.NETWORK_NOTFOUND,2104),M(ft,oe.NETWROK_RANGE_NOT_SATISFIABLE,2116),M(ft,oe.DEMUX,{FLV:3100,HLS:3200,MP4:3300,FMP4:3400,SIDX:3410}),M(ft,oe.REMUX,{FMP4:4100,MP4:4200}),M(ft,oe.MEDIA,{MEDIA_ERR_ABORTED:5101,MEDIA_ERR_NETWORK:5102,MEDIA_ERR_DECODE:5103,MEDIA_ERR_SRC_NOT_SUPPORTED:5104,MEDIA_ERR_CODEC_NOT_SUPPORTED:5105,MEDIA_ERR_URL_EMPTY:5106,MSE_ADD_SB:5200,MSE_APPEND_BUFFER:5201,MSE_OTHER:5202,MSE_FULL:5203,MSE_HIJACK:5204,MSE_CHANGE_TYPE:5205,EME_HIJACK:5301}),M(ft,oe.DRM,{LICENSE:7100,CUSTOM_LICENSE:7200}),M(ft,oe.OTHER,8e3),M(ft,oe.RUNTIME,{NO_CANPLAY_ERROR:9001,BUFFERBREAK_ERROR:9002,WAITING_TIMEOUT_ERROR:9003}),ft),Ce=function(t){ys(r,t);var i=_s(r);function r(n,e,s,a,o){var u;return _t(this,r),u=i.call(this,o||(s==null?void 0:s.message)),u.errorType=n===oe.NETWORK_TIMEOUT?oe.NETWORK:n,u.originError=s,u.ext=a,u.errorCode=hu[n][e]||hu[n],u.errorMessage=u.message,u.errorCode||(u.errorType=oe.OTHER,u.errorCode=hu[u.errorType]),u}return St(r,null,[{key:"create",value:function(e,s,a,o,u){return e instanceof r?e:(e instanceof Error&&(a=e,e=""),e||(e=oe.OTHER),new r(e,s,a,o,u))}},{key:"network",value:function(e){var s;return new r(e!=null&&e.isTimeout?oe.NETWORK_TIMEOUT:oe.NETWORK,null,e instanceof Error?e:null,{url:e==null?void 0:e.url,response:e==null?void 0:e.response,httpCode:e==null||(s=e.response)===null||s===void 0?void 0:s.status})}}]),r}(ja(Error)),Vs={DEBUG:1,LOG:2,WARN:3,ERROR:4},u_=200*1024,l_=["Boolean","Number","String","Undefined","Null","Date","Object"],on=function(){function t(i,r){_t(this,t),this.name=i||"",this._prefix="[".concat(this.name,"]"),this.logCacheLevel=(r==null?void 0:r.logCacheLevel)||3,this.logMaxSize=(r==null?void 0:r.logMaxSize)||u_,this.logSize=0,this.logTextArray=[]}return St(t,[{key:"debug",value:function(){for(var r,n=arguments.length,e=new Array(n),s=0;s<n;s++)e[s]=arguments[s];this.logCache.apply(this,[Vs.DEBUG].concat(e)),!t.disabled&&(r=console).debug.apply(r,[this._prefix,xi()].concat(e))}},{key:"log",value:function(){for(var r,n=arguments.length,e=new Array(n),s=0;s<n;s++)e[s]=arguments[s];this.logCache.apply(this,[Vs.LOG].concat(e)),!t.disabled&&(r=console).log.apply(r,[this._prefix,xi()].concat(e))}},{key:"warn",value:function(){for(var r,n=arguments.length,e=new Array(n),s=0;s<n;s++)e[s]=arguments[s];this.logCache.apply(this,[Vs.WARN].concat(e)),!t.disabled&&(r=console).warn.apply(r,[this._prefix,xi()].concat(e))}},{key:"error",value:function(){for(var r,n=arguments.length,e=new Array(n),s=0;s<n;s++)e[s]=arguments[s];this.logCache.apply(this,[Vs.ERROR].concat(e)),!t.disabled&&(r=console).error.apply(r,[this._prefix,xi()].concat(e))}},{key:"logCache",value:function(r){if(!(r<this.logCacheLevel)){var n="";try{for(var e=arguments.length,s=new Array(e>1?e-1:0),a=1;a<e;a++)s[a-1]=arguments[a];var o=s.map(function(l){return Hv(l)});n=this._prefix+xi()+JSON.stringify(o)}catch{return}if(r>=this.logCacheLevel&&(this.logSize+=n.length,this.logTextArray.push(n)),this.logSize>this.logMaxSize){var u=this.logTextArray.shift();this.logSize-=u.length}}}},{key:"getLogCache",value:function(){var r=this.logTextArray.join(`
`);return this.reset(),r}},{key:"reset",value:function(){this.logTextArray=[],this.logSize=0}},{key:"table",value:function(){var r;t.disabled||(console.group(this._prefix),(r=console).table.apply(r,arguments),console.groupEnd())}},{key:"setLogLevel",value:function(r){this.logCacheLevel=r}}],[{key:"enable",value:function(){t.disabled=!1}},{key:"disable",value:function(){t.disabled=!0}}]),t}();M(on,"disabled",!0);function xi(){return new Date().toLocaleString()}function c_(t){if(Er(t)!=="object")return t;var i=Object.prototype.toString.call(t).slice(8,-1);switch(i){case"Array":case"Uint8Array":case"ArrayBuffer":return i+"["+t.length+"]";case"Object":return"{}";default:return i}}function Hv(t,i,r){r||(r=1),i||(i=2);var n={};if(!t||Er(t)!=="object")return t;var e=Object.prototype.toString.call(t).slice(8,-1);if(!l_.includes(e))return e;if(!(r>i)){for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r===i?n[s]=c_(t[s]):Er(t[s])==="object"?n[s]=Hv(t[s],i,r+1):n[s]=t[s]);return n}}function Fr(){var t,i,r=new Promise(function(n,e){t=n,i=e});return r.used=!1,r.resolve=function(){return r.used=!0,t.apply(void 0,arguments)},r.reject=function(){return r.used=!0,i.apply(void 0,arguments)},r}function Nr(){try{return parseInt(performance.now(),10)}catch{return new Date().getTime()}}var f_={stringify:function(i){try{return JSON.stringify(i)}catch{return""}},parse:function(i){try{return JSON.parse(i)}catch{return}}};function Lh(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;try{return o_?t&&typeof ManagedMediaSource<"u"?ManagedMediaSource:window.MediaSource:null}catch{}}function du(t){return/ManagedMediaSource/gi.test(Object.prototype.toString.call(t))}function h_(t){var i=[];if(t instanceof TimeRanges)for(var r=0;r<t.length;r++)i.push({start:t.start(r),end:t.end(r)});return i}var js={APPEND:"appendBuffer",REMOVE:"removeBuffer",UPDATE_DURATION:"updateDuration"},dt=function(){function t(i,r){var n=this;_t(this,t),M(this,"media",null),M(this,"mediaSource",null),M(this,"_openPromise",Fr()),M(this,"_queue",Object.create(null)),M(this,"_sourceBuffer",Object.create(null)),M(this,"_mseFullFlag",{}),M(this,"_st",0),M(this,"_opst",0),M(this,"_logger",null),M(this,"_config",null),M(this,"_url",null),M(this,"_onStartStreaming",function(){n._logger.debug("startstreaming")}),M(this,"_onEndStreaming",function(){n._logger.debug("endstreaming")}),M(this,"_onSBUpdateEnd",function(e){var s=n._queue[e];if(s){var a=s[0];if((a==null?void 0:a.opName)!==js.UPDATE_DURATION&&s.shift(),a){var o,u,l=Nr()-n._opst;n._logger.debug("UpdateEnd(".concat(e,"/").concat(a.opName,")"),f_.stringify(h_((o=n._sourceBuffer[e])===null||o===void 0?void 0:o.buffered)),l,a.context),a.promise.resolve({name:a.opName,context:a.context,costtime:l});var c=(u=a.context)===null||u===void 0?void 0:u.callback;c&&typeof c=="function"&&c(a.context),n._startQueue(e)}}}),M(this,"_onSBUpdateError",function(e,s){var a=n._queue[e];if(a){var o=a[0];o&&(n._logger.error("UpdateError",e,o.opName,o.context),o.promise.reject(new Ce(oe.MEDIA,oe.SUB_TYPES.MSE_APPEND_BUFFER,s)))}}),this._config=Object.assign(t.getDefaultConfig(),r),i&&this.bindMedia(i),this._logger=new on("MSE"),this._config.openLog&&on.enable()}return St(t,[{key:"isOpened",get:function(){var r;return((r=this.mediaSource)===null||r===void 0?void 0:r.readyState)==="open"}},{key:"hasOpTasks",get:function(){var r=this,n=!1;return Object.keys(this._queue).forEach(function(e){var s=r._queue[e];Array.isArray(s)&&(n||(n=s.length>0))}),n}},{key:"url",get:function(){return this._url}},{key:"duration",get:function(){var r;return((r=this.mediaSource)===null||r===void 0?void 0:r.duration)||-1}},{key:"isEnded",get:function(){return this.mediaSource?this.mediaSource.readyState==="ended":!1}},{key:"streaming",get:function(){return du(this.mediaSource)?this.mediaSource.streaming:!0}},{key:"isFull",value:function(r){return r?this._mseFullFlag[r]:this._mseFullFlag[t.VIDEO]}},{key:"updateDuration",value:function(r){var n=this,e=this.mediaSource&&this.mediaSource.duration>r;if(this.mediaSource&&this.mediaSource.duration>r){var s=0;if(Object.keys(this._sourceBuffer).forEach(function(a){try{s=Math.max(n.bufferEnd(a)||0,s)}catch{}}),r<s)return Promise.resolve()}return this._enqueueBlockingOp(function(){if(n.isEnded){n._logger.debug("setDuration but ended");return}n.mediaSource&&(n.mediaSource.duration=r,n._logger.debug("setDuration",r))},js.UPDATE_DURATION,{isReduceDuration:e})}},{key:"open",value:function(){var r=this;if(this._openPromise.used&&!this.isOpened&&this.mediaSource){var n=this.mediaSource,e=function s(){var a=Nr()-r._st;r._logger.debug("sourceopen",a),n.removeEventListener("sourceopen",s),r._openPromise.resolve({costtime:a})};n.addEventListener("sourceopen",e),this._openPromise=Fr()}return this._openPromise}},{key:"bindMedia",value:function(){var i=yn(Ue().mark(function n(e){var s=this,a,o,u,l;return Ue().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(!(this.mediaSource||this.media)){f.next=3;break}return f.next=3,this.unbindMedia();case 3:if(a=Lh(this._config.preferMMS),!(!e||!a)){f.next=6;break}throw new Error("Param media or MediaSource does not exist");case 6:return this.media=e,o=this.mediaSource=new a,u=du(o),this._st=Nr(),l=function h(){var d=Nr()-s._st;s._logger.debug("sourceopen"),o.removeEventListener("sourceopen",h),URL.revokeObjectURL(e.src),s._openPromise.resolve({costtime:d})},o.addEventListener("sourceopen",l),u&&(o.addEventListener("startstreaming",this._onStartStreaming),o.addEventListener("endstreaming",this._onEndStreaming)),this._url=URL.createObjectURL(o),e.src=this._url,e.disableRemotePlayback=u,f.abrupt("return",this._openPromise);case 17:case"end":return f.stop()}},n,this)}));function r(n){return i.apply(this,arguments)}return r}()},{key:"unbindMedia",value:function(){var i=yn(Ue().mark(function n(){var e=this,s,a,o;return Ue().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(this._openPromise.used||this._openPromise.resolve(),s=this.mediaSource,s){if(Object.keys(this._queue).forEach(function(c){var f=e._queue[c];f&&f.forEach(function(h){var d,p;return(d=h.promise)===null||d===void 0||(p=d.resolve)===null||p===void 0?void 0:p.call(d)})}),a=!!this.media&&this.media.readyState>=1,o=s.readyState==="open",a&&o)try{s.endOfStream()}catch{}Object.keys(this._sourceBuffer).forEach(function(c){try{s.removeSourceBuffer(e._sourceBuffer[c])}catch{}}),du(s)&&(s.removeEventListener("startstreaming",this._onStartStreaming),s.removeEventListener("endstreaming",this._onEndStreaming))}if(this.media){this.media.disableRemotePlayback=!1,this.media.removeAttribute("src");try{this.media.load()}catch{}this.media=null}this.mediaSource=null,this._openPromise=Fr(),this._queue=Object.create(null),this._sourceBuffer=Object.create(null);case 8:case"end":return l.stop()}},n,this)}));function r(){return i.apply(this,arguments)}return r}()},{key:"createSource",value:function(r,n){if(!(this._sourceBuffer[r]||!this.mediaSource)){var e;try{e=this._sourceBuffer[r]=this.mediaSource.addSourceBuffer(n)}catch(s){throw new Ce(oe.MEDIA,oe.SUB_TYPES.MSE_ADD_SB,s)}e.mimeType=n,e.addEventListener("updateend",this._onSBUpdateEnd.bind(this,r)),e.addEventListener("error",this._onSBUpdateError.bind(this,r))}}},{key:"changeType",value:function(r,n){var e=this,s=this._sourceBuffer[r];return!this.mediaSource||!s||s.mimeType===n?Promise.resolve():typeof s.changeType!="function"?Promise.reject(new Ce(oe.MEDIA,oe.SUB_TYPES.MSE_CHANGE_TYPE,new Error("changeType is not a function"))):this._enqueueOp(r,function(){try{s.changeType(n)}catch(a){throw new Ce(oe.MEDIA,oe.SUB_TYPES.MSE_CHANGE_TYPE,a)}s.mimeType=n,e._onSBUpdateEnd(r)},"changeType",{mimeType:n})}},{key:"createOrChangeSource",value:function(r,n){return this.createSource(r,n),this.changeType(r,n)}},{key:"append",value:function(r,n,e){var s=this;return!n||!n.byteLength||!this._sourceBuffer[r]?Promise.resolve():this._enqueueOp(r,function(){var a;!s.mediaSource||s.media.error||(s._logger.debug("MSE APPEND START",e),s._opst=Nr(),(a=s._sourceBuffer[r])===null||a===void 0||a.appendBuffer(n))},js.APPEND,e)}},{key:"remove",value:function(r,n,e,s){var a=this,o=!1;return this._mseFullFlag[r]&&(o=!0),this._enqueueOp(r,function(){if(!(!a.mediaSource||a.media.error)){var u=a._sourceBuffer[r];if(n>=e||!u){a._onSBUpdateEnd(r);return}a._opst=Nr(),a._logger.debug("MSE REMOVE START",r,n,e,s),u.remove(n,e)}},js.REMOVE,s,o)}},{key:"clearBuffer",value:function(r,n){var e=this,s;return Object.keys(this._sourceBuffer).forEach(function(a){s=e.remove(a,r,n)}),s||Promise.resolve()}},{key:"clearAllBuffer",value:function(){var r=this,n;return Object.keys(this._sourceBuffer).forEach(function(e){var s=r._sourceBuffer[e];n=r.remove(e,0,at.end(at.get(s)))}),n}},{key:"clearOpQueues",value:function(r,n){var e;this._logger.debug("MSE clearOpQueue START");var s=this._queue[r];if(n&&s){this._queue[r]=[];return}if(!(!s||!s[r]||s.length<5)){var a=[];s.forEach(function(o){o.context&&o.context.isinit&&a.push(o)}),this._queue[r]=s.slice(0,2),a.length>0&&(e=this._queue[r]).push.apply(e,a)}}},{key:"endOfStream",value:function(r){var n=this;return!this.mediaSource||this.mediaSource.readyState!=="open"?Promise.resolve():this._enqueueBlockingOp(function(){var e=n.mediaSource;!e||e.readyState!=="open"||(n._logger.debug("MSE endOfStream START"),r?e.endOfStream(r):e.endOfStream())},"endOfStream")}},{key:"setLiveSeekableRange",value:function(r,n){var e=this.mediaSource;r<0||n<r||!(e!=null&&e.setLiveSeekableRange)||e.readyState!=="open"||e.setLiveSeekableRange(r,n)}},{key:"getSourceBuffer",value:function(r){return this._sourceBuffer[r]}},{key:"buffered",value:function(r){return at.get(this._sourceBuffer[r])}},{key:"bufferStart",value:function(r){return at.start(this.buffered(r))}},{key:"bufferEnd",value:function(r){return at.end(this.buffered(r))}},{key:"_enqueueOp",value:function(r,n,e,s,a){var o=this;if(!this.mediaSource)return Promise.resolve();var u=this._queue[r]=this._queue[r]||[],l={exec:n,promise:Fr(),opName:e,context:s};return a?(u.splice(0,0,l),this._mseFullFlag[r]=!1,this._startQueue(r)):u.push(l),this.isOpened||this.isEnded?u.length===1&&this._startQueue(r):this._openPromise.then(function(){u.length===1&&o._startQueue(r)}),l.promise}},{key:"_enqueueBlockingOp",value:function(){var i=yn(Ue().mark(function n(e,s,a){var o=this,u,l;return Ue().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(this.mediaSource){f.next=2;break}return f.abrupt("return",Promise.resolve());case 2:if(u=Object.keys(this._sourceBuffer),u.length){f.next=5;break}return f.abrupt("return",e());case 5:return l=[],u.forEach(function(h){var d=o._queue[h],p=Fr();l.push(p),d.push({exec:function(){p.resolve()},promise:p,opName:s,context:a}),d.length===1&&o._startQueue(h)}),f.abrupt("return",Promise.all(l).then(function(){try{return e()}finally{u.forEach(function(h){var d=o._queue[h],p=o._sourceBuffer[h];d==null||d.shift(),(!p||!p.updating)&&o._startQueue(h)})}}));case 8:case"end":return f.stop()}},n,this)}));function r(n,e,s){return i.apply(this,arguments)}return r}()},{key:"_startQueue",value:function(r){var n=this._queue[r];if(n){var e=n[0];if(e&&!this._mseFullFlag[r])try{e.exec()}catch(s){s&&s.message&&s.message.indexOf("SourceBuffer is full")>=0?(this._mseFullFlag[r]=!0,e.context&&Er(e.context)==="object"&&(e.context.isFull=!0),this._logger.error("[MSE error],  context,",e.context," ,name,",e.opName,",err,SourceBuffer is full"),e.promise.reject(new Ce(oe.MEDIA,oe.SUB_TYPES.MSE_FULL,s))):(this._logger.error(s),e.promise.reject(s.constructor===Ce?s:new Ce(oe.MEDIA,oe.SUB_TYPES.MSE_OTHER,s)),n.shift(),this._startQueue(r))}}}},{key:"setTimeoffset",value:function(r,n,e){var s=this;return this._enqueueOp(r,function(){n<0&&(n+=.001),s._sourceBuffer[r].timestampOffset=n,s._onSBUpdateEnd(r)},"setTimeoffset",e)}},{key:"abort",value:function(r,n){var e=this;return this.isOpened?this._enqueueOp(r,function(){e._sourceBuffer[r].abort(),e._onSBUpdateEnd(r)},"abort",n):Promise.resolve()}}],[{key:"isSupported",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:'video/mp4; codecs="avc1.42E01E,mp4a.40.2"',n=Lh();if(!n)return!1;try{return n.isTypeSupported(r)}catch(e){return this._logger.error(r,e),!1}}},{key:"isMMSOnly",value:function(){return typeof ManagedMediaSource<"u"&&typeof MediaSource>"u"}},{key:"getDefaultConfig",value:function(){return{openLog:!1,preferMMS:!1}}}]),t}();M(dt,"VIDEO","video");M(dt,"AUDIO","audio");var fr={FETCH:"fetch",XHR:"xhr"},cs={ARRAY_BUFFER:"arraybuffer",TEXT:"text",JSON:"json"},nn=function(t){ys(r,t);var i=_s(r);function r(n,e,s,a){var o;return _t(this,r),o=i.call(this,a),M(Z(o),"retryCount",0),M(Z(o),"isTimeout",!1),M(Z(o),"loaderType",fr.FETCH),M(Z(o),"startTime",0),M(Z(o),"endTime",0),M(Z(o),"options",{}),o.url=n,o.request=e,o.response=s,o}return St(r)}(ja(Error)),zv=Object.prototype.toString;function d_(t){return t!==null&&Er(t)==="object"}function Dh(t){if(zv.call(t)!=="[object Object]")return!1;var i=Object.getPrototypeOf(t);return i===null||i===Object.prototype}function p_(t){return zv.call(t)==="[object Date]"}function Vv(t){if(!(!t||t[0]===null||t[0]===void 0||t[0]===0&&(t[1]===null||t[1]===void 0))){var i="bytes="+t[0]+"-";return t[1]&&(i+=t[1]),i}}function Oh(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function jv(t,i){if(t){if(!i)return t;var r,n=Object.keys(i).map(function(s){if(r=i[s],r!=null)return Array.isArray(r)?s=s+"[]":r=[r],r.map(function(a){return p_(a)?a=a.toISOString():d_(a)&&(a=JSON.stringify(a)),"".concat(Oh(s),"=").concat(Oh(a))}).join("&")}).filter(Boolean).join("&");if(n){var e=t.indexOf("#");e!==-1&&(t=t.slice(0,e)),t+=(t.indexOf("?")===-1?"?":"&")+n}return t}}function kl(t,i,r,n,e,s,a,o,u,l,c){e=e!=null?parseFloat(e):null,n=parseInt(n||"0",10),Number.isNaN(n)&&(n=0);var f={range:u,vid:l,index:o,contentLength:n,age:e,startTime:s,firstByteTime:a,endTime:Date.now(),priOptions:c};return{data:t,done:i,options:f,response:r}}function wl(t,i){return Math.round(t*8*1e3/i/1024)}var J={ERROR:"error",TTFB:"core.ttfb",LOAD_START:"core.loadstart",LOAD_RESPONSE_HEADERS:"core.loadresponseheaders",LOAD_COMPLETE:"core.loadcomplete",LOAD_RETRY:"core.loadretry",SOURCEBUFFER_CREATED:"core.sourcebuffercreated",MEDIASOURCE_OPENED:"core.mediasourceopened",ANALYZE_DURATION_EXCEEDED:"core.analyzedurationexceeded",REMOVE_BUFFER:"core.removebuffer",BUFFEREOS:"core.buffereos",KEYFRAME:"core.keyframe",CHASEFRAME:"core.chaseframe",METADATA_PARSED:"core.metadataparsed",SEI:"core.sei",SEI_IN_TIME:"core.seiintime",FLV_SCRIPT_DATA:"core.flvscriptdata",LOWDECODE:"core.lowdecode",SWITCH_URL_SUCCESS:"core.switchurlsuccess",SWITCH_URL_FAILED:"core.switchurlfailed",SPEED:"core.speed",HLS_MANIFEST_LOADED:"core.hlsmanifestloaded",HLS_LEVEL_LOADED:"core.hlslevelloaded",DEMUXED_TRACK:"core.demuxedtrack",STREAM_EXCEPTION:"core.streamexception",LARGE_AV_FIRST_FRAME_GAP_DETECT:"LARGE_AV_FIRST_FRAME_GAP_DETECT",LARGE_VIDEO_DTS_GAP_DETECT:"LARGE_VIDEO_DTS_GAP_DETECT",LARGE_AUDIO_DTS_GAP_DETECT:"LARGE_AUDIO_DTS_GAP_DETECT",AUDIO_GAP_DETECT:"AUDIO_GAP_DETECT",AUDIO_OVERLAP_DETECT:"AUDIO_OVERLAP_DETECT",MAX_DTS_DELTA_WITH_NEXT_SEGMENT_DETECT:"MAX_DTS_DELTA_WITH_NEXT_SEGMENT_DETECT",REAL_TIME_SPEED:"real_time_speed"},Rh=2*1024*1024,Tl=function(t){ys(r,t);var i=_s(r);function r(){var n;return _t(this,r),n=i.call(this),M(Z(n),"_abortController",null),M(Z(n),"_timeoutTimer",null),M(Z(n),"_reader",null),M(Z(n),"_response",null),M(Z(n),"_aborted",!1),M(Z(n),"_index",-1),M(Z(n),"_range",null),M(Z(n),"_receivedLength",0),M(Z(n),"_running",!1),M(Z(n),"_logger",null),M(Z(n),"_vid",""),M(Z(n),"_onProcessMinLen",0),M(Z(n),"_onCancel",null),M(Z(n),"_priOptions",null),n}return St(r,[{key:"load",value:function(e){var s,a=this,o=e.url,u=e.vid,l=e.timeout,c=e.responseType,f=e.onProgress,h=e.index,d=e.onTimeout,p=e.onCancel,m=e.range,_=e.transformResponse,v=e.request,y=e.params,S=e.logger,E=e.method,T=e.headers,A=e.body,P=e.mode,D=e.credentials,F=e.cache,I=e.redirect,X=e.referrer,k=e.referrerPolicy,w=e.onProcessMinLen,C=e.priOptions;this._logger=S,this._aborted=!1,this._onProcessMinLen=w,this._onCancel=p,this._abortController=typeof AbortController<"u"&&new AbortController,this._running=!0,this._index=h,this._range=m||[0,0],this._vid=u||o,this._priOptions=C||{};var N={method:E,headers:T,body:A,mode:P,credentials:D,cache:F,redirect:I,referrer:X,referrerPolicy:k,signal:(s=this._abortController)===null||s===void 0?void 0:s.signal},L=!1;clearTimeout(this._timeoutTimer),o=jv(o,y);var W=Vv(m);W&&(v?T=v.headers:T=N.headers=N.headers||(Headers?new Headers:{}),Headers&&T instanceof Headers?T.append("Range",W):T.Range=W),l&&(this._timeoutTimer=setTimeout(function(){if(L=!0,a.cancel(),d){var V=new nn(o,N,null,"timeout");V.isTimeout=!0,d(V,{index:a._index,range:a._range,vid:a._vid,priOptions:a._priOptions})}},l));var R=Date.now();return this._logger.debug("[fetch load start], index,",h,",range,",m),new Promise(function(V,G){fetch(v||o,v?void 0:N).then(function(){var U=yn(Ue().mark(function ue(Y){var tt,Ye,nt,Ht;return Ue().wrap(function(Ie){for(;;)switch(Ie.prev=Ie.next){case 0:if(clearTimeout(a._timeoutTimer),a._response=Y,!(a._aborted||!a._running)){Ie.next=4;break}return Ie.abrupt("return");case 4:if(_&&(Y=_(Y,o)||Y),Y.ok){Ie.next=7;break}throw new nn(o,N,Y,"bad network response");case 7:if(tt=Date.now(),c!==cs.TEXT){Ie.next=15;break}return Ie.next=11,Y.text();case 11:Ye=Ie.sent,a._running=!1,Ie.next=37;break;case 15:if(c!==cs.JSON){Ie.next=22;break}return Ie.next=18,Y.json();case 18:Ye=Ie.sent,a._running=!1,Ie.next=37;break;case 22:if(!f){Ie.next=29;break}return a.resolve=V,a.reject=G,a._loadChunk(Y,f,R,tt),Ie.abrupt("return");case 29:return Ie.next=31,Y.arrayBuffer();case 31:Ye=Ie.sent,Ye=new Uint8Array(Ye),a._running=!1,nt=Date.now()-R,Ht=wl(Ye.byteLength,nt),a.emit(J.REAL_TIME_SPEED,{speed:Ht,len:Ye.byteLength,time:nt,vid:a._vid,index:a._index,range:a._range,priOptions:a._priOptions});case 37:a._logger.debug("[fetch load end], index,",h,",range,",m),V(kl(Ye,!0,Y,Y.headers.get("Content-Length"),Y.headers.get("age"),R,tt,h,m,a._vid,a._priOptions));case 39:case"end":return Ie.stop()}},ue)}));return function(ue){return U.apply(this,arguments)}}()).catch(function(U){var ue;clearTimeout(a._timeoutTimer),a._running=!1,!(a._aborted&&!L)&&(U=U instanceof nn?U:new nn(o,N,null,(ue=U)===null||ue===void 0?void 0:ue.message),U.startTime=R,U.endTime=Date.now(),U.isTimeout=L,U.options={index:a._index,range:a._range,vid:a._vid,priOptions:a._priOptions},G(U))})})}},{key:"cancel",value:function(){var n=yn(Ue().mark(function s(){return Ue().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(!this._aborted){o.next=2;break}return o.abrupt("return");case 2:if(this._aborted=!0,this._running=!1,!this._response){o.next=14;break}if(o.prev=5,!this._reader){o.next=9;break}return o.next=9,this._reader.cancel();case 9:o.next=13;break;case 11:o.prev=11,o.t0=o.catch(5);case 13:this._response=this._reader=null;case 14:if(this._abortController){try{this._abortController.abort()}catch{}this._abortController=null}this._onCancel&&this._onCancel({index:this._index,range:this._range,vid:this._vid,priOptions:this._priOptions});case 16:case"end":return o.stop()}},s,this,[[5,11]])}));function e(){return n.apply(this,arguments)}return e}()},{key:"_loadChunk",value:function(e,s,a,o){var u=this;if(!e.body||!e.body.getReader){this._running=!1;var l=new nn(e.url,"",e,"onProgress of bad response.body.getReader");l.options={index:this._index,range:this._range,vid:this._vid,priOptions:this._priOptions},this.reject(l);return}this._onProcessMinLen>0&&(this._cache=new Uint8Array(Rh),this._writeIdx=0);var c=this._reader=e.body.getReader(),f,h,d,p=function(){var m=yn(Ue().mark(function _(){var v,y,S,E,T,A,P,D;return Ue().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return h=Date.now(),I.prev=1,I.next=4,c.read();case 4:f=I.sent,d=Date.now(),I.next=13;break;case 8:return I.prev=8,I.t0=I.catch(1),d=Date.now(),u._aborted||(u._running=!1,I.t0.options={index:u._index,range:u._range,vid:u._vid,priOptions:u._priOptions},u.reject(I.t0)),I.abrupt("return");case 13:if(y=((v=u._range)===null||v===void 0?void 0:v.length)>0?u._range[0]:0,S=y+u._receivedLength,!u._aborted){I.next=19;break}return u._running=!1,s(void 0,!1,{range:[S,S],vid:u._vid,index:u._index,startTime:h,endTime:d,st:a,firstByteTime:o,priOptions:u._priOptions},e),I.abrupt("return");case 19:E=f.value?f.value.byteLength:0,u._receivedLength+=E,u._logger.debug("fetchLoader,onProgress call,task,",u._range,", start,",S,", end,",y+u._receivedLength,", done,",f.done),u._onProcessMinLen>0?u._writeIdx+E>=u._onProcessMinLen||f.done?(T=new Uint8Array(u._writeIdx+E),T.set(u._cache.slice(0,u._writeIdx),0),E>0&&T.set(f.value,u._writeIdx),u._writeIdx=0,u._logger.debug("fetchLoader,onProgress enough,done,",f.done,",len,",T.byteLength,", writeIdx,",u._writeIdx)):E>0&&u._writeIdx+E<Rh?(u._cache.set(f.value,u._writeIdx),u._writeIdx+=E,u._logger.debug("fetchLoader,onProgress cache,len,",E,", writeIdx,",u._writeIdx)):E>0&&(A=new Uint8Array(u._writeIdx+E+2048),u._logger.debug("fetchLoader,onProgress extra start,size,",u._writeIdx+E+2048,", datalen,",E,", writeIdx,",u._writeIdx),A.set(u._cache.slice(0,u._writeIdx),0),E>0&&A.set(f.value,u._writeIdx),u._writeIdx+=E,delete u._cache,u._cache=A,u._logger.debug("fetchLoader,onProgress extra end,len,",E,", writeIdx,",u._writeIdx)):T=f.value,(T&&T.byteLength>0||f.done)&&s(T,f.done,{range:[u._range[0]+u._receivedLength-(T?T.byteLength:0),u._range[0]+u._receivedLength],vid:u._vid,index:u._index,startTime:h,endTime:d,st:a,firstByteTime:o,priOptions:u._priOptions},e),f.done?(P=Date.now()-a,D=wl(u._receivedLength,P),u.emit(J.REAL_TIME_SPEED,{speed:D,len:u._receivedLength,time:P,vid:u._vid,index:u._index,range:u._range,priOptions:u._priOptions}),u._running=!1,u._logger.debug("[fetchLoader onProgress end],task,",u._range,",done,",f.done),u.resolve(kl(f,!0,e,e.headers.get("Content-Length"),e.headers.get("age"),a,o,u._index,u._range,u._vid,u._priOptions))):p();case 25:case"end":return I.stop()}},_,null,[[1,8]])}));return function(){return m.apply(this,arguments)}}();p()}},{key:"receiveLen",get:function(){return this._receivedLength}},{key:"running",get:function(){return this._running},set:function(e){this._running=e}}],[{key:"isSupported",value:function(){return typeof fetch<"u"}}]),r}(gi);function v_(t){return us({loaderType:fr.FETCH,retry:0,retryDelay:0,timeout:0,request:null,onTimeout:void 0,onProgress:void 0,onRetryError:void 0,transformRequest:void 0,transformResponse:void 0,transformError:void 0,responseType:cs.TEXT,range:void 0,url:"",params:void 0,method:"GET",headers:{},body:void 0,mode:void 0,credentials:void 0,cache:void 0,redirect:void 0,referrer:void 0,referrerPolicy:void 0,integrity:void 0,onProcessMinLen:0},t)}var g_=function(t){ys(r,t);var i=_s(r);function r(){var n;return _t(this,r),n=i.call(this),M(Z(n),"_xhr",null),M(Z(n),"_aborted",!1),M(Z(n),"_timeoutTimer",null),M(Z(n),"_range",null),M(Z(n),"_receivedLength",0),M(Z(n),"_url",null),M(Z(n),"_onProgress",null),M(Z(n),"_index",-1),M(Z(n),"_headers",null),M(Z(n),"_currentChunkSizeKB",384),M(Z(n),"_timeout",null),M(Z(n),"_xhr",null),M(Z(n),"_withCredentials",null),M(Z(n),"_startTime",-1),M(Z(n),"_loadCompleteResolve",null),M(Z(n),"_loadCompleteReject",null),M(Z(n),"_runing",!1),M(Z(n),"_logger",!1),M(Z(n),"_vid",""),M(Z(n),"_responseType",void 0),M(Z(n),"_credentials",void 0),M(Z(n),"_method",void 0),M(Z(n),"_transformResponse",void 0),M(Z(n),"_firstRtt",void 0),M(Z(n),"_onCancel",null),M(Z(n),"_priOptions",null),n}return St(r,[{key:"load",value:function(e){var s=this;clearTimeout(this._timeoutTimer),this._logger=e.logger,this._range=e.range,this._onProgress=e.onProgress,this._index=e.index,this._headers=e.headers,this._withCredentials=e.credentials==="include"||e.credentials==="same-origin",this._body=e.body||null,e.method&&(this._method=e.method),this._timeout=e.timeout||null,this._runing=!0,this._vid=e.vid||e.url,this._responseType=e.responseType,this._firstRtt=-1,this._onTimeout=e.onTimeout,this._onCancel=e.onCancel,this._request=e.request,this._priOptions=e.priOptions||{},this._logger.debug("xhrLoader task, range",this._range),this._url=jv(e.url,e.params);var a=Date.now();return new Promise(function(o,u){s._loadCompleteResolve=o,s._loadCompleteReject=u,s._startLoad()}).catch(function(o){if(clearTimeout(s._timeoutTimer),s._runing=!1,!s._aborted)throw o=o instanceof nn?o:new nn(s._url,s._request),o.startTime=a,o.endTime=Date.now(),o.options={index:s._index,vid:s._vid,priOptions:s._priOptions},o})}},{key:"_startLoad",value:function(){var e=null;if(this._responseType===cs.ARRAY_BUFFER&&this._range&&this._range.length>1)if(this._onProgress){this._firstRtt=-1;var s=this._currentChunkSizeKB*1024,a=this._range[0]+this._receivedLength,o=this._range[1];s<this._range[1]-a&&(o=a+s),e=[a,o],this._logger.debug("[xhr_loader->],tast :",this._range,", SubRange, ",e)}else e=this._range,this._logger.debug("[xhr_loader->],tast :",this._range,", allRange, ",e);this._internalOpen(e)}},{key:"_internalOpen",value:function(e){var s=this;try{this._startTime=Date.now();var a=this._xhr=new XMLHttpRequest;a.open(this._method||"GET",this._url,!0),a.responseType=this._responseType,this._timeout&&(a.timeout=this._timeout),a.withCredentials=this._withCredentials,a.onload=this._onLoad.bind(this),a.onreadystatechange=this._onReadyStatechange.bind(this),a.onerror=function(l){var c,f,h;s._running=!1;var d=new nn(s._url,s._request,l==null||(c=l.currentTarget)===null||c===void 0?void 0:c.response,"xhr.onerror.status:"+(l==null||(f=l.currentTarget)===null||f===void 0?void 0:f.status)+",statusText,"+(l==null||(h=l.currentTarget)===null||h===void 0?void 0:h.statusText));d.options={index:s._index,range:s._range,vid:s._vid,priOptions:s._priOptions},s._loadCompleteReject(d)},a.ontimeout=function(l){s.cancel();var c=new nn(s._url,s._request,{status:408},"timeout");s._onTimeout&&(c.isTimeout=!0,s._onTimeout(c,{index:s._index,range:s._range,vid:s._vid,priOptions:s._priOptions})),c.options={index:s._index,range:s._range,vid:s._vid,priOptions:s._priOptions},s._loadCompleteReject(c)};var o=this._headers||{},u=Vv(e);u&&(o.Range=u),o&&Object.keys(o).forEach(function(l){a.setRequestHeader(l,o[l])}),this._logger.debug("[xhr.send->] tast,",this._range,",load sub range, ",e),a.send(this._body)}catch(l){l.options={index:this._index,range:e,vid:this._vid,priOptions:this._priOptions},this._loadCompleteReject(l)}}},{key:"_onReadyStatechange",value:function(e){var s=e.target;s.readyState===2&&this._firstRtt<0&&(this._firstRtt=Date.now())}},{key:"_onLoad",value:function(e){var s,a=e.target.status;if(a<200||a>299){var o=new nn(this._url,null,us(us({},e.target.response),{},{status:a}),"bad response,status:"+a);return o.options={index:this._index,range:this._range,vid:this._vid,priOptions:this._priOptions},this._loadCompleteReject(o)}var u=null,l=!1,c,f=((s=this._range)===null||s===void 0?void 0:s.length)>0?this._range[0]:0;if(this._responseType===cs.ARRAY_BUFFER){var h,d=new Uint8Array(e.target.response);if(c=f+this._receivedLength,d&&d.byteLength>0){this._receivedLength+=d.byteLength;var p=Date.now()-this._startTime,m=wl(this._receivedLength,p);this.emit(J.REAL_TIME_SPEED,{speed:m,len:this._receivedLength,time:p,vid:this._vid,index:this._index,range:[c,f+this._receivedLength],priOptions:this._priOptions})}u=d,((h=this._range)===null||h===void 0?void 0:h.length)>1&&this._range[1]&&this._receivedLength<this._range[1]-this._range[0]?l=!1:l=!0,this._logger.debug("[xhr load done->], tast :",this._range,", start",c,"end ",f+this._receivedLength,",dataLen,",d?d.byteLength:0,",receivedLength",this._receivedLength,",index,",this._index,", done,",l)}else l=!0,u=e.target.response;var _={ok:a>=200&&a<300,status:a,statusText:this._xhr.statusText,url:this._xhr.responseURL,headers:this._getHeaders(this._xhr),body:this._xhr.response};this._transformResponse&&(_=this._transformResponse(_,this._url)||_),this._onProgress&&this._onProgress(u,l,{index:this._index,vid:this._vid,range:[c,f+this._receivedLength],startTime:this._startTime,endTime:Date.now(),priOptions:this._priOptions},_),l?(this._runing=!1,this._loadCompleteResolve&&this._loadCompleteResolve(kl(this._onProgress?null:u,l,_,_.headers["content-length"],_.headers.age,this._startTime,this._firstRtt,this._index,this._range,this._vid,this._priOptions))):this._startLoad()}},{key:"cancel",value:function(){if(!this._aborted&&(this._aborted=!0,this._runing=!1,aa(kr(r.prototype),"removeAllListeners",this).call(this),this._onCancel&&this._onCancel({index:this._index,range:this._range,vid:this._vid,priOptions:this._priOptions}),this._xhr))return this._xhr.abort()}},{key:"receiveLen",get:function(){return this._receivedLength}},{key:"running",get:function(){return this._running},set:function(e){this._running=e}},{key:"_getHeaders",value:function(e){var s=e.getAllResponseHeaders().trim().split(`\r
`),a={},o=s_(s),u;try{for(o.s();!(u=o.n()).done;){var l=u.value,c=l.split(": ");a[c[0].toLowerCase()]=c.slice(1).join(": ")}}catch(f){o.e(f)}finally{o.f()}return a}}],[{key:"isSupported",value:function(){return typeof XMLHttpRequest<"u"}}]),r}(gi),m_=["retry","retryDelay","onRetryError","transformError"],y_=function(){function t(i,r){_t(this,t),this.promise=Fr(),this.alive=!!r.onProgress,!r.logger&&(r.logger=new on("Loader")),this._loaderType=i,this._loader=i===fr.FETCH&&typeof fetch<"u"?new Tl:new g_,this._config=r,this._retryCount=0,this._retryTimer=null,this._canceled=!1,this._retryCheckFunc=r.retryCheckFunc,this._logger=r.logger}return St(t,[{key:"exec",value:function(){var r=this,n=this._config,e=n.retry,s=n.retryDelay,a=n.onRetryError,o=n.transformError,u=t_(n,m_),l=function(){var c=yn(Ue().mark(function f(){var h,d,p;return Ue().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.prev=0,_.next=3,r._loader.load(u);case 3:h=_.sent,r.promise.resolve(h),_.next=27;break;case 7:if(_.prev=7,_.t0=_.catch(0),r._loader.running=!1,r._logger.debug("[task request catch err]",_.t0),!r._canceled){_.next=13;break}return _.abrupt("return");case 13:if(_.t0.loaderType=r._loaderType,_.t0.retryCount=r._retryCount,d=_.t0,o&&(d=o(d)||d),a&&r._retryCount>0&&a(d,r._retryCount,{index:u.index,vid:u.vid,range:u.range,priOptions:u.priOptions}),r._retryCount++,p=!0,r._retryCheckFunc&&(p=r._retryCheckFunc(_.t0)),!(p&&r._retryCount<=e)){_.next=26;break}return clearTimeout(r._retryTimer),r._logger.debug("[task request setTimeout],retry",r._retryCount,",retry range,",u.range),r._retryTimer=setTimeout(l,s),_.abrupt("return");case 26:r.promise.reject(d);case 27:case"end":return _.stop()}},f,null,[[0,7]])}));return function(){return c.apply(this,arguments)}}();return l(),this.promise}},{key:"cancel",value:function(){var i=yn(Ue().mark(function n(){return Ue().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return clearTimeout(this._retryTimer),this._canceled=!0,this._loader.running=!1,s.abrupt("return",this._loader.cancel());case 4:case"end":return s.stop()}},n,this)}));function r(){return i.apply(this,arguments)}return r}()},{key:"running",get:function(){return this._loader&&this._loader.running}},{key:"loader",get:function(){return this._loader}}]),t}();function __(t){return t&&!t.paused&&!t.ended&&t.playbackRate!==0&&t.readyState!==0}function S_(t){if(!t)return{};if(typeof t.getVideoPlaybackQuality=="function"){var i=t.getVideoPlaybackQuality();return{droppedVideoFrames:i.droppedVideoFrames||i.corruptedVideoFrames,totalVideoFrames:i.totalVideoFrames,creationTime:i.creationTime}}return{droppedVideoFrames:t.webkitDroppedFrameCount,totalVideoFrames:t.webkitDecodedFrameCount,creationTime:performance.now()}}function oa(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];if(i=i.filter(Boolean),i.length<2)return i[0];var n=new Uint8Array(i.reduce(function(s,a){return s+a.byteLength},0)),e=0;return i.forEach(function(s){n.set(s,e),e+=s.byteLength}),n}function E_(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return new Promise(function(i){return setTimeout(i,t)})}var ii=function(t){ys(r,t);var i=_s(r);function r(n){var e;return _t(this,r),e=i.call(this,n),M(Z(e),"type",fr.FETCH),M(Z(e),"_queue",[]),M(Z(e),"_alive",[]),M(Z(e),"_currentTask",null),M(Z(e),"_finnalUrl",""),M(Z(e),"_config",void 0),e._config=v_(n),(e._config.loaderType===fr.XHR||!Tl.isSupported())&&(e.type=fr.XHR),e.log=n.logger,e}return St(r,[{key:"isFetch",value:function(){return this.type===fr.FETCH}},{key:"load",value:function(e){var s=this,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};typeof e=="string"||!e?a.url=e||a.url||this._config.url:a=e,a=Object.assign({},this._config,a),a.params&&(a.params=Object.assign({},a.params)),a.headers&&Dh(a.headers)&&(a.headers=Object.assign({},a.headers)),a.body&&Dh(a.body)&&(a.body=Object.assign({},a.body)),a.transformRequest&&(a=a.transformRequest(a)||a),a.logger=this.log;var o=new y_(this.type,a);return o.loader.on(J.REAL_TIME_SPEED,function(u){s.emit(J.REAL_TIME_SPEED,u)}),this._queue.push(o),this._queue.length===1&&(!this._currentTask||!this._currentTask.running)&&this._processTask(),o.promise}},{key:"cancel",value:function(){var n=yn(Ue().mark(function s(){var a;return Ue().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return a=this._queue.map(function(l){return l.cancel()}).concat(this._alive.map(function(l){return l.cancel()})),this._currentTask&&a.push(this._currentTask.cancel()),this._queue=[],this._alive=[],u.next=6,Promise.all(a);case 6:return u.next=8,E_();case 8:case"end":return u.stop()}},s,this)}));function e(){return n.apply(this,arguments)}return e}()},{key:"_processTask",value:function(){var e=this;if(this._currentTask=this._queue.shift(),!!this._currentTask){this._currentTask.alive&&this._alive.push(this._currentTask);var s=this._currentTask.exec().catch(function(a){});s&&typeof s.finally=="function"&&s.finally(function(){var a,o;(a=e._currentTask)!==null&&a!==void 0&&a.alive&&((o=e._alive)===null||o===void 0?void 0:o.length)>0&&(e._alive=e._alive.filter(function(u){return u&&u!==e._currentTask})),e._processTask()})}}}],[{key:"isFetchSupport",value:function(){return Tl.isSupported()}}]),r}(gi),k_=function(){function t(){_t(this,t),M(this,"_prevCurrentTime",0)}return St(t,[{key:"do",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:3,e=arguments.length>2?arguments[2]:void 0,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1;if(r){var a=r.currentTime,o=0;if(this._prevCurrentTime===a){var u=at.info(at.get(r),a);if(!u.buffers.length)return;e&&u.nextStart||u.nextStart&&u.nextStart-a<n?o=u.nextStart+.1:u.end&&u.end-a>s&&!r.seeking&&(o=a+.1)}this._prevCurrentTime=a,o&&a!==o&&(r.currentTime=o)}}}]),t}(),w_=function(){function t(i){var r=this;_t(this,t),M(this,"_seiSet",new Set),this.emitter=i,i.on(J.SEI,function(n){n&&r._seiSet.add(n)})}return St(t,[{key:"throw",value:function(r,n){var e=this;if(!(r==null||!this._seiSet.size)){var s=r-.2,a=r+.2,o=[];this._seiSet.forEach(function(u){u.time>=s&&u.time<=a&&o.push(u)}),o.forEach(function(u){e._seiSet.delete(u),e.emitter.emit(J.SEI_IN_TIME,u)}),n&&this._seiSet.forEach(function(u){u.time<r-5&&e._seiSet.delete(u)})}}},{key:"reset",value:function(){this._seiSet.clear()}}]),t}(),T_=function(){function t(){_t(this,t),M(this,"_chunkSpeeds",[]),M(this,"_speeds",[])}return St(t,[{key:"addRecord",value:function(r,n){!r||!n||(this._speeds.push(8e3*r/n),this._speeds=this._speeds.slice(-3))}},{key:"addChunkRecord",value:function(r,n){!r||!n||(this._chunkSpeeds.push(8e3*r/n),this._chunkSpeeds=this._chunkSpeeds.slice(-100))}},{key:"getAvgSpeed",value:function(){return!this._chunkSpeeds.length&&!this._speeds.length?0:this._speeds.length?this._speeds.reduce(function(r,n){return r+=n})/this._speeds.length:this._chunkSpeeds.reduce(function(r,n){return r+=n})/this._chunkSpeeds.length}},{key:"getLatestSpeed",value:function(){return!this._chunkSpeeds.length&&!this._speeds.length?0:this._speeds.length?this._speeds[this._speeds.length-1]:this._chunkSpeeds[this._chunkSpeeds.length-1]}},{key:"reset",value:function(){this._chunkSpeeds=[],this._speeds=[]}}]),t}(),Mh=function(){function t(i){_t(this,t),M(this,"encodeType",""),M(this,"audioCodec",""),M(this,"videoCodec",""),M(this,"domain",""),M(this,"fps",0),M(this,"bitrate",0),M(this,"width",0),M(this,"height",0),M(this,"samplerate",0),M(this,"channelCount",0),M(this,"gop",0),M(this,"_bitsAccumulateSize",0),M(this,"_bitsAccumulateDuration",0),M(this,"_startGopId",-1),this._timescale=i}return St(t,[{key:"getStats",value:function(){return{encodeType:this.encodeType,audioCodec:this.audioCodec,videoCodec:this.videoCodec,domain:this.domain,fps:this.fps,bitrate:this.bitrate,width:this.width,height:this.height,samplerate:this.samplerate,channelCount:this.channelCount,gop:this.gop}}},{key:"setEncodeType",value:function(r){this.encodeType=r}},{key:"setFpsFromScriptData",value:function(r){var n,e=r.data,s=e==null||(n=e.onMetaData)===null||n===void 0?void 0:n.framerate;s&&s>0&&s<100&&(this.fps=s)}},{key:"setVideoMeta",value:function(r){if(this.width=r.width,this.height=r.height,this.videoCodec=r.codec,this.encodeType=r.codecType,r.fpsNum&&r.fpsDen){var n=r.fpsNum/r.fpsDen;n>0&&n<100&&(this.fps=n)}}},{key:"setAudioMeta",value:function(r){this.audioCodec=r.codec,this.samplerate=r.sampleRate,this.channelCount=r.channelCount}},{key:"setDomain",value:function(r){this.domain=r.split("/").slice(2,3)[0]}},{key:"updateBitrate",value:function(r){var n=this;if((!this.fps||this.fps>=100)&&r.length){var e=r.reduce(function(s,a){return s+=a.duration},0)/r.length;this.fps=Math.round(this._timescale/e)}r.forEach(function(s){n._startGopId===-1&&(n._startGopId=s.gopId),s.gopId===n._startGopId&&n.gop++,n._bitsAccumulateDuration+=s.duration/(n._timescale/1e3),n._bitsAccumulateSize+=s.units.reduce(function(a,o){return a+=o.length},0),n._bitsAccumulateDuration>=1e3&&(n.bitrate=n._bitsAccumulateSize*8,n._bitsAccumulateDuration=0,n._bitsAccumulateSize=0)})}}]),t}(),C_=function(){function t(i){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e3;_t(this,t),M(this,"_core",null),M(this,"_samples",[]),this._core=i,this._timescale=r,this._stats=new Mh(r),this._bindEvents()}return St(t,[{key:"getStats",value:function(){var r,n,e,s,a,o,u,l=((r=this._core)===null||r===void 0?void 0:r.media)||{},c=l.currentTime,f=c===void 0?0:c,h=l.decodeFps,d=h===void 0?0:h;return us(us({},this._stats.getStats()),{},{downloadSpeed:((n=this._core)===null||n===void 0||(e=n.speedInfo)===null||e===void 0?void 0:e.call(n).speed)||0,avgSpeed:((s=this._core)===null||s===void 0||(a=s.speedInfo)===null||a===void 0?void 0:a.call(s).avgSpeed)||0,currentTime:f,bufferEnd:((o=this._core)===null||o===void 0||(u=o.bufferInfo())===null||u===void 0?void 0:u.remaining)||0,decodeFps:d})}},{key:"_bindEvents",value:function(){var r=this;this._core.on(J.DEMUXED_TRACK,function(n){var e=n.videoTrack;return r._stats.updateBitrate(e.samples)}),this._core.on(J.FLV_SCRIPT_DATA,function(n){r._stats.setFpsFromScriptData(n)}),this._core.on(J.METADATA_PARSED,function(n){n.type==="video"?r._stats.setVideoMeta(n.track):r._stats.setAudioMeta(n.track)}),this._core.on(J.TTFB,function(n){r._stats.setDomain(n.responseUrl)})}},{key:"reset",value:function(){this._samples=[],this._stats=new Mh(this._timescale)}}]),t}();function b_(t,i){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,e,s,a,o=[],u=!0,l=!1;try{if(s=(r=r.call(t)).next,i!==0)for(;!(u=(n=s.call(r)).done)&&(o.push(n.value),o.length!==i);u=!0);}catch(c){l=!0,e=c}finally{try{if(!u&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw e}}return o}}function Re(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}function Nh(t,i){for(var r=0;r<i.length;r++){var n=i[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Wv(n.key),n)}}function Me(t,i,r){return i&&Nh(t.prototype,i),r&&Nh(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function B(t,i,r){return i=Wv(i),i in t?Object.defineProperty(t,i,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[i]=r,t}function P_(t,i){if(typeof i!="function"&&i!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(i&&i.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),i&&Cl(t,i)}function Ga(t){return Ga=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Ga(t)}function Cl(t,i){return Cl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,e){return n.__proto__=e,n},Cl(t,i)}function x_(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function A_(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function I_(t,i){if(i&&(typeof i=="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return A_(t)}function L_(t){var i=x_();return function(){var n=Ga(t),e;if(i){var s=Ga(this).constructor;e=Reflect.construct(n,arguments,s)}else e=n.apply(this,arguments);return I_(this,e)}}function D_(t,i){return R_(t)||b_(t,i)||Gv(t,i)||F_()}function Et(t){return O_(t)||M_(t)||Gv(t)||N_()}function O_(t){if(Array.isArray(t))return bl(t)}function R_(t){if(Array.isArray(t))return t}function M_(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Gv(t,i){if(t){if(typeof t=="string")return bl(t,i);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return bl(t,i)}}function bl(t,i){(i==null||i>t.length)&&(i=t.length);for(var r=0,n=new Array(i);r<i;r++)n[r]=t[r];return n}function N_(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function F_(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function B_(t,i){if(typeof t!="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,i||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(t)}function Wv(t){var i=B_(t,"string");return typeof i=="symbol"?i:String(i)}var $n={VIDEO:"video",AUDIO:"audio",METADATA:"metadata"},vr={AVC:"avc",HEVC:"hevc"},Wa={AAC:"aac",G711PCMA:"g7110a",G711PCMU:"g7110m"},Rt={LARGE_AV_SHIFT:"LARGE_AV_SHIFT",LARGE_VIDEO_GAP:"LARGE_VIDEO_GAP",LARGE_VIDEO_GAP_BETWEEN_CHUNK:"LARGE_VIDEO_GAP_BETWEEN_CHUNK",LARGE_AUDIO_GAP:"LARGE_AUDIO_GAP",AUDIO_FILLED:"AUDIO_FILLED",AUDIO_DROPPED:"AUDIO_DROPPED"},$v=function(){function t(){Re(this,t),B(this,"id",1),B(this,"type",$n.VIDEO),B(this,"codecType",vr.AVC),B(this,"pid",-1),B(this,"hvcC",void 0),B(this,"codec",""),B(this,"timescale",0),B(this,"formatTimescale",0),B(this,"sequenceNumber",0),B(this,"baseMediaDecodeTime",0),B(this,"baseDts",0),B(this,"duration",0),B(this,"warnings",[]),B(this,"samples",[]),B(this,"pps",[]),B(this,"sps",[]),B(this,"vps",[]),B(this,"fpsNum",0),B(this,"fpsDen",0),B(this,"sarRatio",[]),B(this,"width",0),B(this,"height",0),B(this,"nalUnitSize",4),B(this,"present",!1),B(this,"isVideoEncryption",!1),B(this,"isAudioEncryption",!1),B(this,"isVideo",!0),B(this,"kid",null),B(this,"pssh",null),B(this,"ext",void 0)}return Me(t,[{key:"reset",value:function(){this.sequenceNumber=this.width=this.height=this.fpsDen=this.fpsNum=this.duration=this.baseMediaDecodeTime=this.timescale=0,this.codec="",this.present=!1,this.pid=-1,this.pps=[],this.sps=[],this.vps=[],this.sarRatio=[],this.samples=[],this.warnings=[],this.hvcC=null}},{key:"firstDts",get:function(){return this.samples.length?this.samples[0].dts:null}},{key:"firstPts",get:function(){return this.samples.length?this.samples[0].pts:null}},{key:"samplesDuration",get:function(){if(this.samples.length>0){var r=this.samples[0],n=this.samples[this.samples.length-1];return n.dts-r.dts+n.duration}return 0}},{key:"exist",value:function(){return!!(this.pps.length&&this.sps.length&&this.codec)}},{key:"hasSample",value:function(){return!!this.samples.length}},{key:"isEncryption",get:function(){return this.isVideoEncryption}}]),t}(),Kv=function(){function t(){Re(this,t),B(this,"id",2),B(this,"type",$n.AUDIO),B(this,"codecType",Wa.AAC),B(this,"pid",-1),B(this,"codec",""),B(this,"sequenceNumber",0),B(this,"sampleDuration",0),B(this,"timescale",0),B(this,"formatTimescale",0),B(this,"baseMediaDecodeTime",0),B(this,"duration",0),B(this,"warnings",[]),B(this,"samples",[]),B(this,"baseDts",0),B(this,"sampleSize",16),B(this,"sampleRate",0),B(this,"channelCount",0),B(this,"objectType",0),B(this,"sampleRateIndex",0),B(this,"config",[]),B(this,"present",!1),B(this,"isVideoEncryption",!1),B(this,"isAudioEncryption",!1),B(this,"kid",null),B(this,"ext",void 0)}return Me(t,[{key:"reset",value:function(){this.sequenceNumber=0,this.timescale=0,this.sampleDuration=0,this.sampleRate=0,this.channelCount=0,this.baseMediaDecodeTime=0,this.present=!1,this.pid=-1,this.codec="",this.samples=[],this.config=[],this.warnings=[]}},{key:"exist",value:function(){return!!(this.sampleRate&&this.channelCount&&this.codec&&this.codecType===Wa.AAC)}},{key:"hasSample",value:function(){return!!this.samples.length}},{key:"isEncryption",get:function(){return this.isAudioEncryption}},{key:"firstDts",get:function(){return this.samples.length?this.samples[0].dts:null}},{key:"firstPts",get:function(){return this.samples.length?this.samples[0].pts:null}},{key:"samplesDuration",get:function(){if(this.samples.length>0){var r=this.samples[0],n=this.samples[this.samples.length-1];return n.dts-r.dts+n.duration}return 0}}]),t}(),Yv=function(){function t(i,r,n){Re(this,t),B(this,"flag",{}),B(this,"keyframe",!1),B(this,"gopId",0),B(this,"duration",0),B(this,"size",0),B(this,"units",[]),B(this,"chromaFormat",420),this.originPts=this.pts=i,this.originDts=this.dts=r,n&&(this.units=n)}return Me(t,[{key:"cts",get:function(){return this.pts-this.dts}},{key:"setToKeyframe",value:function(){this.keyframe=!0,this.flag.dependsOn=2,this.flag.isNonSyncSample=0}}]),t}(),$a=Me(function t(i,r,n,e){Re(this,t),B(this,"duration",1024),B(this,"flag",{dependsOn:2,isNonSyncSample:0}),B(this,"keyframe",!0),this.originPts=this.pts=this.dts=i,this.data=r,this.size=r.byteLength,this.sampleOffset=e,n&&(this.duration=n)}),U_=Me(function t(i,r){Re(this,t),B(this,"time",0),this.data=i,this.originPts=this.pts=r}),H_=function(t){P_(r,t);var i=L_(r);function r(){return Re(this,r),i.apply(this,arguments)}return Me(r)}(U_),Xv=function(){function t(){Re(this,t),B(this,"id",3),B(this,"type",$n.METADATA),B(this,"timescale",0),B(this,"flvScriptSamples",[]),B(this,"seiSamples",[])}return Me(t,[{key:"exist",value:function(){return!!((this.flvScriptSamples.length||this.seiSamples.length)&&this.timescale)}},{key:"reset",value:function(){this.timescale=0,this.flvScriptSamples=[],this.seiSamples=[]}},{key:"hasSample",value:function(){return!!(this.flvScriptSamples.length||this.seiSamples.length)}}]),t}(),Ka=function(){function t(i){Re(this,t),this.name=i||"",this._prefix="[".concat(this.name,"]")}return Me(t,[{key:"warn",value:function(){var r;if(!t.disabled){for(var n=arguments.length,e=new Array(n),s=0;s<n;s++)e[s]=arguments[s];(r=console).warn.apply(r,[this._prefix].concat(e))}}}],[{key:"enable",value:function(){t.disabled=!1}},{key:"disable",value:function(){t.disabled=!0}}]),t}();B(Ka,"disabled",!0);var So=typeof window<"u",Oc=So&&navigator.userAgent.toLocaleLowerCase(),z_=So&&/^((?!chrome|android).)*safari/.test(Oc),V_=So&&Oc.includes("firefox"),j_=So&&Oc.includes("android"),vn=function(){function t(){Re(this,t)}return Me(t,null,[{key:"getRateIndexByRate",value:function(r){return t.FREQ.indexOf(r)}},{key:"parseADTS",value:function(r,n){for(var e=r.length,s=0;s+2<e&&!(r[s]===255&&(r[s+1]&246)===240);)s++;if(!(s>=e)){var a=s,o=[],u=(r[s+2]&60)>>>2,l=t.FREQ[u];if(!l)throw new Error("Invalid sampling index: ".concat(u));for(var c=((r[s+2]&192)>>>6)+1,f=(r[s+2]&1)<<2|(r[s+3]&192)>>>6,h=t._getConfig(u,f,c),d=h.config,p=h.codec,m,_,v=0,y=t.getFrameDuration(l);s+7<e;){if(r[s]!==255||(r[s+1]&246)!==240){s++;continue}if(_=(r[s+3]&3)<<11|r[s+4]<<3|(r[s+5]&224)>>5,e-s<_)break;m=(~r[s+1]&1)*2,o.push({pts:n+v*y,data:r.subarray(s+7+m,s+_)}),v++,s+=_}return{skip:a,remaining:s>=e?void 0:r.subarray(s),frames:o,samplingFrequencyIndex:u,sampleRate:l,objectType:c,channelCount:f,codec:p,config:d,originCodec:"mp4a.40.".concat(c)}}}},{key:"parseAudioSpecificConfig",value:function(r){if(r.length){var n=r[0]>>>3,e=(r[0]&7)<<1|r[1]>>>7,s=(r[1]&120)>>>3,a=t.FREQ[e];if(a){var o=t._getConfig(e,s,n),u=o.config,l=o.codec;return{samplingFrequencyIndex:e,sampleRate:a,objectType:n,channelCount:s,config:u,codec:l,originCodec:"mp4a.40.".concat(n)}}}}},{key:"getFrameDuration",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:9e4;return 1024*n/r}},{key:"_getConfig",value:function(r,n,e){var s=[],a,o;return V_?r>=6?(a=5,o=r-3):(a=2,o=r):j_?(a=2,o=r):(a=e===2||e===5?e:5,o=r,r>=6?o=r-3:n===1&&(a=2,o=r)),s[0]=a<<3,s[0]|=(r&14)>>1,s[1]=(r&1)<<7,s[1]|=n<<3,a===5&&(s[1]|=(o&14)>>1,s[2]=(o&1)<<7,s[2]|=8,s[3]=0),{config:s,codec:"mp4a.40.".concat(a)}}},{key:"getSilentFrame",value:function(r,n){switch(r){case"mp4a.40.2":if(n===1)return new Uint8Array([0,200,0,128,35,128]);if(n===2)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(n===3)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(n===4)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(n===5)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(n===6)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(n===1)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(n===2)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(n===3)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);break}}}]),t}();B(vn,"FREQ",[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350]);function Lt(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];i=i.filter(Boolean);var n=new Uint8Array(i.reduce(function(s,a){return s+a.byteLength},0)),e=0;return i.forEach(function(s){n.set(s,e),e+=s.byteLength}),n}var G_=Math.pow(2,32);function Se(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(t[i]<<8)+(t[i+1]||0)}function W_(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(t[i]<<16)+(t[i+1]<<8)+(t[i+2]||0)}function j(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(t[i]<<24>>>0)+(t[i+1]<<16)+(t[i+2]<<8)+(t[i+3]||0)}function In(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return j(t,i)*G_+j(t,i+4)}function Qv(t){for(var i="avc1.",r,n=0;n<3;n++)r=t[n].toString(16),r.length<2&&(r="0".concat(r)),i+=r;return i}function Fh(t){if(!Array.isArray(t)){for(var i=[],r="",n=0;n<t.length;n++)n%2&&(r=t[n-1]+t[n],i.push(parseInt(r,16)),r="");return i}return t.map(function(e){return parseInt(e,16)})}var Mn=function(){function t(){Re(this,t)}return Me(t,null,[{key:"parseAnnexB",value:function(r){for(var n=r.length,e=2,s=0;r[e]!==null&&r[e]!==void 0&&r[e]!==1;)e++;if(e++,s=e+2,s>=n)return[];for(var a=[];s<n;)switch(r[s]){case 0:if(r[s-1]!==0){s+=2;break}else if(r[s-2]!==0){s++;break}e!==s-2&&a.push(r.subarray(e,s-2));do s++;while(r[s]!==1&&s<n);e=s+1,s=e+2;break;case 1:if(r[s-1]!==0||r[s-2]!==0){s+=3;break}e!==s-2&&a.push(r.subarray(e,s-2)),e=s+1,s=e+2;break;default:s+=3;break}return e<n&&a.push(r.subarray(e)),a}},{key:"parseAvcC",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:4;if(!(r.length<4)){for(var e=r.length,s=[],a=0,o;a+n<e;)if(o=j(r,a),n===3&&(o>>>=8),a+=n,!!o){if(a+o>e)break;s.push(r.subarray(a,a+o)),a+=o}return s}}},{key:"parseSEI",value:function(r,n){for(var e=r.length,s=n?2:1,a=0,o=0,u="";r[s]===255;)a+=255,s++;for(a+=r[s++];r[s]===255;)o+=255,s++;if(o+=r[s++],a===5&&e>s+16)for(var l=0;l<16;l++)u+=r[s].toString(16),s++;return{payload:r.subarray(s,s+o),type:a,size:o,uuid:u}}},{key:"removeEPB",value:function(r){for(var n=r.byteLength,e=[],s=1;s<n-2;)r[s]===0&&r[s+1]===0&&r[s+2]===3?(e.push(s+2),s+=2):s++;if(!e.length)return r;var a=n-e.length,o=new Uint8Array(a),u=0;for(s=0;s<a;u++,s++)u===e[0]&&(u++,e.shift()),o[s]=r[u];return o}}]),t}(),Pl=function(){function t(i){if(Re(this,t),B(this,"_bytesAvailable",void 0),B(this,"_bitsAvailable",0),B(this,"_word",0),!i)throw new Error("ExpGolomb data params is required");this._data=i,this._bytesAvailable=i.byteLength,this._bytesAvailable&&this._loadWord()}return Me(t,[{key:"bitsAvailable",get:function(){return this._bitsAvailable}},{key:"_loadWord",value:function(){var r=this._data.byteLength-this._bytesAvailable,n=Math.min(4,this._bytesAvailable);if(n===0)throw new Error("No bytes available");var e=new Uint8Array(4);e.set(this._data.subarray(r,r+n)),this._word=new DataView(e.buffer).getUint32(0),this._bitsAvailable=n*8,this._bytesAvailable-=n}},{key:"skipBits",value:function(r){if(this._bitsAvailable>r)this._word<<=r,this._bitsAvailable-=r;else{r-=this._bitsAvailable;var n=Math.floor(r/8);r-=n*8,this._bytesAvailable-=n,this._loadWord(),this._word<<=r,this._bitsAvailable-=r}}},{key:"readBits",value:function(r){if(r>32)throw new Error("Cannot read more than 32 bits");var n=Math.min(this._bitsAvailable,r),e=this._word>>>32-n;return this._bitsAvailable-=n,this._bitsAvailable>0?this._word<<=n:this._bytesAvailable>0&&this._loadWord(),n=r-n,n>0&&this._bitsAvailable?e<<n|this.readBits(n):e}},{key:"skipLZ",value:function(){var r;for(r=0;r<this._bitsAvailable;++r)if(this._word&2147483648>>>r)return this._word<<=r,this._bitsAvailable-=r,r;return this._loadWord(),r+this.skipLZ()}},{key:"skipUEG",value:function(){this.skipBits(1+this.skipLZ())}},{key:"readUEG",value:function(){var r=this.skipLZ();return this.readBits(r+1)-1}},{key:"readEG",value:function(){var r=this.readUEG();return 1&r?1+r>>>1:-1*(r>>>1)}},{key:"readBool",value:function(){return this.readBits(1)===1}},{key:"readUByte",value:function(){return this.readBits(8)}},{key:"skipScalingList",value:function(r){for(var n=8,e=8,s,a=0;a<r;a++)e!==0&&(s=this.readEG(),e=(n+s+256)%256),n=e===0?n:e}}]),t}(),$_=function(){function t(){Re(this,t)}return Me(t,null,[{key:"parseAVCDecoderConfigurationRecord",value:function(r){if(!(r.length<7)){for(var n=(r[4]&3)+1,e,s=[],a=[],o=6,u=r[5]&31,l,c=0;c<u;c++)if(l=r[o]<<8|r[o+1],o+=2,!!l){var f=r.subarray(o,o+l);o+=l,s.push(f),e||(e=t.parseSPS(Mn.removeEPB(f)))}var h=r[o];o++;for(var d,p=0;p<h;p++)d=r[o]<<8|r[o+1],o+=2,d&&(a.push(r.subarray(o,o+d)),o+=d);return{sps:e,spsArr:s,ppsArr:a,nalUnitSize:n}}}},{key:"parseSPS",value:function(r){var n=new Pl(r);n.readUByte();var e=n.readUByte(),s=n.readUByte(),a=n.readUByte();n.skipUEG();var o=420;if(e===100||e===110||e===122||e===244||e===44||e===83||e===86||e===118||e===128||e===138||e===144){var u=n.readUEG();if(u<=3&&(o=[0,420,422,444][u]),u===3&&n.skipBits(1),n.skipUEG(),n.skipUEG(),n.skipBits(1),n.readBool())for(var l=u!==3?8:12,c=0;c<l;c++)n.readBool()&&(c<6?n.skipScalingList(16):n.skipScalingList(64))}n.skipUEG();var f=n.readUEG();if(f===0)n.readUEG();else if(f===1){n.skipBits(1),n.skipUEG(),n.skipUEG();for(var h=n.readUEG(),d=0;d<h;d++)n.skipUEG()}n.skipUEG(),n.skipBits(1);var p=n.readUEG(),m=n.readUEG(),_=n.readBits(1);_===0&&n.skipBits(1),n.skipBits(1);var v=0,y=0,S=0,E=0;n.readBool()&&(v=n.readUEG(),y=n.readUEG(),S=n.readUEG(),E=n.readUEG());var T,A,P,D,F;if(n.readBool()){if(n.readBool()){var I=n.readUByte();switch(I){case 1:T=[1,1];break;case 2:T=[12,11];break;case 3:T=[10,11];break;case 4:T=[16,11];break;case 5:T=[40,33];break;case 6:T=[24,11];break;case 7:T=[20,11];break;case 8:T=[32,11];break;case 9:T=[80,33];break;case 10:T=[18,11];break;case 11:T=[15,11];break;case 12:T=[64,33];break;case 13:T=[160,99];break;case 14:T=[4,3];break;case 15:T=[3,2];break;case 16:T=[2,1];break;case 255:{T=[n.readUByte()<<8|n.readUByte(),n.readUByte()<<8|n.readUByte()];break}}}if(n.readBool()&&n.readBool(),n.readBool()&&(n.readBits(4),n.readBool()&&n.readBits(24)),n.readBool()&&(n.readUEG(),n.readUEG()),n.readBool()){var X=n.readBits(32),k=n.readBits(32);A=n.readBool(),P=k,D=X*2,F=P/D}}return{codec:Qv(r.subarray(1,4)),profileIdc:e,profileCompatibility:s,levelIdc:a,chromaFormat:o,width:Math.ceil((p+1)*16-2*(v+y)),height:(2-_)*(m+1)*16-(_?2:4)*(S+E),sarRatio:T,fpsNum:P,fpsDen:D,fps:F,fixedFrame:A}}}]),t}(),Bh=function(){function t(){Re(this,t)}return Me(t,null,[{key:"parseHEVCDecoderConfigurationRecord",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!(r.length<23)){n=n||{};for(var e=(r[21]&3)+1,s,a,o=[],u=[],l=[],c=23,f=r[22],h,d,p,m=0;m<f;m++){h=r[c]&63,d=r[c+1]<<8|r[c+2],c+=3;for(var _=0;_<d;_++)if(p=r[c]<<8|r[c+1],c+=2,!!p){switch(h){case 32:{var v=r.subarray(c,c+p);s||(s=t.parseVPS(Mn.removeEPB(v),n)),l.push(v)}break;case 33:{var y=r.subarray(c,c+p);a||(a=t.parseSPS(Mn.removeEPB(y),n)),o.push(y)}break;case 34:u.push(r.subarray(c,c+p));break}c+=p}}return{hvcC:n,sps:a,spsArr:o,ppsArr:u,vpsArr:l,nalUnitSize:e}}}},{key:"parseVPS",value:function(r,n){n=n||{};var e=new Pl(r);e.readUByte(),e.readUByte(),e.readBits(12);var s=e.readBits(3);return n.numTemporalLayers=Math.max(n.numTemporalLayers||0,s+1),e.readBits(17),t._parseProfileTierLevel(e,s,n),n}},{key:"parseSPS",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};n=n||{};var e=new Pl(r);e.readUByte(),e.readUByte(),e.readBits(4);var s=e.readBits(3);n.numTemporalLayers=Math.max(s+1,n.numTemporalLayers||0),n.temporalIdNested=e.readBits(1),t._parseProfileTierLevel(e,s,n),e.readUEG();var a=n.chromaFormatIdc=e.readUEG(),o=420;a<=3&&(o=[0,420,422,444][a]);var u=0;a===3&&(u=e.readBits(1));var l=e.readUEG(),c=e.readUEG(),f=e.readBits(1),h,d,p,m;if(f===1&&(h=e.readUEG(),d=e.readUEG(),p=e.readUEG(),m=e.readUEG()),n.bitDepthLumaMinus8=e.readUEG(),n.bitDepthChromaMinus8=e.readUEG(),f===1){var _=(a===1||a===2)&&u===0?2:1,v=a===1&&u===0?2:1;l-=_*(d+h),c-=v*(m+p)}return{codec:"hev1.1.6.L93.B0",width:l,height:c,chromaFormat:o,hvcC:n}}},{key:"_parseProfileTierLevel",value:function(r,n,e){var s=e.generalTierFlag||0;e.generalProfileSpace=r.readBits(2),e.generalTierFlag=Math.max(r.readBits(1),s),e.generalProfileIdc=Math.max(r.readBits(5),e.generalProfileIdc||0),e.generalProfileCompatibilityFlags=r.readBits(32),e.generalConstraintIndicatorFlags=[r.readBits(8),r.readBits(8),r.readBits(8),r.readBits(8),r.readBits(8),r.readBits(8)];var a=r.readBits(8);s<e.generalTierFlag?e.generalLevelIdc=a:e.generalLevelIdc=Math.max(a,e.generalLevelIdc||0);var o=[],u=[];if(n>r.bitsAvailable)throw new Error("maxSubLayersMinus inavlid size ".concat(n));for(var l=0;l<n;l++)o[l]=r.readBits(1),u[l]=r.readBits(1);n>0&&r.readBits((8-n)*2);for(var c=0;c<n;c++)o[c]!==0&&(r.readBits(2),r.readBits(1),r.readBits(5),r.readBits(16),r.readBits(16),r.readBits(4),r.readBits(16),r.readBits(16),r.readBits(12)),u[c]!==0&&r.readBits(8)}}]),t}(),K_=9e4/2,Uh=3,pu=9e4,vu=5*9e4,gu=9e4,Y_=9e4/2,X_=function(){function t(i,r,n){Re(this,t),this.videoTrack=i,this.audioTrack=r,this.metadataTrack=n,this._baseDts=-1,this._baseDtsInited=!1,this._audioNextPts=void 0,this._videoNextDts=void 0,this._audioTimestampBreak=!1,this._videoTimestampBreak=!1,this._lastAudioExceptionGapDot=0,this._lastAudioExceptionOverlapDot=0,this._lastAudioExceptionLargeGapDot=0}return Me(t,[{key:"fix",value:function(){var r=this,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;n=Math.round(n*9e4);var a=this.videoTrack,o=this.audioTrack,u=a.samples,l=o.samples;if(!(!u.length&&!l.length)){var c=u[0],f=l[0],h=0;if(u.length&&l.length&&(h=c.dts-f.pts),this._baseDtsInited||this._calculateBaseDts(this.audioTrack,this.videoTrack),e&&(this._calculateBaseDts(this.audioTrack,this.videoTrack),this._baseDts-=n),!s){this._videoNextDts=h>0?n+h:n,this._audioNextPts=h>0?n:n-h;var d=c?c.dts-this._baseDts-this._videoNextDts:0,p=f?f.pts-this._baseDts-this._audioNextPts:0;Math.abs(d||p)>gu&&(this._calculateBaseDts(this.audioTrack,this.videoTrack),this._baseDts-=n)}if(this._resetBaseDtsWhenStreamBreaked(),this._fixAudio(o),this._fixVideo(a),this.metadataTrack.exist()){var m=this.metadataTrack.timescale;this.metadataTrack.seiSamples.forEach(function(_){_.pts=_.originPts-r._baseDts,_.time=Math.max(0,_.pts)/m})}a.samples.length&&(a.baseMediaDecodeTime=a.samples[0].dts),o.samples.length&&(o.baseMediaDecodeTime=o.samples[0].pts*o.timescale/9e4)}}},{key:"_fixVideo",value:function(r){var n=this,e=r.samples;if(e.length){if(e.forEach(function(P){P.dts-=n._baseDts,P.pts-=n._baseDts}),this._videoNextDts===void 0){var s=e[0];this._videoNextDts=s.dts}var a=e.length,o=0,u=e[0],l=e[1],c=this._videoNextDts-u.dts;if(Math.abs(c)>Y_){var f;if(r.warnings.push({type:Rt.LARGE_VIDEO_GAP_BETWEEN_CHUNK,nextDts:this._videoNextDts/90,firstSampleDts:u.dts/90,nextSampleDts:(((f=e[1])===null||f===void 0?void 0:f.dts)||0)/90,sampleDuration:c/90}),u.dts+=c,u.pts+=c,l&&Math.abs(l.dts-u.dts)>gu)this._videoTimestampBreak=!0,e.forEach(function(P,D){D!==0&&(P.dts+=c,P.pts+=c)});else for(var h=1;h<a-1;h++){var d,p=(d=e[h])===null||d===void 0?void 0:d.dts,m=e[h-1].dts;p&&p-m<0&&(e[h].dts+=c,e[h].pts+=c)}}var _;if(r.fpsNum&&r.fpsDen&&(_=r.timescale*(r.fpsDen/r.fpsNum)),_<90*10&&(_=0),!_){var v=r.samples[0],y=r.samples[1];_=a===1?9e3:Math.floor(y.dts-v.dts)}for(var S=0;S<a;S++){var E=e[S].dts,T=e[S+1];if(S<a-1?o=T.dts-E:e[S-1]?o=Math.min(E-e[S-1].dts,_):o=_,o>gu||o<0){this._videoTimestampBreak=!0,o=this._audioTimestampBreak?_:Math.max(o,30*90);var A=this._audioNextPts||0;T&&T.dts>A&&(o=_),r.warnings.push({type:Rt.LARGE_VIDEO_GAP,time:E/r.timescale,dts:E,originDts:e[S].originDts,nextDts:this._videoNextDts,sampleDuration:o,refSampleDuration:_})}e[S].duration=o,this._videoNextDts+=o}}}},{key:"_fixAudio",value:function(r){var n=this,e=r.samples;e.length&&(e.forEach(function(s){s.pts-=n._baseDts,s.dts=s.pts}),this._doFixAudioInternal(r,e,9e4))}},{key:"_calculateBaseDts",value:function(r,n){var e=r.samples,s=n.samples;if(!e.length&&!s.length)return!1;var a=1/0,o=1/0;e.length&&(r.baseDts=a=e[0].pts),s.length&&(n.baseDts=o=s[0].dts),this._baseDts=Math.min(a,o);var u=o-a;return Number.isFinite(u)&&Math.abs(u)>K_&&n.warnings.push({type:Rt.LARGE_AV_SHIFT,videoBaseDts:o,audioBasePts:a,baseDts:this._baseDts,delta:u}),this._baseDtsInited=!0,!0}},{key:"_resetBaseDtsWhenStreamBreaked",value:function(){if(this._baseDtsInited&&this._videoTimestampBreak&&this._audioTimestampBreak){var r=this._calculateBaseDts(this.audioTrack,this.videoTrack);if(!r)return;this._baseDts-=Math.min(this._audioNextPts,this._videoNextDts),this._audioLastSample=null,this._videoLastSample=null,this._videoTimestampBreak=!1,this._audioTimestampBreak=!1}}},{key:"_doFixAudioInternal",value:function(r,n,e){r.sampleDuration||(r.sampleDuration=vn.getFrameDuration(r.timescale,e));var s=r.sampleDuration;if(this._audioNextPts===void 0){var a=n[0];this._audioNextPts=a.pts}for(var o=0;o<n.length;o++){var u=this._audioNextPts,l=n[o],c=l.pts-u;if(!this._audioTimestampBreak&&c>=Uh*s&&c<=pu&&!z_){var f=vn.getSilentFrame(r.codec,r.channelCount)||n[0].data.subarray(),h=Math.floor(c/s);Math.abs(l.pts-this._lastAudioExceptionGapDot)>vu&&(this._lastAudioExceptionGapDot=l.pts),r.warnings.push({type:Rt.AUDIO_FILLED,pts:l.pts/90,originPts:l.originPts,count:h,nextPts:u/90,refSampleDuration:s});for(var d=0;d<h;d++){var p=new $a(Math.floor(u),f);p.originPts=Math.floor(this._baseDts+u),n.splice(o,0,p),this._audioNextPts+=s,o++}o--}else c<=-Uh*s&&c>=-1*pu?(Math.abs(l.pts-this._lastAudioExceptionOverlapDot)>vu&&(this._lastAudioExceptionOverlapDot=l.pts,r.warnings.push({type:Rt.AUDIO_DROPPED,pts:l.pts/90,originPts:l.originPts,nextPts:u/90,refSampleDuration:s})),n.splice(o,1),o--):(Math.abs(c)>=pu&&(this._audioTimestampBreak=!0,Math.abs(l.pts-this._lastAudioExceptionLargeGapDot)>vu&&(this._lastAudioExceptionLargeGapDot=l.pts,r.warnings.push({type:Rt.LARGE_AUDIO_GAP,time:l.pts/1e3,pts:l.pts/90,originPts:l.originPts,nextPts:u/90,sampleDuration:c,refSampleDuration:s}))),l.dts=l.pts=u,this._audioNextPts+=s)}}}]),t}(),Vt=new Ka("TsDemuxer"),qv=function(){function t(i,r,n){Re(this,t),B(this,"_pmtId",-1),B(this,"_remainingPacketData",null),B(this,"_videoPesData",[]),B(this,"_audioPesData",[]),B(this,"_gopId",0),this.videoTrack=i||new $v,this.audioTrack=r||new Kv,this.metadataTrack=n||new Xv,this._fixer=new X_(this.videoTrack,this.audioTrack,this.metadataTrack)}return Me(t,[{key:"demux",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=this.audioTrack,a=this.videoTrack,o=this.metadataTrack;n&&(this._pmtId=-1,a.reset(),s.reset(),o.reset()),!e||n?(this._remainingPacketData=null,this._videoPesData=[],this._audioPesData=[]):(a.samples=[],s.samples=[],o.seiSamples=[],a.warnings=[],s.warnings=[],this._remainingPacketData&&(r=Lt(this._remainingPacketData,r),this._remainingPacketData=null));var u=r.length,l=u%188;l&&(this._remainingPacketData=r.subarray(u-l),u-=l);for(var c=a.pid,f=s.pid,h=0;h<u;h+=188){if(r[h]!==71)throw new Error("TS packet did not start with 0x47");var d=!!(r[h+1]&64),p=((r[h+1]&31)<<8)+r[h+2],m=(r[h+3]&48)>>4,_=void 0;if(m>1){if(_=h+5+r[h+4],_===h+188)continue}else _=h+4;switch(p){case 0:d&&(_+=r[_]+1),this._pmtId=(r[_+10]&31)<<8|r[_+11];break;case this._pmtId:{d&&(_+=r[_]+1);var v=_+3+((r[_+1]&15)<<8|r[_+2])-4,y=(r[_+10]&15)<<8|r[_+11];for(_+=12+y;_<v;){var S=(r[_+1]&31)<<8|r[_+2];switch(r[_]){case 15:s.pid=f=S;break;case 27:if(c!==-1)break;a.codecType=vr.AVC,a.pid=c=S;break;case 36:if(c!==-1)break;a.codecType=vr.HEVC,a.pid=c=S;break;default:Vt.warn("Unsupported stream. type: ".concat(r[_],", pid: ").concat(S))}_+=((r[_+3]&15)<<8|r[_+4])+5}}break;case c:d&&this._videoPesData.length&&this._parseVideoData(),this._videoPesData.push(r.subarray(_,h+188));break;case f:d&&this._audioPesData.length&&this._parseAudioData(),this._audioPesData.push(r.subarray(_,h+188));break;case 17:case 8191:break;default:Vt.warn("Unknown pid: ".concat(p))}}return this._parseVideoData(),this._parseAudioData(),s.formatTimescale=a.formatTimescale=a.timescale=o.timescale=9e4,s.timescale=s.sampleRate||0,{videoTrack:a,audioTrack:s,metadataTrack:o}}},{key:"fix",value:function(r,n,e){return this._fixer.fix(r,n,e),{videoTrack:this.videoTrack,audioTrack:this.audioTrack,metadataTrack:this.metadataTrack}}},{key:"demuxAndFix",value:function(r,n,e,s){return this.demux(r,n,e),this.fix(s,n,e)}},{key:"_parseVideoData",value:function(){if(this._videoPesData.length){var r=t._parsePES(Lt.apply(void 0,Et(this._videoPesData)));if(!r){Vt.warn("Cannot parse video pes",this._videoPesData);return}var n=Mn.parseAnnexB(r.data);n?this._createVideoSample(n,r.pts,r.dts):Vt.warn("Cannot parse avc units",r),this._videoPesData=[]}}},{key:"_createVideoSample",value:function(r,n,e){var s=this;if(r.length){var a=this.videoTrack,o=a.codecType===vr.HEVC,u=new Yv(n,e);r.forEach(function(l){var c=o?l[0]>>>1&63:l[0]&31;switch(c){case 5:case 16:case 17:case 18:case 19:case 20:case 21:case 22:case 23:if(!o&&c!==5||o&&c===5)break;u.setToKeyframe(),s._gopId++;break;case 6:case 39:case 40:if(!o&&c!==6||o&&c===6)break;s.metadataTrack.seiSamples.push(new H_(Mn.parseSEI(Mn.removeEPB(l),o),n));return;case 32:if(!o)break;if(!a.vps.length){var f=Bh.parseVPS(Mn.removeEPB(l),a.hvcC);a.hvcC=a.hvcC||f,a.vps=[l]}break;case 7:case 33:if(!o&&c!==7||o&&c===7)break;if(!a.sps.length){var h=Mn.removeEPB(l),d=o?Bh.parseSPS(h,a.hvcC):$_.parseSPS(h);a.sps=[l],a.hvcC=a.hvcC||d.hvcC,a.codec=d.codec,a.width=d.width,a.height=d.height,a.sarRatio=d.sarRatio,a.fpsNum=d.fpsNum,a.fpsDen=d.fpsDen}break;case 8:case 34:if(!o&&c!==8||o&&c===8)break;a.pps.length||(a.pps=[l]);break;case 9:case 35:break;case 38:if(o){for(var p=!1,m=2;m<l.byteLength;m++)if(l[m]===255){p=!0;break}if(!p)return}break}u.units.push(l)}),u.gopId=this._gopId,this._pushVideoSample(a,u)}}},{key:"_pushVideoSample",value:function(r,n){if(n.units.length)if(n.pts===null||n.pts===void 0){Vt.warn("Video sample no pts",n);var e=r.samples[r.samples.length-1];e?(n.pts=e.pts,n.dts=e.dts):Vt.warn("Drop video sample",n)}else r.samples.push(n)}},{key:"_parseAudioData",value:function(){if(this._audioPesData.length){var r=t._parsePES(Lt.apply(void 0,Et(this._audioPesData)));if(!r){Vt.warn("Cannot parse audio pes",this._audioPesData);return}this._parseAacData(r),this._audioPesData=[]}}},{key:"_parseAacData",value:function(r){var n=this.audioTrack,e=r.pts;if(e==null){if(Vt.warn("AAC pes not pts",n),!n.samples.length||!n.sampleRate)return;e=n.samples[n.samples.length-1].pts+vn.getFrameDuration(n.sampleRate)}var s=vn.parseADTS(r.data,e);if(s){var a;n.codec=s.codec,n.channelCount=s.channelCount,n.sampleRate=s.sampleRate,n.objectType=s.objectType,n.sampleRateIndex=s.samplingFrequencyIndex,n.config=s.config,(a=n.samples).push.apply(a,Et(s.frames.map(function(o){return new $a(o.pts,o.data)}))),s.skip&&Vt.warn("Skip aac adts ".concat(s.skip," bits")),s.remaining&&Vt.warn("Remaining aac adts ".concat(s.remaining," bits"))}else Vt.warn("Cannot parse aac adts",r)}}],[{key:"probe",value:function(r){return r.length?r[0]===71&&r[188]===71&&r[376]===71:!1}},{key:"_parsePES",value:function(r){var n=r[8];if(!(n==null||r.length<n+9)){var e=r[0]<<16|r[1]<<8|r[2];if(e===1){var s=(r[4]<<8)+r[5];if(!(s&&s>r.length-6)){var a,o,u=r[7];return u&192&&(a=(r[9]&14)*536870912+(r[10]&255)*4194304+(r[11]&254)*16384+(r[12]&255)*128+(r[13]&254)/2,u&64?(o=(r[14]&14)*536870912+(r[15]&255)*4194304+(r[16]&254)*16384+(r[17]&255)*128+(r[18]&254)/2,a-o>60*9e4&&(a=o)):o=a),{data:r.subarray(9+n),pts:a,dts:o}}}}}}]),t}(),Fe=function(){function t(){Re(this,t)}return Me(t,null,[{key:"findBox",value:function(r,n){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,s=[];if(!r)return s;for(var a=0,o="",u=0;r.length>7;){if(a=j(r),o=String.fromCharCode.apply(null,r.subarray(4,8)),u=8,a===1?(a=In(r,8),u+=8):a||(a=r.length),!n[0]||o===n[0]){var l=r.subarray(0,a);if(n.length<2)s.push({start:e,size:a,headerSize:u,type:o,data:l});else return t.findBox(l.subarray(u),n.slice(1),e+u)}e+=a,r=r.subarray(a)}return s}},{key:"tfhd",value:function(r){return ie(r,!0,function(n,e){n.trackId=j(e);var s=4,a=n.flags&255&1,o=n.flags&255&2,u=n.flags&255&8,l=n.flags&255&16,c=n.flags&255&32;a&&(s+=4,n.baseDataOffset=j(e,s),s+=4),o&&(n.sampleDescriptionIndex=j(e,s),s+=4),u&&(n.defaultSampleDuration=j(e,s),s+=4),l&&(n.defaultSampleSize=j(e,s),s+=4),c&&(n.defaultSampleFlags=j(e,s))})}},{key:"sidx",value:function(r){return ie(r,!0,function(n,e){var s=0;n.reference_ID=j(e,s),s+=4,n.timescale=j(e,s),s+=4,n.version===0?(n.earliest_presentation_time=j(e,s),s+=4,n.first_offset=j(e,s),s+=4):(n.earliest_presentation_time=In(e,s),s+=8,n.first_offset=In(e,s),s+=8),s+=2,n.references=[];var a=Se(e,s);s+=2;for(var o=0;o<a;o++){var u={};n.references.push(u);var l=j(e,s);s+=4,u.reference_type=l>>31&1,u.referenced_size=l&2147483647,u.subsegment_duration=j(e,s),s+=4,l=j(e,s),s+=4,u.starts_with_SAP=l>>31&1,u.SAP_type=l>>28&7,u.SAP_delta_time=l&268435455}})}},{key:"moov",value:function(r){return ie(r,!1,function(n,e,s){n.mvhd=t.mvhd(t.findBox(e,["mvhd"],s)[0]),n.trak=t.findBox(e,["trak"],s).map(function(a){return t.trak(a)}),n.pssh=t.pssh(t.findBox(e,["pssh"],s)[0])})}},{key:"mvhd",value:function(r){return ie(r,!0,function(n,e){var s=0;n.version===1?(n.timescale=j(e,16),n.duration=In(e,20),s+=28):(n.timescale=j(e,8),n.duration=j(e,12),s+=16),n.nextTrackId=j(e,s+76)})}},{key:"trak",value:function(r){return ie(r,!1,function(n,e,s){n.tkhd=t.tkhd(t.findBox(e,["tkhd"],s)[0]),n.mdia=t.mdia(t.findBox(e,["mdia"],s)[0])})}},{key:"tkhd",value:function(r){return ie(r,!0,function(n,e){var s=0;n.version===1?(n.trackId=j(e,16),n.duration=In(e,24),s+=32):(n.trackId=j(e,8),n.duration=j(e,16),s+=20),n.width=j(e,s+52),n.height=j(e,s+56)})}},{key:"mdia",value:function(r){return ie(r,!1,function(n,e,s){n.mdhd=t.mdhd(t.findBox(e,["mdhd"],s)[0]),n.hdlr=t.hdlr(t.findBox(e,["hdlr"],s)[0]),n.minf=t.minf(t.findBox(e,["minf"],s)[0])})}},{key:"mdhd",value:function(r){return ie(r,!0,function(n,e){var s=0;n.version===1?(n.timescale=j(e,16),n.duration=In(e,20),s+=28):(n.timescale=j(e,8),n.duration=j(e,12),s+=16);var a=Se(e,s);n.language=String.fromCharCode((a>>10&31)+96,(a>>5&31)+96,(a&31)+96)})}},{key:"hdlr",value:function(r){return ie(r,!0,function(n,e){n.version===0&&(n.handlerType=String.fromCharCode.apply(null,e.subarray(4,8)))})}},{key:"minf",value:function(r){return ie(r,!1,function(n,e,s){n.vmhd=t.vmhd(t.findBox(e,["vmhd"],s)[0]),n.smhd=t.smhd(t.findBox(e,["smhd"],s)[0]),n.stbl=t.stbl(t.findBox(e,["stbl"],s)[0])})}},{key:"vmhd",value:function(r){return ie(r,!0,function(n,e){n.graphicsmode=Se(e),n.opcolor=[Se(e,2),Se(e,4),Se(e,6)]})}},{key:"smhd",value:function(r){return ie(r,!0,function(n,e){n.balance=Se(e)})}},{key:"stbl",value:function(r){return ie(r,!1,function(n,e,s){var a,o,u;n.stsd=t.stsd(t.findBox(e,["stsd"],s)[0]),n.stts=t.stts(t.findBox(e,["stts"],s)[0]),n.ctts=t.ctts(t.findBox(e,["ctts"],s)[0]),n.stsc=t.stsc(t.findBox(e,["stsc"],s)[0]),n.stsz=t.stsz(t.findBox(e,["stsz"],s)[0]),n.stco=t.stco(t.findBox(e,["stco"],s)[0]),n.stco||(n.co64=t.co64(t.findBox(e,["co64"],s)[0]),n.stco=n.co64);var l=(a=n.stsd.entries[0])===null||a===void 0||(o=a.sinf)===null||o===void 0||(u=o.schi)===null||u===void 0?void 0:u.tenc.default_IV_size;n.stss=t.stss(t.findBox(e,["stss"],s)[0]),n.senc=t.senc(t.findBox(e,["senc"],s)[0],l)})}},{key:"senc",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:8;return ie(r,!0,function(e,s){var a=0,o=j(s,a);a+=4,e.samples=[];for(var u=0;u<o;u++){var l={};l.InitializationVector=[];for(var c=0;c<n;c++)l.InitializationVector[c]=s[a+c];if(a+=n,e.flags&2){l.subsamples=[];var f=Se(s,a);a+=2;for(var h=0;h<f;h++){var d={};d.BytesOfClearData=Se(s,a),a+=2,d.BytesOfProtectedData=j(s,a),a+=4,l.subsamples.push(d)}}e.samples.push(l)}})}},{key:"pssh",value:function(r){return ie(r,!0,function(n,e){for(var s=[],a=[],o=0,u=0;u<16;u++)a.push(mu(e[o+u]));if(o+=16,n.version>0){var l=j(e,o);o+=4;for(var c=0;c<(""+l).length;c++)for(var f=0;f<16;f++){var h=e[o];o+=1,s.push(mu(h))}}var d=j(e,o);n.data_size=d,o+=4,n.kid=s,n.system_id=a,n.buffer=e})}},{key:"stsd",value:function(r){return ie(r,!0,function(n,e,s){n.entryCount=j(e),n.entries=t.findBox(e.subarray(4),[],s+4).map(function(a){switch(a.type){case"avc1":case"avc2":case"avc3":case"avc4":return t.avc1(a);case"hvc1":case"hev1":return t.hvc1(a);case"mp4a":return t.mp4a(a);case"alaw":case"ulaw":return t.alaw(a);case"enca":return ie(a,!1,function(o,u,l){o.channelCount=Se(u,16),o.samplesize=Se(u,18),o.sampleRate=j(u,24)/65536,u=u.subarray(28),o.sinf=t.sinf(t.findBox(u,["sinf"],l)[0]),o.esds=t.esds(t.findBox(u,["esds"],l)[0])});case"encv":return ie(a,!1,function(o,u,l){o.width=Se(u,24),o.height=Se(u,26),o.horizresolution=j(u,28),o.vertresolution=j(u,32),u=u.subarray(78),o.sinf=t.sinf(t.findBox(u,["sinf"],l)[0]),o.avcC=t.avcC(t.findBox(u,["avcC"],l)[0]),o.hvcC=t.hvcC(t.findBox(u,["hvcC"],l)[0]),o.pasp=t.pasp(t.findBox(u,["pasp"],l)[0])})}}).filter(Boolean)})}},{key:"tenc",value:function(r){return ie(r,!1,function(n,e){var s=6;n.default_IsEncrypted=e[s],s+=1,n.default_IV_size=e[s],s+=1,n.default_KID=[];for(var a=0;a<16;a++)n.default_KID.push(mu(e[s])),s+=1})}},{key:"schi",value:function(r){return ie(r,!1,function(n,e,s){n.tenc=t.tenc(t.findBox(e,["tenc"],s)[0])})}},{key:"sinf",value:function(r){return ie(r,!1,function(n,e,s){n.schi=t.schi(t.findBox(e,["schi"],s)[0]),n.frma=t.frma(t.findBox(e,["frma"],s)[0])})}},{key:"frma",value:function(r){return ie(r,!1,function(n,e){n.data_format="";for(var s=0;s<4;s++)n.data_format+=String.fromCharCode(e[s])})}},{key:"avc1",value:function(r){return ie(r,!1,function(n,e,s){var a=zh(n,e),o=e.subarray(a);s+=a,n.avcC=t.avcC(t.findBox(o,["avcC"],s)[0]),n.pasp=t.pasp(t.findBox(o,["pasp"],s)[0])})}},{key:"avcC",value:function(r){return ie(r,!1,function(n,e){n.data=r.data,n.configurationVersion=e[0],n.AVCProfileIndication=e[1],n.profileCompatibility=e[2],n.AVCLevelIndication=e[3],n.codec=Qv([e[1],e[2],e[3]]),n.lengthSizeMinusOne=e[4]&3,n.spsLength=e[5]&31,n.sps=[];for(var s=6,a=0;a<n.spsLength;a++){var o=Se(e,s);s+=2,n.sps.push(e.subarray(s,s+o)),s+=o}n.ppsLength=e[s],s+=1,n.pps=[];for(var u=0;u<n.ppsLength;u++){var l=Se(e,s);s+=2,n.pps.push(e.subarray(s,s+=l)),s+=l}})}},{key:"hvc1",value:function(r){return ie(r,!1,function(n,e,s){var a=zh(n,e),o=e.subarray(a);s+=a,n.hvcC=t.hvcC(t.findBox(o,["hvcC"],s)[0]),n.pasp=t.pasp(t.findBox(o,["pasp"],s)[0])})}},{key:"hvcC",value:function(r){return ie(r,!1,function(n,e){n.data=r.data,n.codec="hev1.1.6.L93.B0",n.configurationVersion=e[0];var s=e[1];n.generalProfileSpace=s>>6,n.generalTierFlag=(s&32)>>5,n.generalProfileIdc=s&31,n.generalProfileCompatibility=j(e,2),n.generalConstraintIndicatorFlags=e.subarray(6,12),n.generalLevelIdc=e[12],n.avgFrameRate=Se(e,19),n.numOfArrays=e[22],n.vps=[],n.sps=[],n.pps=[];for(var a=23,o=0,u=0,l=0,c=0;c<n.numOfArrays;c++){o=e[a]&63,u=Se(e,a+1),a+=3;for(var f=[],h=0;h<u;h++)l=Se(e,a),a+=2,f.push(e.subarray(a,a+l)),a+=l;if(o===32){var d;(d=n.vps).push.apply(d,f)}else if(o===33){var p;(p=n.sps).push.apply(p,f)}else if(o===34){var m;(m=n.pps).push.apply(m,f)}}})}},{key:"pasp",value:function(r){return ie(r,!1,function(n,e){n.hSpacing=j(e),n.vSpacing=j(e,4)})}},{key:"mp4a",value:function(r){return ie(r,!1,function(n,e,s){var a=Vh(n,e);n.esds=t.esds(t.findBox(e.subarray(a),["esds"],s+a)[0])})}},{key:"esds",value:function(r){return ie(r,!0,function(n,e){n.codec="mp4a.";for(var s=0,a=0,o=0,u=0;e.length;){for(s=0,u=e[s],a=e[s+1],s+=2;a&128;)o=(a&127)<<7,a=e[s],s+=1;if(o+=a&127,u===3)e=e.subarray(s+3);else if(u===4)n.codec+=(e[s].toString(16)+".").padStart(3,"0"),e=e.subarray(s+13);else if(u===5){var l=n.config=e.subarray(s,s+o),c=(l[0]&248)>>3;c===31&&l.length>=2&&(c=32+((l[0]&7)<<3)+((l[1]&224)>>5)),n.objectType=c,n.codec+=c.toString(16),n.codec[n.codec.length-1]==="."&&(n.codec=n.codec.substring(0,n.codec.length-1));return}else{n.codec[n.codec.length-1]==="."&&(n.codec=n.codec.substring(0,n.codec.length-1));return}}})}},{key:"alaw",value:function(r){return ie(r,!1,function(n,e){Vh(n,e)})}},{key:"stts",value:function(r){return ie(r,!0,function(n,e){for(var s=j(e),a=[],o=4,u=0;u<s;u++)a.push({count:j(e,o),delta:j(e,o+4)}),o+=8;n.entryCount=s,n.entries=a})}},{key:"ctts",value:function(r){return ie(r,!0,function(n,e){var s=j(e),a=[],o=4;if(n.version===1)for(var u=0;u<s;u++)a.push({count:j(e,o),offset:j(e,o+4)}),o+=8;else for(var l=0;l<s;l++)a.push({count:j(e,o),offset:-(~j(e,o+4)+1)}),o+=8;n.entryCount=s,n.entries=a})}},{key:"stsc",value:function(r){return ie(r,!0,function(n,e){for(var s=j(e),a=[],o=4,u=0;u<s;u++)a.push({firstChunk:j(e,o),samplesPerChunk:j(e,o+4),sampleDescriptionIndex:j(e,o+8)}),o+=12;n.entryCount=s,n.entries=a})}},{key:"stsz",value:function(r){return ie(r,!0,function(n,e){var s=j(e),a=j(e,4),o=[];if(!s)for(var u=8,l=0;l<a;l++)o.push(j(e,u)),u+=4;n.sampleSize=s,n.sampleCount=a,n.entrySizes=o})}},{key:"stco",value:function(r){return ie(r,!0,function(n,e){for(var s=j(e),a=[],o=4,u=0;u<s;u++)a.push(j(e,o)),o+=4;n.entryCount=s,n.entries=a})}},{key:"co64",value:function(r){return ie(r,!0,function(n,e){for(var s=j(e),a=[],o=4,u=0;u<s;u++)a.push(In(e,o)),o+=8;n.entryCount=s,n.entries=a})}},{key:"stss",value:function(r){return ie(r,!0,function(n,e){for(var s=j(e),a=[],o=4,u=0;u<s;u++)a.push(j(e,o)),o+=4;n.entryCount=s,n.entries=a})}},{key:"moof",value:function(r){return ie(r,!1,function(n,e,s){n.mfhd=t.mfhd(t.findBox(e,["mfhd"],s)[0]),n.traf=t.findBox(e,["traf"],s).map(function(a){return t.traf(a)})})}},{key:"mfhd",value:function(r){return ie(r,!0,function(n,e){n.sequenceNumber=j(e)})}},{key:"traf",value:function(r){return ie(r,!1,function(n,e,s){n.tfhd=t.tfhd(t.findBox(e,["tfhd"],s)[0]),n.tfdt=t.tfdt(t.findBox(e,["tfdt"],s)[0]),n.trun=t.trun(t.findBox(e,["trun"],s)[0])})}},{key:"trun",value:function(r){return ie(r,!0,function(n,e){var s=n.version,a=n.flags,o=e.length,u=n.sampleCount=j(e),l=4;if(o>l&&a&1&&(n.dataOffset=-(~j(e,l)+1),l+=4),o>l&&a&4&&(n.firstSampleFlags=j(e,l),l+=4),n.samples=[],o>l)for(var c,f=0;f<u;f++)c={},a&256&&(c.duration=j(e,l),l+=4),a&512&&(c.size=j(e,l),l+=4),a&1024&&(c.flags=j(e,l),l+=4),a&2048&&(s?c.cts=-(~j(e,l+4)+1):c.cts=j(e,l),l+=4),n.samples.push(c)})}},{key:"tfdt",value:function(r){return ie(r,!0,function(n,e){n.version===1?n.baseMediaDecodeTime=In(e):n.baseMediaDecodeTime=j(e)})}},{key:"probe",value:function(r){return!!t.findBox(r,["ftyp"])}},{key:"parseSampleFlags",value:function(r){return{isLeading:(r[0]&12)>>>2,dependsOn:r[0]&3,isDependedOn:(r[1]&192)>>>6,hasRedundancy:(r[1]&48)>>>4,paddingValue:(r[1]&14)>>>1,isNonSyncSample:r[1]&1,degradationPriority:r[2]<<8|r[3]}}},{key:"moovToTrack",value:function(r,n,e){var s,a,o=r.trak;if(!(!o||!o.length)){var u=o.find(function(Co){var tr,nr;return((tr=Co.mdia)===null||tr===void 0||(nr=tr.hdlr)===null||nr===void 0?void 0:nr.handlerType)==="vide"}),l=o.find(function(Co){var tr,nr;return((tr=Co.mdia)===null||tr===void 0||(nr=tr.hdlr)===null||nr===void 0?void 0:nr.handlerType)==="soun"});if(u&&n){var c,f,h,d,p,m,_,v=n,y=(c=u.tkhd)===null||c===void 0?void 0:c.trackId;y!=null&&(v.id=u.tkhd.trackId),v.tkhdDuration=u.tkhd.duration,v.mvhdDurtion=r.mvhd.duration,v.mvhdTimecale=r.mvhd.timescale,v.timescale=v.formatTimescale=u.mdia.mdhd.timescale,v.duration=u.mdia.mdhd.duration||v.mvhdDurtion/v.mvhdTimecale*v.timescale;var S=u.mdia.minf.stbl.stsd.entries[0];if(v.width=S.width,v.height=S.height,S.pasp&&(v.sarRatio=[S.pasp.hSpacing,S.pasp.vSpacing]),S.hvcC)v.codecType=vr.HEVC,v.codec=S.hvcC.codec,v.vps=S.hvcC.vps,v.sps=S.hvcC.sps,v.pps=S.hvcC.pps,v.hvcC=S.hvcC.data;else if(S.avcC)v.codec=S.avcC.codec,v.sps=S.avcC.sps,v.pps=S.avcC.pps;else throw new Error("unknown video stsd entry");if(v.present=!0,v.ext={},v.ext.stss=(f=u.mdia)===null||f===void 0||(h=f.minf)===null||h===void 0||(d=h.stbl)===null||d===void 0?void 0:d.stss,v.ext.ctts=(p=u.mdia)===null||p===void 0||(m=p.minf)===null||m===void 0||(_=m.stbl)===null||_===void 0?void 0:_.ctts,S&&S.type==="encv"){var E,T,A,P,D,F,I,X;v.isVideoEncryption=!0,S.default_KID=(E=S.sinf)===null||E===void 0||(T=E.schi)===null||T===void 0?void 0:T.tenc.default_KID,S.default_IsEncrypted=(A=S.sinf)===null||A===void 0||(P=A.schi)===null||P===void 0?void 0:P.tenc.default_IsEncrypted,S.default_IV_size=(D=S.sinf)===null||D===void 0||(F=D.schi)===null||F===void 0?void 0:F.tenc.default_IV_size,v.videoSenc=u.mdia.minf.stbl.senc&&u.mdia.minf.stbl.senc.samples,S.data_format=(I=S.sinf)===null||I===void 0||(X=I.frma)===null||X===void 0?void 0:X.data_format,v.useEME=r.useEME,v.kidValue=r.kidValue,v.pssh=r.pssh,v.encv=S}}if(l&&e){var k,w,C,N,L,W,R,V,G,U=e,ue=(k=l.tkhd)===null||k===void 0?void 0:k.trackId;ue!=null&&(U.id=l.tkhd.trackId),U.tkhdDuration=l.tkhd.duration,U.mvhdDurtion=r.mvhd.duration,U.mvhdTimecale=r.mvhd.timescale,U.timescale=U.formatTimescale=l.mdia.mdhd.timescale,U.duration=l.mdia.mdhd.duration||U.mvhdDurtion/U.mvhdTimecale*U.timescale;var Y=l.mdia.minf.stbl.stsd.entries[0];switch(U.sampleSize=Y.sampleSize,U.sampleRate=Y.sampleRate,U.channelCount=Y.channelCount,U.present=!0,Y.type){case"alaw":U.codecType=U.codec=Wa.G711PCMA,U.sampleRate=8e3;break;case"ulaw":U.codecType=U.codec=Wa.G711PCMU,U.sampleRate=8e3;break;default:U.sampleDuration=vn.getFrameDuration(U.sampleRate,U.timescale),U.sampleRateIndex=vn.getRateIndexByRate(U.sampleRate),U.objectType=((s=Y.esds)===null||s===void 0?void 0:s.objectType)||2,Y.esds&&(U.config=Array.from(Y.esds.config)),U.codec=((a=Y.esds)===null||a===void 0?void 0:a.codec)||"mp4a.40.2";break}if(U.sampleDuration=vn.getFrameDuration(U.sampleRate,U.timescale),U.objectType=((w=Y.esds)===null||w===void 0?void 0:w.objectType)||2,Y.esds&&(Y.esds.config?U.config=Array.from(Y.esds.config):console.warn("esds config is null")),U.codec=((C=Y.esds)===null||C===void 0?void 0:C.codec)||"mp4a.40.2",U.sampleRateIndex=vn.getRateIndexByRate(U.sampleRate),U.ext={},U.ext.stss=(N=l.mdia)===null||N===void 0||(L=N.minf)===null||L===void 0||(W=L.stbl)===null||W===void 0?void 0:W.stss,U.ext.ctts=(R=l.mdia)===null||R===void 0||(V=R.minf)===null||V===void 0||(G=V.stbl)===null||G===void 0?void 0:G.ctts,U.present=!0,Y&&Y.type==="enca"){var tt,Ye,nt,Ht,Ss,Ie,Eo,ko;U.isAudioEncryption=!0,Y.data_format=(tt=Y.sinf)===null||tt===void 0||(Ye=tt.frma)===null||Ye===void 0?void 0:Ye.data_format,Y.default_KID=(nt=Y.sinf)===null||nt===void 0||(Ht=nt.schi)===null||Ht===void 0?void 0:Ht.tenc.default_KID,Y.default_IsEncrypted=(Ss=Y.sinf)===null||Ss===void 0||(Ie=Ss.schi)===null||Ie===void 0?void 0:Ie.tenc.default_IsEncrypted,Y.default_IV_size=(Eo=Y.sinf)===null||Eo===void 0||(ko=Eo.schi)===null||ko===void 0?void 0:ko.tenc.default_IV_size,U.audioSenc=l.mdia.minf.stbl.senc&&l.mdia.minf.stbl.senc.samples,U.useEME=r.useEME,U.kidValue=r.kidValue,U.enca=Y}}if(e&&(e.isVideoEncryption=n?n.isVideoEncryption:!1),n&&(n.isAudioEncryption=e?e.isAudioEncryption:!1),n!=null&&n.encv||e!=null&&e.enca){var wo,To,Mc=n==null||(wo=n.encv)===null||wo===void 0?void 0:wo.default_KID,Nc=e==null||(To=e.enca)===null||To===void 0?void 0:To.default_KID,Fc=Mc||Nc?(Mc||Nc).join(""):null;n&&(n.kid=Fc),e&&(e.kid=Fc)}return n&&(n.flags=3841),e&&(e.flags=1793),{videoTrack:n,audioTrack:e}}}},{key:"evaluateDefaultDuration",value:function(r,n,e){var s,a=n==null||(s=n.samples)===null||s===void 0?void 0:s.length;if(!a)return 1024;var o=1024*a/n.timescale;return o*r.timescale/e}},{key:"moofToSamples",value:function(r,n,e){var s={};return r.mfhd&&(n&&(n.sequenceNumber=r.mfhd.sequenceNumber),e&&(e.sequenceNumber=r.mfhd.sequenceNumber)),r.traf.forEach(function(a){var o=a.tfhd,u=a.tfdt,l=a.trun;if(!(!o||!l)){u&&(n&&n.id===o.trackId&&(n.baseMediaDecodeTime=u.baseMediaDecodeTime),e&&e.id===o.trackId&&(e.baseMediaDecodeTime=u.baseMediaDecodeTime));var c=o.defaultSampleSize||0,f=o.defaultSampleDuration||t.evaluateDefaultDuration(n,e,l.samples.length||l.sampleCount),h=l.dataOffset||0,d=0,p=-1;if(!l.samples.length&&l.sampleCount){s[o.trackId]=[];for(var m=0;m<l.sampleCount;m++)s[o.trackId].push({offset:h,dts:d,duration:f,size:c}),d+=f,h+=c}else s[o.trackId]=l.samples.map(function(_,v){return _={offset:h,dts:d,pts:d+(_.cts||0),duration:_.duration||f,size:_.size||c,gopId:p,keyframe:v===0||_.flags!==null&&_.flags!==void 0&&(_.flags&65536)>>>0!==65536},_.keyframe&&(p++,_.gopId=p),d+=_.duration,h+=_.size,_})}}),s}},{key:"moovToSamples",value:function(r){var n=r.trak;if(!(!n||!n.length)){var e=n.find(function(I){var X,k;return((X=I.mdia)===null||X===void 0||(k=X.hdlr)===null||k===void 0?void 0:k.handlerType)==="vide"}),s=n.find(function(I){var X,k;return((X=I.mdia)===null||X===void 0||(k=X.hdlr)===null||k===void 0?void 0:k.handlerType)==="soun"});if(!(!e&&!s)){var a,o;if(e){var u,l,c=(u=e.mdia)===null||u===void 0||(l=u.minf)===null||l===void 0?void 0:l.stbl;if(!c)return;var f=c.stts,h=c.stsc,d=c.stsz,p=c.stco,m=c.stss,_=c.ctts;if(!f||!h||!d||!p||!m)return;a=Hh(f,h,d,p,_,m)}if(s){var v,y,S,E=(v=s.mdia)===null||v===void 0||(y=v.minf)===null||y===void 0?void 0:y.stbl;if(!E)return;var T=(S=s.mdia.mdhd)===null||S===void 0?void 0:S.timescale,A=E.stts,P=E.stsc,D=E.stsz,F=E.stco;if(!T||!A||!P||!D||!F)return;o=Hh(A,P,D,F)}return{videoSamples:a,audioSamples:o}}}}}]),t}();function Hh(t,i,r,n,e,s){var a=[],o=e==null?void 0:e.entries,u=i.entries,l=n.entries,c=r.entrySizes,f=s==null?void 0:s.entries,h;f&&(h={},f.forEach(function(P){h[P-1]=!0}));var d;o&&(d=[],o.forEach(function(P){for(var D=P.count,F=P.offset,I=0;I<D;I++)d.push(F)}));var p,m=-1,_=0,v=0,y=0,S=0,E=0,T=u[0].samplesPerChunk,A=u[1]?u[1].firstChunk-1:1/0;return t.entries.forEach(function(P){for(var D=P.count,F=P.delta,I=0;I<D;I++)p={dts:_,duration:F,size:c[v]||r.sampleSize,offset:l[y]+E,index:v},f&&(p.keyframe=h[v],p.keyframe&&m++,p.gopId=m),d&&v<d.length&&(p.pts=p.dts+d[v]),a.push(p),_+=F,v++,v<T?E+=p.size:(y++,E=0,y>=A&&(S++,A=u[S+1]?u[S+1].firstChunk-1:1/0),T+=u[S].samplesPerChunk)}),a}function zh(t,i){return t.dataReferenceIndex=Se(i,6),t.width=Se(i,24),t.height=Se(i,26),t.horizresolution=j(i,28),t.vertresolution=j(i,32),t.frameCount=Se(i,40),t.depth=Se(i,74),78}function Vh(t,i){return t.dataReferenceIndex=Se(i,6),t.channelCount=Se(i,16),t.sampleSize=Se(i,18),t.sampleRate=j(i,24)/65536,28}function ie(t,i,r){if(t){if(t.size!==t.data.length)throw new Error("box ".concat(t.type," size !== data.length"));var n={start:t.start,size:t.size,headerSize:t.headerSize,type:t.type};return i&&(n.version=t.data[t.headerSize],n.flags=W_(t.data,t.headerSize+1),n.headerSize+=4),r(n,t.data.subarray(n.headerSize),n.start+n.headerSize),n}}var Q_=function(i,r,n){for(var e=String(n),s=r>>0,a=Math.ceil(s/e.length),o=[],u=String(i);a--;)o.push(e);return o.join("").substring(0,s-u.length)+u},mu=function(){for(var i=[],r=arguments.length,n=new Array(r),e=0;e<r;e++)n[e]=arguments[e];return n.forEach(function(s){i.push(Q_(Number(s).toString(16),2,0))}),i[0]},q_=function(){function t(i,r,n){Re(this,t),this.videoTrack=i||new $v,this.audioTrack=r||new Kv,this.metadataTrack=n||new Xv}return Me(t,[{key:"demux",value:function(r,n){var e=this.videoTrack,s=this.audioTrack,a=e.exist(),o=s.exist();if(e.samples=[],s.samples=[],n){if(!o){var u=Fe.findBox(n,["moov"])[0];if(!u)throw new Error("cannot found moov box");Fe.moovToTrack(Fe.moov(u),null,s)}var l=Fe.findBox(n,["moof"])[0];if(l){var c=Fe.moofToSamples(Fe.moof(l),null,s)[s.id],f=s.baseMediaDecodeTime;if(c){var h=l.start;c.map(function(E){E.offset+=h;var T=n.subarray(E.offset,E.offset+E.size);s.samples.push(new $a(E.dts+f,T,E.duration))})}}}if(r){if(!a&&!o){var d=Fe.findBox(r,["moov"])[0];if(!d)throw new Error("cannot found moov box");Fe.moovToTrack(Fe.moov(d),e,s)}var p=Fe.findBox(r,["moof"])[0];if(p){var m=Fe.moofToSamples(Fe.moof(p),e,s),_=e.baseMediaDecodeTime,v=s.baseMediaDecodeTime,y=p.start,S;Object.keys(m).forEach(function(E){e.id==E?m[E].map(function(T){T.offset+=y;var A=new Yv((T.pts||T.dts)+_,T.dts+_);A.duration=T.duration,A.gopId=T.gopId,T.keyframe&&A.setToKeyframe();var P=r.subarray(T.offset,T.offset+T.size);A.data=P;for(var D=0,F=P.length-1;D<F;)S=j(P,D),D+=4,A.units.push(P.subarray(D,D+S)),D+=S;e.samples.push(A)}):s.id==E&&m[E].map(function(T){T.offset+=y;var A=r.subarray(T.offset,T.offset+T.size);s.samples.push(new $a(T.dts+v,A,T.duration))})})}}return{videoTrack:e,audioTrack:s,metadataTrack:this.metadataTrack}}},{key:"reset",value:function(){this.videoTrack.reset(),this.audioTrack.reset(),this.metadataTrack.reset()}}],[{key:"probe",value:function(r){return Fe.probe(r)}}]),t}();function Z_(t){for(var i=0,r=arguments.length,n=new Array(r>1?r-1:0),e=1;e<r;e++)n[e-1]=arguments[e];n.forEach(function(o){i+=o.length});var s=new t(i),a=0;return n.forEach(function(o){s.set(o,a),a+=o.length}),s}var Ze=function(){function t(){Re(this,t),this.buffer=new Uint8Array(0)}return Me(t,[{key:"write",value:function(){for(var r=this,n=arguments.length,e=new Array(n),s=0;s<n;s++)e[s]=arguments[s];e.forEach(function(a){a?r.buffer=Z_(Uint8Array,r.buffer,a):window.console.warn(a)})}}],[{key:"writeUint16",value:function(r){return new Uint8Array([r>>8&255,r&255])}},{key:"writeUint32",value:function(r){return new Uint8Array([r>>24,r>>16&255,r>>8&255,r&255])}}]),t}(),jh=Math.pow(2,32)-1,ae=function(){function t(){Re(this,t)}return Me(t,null,[{key:"box",value:function(r){for(var n=arguments.length,e=new Array(n>1?n-1:0),s=1;s<n;s++)e[s-1]=arguments[s];e=e.filter(Boolean);var a=8+e.reduce(function(l,c){return l+c.byteLength},0),o=new Uint8Array(a);o[0]=a>>24&255,o[1]=a>>16&255,o[2]=a>>8&255,o[3]=a&255,o.set(r,4);var u=8;return e.forEach(function(l){o.set(l,u),u+=l.byteLength}),o}},{key:"ftyp",value:function(r){var n=r.find(function(e){return e.type===$n.VIDEO&&e.codecType===vr.HEVC});return n?t.FTYPHEV1:t.FTYPAVC1}},{key:"initSegment",value:function(r){var n=t.ftyp(r),e=Lt(n,t.moov(r));return e}},{key:"pssh",value:function(r){var n=new Uint8Array([1,0,0,0].concat([16,119,239,236,192,178,77,2,172,227,60,30,82,226,251,75],[0,0,0,1],Fh(r.kid),[0,0,0,0]));return t.box(t.types.pssh,n)}},{key:"moov",value:function(r){if(r[0].useEME&&(r[0].encv||r[0].enca)){r[0].pssh||(r[0].pssh={kid:r[0].kid});var n=this.pssh(r[0].pssh);return t.box.apply(t,[t.types.moov,t.mvhd(r[0].mvhdDurtion||r[0].duration,r[0].mvhdTimecale||r[0].timescale),t.mvex(r)].concat(Et(r.map(function(e){return t.trak(e)})),[n]))}else return t.box.apply(t,[t.types.moov,t.mvhd(r[0].mvhdDurtion||r[0].duration,r[0].mvhdTimecale||r[0].timescale)].concat(Et(r.map(function(e){return t.trak(e)})),[t.mvex(r)]))}},{key:"mvhd",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:9e4,e=t.box(t.types.mvhd,new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,n>>24&255,n>>16&255,n>>8&255,n&255,r>>24&255,r>>16&255,r>>8&255,r&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]));return e}},{key:"trak",value:function(r){var n=t.box(t.types.trak,t.tkhd(r.id,r.tkhdDuration||0,r.width,r.height),t.mdia(r));return n}},{key:"tkhd",value:function(r,n){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,a=t.box(t.types.tkhd,new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,r>>24&255,r>>16&255,r>>8&255,r&255,0,0,0,0,n>>24&255,n>>16&255,n>>8&255,n&255,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,e>>8&255,e&255,0,0,s>>8&255,s&255,0,0]));return a}},{key:"mdia",value:function(r){var n=t.box(t.types.mdia,t.mdhd(r.duration,r.timescale),t.hdlr(r.type),t.minf(r));return n}},{key:"mdhd",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:9e4,e=t.box(t.types.mdhd,new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,n>>24&255,n>>16&255,n>>8&255,n&255,r>>24&255,r>>16&255,r>>8&255,r&255,85,196,0,0]));return e}},{key:"hdlr",value:function(r){var n=t.box(t.types.hdlr,t.HDLR_TYPES[r]);return n}},{key:"minf",value:function(r){var n=t.box(t.types.minf,r.type===$n.VIDEO?t.VMHD:t.SMHD,t.DINF,t.stbl(r));return n}},{key:"stbl",value:function(r){var n=[];r&&r.ext&&r.ext.stss&&n.push(t.stss(r.ext.stss.entries));var e=t.box(t.types.stbl,t.stsd(r),t.STTS,n[0],t.STSC,t.STSZ,t.STCO);return e}},{key:"stsd",value:function(r){var n;r.type==="audio"?r.useEME&&r.enca?n=t.enca(r):n=t.mp4a(r):r.useEME&&r.encv?n=t.encv(r):n=t.avc1hev1(r);var e=t.box(t.types.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),n);return e}},{key:"enca",value:function(r){var n=r.enca.channelCount,e=r.enca.sampleRate,s=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,n,0,16,0,0,0,0,e>>8&255,e&255,0,0]),a=t.esds(r.config),o=t.sinf(r.enca);return t.box(t.types.enca,s,a,o)}},{key:"encv",value:function(r){var n,e,s=r.sps.length>0?r.sps[0]:[],a=r.pps.length>0?r.pps[0]:[],o=r.width,u=r.height,l=r.sarRatio[0],c=r.sarRatio[1],f=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,o>>8&255,o&255,u>>8&255,u&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),h=new Uint8Array((n=(e=[1,s[1],s[2],s[3],255,225,s.length>>>8&255,s.length&255]).concat.apply(e,Et(s)).concat([1,a.length>>>8&255,a.length&255])).concat.apply(n,Et(a))),d=new Uint8Array([0,0,88,57,0,15,200,192,0,4,86,72]),p=t.sinf(r.encv),m=new Uint8Array([l>>24,l>>16&255,l>>8&255,l&255,c>>24,c>>16&255,c>>8&255,c&255]);return t.box(t.types.encv,f,t.box(t.types.avcC,h),t.box(t.types.btrt,d),p,t.box(t.types.pasp,m))}},{key:"schi",value:function(r){var n=new Uint8Array([]),e=t.tenc(r);return t.box(t.types.schi,n,e)}},{key:"tenc",value:function(r){var n=new Uint8Array([0,0,0,0,0,0,r.default_IsEncrypted&255,r.default_IV_size&255].concat(Fh(r.default_KID)));return t.box(t.types.tenc,n)}},{key:"sinf",value:function(r){var n=new Uint8Array([]),e=new Uint8Array([r.data_format.charCodeAt(0),r.data_format.charCodeAt(1),r.data_format.charCodeAt(2),r.data_format.charCodeAt(3)]),s=new Uint8Array([0,0,0,0,99,101,110,99,0,1,0,0]),a=t.schi(r);return t.box(t.types.sinf,n,t.box(t.types.frma,e),t.box(t.types.schm,s),a)}},{key:"avc1hev1",value:function(r){var n=r.codecType===vr.HEVC,e=n?t.types.hvc1:t.types.avc1,s=n?t.hvcC(r):t.avcC(r),a=[new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,r.width>>8&255,r.width&255,r.height>>8&255,r.height&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),s];return n?a.push(t.box(t.types.fiel,new Uint8Array([1,0]))):r.sarRatio&&r.sarRatio.length>1&&a.push(t.pasp(r.sarRatio)),t.box.apply(t,[e].concat(a))}},{key:"avcC",value:function(r){var n,e,s=[],a=[],o;return r.sps.forEach(function(u){o=u.byteLength,s.push(o>>>8&255),s.push(o&255),s.push.apply(s,Et(u))}),r.pps.forEach(function(u){o=u.byteLength,a.push(o>>>8&255),a.push(o&255),a.push.apply(a,Et(u))}),t.box(t.types.avcC,new Uint8Array((n=(e=[1,s[3],s[4],s[5],255,224|r.sps.length]).concat.apply(e,s).concat([r.pps.length])).concat.apply(n,a)))}},{key:"hvcC",value:function(r){var n=r.hvcC;if(n instanceof ArrayBuffer||n instanceof Uint8Array)return n;var e=r.vps,s=r.sps,a=r.pps,o;if(n){var u=n.generalProfileCompatibilityFlags,l=n.generalConstraintIndicatorFlags,c=(e.length&&1)+(s.length&&1)+(a.length&&1);o=[1,n.generalProfileSpace<<6|n.generalTierFlag<<5|n.generalProfileIdc,u>>>24,u>>>16,u>>>8,u,l[0],l[1],l[2],l[3],l[4],l[5],n.generalLevelIdc,240,0,252,n.chromaFormatIdc|252,n.bitDepthLumaMinus8|248,n.bitDepthChromaMinus8|248,0,0,n.numTemporalLayers<<3|n.temporalIdNested<<2|3,c];var f=function(d){var p;o.push(d.length>>8,d.length),(p=o).push.apply(p,Et(d))};e.length&&(o.push(160,0,e.length),e.forEach(f)),s.length&&(o.push(161,0,s.length),s.forEach(f)),a.length&&(o.push(162,0,a.length),a.forEach(f))}else o=[1,1,96,0,0,0,144,0,0,0,0,0,93,240,0,252,253,248,248,0,0,15,3,160,0,1,0,24,64,1,12,1,255,255,1,96,0,0,3,0,144,0,0,3,0,0,3,0,93,153,152,9,161,0,1,0,45,66,1,1,1,96,0,0,3,0,144,0,0,3,0,0,3,0,93,160,2,128,128,45,22,89,153,164,147,43,154,128,128,128,130,0,0,3,0,2,0,0,3,0,50,16,162,0,1,0,7,68,1,193,114,180,98,64];return t.box(t.types.hvcC,new Uint8Array(o))}},{key:"pasp",value:function(r){var n=D_(r,2),e=n[0],s=n[1];return t.box(t.types.pasp,new Uint8Array([e>>24,e>>16&255,e>>8&255,e&255,s>>24,s>>16&255,s>>8&255,s&255]))}},{key:"mp4a",value:function(r){return t.box(t.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,r.channelCount,0,16,0,0,0,0,r.sampleRate>>8&255,r.sampleRate&255,0,0]),r.config.length?t.esds(r.config):void 0)}},{key:"esds",value:function(r){var n=r.length,e=t.box(t.types.esds,new Uint8Array([0,0,0,0,3,23+n,0,0,0,4,15+n,64,21,0,6,0,0,0,218,192,0,0,218,192,5].concat([n]).concat(r).concat([6,1,2])));return e}},{key:"mvex",value:function(r){var n=t.box.apply(t,[t.types.mvex].concat(Et(r.map(function(e){return t.trex(e.id)}))));return n}},{key:"trex",value:function(r){var n=t.box(t.types.trex,new Uint8Array([0,0,0,0,r>>24,r>>16&255,r>>8&255,r&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]));return n}},{key:"trex1",value:function(r){var n=t.box(t.types.trex,new Uint8Array([0,0,0,0,r>>24,r>>16&255,r>>8&255,r&255,0,0,0,1,0,0,2,0,0,0,0,0,0,1,0,0]));return n}},{key:"trex2",value:function(r){var n=t.box(t.types.trex,new Uint8Array([0,0,0,0,r>>24,r>>16&255,r>>8&255,r&255,0,0,0,1,0,0,4,0,0,0,0,0,2,0,0,0]));return n}},{key:"moof",value:function(r){var n=t.box.apply(t,[t.types.moof,t.mfhd(r[0].samples?r[0].samples[0].gopId:0)].concat(Et(r.map(function(e){return t.traf(e)}))));return n}},{key:"mfhd",value:function(r){var n=t.box(t.types.mfhd,new Uint8Array([0,0,0,0,r>>24,r>>16&255,r>>8&255,r&255]));return n}},{key:"traf",value:function(r){var n=t.tfhd(r.id),e=t.tfdt(r,r.baseMediaDecodeTime),s=0,a;if(r.isVideo&&r.videoSenc&&(a=r.videoSenc,a.forEach(function(w){s=s+8,w.subsamples&&w.subsamples.length&&(s=s+2,s=s+w.subsamples.length*6)})),r.videoSencLength=s,!r.useEME||!r.isVideoEncryption&&!r.isAudioEncryption){var o=t.sdtp(r),u=76;return t.box(t.types.traf,n,e,o,t.trun(r.samples,o.byteLength+u))}else if(r.isVideoEncryption)if(r.isVideo){var l=t.saiz(r),c=t.saio(r),f=t.trun1(r),h=t.senc(r),d=t.box(t.types.traf,n,e,l,c,f,h);return d}else if(r.isAudioEncryption){var _=t.sbgp(),v=t.saiz(r),y=t.saio(r),S=t.senc(r),E=t.trun1(r),T=t.box(t.types.traf,n,e,_,v,y,S,E);return T}else{var p=t.sbgp(),m=t.trun1(r);return t.box(t.types.traf,n,e,p,m)}else if(r.isVideo){var A=t.trun1(r);return t.box(t.types.traf,n,e,A)}else{var P=t.sbgp(),D=t.saiz(r),F=t.saio(r),I=t.senc(r),X=t.trun1(r),k=t.box(t.types.traf,n,e,P,D,F,I,X);return k}}},{key:"sdtp",value:function(r){var n=new Ze;return r.samples.forEach(function(e){n.write(new Uint8Array(r.isVideo?[e.keyframe?32:16]:[16]))}),t.box(t.types.sdtp,this.extension(0,0),n.buffer)}},{key:"trun1",value:function(r){var n=new Ze,e=Ze.writeUint32(r.samples.length),s=null;if(r.isVideo){var a=r.videoSencLength;s=Ze.writeUint32(r.samples.length*16+a+149),!r.isVideoEncryption&&r.isAudioEncryption&&(s=Ze.writeUint32(r.samples.length*16+92))}else{var o=r.samples.length*12+124;r.isAudioEncryption&&(o=r.samples.length*12+8*r.audioSenc.length+177),s=Ze.writeUint32(o)}return r.samples.forEach(function(u){n.write(Ze.writeUint32(u.duration)),n.write(Ze.writeUint32(u.size)),n.write(Ze.writeUint32(u.keyframe?33554432:65536)),r.isVideo&&n.write(Ze.writeUint32(u.cts?u.cts:0))}),t.box(t.types.trun,this.extension(0,r.flags),e,s,n.buffer)}},{key:"senc",value:function(r){var n=new Ze,e=r.samples.length,s=r.isVideo?16:8,a=r.isVideo?2:0,o=[],u=0;return r.isVideo?(o=r.videoSenc,u=r.videoSencLength):o=r.audioSenc,u=u||s*e,n.write(Ze.writeUint32(16+u),t.types.senc,this.extension(0,a)),n.write(Ze.writeUint32(e)),o.forEach(function(l){for(var c=0;c<l.InitializationVector.length;c++)n.write(new Uint8Array([l.InitializationVector[c]]));l.subsamples&&l.subsamples.length&&(n.write(Ze.writeUint16(l.subsamples.length)),l.subsamples.forEach(function(f){n.write(Ze.writeUint16(f.BytesOfClearData)),n.write(Ze.writeUint32(f.BytesOfProtectedData))}))}),n.buffer}},{key:"saio",value:function(r){var n=r.samples.length*12+141;!r.isVideo&&r.isAudioEncryption&&(n=149);var e=new Uint8Array([1,0,0,0,0,0,0,1,0,0,0,0,n>>24&255,n>>16&255,n>>8&255,n&255]);return t.box(t.types.saio,e)}},{key:"saiz",value:function(r){var n=r.samples.length,e=new Uint8Array([0,0,0,0,16,n>>24&255,n>>16&255,n>>8&255,n&255]);return t.box(t.types.saiz,e)}},{key:"sbgp",value:function(){var r=new Uint8Array([114,111,108,108,0,0,0,1,0,0,1,25,0,0,0,1]);return t.box(t.types.sbgp,this.extension(0,0),r)}},{key:"extension",value:function(r,n){return new Uint8Array([r,n>>16&255,n>>8&255,n&255])}},{key:"tfhd",value:function(r){return t.box(t.types.tfhd,new Uint8Array([0,0,0,0,r>>24,r>>16&255,r>>8&255,r&255]))}},{key:"tfdt",value:function(r,n){var e=Math.floor(n/(jh+1)),s=Math.floor(n%(jh+1));return r.useEME&&(r.isVideoEncryption||r.isAudioEncryption)?t.box(t.types.tfdt,new Uint8Array([0,0,0,0,s>>24,s>>16&255,s>>8&255,s&255])):t.box(t.types.tfdt,new Uint8Array([1,0,0,0,e>>24,e>>16&255,e>>8&255,e&255,s>>24,s>>16&255,s>>8&255,s&255]))}},{key:"trun",value:function(r,n){var e=r.length,s=12+16*e;n+=8+s;var a=new Uint8Array(s);a.set([0,0,15,1,e>>>24&255,e>>>16&255,e>>>8&255,e&255,n>>>24&255,n>>>16&255,n>>>8&255,n&255],0);for(var o=0;o<e;o++){var u=r[o],l=u.duration,c=u.size,f=u.flag,h=f===void 0?{}:f,d=u.cts,p=d===void 0?0:d;a.set([l>>>24&255,l>>>16&255,l>>>8&255,l&255,c>>>24&255,c>>>16&255,c>>>8&255,c&255,h.isLeading<<2|(h.dependsOn===null||h.dependsOn===void 0?1:h.dependsOn),h.isDependedOn<<6|h.hasRedundancy<<4|h.paddingValue<<1|(h.isNonSyncSample===null||h.isNonSyncSample===void 0?1:h.isNonSyncSample),h.degradationPriority&61440,h.degradationPriority&15,p>>>24&255,p>>>16&255,p>>>8&255,p&255],12+16*o)}return t.box(t.types.trun,a)}},{key:"moovMP4",value:function(r){return t.box.apply(t,[t.types.moov,t.mvhd(r[0].duration,r[0].timescale)].concat(Et(r.map(function(n){return t.trackMP4(n)}))))}},{key:"trackMP4",value:function(r){return t.box(t.types.trak,t.tkhd(r.id,r.duration,r.width,r.height),t.mdiaMP4(r))}},{key:"mdiaMP4",value:function(r){return t.box(t.types.mdia,t.mdhd(r.duration,r.timescale),t.hdlr(r.type),t.minfMP4(r))}},{key:"minfMP4",value:function(r){return t.box(t.types.minf,r.type===$n.VIDEO?t.VMHD:t.SMHD,t.DINF,t.stblMP4(r))}},{key:"stblMP4",value:function(r){var n=r.ext,e=[t.stsd(r),t.stts(n.stts),t.stsc(n.stsc),t.stsz(n.stsz),t.stco(n.stco)];return n.stss.length&&e.push(t.stss(n.stss)),n.ctts.length&&e.push(t.ctts(n.ctts)),t.box.apply(t,[t.types.stbl].concat(e))}},{key:"stts",value:function(r){var n=r.length,e=new Uint8Array(8*n),s=0;return r.forEach(function(a){var o=a.value,u=a.count;e.set([u>>24,u>>16&255,u>>8&255,u&255,o>>24,o>>16&255,o>>8&255,o&255],s),s+=8}),t.box(t.types.stts,Lt(new Uint8Array([0,0,0,0,n>>24,n>>16&255,n>>8&255,n&255]),e))}},{key:"stsc",value:function(r){var n=r.length,e=new Uint8Array(12*n),s=0;return r.forEach(function(a){var o=a.firstChunk,u=a.samplesPerChunk,l=a.sampleDescIndex;e.set([o>>24,o>>16&255,o>>8&255,o&255,u>>24,u>>16&255,u>>8&255,u&255,l>>24,l>>16&255,l>>8&255,l&255],s),s+=12}),t.box(t.types.stsc,Lt(new Uint8Array([0,0,0,0,n>>24,n>>16&255,n>>8&255,n&255]),e))}},{key:"stsz",value:function(r){var n=r.length,e=new Uint8Array(4*n),s=0;return r.forEach(function(a){e.set([a>>24,a>>16&255,a>>8&255,a&255],s),s+=4}),t.box(t.types.stsz,Lt(new Uint8Array([0,0,0,0,0,0,0,0,n>>24,n>>16&255,n>>8&255,n&255]),e))}},{key:"stco",value:function(r){var n=r.length,e=new Uint8Array(4*n),s=0;return r.forEach(function(a){e.set([a>>24,a>>16&255,a>>8&255,a&255],s),s+=4}),t.box(t.types.stco,Lt(new Uint8Array([0,0,0,0,n>>24,n>>16&255,n>>8&255,n&255]),e))}},{key:"stss",value:function(r){var n=r.length,e=new Uint8Array(4*n),s=0;return r.forEach(function(a){e.set([a>>24,a>>16&255,a>>8&255,a&255],s),s+=4}),t.box(t.types.stss,Lt(new Uint8Array([0,0,0,0,n>>24,n>>16&255,n>>8&255,n&255]),e))}},{key:"ctts",value:function(r){var n=r.length,e=new Uint8Array(8*n),s=0;return r.forEach(function(a){var o=a.value,u=a.count;e.set([u>>24,u>>16&255,u>>8&255,u&255,o>>24,o>>16&255,o>>8&255,o&255],s),s+=8}),t.box(t.types.ctts,Lt(new Uint8Array([0,0,0,0,n>>24,n>>16&255,n>>8&255,n&255]),e))}},{key:"styp",value:function(){return t.box(t.types.styp,new Uint8Array([109,115,100,104,0,0,0,0,109,115,100,104,109,115,105,120]))}},{key:"sidx",value:function(r){var n=r.timescale,e=r.samples[0].duration,s=e*r.samples.length,a=r.samples[0].sampleOffset*e,o=8;r.samples.forEach(function(h){o+=h.size});var u=0;if(r.isVideo){var l=0,c;r.videoSenc&&(c=r.videoSenc),r.isVideo&&c.forEach(function(h){l=l+8,h.subsamples&&h.subsamples.length&&(l=l+2,l=l+h.subsamples.length*6)}),r.videoSencLength=l,u=o+141+r.samples.length*16+l,r.useEME&&r.isAudioEncryption&&!r.isVideoEncryption&&(u=o+r.samples.length*16+84)}else u=o+116+r.samples.length*12,r.useEME&&r.isAudioEncryption&&(u=o+169+r.samples.length*12+8*r.audioSenc.length);var f=new Uint8Array([0,0,0,0,0,0,0,r.id&255,n>>24&255,n>>16&255,n>>8&255,n&255,a>>24&255,a>>16&255,a>>8&255,a&255,0,0,0,0,0,0,0,1,0,u>>16&255,u>>8&255,u&255,s>>24&255,s>>16&255,s>>8&255,s&255,144,0,0,0]);return t.box(t.types.sidx,f)}},{key:"mdat",value:function(r){var n=t.box(t.types.mdat,r);return n}}]),t}();B(ae,"types",["avc1","avcC","hvc1","hvcC","dinf","dref","esds","ftyp","hdlr","mdat","mdhd","mdia","mfhd","minf","moof","moov","mp4a","mvex","mvhd","pasp","stbl","stco","stsc","stsd","stsz","stts","tfdt","tfhd","traf","trak","trex","tkhd","vmhd","smhd","ctts","stss","styp","pssh","sidx","sbgp","saiz","saio","senc","trun","encv","enca","sinf","btrt","frma","tenc","schm","schi","mehd","fiel","sdtp"].reduce(function(t,i){return t[i]=[i.charCodeAt(0),i.charCodeAt(1),i.charCodeAt(2),i.charCodeAt(3)],t},Object.create(null)));B(ae,"HDLR_TYPES",{video:new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),audio:new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0])});B(ae,"FTYPAVC1",ae.box(ae.types.ftyp,new Uint8Array([105,115,111,109,0,0,0,1,105,115,111,109,97,118,99,49])));B(ae,"FTYPHEV1",ae.box(ae.types.ftyp,new Uint8Array([105,115,111,109,0,0,0,1,105,115,111,109,104,101,118,49])));B(ae,"DINF",ae.box(ae.types.dinf,ae.box(ae.types.dref,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]))));B(ae,"VMHD",ae.box(ae.types.vmhd,new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])));B(ae,"SMHD",ae.box(ae.types.smhd,new Uint8Array([0,0,0,0,0,0,0,0])));B(ae,"StblTable",new Uint8Array([0,0,0,0,0,0,0,0]));B(ae,"STTS",ae.box(ae.types.stts,ae.StblTable));B(ae,"STSC",ae.box(ae.types.stsc,ae.StblTable));B(ae,"STSZ",ae.box(ae.types.stsz,new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0])));B(ae,"STCO",ae.box(ae.types.stco,ae.StblTable));var Zv=function(){function t(i,r){Re(this,t),this.name=i||"",this._prefix="[".concat(this.name,"]"),t.disabled=r}return Me(t,[{key:"debug",value:function(){var r;if(!t.disabled){for(var n=arguments.length,e=new Array(n),s=0;s<n;s++)e[s]=arguments[s];(r=console).debug.apply(r,[this._prefix].concat(e))}}},{key:"log",value:function(){var r;if(!t.disabled){for(var n=arguments.length,e=new Array(n),s=0;s<n;s++)e[s]=arguments[s];(r=console).log.apply(r,[this._prefix].concat(e))}}},{key:"warn",value:function(){var r;if(!t.disabled){for(var n=arguments.length,e=new Array(n),s=0;s<n;s++)e[s]=arguments[s];(r=console).warn.apply(r,[this._prefix].concat(e))}}},{key:"error",value:function(){var r;if(!t.disabled){for(var n=arguments.length,e=new Array(n),s=0;s<n;s++)e[s]=arguments[s];(r=console).error.apply(r,[this._prefix].concat(e))}}},{key:"table",value:function(){var r;t.disabled||(console.group(this._prefix),(r=console).table.apply(r,arguments),console.groupEnd())}}],[{key:"enable",value:function(){t.disabled=!1}},{key:"disable",value:function(){t.disabled=!0}}]),t}();B(Zv,"disabled",!0);var J_=function(){function t(i,r,n){Re(this,t),this.videoTrack=i,this.audioTrack=r;var e=/Chrome\/([^.]+)/.exec(navigator.userAgent);this.forceFirstIDR=e&&Number(e[1])<50,this.log=new Zv("FMP4Remuxer",n&&n.openLog?!n.openLog:!0)}return Me(t,[{key:"remux",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},e=this.videoTrack,s=this.audioTrack,a=e.exist(),o=s.exist(),u,l,c,f=[];r&&(n&&n.initMerge?(a&&f.push(this.videoTrack),o&&f.push(this.audioTrack),c=ae.initSegment(f)):(a&&(u=ae.initSegment([this.videoTrack])),o&&(l=ae.initSegment([this.audioTrack]))));var h,d;return a&&e.hasSample()&&(h=this._remuxVideo()),o&&s.hasSample()&&(d=this._remuxAudio()),e.samples=[],s.samples=[],{initSegment:c,videoInitSegment:u,audioInitSegment:l,videoSegment:h,audioSegment:d}}},{key:"_remuxVideo",value:function(){var r=this.videoTrack;this.forceFirstIDR&&(r.samples[0].flag={dependsOn:2,isNonSyncSample:0});var n=r.samples,e=0;n.forEach(function(p){e+=p.units.reduce(function(m,_){return m+_.byteLength},0),e+=p.units.length*4});for(var s=new Uint8Array(e),a=new DataView(s.buffer),o=function(m,_){_=n[u];var v=0;_.units.forEach(function(y){a.setUint32(m,y.byteLength),m+=4,s.set(y,m),m+=y.byteLength,v+=4+y.byteLength}),_.size=v,c=m,f=_},u=0,l=n.length,c=0,f;u<l;u++)o(c,f);var h=ae.mdat(s),d=ae.moof([r]);return Lt(d,h)}},{key:"_remuxAudio",value:function(){var r=this.audioTrack,n=new Uint8Array(r.samples.reduce(function(a,o){return a+o.size},0));r.samples.reduce(function(a,o){return n.set(o.data,a),a+o.size},0);var e=ae.mdat(n),s=ae.moof([r]);return Lt(s,e)}},{key:"reset",value:function(){this.videoTrack.reset(),this.audioTrack.reset()}}]),t}(),eS=function(){function t(){ze(this,t);var i=window.crypto||window.msCrypto;this.subtle=i&&(i.subtle||i.webkitSubtle),this.externalDecryptor=null}return Ve(t,[{key:"destroy",value:function(){var r;(r=this.externalDecryptor)!==null&&r!==void 0&&r.destroy&&this.externalDecryptor.destroy()}},{key:"decrypt",value:function(r,n){if(!(!r&&!n)){var e=[];return r&&(e[0]=this._decryptSegment(r)),n&&(e[1]=this._decryptSegment(n)),Promise.all(e)}}},{key:"_decryptSegment",value:function(){var i=ge(K().mark(function n(e){var s;return K().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(s=e.data,!e.key){o.next=5;break}return o.next=4,this._decryptData(e.data,e.key,e.keyIv);case 4:s=o.sent;case 5:if(e.map){o.next=7;break}return o.abrupt("return",s);case 7:return o.abrupt("return",oa(e.map,s));case 8:case"end":return o.stop()}},n,this)}));function r(n){return i.apply(this,arguments)}return r}()},{key:"_decryptData",value:function(){var i=ge(K().mark(function n(e,s,a){var o;return K().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(!this.externalDecryptor){l.next=6;break}return l.next=3,this.externalDecryptor.decrypt(e,s,a);case 3:return l.abrupt("return",l.sent);case 6:if(this.subtle){l.next=8;break}throw new Error("crypto is not defined");case 8:return l.next=10,this.subtle.importKey("raw",s,{name:"AES-CBC"},!1,["encrypt","decrypt"]);case 10:return o=l.sent,l.t0=Uint8Array,l.next=14,this.subtle.decrypt({name:"AES-CBC",iv:a},o,e);case 14:return l.t1=l.sent,l.abrupt("return",new l.t0(l.t1));case 16:case"end":return l.stop()}},n,this)}));function r(n,e,s){return i.apply(this,arguments)}return r}()}]),t}(),fe=de(de({},J),{},{STREAM_PARSED:"core.streamparsed",NO_AUDIO_TRACK:"core.noaudiotrack",SUBTITLE_SEGMENTS:"core.subtitlesegments",SUBTITLE_PLAYLIST:"core.subtitleplaylist",SEI_PAYLOAD_TIME:"core.seipayloadtime",APPEND_COST:"core.appendcost"}),yu=new on("Transmuxer"),Gh=function(){function t(i,r,n){ze(this,t),b(this,"_initSegmentId",""),this.hls=i,this._demuxer=r?new q_:new qv,this._isMP4=r,n&&(this._remuxer=new J_(this._demuxer.videoTrack,this._demuxer.audioTrack))}return Ve(t,[{key:"transmux",value:function(r,n,e,s,a,o){var u=this._demuxer;try{this._isMP4?u.demux(r,n):u.demuxAndFix(oa(r,n),e,s,a)}catch(A){throw new Ce(oe.DEMUX,oe.SUB_TYPES.HLS,A)}var l=u.videoTrack,c=u.audioTrack,f=u.metadataTrack,h={codec:l.codec,timescale:l.timescale,firstDts:l.firstDts/l.timescale,firstPts:l.firstPts/l.timescale,duration:l.samplesDuration/l.timescale},d={codec:c.codec,timescale:c.timescale,firstDts:c.firstDts/l.timescale,firstPts:c.firstPts/l.timescale,duration:c.samplesDuration/l.timescale},p="".concat(l.codec,"/").concat(l.width,"/").concat(l.height,"/").concat(c.codec,"/").concat(c.config);if(p!==this._initSegmentId&&(this._initSegmentId=p,o=!0),this._fireEvents(l,c,f,e||o),this.hls.emit(fe.DEMUXED_TRACK,{videoTrack:l,audioTrack:c}),this._remuxer){o&&this.hls.isLive&&!this.hls.config.mseLowLatency&&(l.duration=this.hls.totalDuration*l.timescale,c.duration=this.hls.totalDuration*c.timescale);try{var m=this._remuxer.remux(o),_=m.videoInitSegment,v=m.videoSegment,y=m.audioInitSegment,S=m.audioSegment,E=oa(_,v),T=oa(y,S);return[E?de(de({},h),{},{data:E}):void 0,T?de(de({},d),{},{data:T}):void 0]}catch(A){throw new Ce(oe.REMUX,oe.SUB_TYPES.FMP4,A)}}else return[l,c]}},{key:"_fireEvents",value:function(r,n,e,s){var a=this,o=[r,n],u="discontinuity: ".concat(s);o.forEach(function(l){var c;(c=l.samples)!==null&&c!==void 0&&c.length&&(u+="; ".concat(l.samples.length," ").concat(l.type===$n.VIDEO?"video":"audio"," samples, firstDts/firstPts/duration: ").concat((l.firstDts/l.timescale).toFixed(3),"/").concat((l.firstPts/l.timescale).toFixed(3),"/").concat((l.samplesDuration/l.timescale).toFixed(3))),s&&l.exist()&&a.hls.emit(fe.METADATA_PARSED,{type:l.type,track:l,meta:de({codec:l.codec,timescale:l.timescale,baseDts:l.baseDts},l.type===$n.VIDEO?{width:l.width,height:l.height,sarRatio:l.sarRatio}:{codec:l.codec,channelCount:l.channelCount,sampleRate:l.sampleRate})})}),yu.debug(u),r.warnings.forEach(function(l){var c;switch(l.type){case Rt.LARGE_AV_SHIFT:c=fe.LARGE_AV_FIRST_FRAME_GAP_DETECT;break;case Rt.LARGE_VIDEO_GAP:c=fe.LARGE_VIDEO_DTS_GAP_DETECT;break;case Rt.LARGE_VIDEO_GAP_BETWEEN_CHUNK:c=fe.MAX_DTS_DELTA_WITH_NEXT_SEGMENT_DETECT;break}c&&a.hls.emit(fe.STREAM_EXCEPTION,de(de({},l),{},{type:c})),yu.warn("video exception",l)}),n.warnings.forEach(function(l){var c;switch(l.type){case Rt.LARGE_AUDIO_GAP:c=fe.LARGE_AUDIO_DTS_GAP_DETECT;break;case Rt.AUDIO_FILLED:c=fe.AUDIO_GAP_DETECT;break;case Rt.AUDIO_DROPPED:c=fe.AUDIO_OVERLAP_DETECT;break}c&&a.hls.emit(fe.STREAM_EXCEPTION,de(de({},l),{},{type:c})),yu.warn("audio exception",l)}),r.samples.forEach(function(l){l.keyframe&&a.hls.emit(fe.KEYFRAME,{pts:l.pts})}),e.seiSamples.forEach(function(l){a.hls.emit(fe.SEI,de(de({},l),{},{originPts:l.originPts/90,sei:{code:l.data.type,content:l.data.payload,dts:l.pts}}))})}}]),t}(),tS=["data"],nS=["data"],Wh=new on("BufferService"),rS=function(){function t(i){var r=this;ze(this,t),b(this,"_decryptor",new eS),b(this,"_transmuxer",null),b(this,"_mse",null),b(this,"_softVideo",null),b(this,"_sourceCreated",!1),b(this,"_needInitSegment",!0),b(this,"_directAppend",!1),this.hls=i,i.config.softDecode?this._softVideo=i.media:(this._mse=new dt(null,{preferMMS:i.config.preferMMS}),i.config.url&&this._mse.bindMedia(i.media).then(function(n){r.hls.emit(J.MEDIASOURCE_OPENED,n)})),i.config.decryptor&&(this._decryptor.externalDecryptor=i.config.decryptor)}return Ve(t,[{key:"baseDts",get:function(){var r,n,e;return(r=this._transmuxer)===null||r===void 0||(n=r._demuxer)===null||n===void 0||(e=n._fixer)===null||e===void 0?void 0:e._baseDts}},{key:"nbSb",get:function(){var r;return(r=this._mse)!==null&&r!==void 0&&r._sourceBuffer?Object.keys(this._mse._sourceBuffer).length:0}},{key:"msIsOpened",get:function(){var r;return(r=this._mse)===null||r===void 0?void 0:r.isOpened}},{key:"msHasOpTasks",get:function(){var r;return(r=this._mse)===null||r===void 0?void 0:r.hasOpTasks}},{key:"msStreaming",get:function(){var r;return(r=this._mse)===null||r===void 0?void 0:r.streaming}},{key:"updateDuration",value:function(){var i=ge(K().mark(function n(e){return K().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(Wh.debug("update duration",e),!this._mse){a.next=9;break}if(this._mse.isOpened){a.next=5;break}return a.next=5,this._mse.open();case 5:return a.next=7,this._mse.updateDuration(e);case 7:a.next=10;break;case 9:this._softVideo&&(this._softVideo.duration=e);case 10:case"end":return a.stop()}},n,this)}));function r(n){return i.apply(this,arguments)}return r}()},{key:"createSource",value:function(r,n,e,s){if(!this._sourceCreated){var a=r||n;if(a){if(qv.probe(a))this._transmuxer||(this._transmuxer=new Gh(this.hls,!1,!this._softVideo));else if(Fe.probe(a))if(this._softVideo)this._transmuxer||(this._transmuxer=new Gh(this.hls,!0));else{this._directAppend=!0;var o=!1;r&&!e&&Fe.findBox(r,["moov","trak"]).forEach(function(u){var l=Fe.findBox(u.data,["trak","mdia","minf","stbl","stsd"])[0];if(l){var c=Fe.stsd(l).entries[0];if(c){if(c.hvcC)e=c.hvcC.codec||"hev1.1.6.L93.B0";else if(c.avcC)e=c.avcC.codec;else if(c.sampleRate||c.esds){var f;s=((f=c.esds)===null||f===void 0?void 0:f.codec)||"mp4a.40.2",o=!0}}}}),n&&!s&&Fe.findBox(n,["moov","trak","mdia","minf","stbl","stsd"]).forEach(function(u){var l=Fe.stsd(u).entries[0];l&&l.esds&&(s=l.esds.codec)}),r&&!e&&(e="avc1.42e01e"),n&&!s&&(s="mp4a.40.2"),o&&(e+=", ".concat(s),s=""),this._createMseSource(e,s)}else throw new Ce(oe.OTHER,null,null,null,"unsupported stream");this._softVideo&&(this._sourceCreated=!0)}}}},{key:"appendBuffer",value:function(){var i=ge(K().mark(function n(e,s,a,o,u,l,c){var f,h,d,p,m,_,v,y,S,E,T,A,P;return K().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:if(!(!(a!=null&&a.length)&&!(o!=null&&o.length))){F.next=2;break}return F.abrupt("return");case 2:if(!this._directAppend){F.next=7;break}return f=[],a&&f.push(this._mse.append(dt.VIDEO,a)),o&&f.push(this._mse.append(dt.AUDIO,o)),F.abrupt("return",Promise.all(f));case 7:if(h=this._needInitSegment||u,d=this._transmuxer.transmux(a,o,h,l,c,this._needInitSegment||u),p=Tn(d,2),m=p[0],_=p[1],o&&s&&(s==null||s.setTrackExist(!1,!0)),o&&e&&(e==null||e.setTrackExist(!0,!1)),s||e==null||e.setTrackExist(!!m,!!_),m&&!_&&this.hls.emit(fe.NO_AUDIO_TRACK),!this._softVideo){F.next=18;break}this._softVideo.appendBuffer(m,_),this._needInitSegment=!1,F.next=28;break;case 18:if(!this._mse){F.next=28;break}return v=!this._sourceCreated,v&&this._createMseSource(m==null?void 0:m.codec,_==null?void 0:_.codec),this._needInitSegment=!1,y=this._mse,S=[],h&&!v&&this._handleCodecChange(m,_).forEach(function(I){return S.push(I)}),m&&(E=m.data,T=bh(m,tS),S.push(y.append(dt.VIDEO,E,T))),_&&(A=_.data,P=bh(_,nS),S.push(y.append(dt.AUDIO,A,P))),F.abrupt("return",Promise.all(S));case 28:case"end":return F.stop()}},n,this)}));function r(n,e,s,a,o,u,l){return i.apply(this,arguments)}return r}()},{key:"removeBuffer",value:function(){var i=ge(K().mark(function n(){var e=this,s,a,o,u=arguments;return K().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(s=u.length>0&&u[0]!==void 0?u[0]:0,a=u.length>1&&u[1]!==void 0?u[1]:1/0,o=this.hls.media,!(!this._mse||!o||s<0||a<s||s>=this._mse.duration)){c.next=5;break}return c.abrupt("return");case 5:return c.abrupt("return",this._mse.clearBuffer(s,a).then(function(){return e.hls.emit(J.REMOVE_BUFFER,{start:s,end:a,removeEnd:a})}));case 6:case"end":return c.stop()}},n,this)}));function r(){return i.apply(this,arguments)}return r}()},{key:"evictBuffer",value:function(){var i=ge(K().mark(function n(e){var s,a,o,u;return K().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(s=this.hls.media,!(!this._mse||!s||!e||e<0)){c.next=3;break}return c.abrupt("return");case 3:if(a=s.currentTime,o=a-e,!(o<=0)){c.next=7;break}return c.abrupt("return");case 7:if(u=at.start(at.get(s)),!(u+1>=o)){c.next=10;break}return c.abrupt("return");case 10:return c.abrupt("return",this.removeBuffer(0,o));case 11:case"end":return c.stop()}},n,this)}));function r(n){return i.apply(this,arguments)}return r}()},{key:"clearAllBuffer",value:function(){var i=ge(K().mark(function n(){return K().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(!this._mse){s.next=2;break}return s.abrupt("return",this._mse.clearAllBuffer());case 2:case"end":return s.stop()}},n,this)}));function r(){return i.apply(this,arguments)}return r}()},{key:"decryptBuffer",value:function(r,n){return this._decryptor.decrypt(r,n)}},{key:"reset",value:function(){var i=ge(K().mark(function n(){var e,s=arguments;return K().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(e=s.length>0&&s[0]!==void 0?s[0]:!1,!(this._mse&&!e)){o.next=8;break}return this._transmuxer=null,this._sourceCreated=!1,o.next=6,this._mse.unbindMedia();case 6:return o.next=8,this._mse.bindMedia(this.hls.media);case 8:this._needInitSegment=!0,this._directAppend=!1;case 10:case"end":return o.stop()}},n,this)}));function r(){return i.apply(this,arguments)}return r}()},{key:"endOfStream",value:function(){var i=ge(K().mark(function n(){return K().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(!this._mse){s.next=5;break}if(!this._sourceCreated){s.next=5;break}return s.next=4,this._mse.endOfStream();case 4:this.hls.emit(J.BUFFEREOS);case 5:this._softVideo&&this._softVideo.endOfStream();case 6:case"end":return s.stop()}},n,this)}));function r(){return i.apply(this,arguments)}return r}()},{key:"setLiveSeekableRange",value:function(){var i=ge(K().mark(function n(e,s){return K().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:this._mse&&this._mse.setLiveSeekableRange(e,s);case 1:case"end":return o.stop()}},n,this)}));function r(n,e){return i.apply(this,arguments)}return r}()},{key:"destroy",value:function(){var i=ge(K().mark(function n(){var e;return K().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if((e=this._decryptor)===null||e===void 0||e.destroy(),!this._mse){a.next=4;break}return a.next=4,this._mse.unbindMedia();case 4:this._decryptor=null,this._mse=null,this._softVideo=null;case 7:case"end":return a.stop()}},n,this)}));function r(){return i.apply(this,arguments)}return r}()},{key:"_createMseSource",value:function(r,n){Wh.debug("create mse source, videoCodec=".concat(r,", audioCodec=").concat(n));var e=this._mse;e&&(r&&(e.createSource(dt.VIDEO,"video/mp4;codecs=".concat(r)),this._sourceCreated=!0),n&&(e.createSource(dt.AUDIO,"audio/mp4;codecs=".concat(n)),this._sourceCreated=!0),this.hls.emit(J.SOURCEBUFFER_CREATED))}},{key:"_handleCodecChange",value:function(r,n){var e=[],s=this._mse,a=[{type:dt.VIDEO,codecs:r==null?void 0:r.codec},{type:dt.AUDIO,codecs:n==null?void 0:n.codec}];return a.filter(function(o){return!!o.codecs}).forEach(function(o){var u=o.type,l=o.codecs,c=s.getSourceBuffer(u);if(c){var f=l.split(",")[0];new RegExp(f,"ig").test(c.mimeType)||e.push(s.changeType(u,"".concat(u,"/mp4;codecs=").concat(l)))}}),e}},{key:"seamlessSwitch",value:function(){this._needInitSegment=!0}},{key:"isFull",value:function(){var r,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:dt.VIDEO;return(r=this._mse)===null||r===void 0?void 0:r.isFull(n)}}]),t}();function iS(t){var i=(t==null?void 0:t.media)||document.createElement("video");return de(de({maxPlaylistSize:50,retryCount:3,retryDelay:1e3,pollRetryCount:2,loadTimeout:1e4,manifestLoadTimeout:1e4,preloadTime:30,softDecode:!1,bufferBehind:10,maxJumpDistance:3,startTime:0,useLowLatency:!0,targetLatency:10,maxLatency:20,allowedStreamTrackChange:!0,seiInTime:!1,manifestList:[],minSegmentsStartPlay:3,preferMMS:!1,preferMMSStreaming:!1,mseLowLatency:!0},t),{},{media:i})}var sS=Ve(function t(){ze(this,t),b(this,"version",0),b(this,"streams",[]),b(this,"isMaster",!0)}),Jv={Audio:"AUDIO",Video:"VIDEO",SubTitle:"SUBTITLE",ClosedCaptions:"CLOSED-CAPTIONS"},Gs={CLEAR_KEY:"org.w3.clearkey",FAIRPLAY:["urn:uuid:94ce86fb-07ff-4f43-adb8-93d2fa968ca2","com.apple.streamingkeydelivery"],WIDEVINE:["urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed","com.widevine.alpha","com.widevine"],PLAYREADY:["urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95","com.microsoft.playready"]};function eg(t){for(var i=[],r=0;r<t.length;r++)Array.isArray(t[r])?i=i.concat(eg(t[r])):i.push(t[r]);return i}var Rc=Ve(function t(){ze(this,t),b(this,"id",0),b(this,"url",""),b(this,"default",!1),b(this,"autoSelect",!1),b(this,"forced",!1),b(this,"group",""),b(this,"name",""),b(this,"lang",""),b(this,"segments",[]),b(this,"endSN",0)}),aS=function(t){yo(r,t);var i=_o(r);function r(){var n;ze(this,r);for(var e=arguments.length,s=new Array(e),a=0;a<e;a++)s[a]=arguments[a];return n=i.call.apply(i,[this].concat(s)),b(ne(n),"mediaType",Jv.Audio),b(ne(n),"channels",0),n}return Ve(r)}(Rc),oS=function(t){yo(r,t);var i=_o(r);function r(){var n;ze(this,r);for(var e=arguments.length,s=new Array(e),a=0;a<e;a++)s[a]=arguments[a];return n=i.call.apply(i,[this].concat(s)),b(ne(n),"mediaType",Jv.SubTitle),n}return Ve(r)}(Rc),uS=Ve(function t(){ze(this,t),b(this,"id",0),b(this,"bitrate",0),b(this,"width",0),b(this,"height",0),b(this,"name",""),b(this,"url",""),b(this,"audioCodec",""),b(this,"videoCodec",""),b(this,"textCodec",""),b(this,"audioGroup",""),b(this,"audioStreams",[]),b(this,"subtitleStreams",[]),b(this,"closedCaptionsStream",[])}),lS=Ve(function t(){ze(this,t),b(this,"version",0),b(this,"url",""),b(this,"type",""),b(this,"startCC",0),b(this,"endCC",0),b(this,"startSN",0),b(this,"endSN",0),b(this,"totalDuration",0),b(this,"targetDuration",0),b(this,"partTargetDuration",0),b(this,"canSkipUntil",0),b(this,"canSkipDateRanges",!1),b(this,"skippedSegments",0),b(this,"canBlockReload",!1),b(this,"partHoldBack",0),b(this,"live",!0),b(this,"lowLatency",!1),b(this,"endPartIndex",0),b(this,"segments",[])}),Ws=function(){function t(i){ze(this,t),b(this,"sn",0),b(this,"cc",0),b(this,"url",""),b(this,"parentUrl",""),b(this,"title",""),b(this,"start",0),b(this,"duration",0),b(this,"dataTime",""),b(this,"key",null),b(this,"byteRange",null),b(this,"isInitSegment",!1),b(this,"initSegment",null),b(this,"isLast",!1),b(this,"hasAudio",!1),b(this,"hasVideo",!1),b(this,"independent",!1),b(this,"partIndex",0),this.parentUrl=i}return Ve(t,[{key:"end",get:function(){return this.start+this.duration}},{key:"setTrackExist",value:function(r,n){this.hasVideo=r,this.hasAudio=n}},{key:"setByteRange",value:function(r,n){this.byteRange=[0];var e=r.split("@");e.length===1&&n&&n.byteRange?(this.byteRange[0]=n.byteRange[1]||0,this.byteRange[0]&&(this.byteRange[0]+=1)):this.byteRange[0]=parseInt(e[1]),this.byteRange[1]=this.byteRange[0]+parseInt(e[0])-1}}]),t}(),cS=function(){function t(i){ze(this,t),b(this,"method",""),b(this,"url",""),b(this,"iv",null),b(this,"keyFormat",""),b(this,"keyFormatVersions",""),i instanceof t&&(this.method=i.method,this.url=i.url,this.keyFormat=i.keyFormat,this.keyFormatVersions=i.keyFormatVersions,i.iv&&(this.iv=new Uint8Array(i.iv)))}return Ve(t,[{key:"clone",value:function(r){var n=new t(this);return r!=null&&n.setIVFromSN(r),n}},{key:"setIVFromSN",value:function(r){if(!this.iv&&this.method==="AES-128"&&typeof r=="number"&&this.url){this.iv=new Uint8Array(16);for(var n=12;n<16;n++)this.iv[n]=r>>8*(15-n)&255}}},{key:"isSegmentEncrypted",value:function(){var r=this.method;return r==="AES-128"}},{key:"isValidKeySystem",value:function(){var r=eg([Gs.CLEAR_KEY,Gs.FAIRPLAY,Gs.WIDEVINE,Gs.PLAYREADY]).indexOf(this.keyFormat)>-1;if(!r)return!1;var n=["SAMPLE-AES","SAMPLE-AES-CENC","SAMPLE-AES-CTR"].indexOf(this.method)>-1;return!!n}},{key:"isSupported",value:function(){return this.method?this.isSegmentEncrypted()?!0:!!this.isValidKeySystem():!1}}]),t}(),fS=/^#(EXT[^:]*)(?::(.*))?$/,$h=/([^=]+)=(?:"([^"]*)"|([^",]*))(?:,|$)/g,hS=/^(?:[a-zA-Z0-9+\-.]+:)?\/\//,dS=/^((?:[a-zA-Z0-9+\-.]+:)?\/\/[^/?#]*)?([^?#]*\/)?/;function pS(t){return t.split(/[\r\n]/).map(function(i){return i.trim()}).filter(Boolean)}function tg(t){var i=t.match(fS);if(!(!i||!i[1]))return[i[1].replace("EXT-X-",""),i[2]]}function or(t){for(var i={},r=$h.exec(t);r;)i[r[1]]=r[2]||r[3],r=$h.exec(t);return i}function qr(t,i){if(!i||!t||hS.test(t))return t;var r=dS.exec(i);return r?t[0]==="/"?r[1]+t:r[1]+r[2]+t:t}var vS={audio:[/^mp4a/,/^vorbis$/,/^opus$/,/^flac$/,/^[ae]c-3$/],video:[/^avc/,/^hev/,/^hvc/,/^vp0?[89]/,/^av1$/],text:[/^vtt$/,/^wvtt/,/^stpp/]};function _u(t,i){var r=vS[t];if(!(!r||!i||!i.length)){for(var n=0;n<r.length;n++)for(var e=0;e<i.length;e++)if(r[n].test(i[e]))return i[e]}}function gS(t,i){for(var r=new sS,n=0,e,s=[],a=[];e=t[n++];){var o=tg(e);if(o){var u=Tn(o,2),l=u[0],c=u[1];if(l==="VERSION")r.version=parseInt(c);else if(l==="MEDIA"&&c){var f=or(c),h=void 0;switch(f.TYPE){case"AUDIO":h=new aS;break;case"SUBTITLES":h=new oS;break;default:h=new Rc}h.url=qr(f.URI,i),h.default=f.DEFAULT==="YES",h.autoSelect=f.AUTOSELECT==="YES",h.group=f["GROUP-ID"],h.name=f.NAME,h.lang=f.LANGUAGE,f.CHANNELS&&(h.channels=Number(f.CHANNELS.split("/")[0]),Number.isNaN(h.channels)&&(h.channels=0)),f.TYPE==="AUDIO"&&f.URI&&s.push(h),f.TYPE==="SUBTITLES"&&a.push(h)}else if(l==="STREAM-INF"&&c){var d=new uS,p=or(c);if(d.bitrate=parseInt(p["AVERAGE-BANDWIDTH"]||p.BANDWIDTH),d.name=p.NAME,d.url=qr(t[n++],i),p.RESOLUTION){var m=p.RESOLUTION.split("x"),_=Tn(m,2),v=_[0],y=_[1];d.width=parseInt(v),d.height=parseInt(y)}if(p.CODECS){var S=p.CODECS.split(/[ ,]+/).filter(Boolean);d.videoCodec=_u("video",S),d.audioCodec=_u("audio",S),d.textCodec=_u("text",S)}d.audioGroup=p.AUDIO,d.subtitleGroup=p.SUBTITLES,r.streams.push(d)}}}return r.streams.forEach(function(E,T){E.id=T}),s.length&&(s.forEach(function(E,T){E.id=T}),r.streams.forEach(function(E){E.audioGroup&&(E.audioStreams=s.filter(function(T){return T.group===E.audioGroup}))})),a.length&&(a.forEach(function(E,T){E.id=T}),r.streams.forEach(function(E){E.subtitleGroup&&(E.subtitleStreams=a.filter(function(T){return T.group===E.subtitleGroup}))})),r}function mS(t,i,r){var n=new lS;n.url=i;for(var e=new Ws(i),s=null,a=null,o=0,u=0,l=0,c=0,f,h=!1,d=0;(f=t[c++])&&!h;){if(f[0]!=="#"){if(n.lowLatency){u++;continue}e.sn=u,e.cc=l,e.url=qr(f,i),a&&(e.key=a.clone(u)),s&&(e.initSegment=s),n.segments.push(e),e=new Ws(i),u++;continue}var p=tg(f);if(p){var m=Tn(p,2),_=m[0],v=m[1];switch(_){case"VERSION":n.version=parseInt(v);break;case"PLAYLIST-TYPE":n.type=v==null?void 0:v.toUpperCase();break;case"TARGETDURATION":n.targetDuration=parseFloat(v);break;case"PART-INF":{r&&(n.lowLatency=!0);var y=or(v);y["PART-TARGET"]&&(n.partTargetDuration=parseFloat(y["PART-TARGET"]))}break;case"SERVER-CONTROL":{var S=or(v);n.canBlockReload=S["CAN-BLOCK-RELOAD"]==="YES",n.partHoldBack=parseFloat(S["PART-HOLD-BACK"]||0),n.canSkipUntil=parseFloat(S["CAN-SKIP-UNTIL"]||0),n.canSkipDateRanges=S["CAN-SKIP-DATERANGES"]==="YES"}break;case"ENDLIST":{var E=n.segments[n.segments.length-1];E&&(E.isLast=!0),n.live=!1,h=!0}break;case"MEDIA-SEQUENCE":u=n.startSN=parseInt(v);break;case"DISCONTINUITY-SEQUENCE":l=n.startCC=parseInt(v);break;case"DISCONTINUITY":l++;break;case"BYTERANGE":e.setByteRange(v,n.segments[n.segments.length-1]);break;case"PART":{if(!n.lowLatency)break;var T=or(v);e.duration=parseFloat(T.DURATION),e.independent=T.INDEPENDENT==="YES",e.sn=u,e.cc=l,e.partIndex=d,e.start=o,e.duration=parseFloat(T.DURATION),o+=e.duration,e.url=qr(T.URI,i),a&&(e.key=a.clone(u)),s&&(e.initSegment=s),n.segments.push(e),e=new Ws(i),d++}break;case"PRELOAD-HINT":break;case"PROGRAM-DATE-TIME":e.dataTime=v;break;case"EXTINF":{if(n.lowLatency){d=0;break}var A=v.split(","),P=Tn(A,2),D=P[0],F=P[1];e.start=o,e.duration=parseFloat(D),o+=e.duration,e.title=F}break;case"KEY":{var I=or(v);if(I.METHOD==="NONE"){a=null;break}if(a=new cS,a.method=I.METHOD,a.url=/^blob:/.test(I.URI)?I.URI:qr(I.URI,i),a.keyFormat=I.KEYFORMAT||"identity",a.keyFormatVersions=I.KEYFORMATVERSIONS,!a.isSupported())throw new Error("encrypt ".concat(I.METHOD,"/").concat(I.KEYFORMAT," is not supported"));if(I.IV){var X=I.IV.slice(2);X=(X.length&1?"0":"")+X,a.iv=new Uint8Array(X.length/2);for(var k=0,w=X.length/2;k<w;k++)a.iv[k]=parseInt(X.slice(k*2,k*2+2),16)}}break;case"MAP":{var C=or(v);e.url=qr(C.URI,i),C.BYTERANGE&&e.setByteRange(C.BYTERANGE),e.isInitSegment=!0,e.sn=0,a&&(e.key=a.clone(0)),s=e,e=new Ws(i)}break}}}n.segments=n.segments.filter(function(L){return L.duration!==0});var N=n.segments[n.segments.length-1];return N&&(n.endSN=N.sn,n.endPartIndex=N.partIndex,h&&!N.isLast&&(N.isLast=!0)),n.totalDuration=o,n.endCC=l,n}var $s=function(){function t(){ze(this,t)}return Ve(t,null,[{key:"parse",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",n=arguments.length>1?arguments[1]:void 0,e=arguments.length>2?arguments[2]:void 0;if(!r.includes("#EXTM3U"))throw new Error("Invalid m3u8 file");var s=pS(r);return t.isMediaPlaylist(r)?mS(s,n,e):gS(s,n)}},{key:"isMediaPlaylist",value:function(r){return r.includes("#EXTINF:")||r.includes("#EXT-X-TARGETDURATION:")}}]),t}(),yS=function(){function t(i){var r=this;ze(this,t),b(this,"_emitOnLoaded",function(u,l){var c=u.response,f=u.options,h=f||{},d=h.firstByteTime,p=h.startTime,m=h.endTime,_=h.contentLength,v=m-p;r.hls.emit(J.SPEED,{time:v,byteLength:_,url:l}),r.hls.emit(J.LOAD_COMPLETE,{url:l,elapsed:v||0}),r.hls.emit(J.TTFB,{url:l,responseUrl:c.url,elapsed:d-p}),r.hls.emit(J.LOAD_RESPONSE_HEADERS,{headers:c.headers,url:l})}),b(this,"_onLoaderRetry",function(u,l){r.hls.emit(fe.LOAD_RETRY,{error:Ce.network(u),retryTime:l})}),this.hls=i,this._timer=null,this._useLowLatency=i.config.useLowLatency;var n=this.hls.config,e=n.retryCount,s=n.retryDelay,a=n.manifestLoadTimeout,o=n.fetchOptions;this._loader=new ii(de(de({},o),{},{responseType:"text",retry:e,retryDelay:s,timeout:a,onRetryError:this._onLoaderRetry})),this._audioLoader=new ii(de(de({},o),{},{responseType:"text",retry:e,retryDelay:s,timeout:a,onRetryError:this._onLoaderRetry})),this._subtitleLoader=new ii(de(de({},o),{},{responseType:"text",retry:e,retryDelay:s,timeout:a,onRetryError:this._onLoaderRetry}))}return Ve(t,[{key:"load",value:function(){var i=ge(K().mark(function n(e,s,a){var o,u,l,c,f,h,d,p,m,_,v,y,S,E,T,A,P,D,F,I;return K().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return o=[this._loader.load(e)],s&&o.push(this._audioLoader.load(s)),a&&o.push(this._subtitleLoader.load(a)),k.prev=3,k.next=6,Promise.all(o);case 6:if(p=k.sent,m=Tn(p,3),_=m[0],v=m[1],y=m[2],_){k.next=13;break}return k.abrupt("return",[]);case 13:this._emitOnLoaded(_,e),u=_.data,f=_.response.url||e,s?(l=v==null?void 0:v.data,c=y==null?void 0:y.data,h=(v==null||(S=v.response)===null||S===void 0?void 0:S.url)||s,d=(y==null||(E=y.response)===null||E===void 0?void 0:E.url)||a,l&&this._emitOnLoaded(v,s),c&&this._emitOnLoaded(y,a)):(c=v==null?void 0:v.data,d=(v==null||(T=v.response)===null||T===void 0?void 0:T.url)||a,c&&this._emitOnLoaded(v,a)),k.next=22;break;case 19:throw k.prev=19,k.t0=k.catch(3),Ce.network(k.t0);case 22:if(A=this.hls.config.onPreM3U8Parse,k.prev=23,A&&(u=A(u)||u,l&&(l=A(l,!0)||l),c&&(c=A(c,!0)||c)),P=$s.parse(u,f,this._useLowLatency),!(((I=P)===null||I===void 0?void 0:I.live)===!1&&P.segments&&!P.segments.length)){k.next=28;break}throw new Error("empty segments list");case 28:l&&(D=$s.parse(l,h,this._useLowLatency)),c&&(F=$s.parse(c,d,this._useLowLatency)),k.next=35;break;case 32:throw k.prev=32,k.t1=k.catch(23),new Ce(oe.MANIFEST,oe.SUB_TYPES.HLS,k.t1);case 35:return P&&(P.isMaster?this.hls.emit(fe.HLS_MANIFEST_LOADED,{playlist:P}):this.hls.emit(fe.HLS_LEVEL_LOADED,{playlist:P})),k.abrupt("return",[P,D,F]);case 37:case"end":return k.stop()}},n,this,[[3,19],[23,32]])}));function r(n,e,s){return i.apply(this,arguments)}return r}()},{key:"parseText",value:function(r,n){var e=this.hls.config.onPreM3U8Parse,s;try{var a;if(e&&(r=e(r)||r),s=$s.parse(r,n,this._useLowLatency),((a=s)===null||a===void 0?void 0:a.live)===!1&&s.segments&&!s.segments.length)throw new Error("empty segments list")}catch(o){throw new Ce(oe.MANIFEST,oe.SUB_TYPES.HLS,o)}return s&&(s.isMaster?this.hls.emit(fe.HLS_MANIFEST_LOADED,{playlist:s}):this.hls.emit(fe.HLS_LEVEL_LOADED,{playlist:s})),[s]}},{key:"poll",value:function(r,n,e,s,a,o){var u=this;clearTimeout(this._timer),o=o||3e3;var l=this.hls.config.pollRetryCount,c=function(){var f=ge(K().mark(function h(){var d;return K().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return clearTimeout(u._timer),m.prev=1,m.next=4,u.load(r,n,e);case 4:if(d=m.sent,d[0]){m.next=7;break}return m.abrupt("return");case 7:l=u.hls.config.pollRetryCount,s(d[0],d[1],d[2]),m.next=15;break;case 11:m.prev=11,m.t0=m.catch(1),l--,l<=0&&a(m.t0);case 15:u._timer=setTimeout(c,o);case 16:case"end":return m.stop()}},h,null,[[1,11]])}));return function(){return f.apply(this,arguments)}}();this._timer=setTimeout(c,o)}},{key:"stopPoll",value:function(){return clearTimeout(this._timer),this.cancel()}},{key:"cancel",value:function(){return Promise.all([this._loader.cancel(),this._audioLoader.cancel()])}}]),t}();function ng(t,i,r){return i>r&&(r=i),Math.min(Math.max(t,i),r)}var Su=new on("playlist"),Kh=function(){function t(i,r,n){ze(this,t),b(this,"live",void 0),b(this,"id",0),b(this,"bitrate",0),b(this,"width",0),b(this,"height",0),b(this,"name",""),b(this,"url",""),b(this,"audioCodec",""),b(this,"videoCodec",""),b(this,"textCodec",""),b(this,"startCC",0),b(this,"endCC",0),b(this,"startSN",0),b(this,"endSN",-1),b(this,"totalDuration",0),b(this,"targetDuration",0),b(this,"partTargetDuration",0),b(this,"canSkipUntil",0),b(this,"canSkipDateRanges",!1),b(this,"skippedSegments",0),b(this,"canBlockReload",!1),b(this,"partHoldBack",0),b(this,"lowLatency",!1),b(this,"endPartIndex",0),b(this,"snDiff",null),b(this,"segments",[]),b(this,"audioStreams",[]),b(this,"subtitleStreams",[]),b(this,"closedCaptions",[]),b(this,"currentAudioStream",null),b(this,"currentSubtitleStream",null),this.update(this._setLLPlaybackPoint(i),r,n)}return Ve(t,[{key:"lastSegment",get:function(){return this.segments.length?this.segments[this.segments.length-1]:null}},{key:"segmentDuration",get:function(){var r;return this.targetDuration||((r=this.segments[0])===null||r===void 0?void 0:r.duration)||0}},{key:"liveEdge",get:function(){return this.endTime},set:function(r){this.endTime=r}},{key:"endTime",get:function(){var r;return((r=this.lastSegment)===null||r===void 0?void 0:r.end)||0},set:function(r){var n=this.lastSegment;n&&(n.duration=r-n.start)}},{key:"currentSubtitleEndSn",get:function(){var r;return((r=this.currentSubtitleStream)===null||r===void 0?void 0:r.endSN)||0}},{key:"clearOldSegment",value:function(r,n){return this.currentAudioStream&&this._clearSegments(r,n),this._clearSegments(r,n)}},{key:"getAudioSegment",value:function(r){if(!(!r||!this.currentAudioStream)){var n=r.sn-this.snDiff;return this.currentAudioStream.segments.find(function(e){return e.sn===n})}}},{key:"update",value:function(r,n){this.url=r.url,Array.isArray(r.segments)?((this.live===null||this.live===void 0)&&(this.live=r.live),this._updateSegments(r,this),this.startCC=r.startCC,this.endCC=r.endCC,this.startSN=r.startSN,this.endSN=r.endSN||-1,this.totalDuration=r.totalDuration,this.targetDuration=r.targetDuration,this.live=r.live,this.lowLatency=r.lowLatency,this.canBlockReload=r.canBlockReload,this.canSkipDateRanges=r.canSkipDateRanges,this.canSkipUntil=r.canSkipUntil,this.partHoldBack=r.partHoldBack,this.partTargetDuration=r.partTargetDuration,this.skippedSegments=r.skippedSegments,this.endPartIndex=r.endPartIndex,n&&this.currentAudioStream&&Array.isArray(n.segments)&&(this._updateSegments(n,this.currentAudioStream),(this.snDiff===null||this.snDiff===void 0)&&r.segments.length&&n.segments.length&&(this.snDiff=r.segments[0].sn-n.segments[0].sn))):(this.id=r.id,this.bitrate=r.bitrate,this.width=r.width,this.height=r.height,this.name=r.name,this.audioCodec=r.audioCodec,this.videoCodec=r.videoCodec,this.textCodec=r.textCodec,this.audioStreams=r.audioStreams,this.subtitleStreams=r.subtitleStreams,!this.currentAudioStream&&this.audioStreams.length&&(this.currentAudioStream=this.audioStreams.find(function(e){return e.default})||this.audioStreams[0]),!this.currentSubtitleStream&&this.subtitleStreams.length&&(this.currentSubtitleStream=this.subtitleStreams.find(function(e){return e.default})||this.subtitleStreams[0]))}},{key:"updateSubtitle",value:function(r){var n=this;if(r&&this.currentSubtitleStream&&Array.isArray(r.segments)){var e=this._updateSegments(r,this.currentSubtitleStream),s=this.currentSubtitleStream.segments;if(s.length>100&&(this.currentSubtitleStream.segments=s.slice(100)),!!e)return e.map(function(a){return{sn:a.sn,url:a.url,duration:a.duration,start:a.start,end:a.end,lang:n.currentSubtitleStream.lang}})}}},{key:"switchSubtitle",value:function(r){var n=this.subtitleStreams.find(function(s){return s.lang===r}),e=this.currentSubtitleStream;n&&(this.currentSubtitleStream=n,e.segments=[])}},{key:"_setLLPlaybackPoint",value:function(r){if(!r.lowLatency||!r.segments.length)return r;for(var n=r.totalDuration-r.partHoldBack,e=r.segments,s=0,a=0,o=e.length;a<o;a++)e[a].start<=n&&e[a].independent&&(s=a);var u=e.slice(s),l=0;return u.forEach(function(c){c.start=l,l=c.end}),r.segments=u,r.totalDuration=l,r.startSN=u[0].sn,r.startCC=u[0].cc,Su.log("set ll-hls playback point: SN=".concat(r.startSN," partIndex=").concat(u[0].partIndex,", duration=").concat(l)),r}},{key:"_clearSegments",value:function(r,n){for(var e=0,s=this.segments,a=0,o=s.length;a<o;a++)if(s[a].end>=r){e=a;break}return e>n&&(e=n),e&&(this.segments=this.segments.slice(e),this.currentAudioStream&&(this.currentAudioStream.segments=this.currentAudioStream.segments.slice(e))),n-e}},{key:"_updateSegments",value:function(r,n){var e=n.segments;if(this.live){var s,a=r.lowLatency,o=e[e.length-1],u=(s=o==null?void 0:o.sn)!==null&&s!==void 0?s:-1,l=(o==null?void 0:o.partIndex)||0,c=u<r.endSN&&r.segments.length;if(a&&(c=c||l<r.endPartIndex),c){Su.log("update segments: endSN:".concat(u,", partIndex:").concat(l," --> endSN:").concat(r.endSN,", partIndex:").concat(r.endPartIndex));var f=r.segments.findIndex(function(_){return _.sn===u&&_.partIndex===l}),h=f<0?r.segments:r.segments.slice(f+1);if(e.length&&h.length){var d=o.end,p=d;h.forEach(function(_){_.start=d,d=_.end}),Su.log("liveEdge: ".concat(p," -> ").concat(d));var m=(o==null?void 0:o.cc)||-1;m>h[0].cc&&h.forEach(function(_){return _.cc+=m})}return n.endSN=r.endSN,n.segments=e.concat(h),h}}else n.segments=r.segments}}]),t}(),_S=function(){function t(i){ze(this,t),b(this,"streams",[]),b(this,"currentStream",null),b(this,"dvrWindow",0),b(this,"_segmentPointer",-1),this.hls=i}return Ve(t,[{key:"lowLatency",get:function(){var r;return(r=this.currentStream)===null||r===void 0?void 0:r.lowLatency}},{key:"lastSegment",get:function(){var r;return(r=this.currentStream)===null||r===void 0?void 0:r.lastSegment}},{key:"currentSegment",get:function(){var r;return(r=this.currentSegments)===null||r===void 0?void 0:r[this._segmentPointer]}},{key:"nextSegment",get:function(){var r;return(r=this.currentSegments)===null||r===void 0?void 0:r[this._segmentPointer+1]}},{key:"currentSegments",get:function(){var r;return(r=this.currentStream)===null||r===void 0?void 0:r.segments}},{key:"currentSubtitleEndSn",get:function(){var r;return(r=this.currentStream)===null||r===void 0?void 0:r.currentSubtitleEndSn}},{key:"liveEdge",get:function(){var r;return(r=this.currentStream)===null||r===void 0?void 0:r.liveEdge},set:function(r){this.currentStream&&(this.currentStream.liveEdge=r)}},{key:"totalDuration",get:function(){var r;return((r=this.currentStream)===null||r===void 0?void 0:r.totalDuration)||0}},{key:"seekRange",get:function(){var r=this.currentSegments;if(!(!r||!r.length))return[r[0].start,r[r.length-1].end]}},{key:"nbSegments",get:function(){var r;return((r=this.currentSegments)===null||r===void 0?void 0:r.length)||0}},{key:"isEmpty",get:function(){var r;return!((r=this.currentSegments)!==null&&r!==void 0&&r.length)}},{key:"isLive",get:function(){var r;return(r=this.currentStream)===null||r===void 0?void 0:r.live}},{key:"hadSegmentLoaded",get:function(){return this._segmentPointer!==-1}},{key:"hasSubtitle",get:function(){var r;return!!((r=this.currentStream)!==null&&r!==void 0&&r.currentSubtitleStream)}},{key:"getAudioSegment",value:function(r){var n;return(n=this.currentStream)===null||n===void 0?void 0:n.getAudioSegment(r)}},{key:"moveSegmentPointer",value:function(r){var n;r==null&&(r=this._segmentPointer+1),this._segmentPointer=ng(r,-1,(n=this.currentSegments)===null||n===void 0?void 0:n.length)}},{key:"reset",value:function(){this.streams=[],this.currentStream=null,this.dvrWindow=0,this._segmentPointer=-1}},{key:"getSegmentByIndex",value:function(r){var n;return(n=this.currentSegments)===null||n===void 0?void 0:n[r]}},{key:"setNextSegmentByIndex",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;this._segmentPointer=r-1}},{key:"setNextSegmentBySN",value:function(){var r,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,e=(r=this.currentSegments)===null||r===void 0?void 0:r.findIndex(function(s){return s.sn===n});return e!==-1&&this.setNextSegmentByIndex(e+1),e}},{key:"findSegmentIndexByTime",value:function(r){var n=this.currentSegments;if(n){for(var e=0,s=n.length,a;e<s;e++)if(a=n[e],r>=a.start&&r<a.end)return e;var o=n[n.length-1];if(Math.abs(r-(o==null?void 0:o.end))<.2)return n.length-1}}},{key:"upsertPlaylist",value:function(r,n,e){var s=this;if(r){if(r.isMaster)this.streams.length=r.streams.length,r.streams.filter(function(l){return l.url}).forEach(function(l,c){s.streams[c]?s.streams[c].update(l):s.streams[c]=new Kh(l)}),this.currentStream=this.streams[0];else if(Array.isArray(r.segments)){var a=this.currentStream;if(a){a.update(r,n,e);var o=a.updateSubtitle(e);o&&this.hls.emit(fe.SUBTITLE_SEGMENTS,{list:o})}else this.reset(),this.currentStream=this.streams[0]=new Kh(r,n,e)}var u=this.currentStream;u&&this.hls.isLive&&!this.dvrWindow&&(this.dvrWindow=this.currentSegments.reduce(function(l,c){return l+=c.duration,l},0))}}},{key:"updateSegmentsRanges",value:function(r,n){var e,s=(e=this.currentSegments)===null||e===void 0?void 0:e.filter(function(a){return a.sn>=r});s.forEach(function(a){a.start=n,n=a.end})}},{key:"switchSubtitle",value:function(r){var n;(n=this.currentStream)===null||n===void 0||n.switchSubtitle(r)}},{key:"clearOldSegment",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:50,n=this.currentStream;if(!(!this.dvrWindow||!n)){var e=n.endTime-this.dvrWindow;if(!(e<=0)){var s=n.segments;s.length<=r||(this._segmentPointer=n.clearOldSegment(e,this._segmentPointer))}}}},{key:"checkSegmentTrackChange",value:function(r,n){var e=this.findSegmentIndexByTime(r),s=this.getSegmentByIndex(e);if(s&&!(!s.hasAudio&&!s.hasVideo)){if(n!==2&&s.hasAudio&&s.hasVideo)return s;if(!(s.end-r>.3)){var a=this.getSegmentByIndex(e+1);if(a&&!(!a.hasAudio&&!a.hasVideo)&&(a.hasAudio!==s.hasAudio||a.hasVideo!==s.hasVideo))return a}}}},{key:"feedbackLiveEdge",value:function(r,n){var e,s=this.currentSegments;if(s){var a=((e=this.lastSegment)===null||e===void 0?void 0:e.sn)===r.sn;if(a){this.liveEdge=n;return}this.updateSegmentsRanges(r.sn+1,n)}}}]),t}(),SS=function(){function t(i){var r=this;ze(this,t),b(this,"error",null),b(this,"_emitOnLoaded",function(u,l){var c=u.data,f=u.response,h=u.options,d=h||{},p=d.firstByteTime,m=d.startTime,_=d.endTime,v=d.contentLength,y=_-m;r._bandwidthService.addRecord(v||c.byteLength,y),r.hls.emit(J.SPEED,{time:y,byteLength:v,url:l}),r.hls.emit(J.LOAD_COMPLETE,{url:l,elapsed:y||0}),r.hls.emit(J.TTFB,{url:l,responseUrl:f.url,elapsed:p-m}),r.hls.emit(J.LOAD_RESPONSE_HEADERS,{headers:f.headers,url:l})}),b(this,"_onLoaderRetry",function(u,l){r.hls.emit(J.LOAD_RETRY,{error:Ce.network(u),retryTime:l})}),this.hls=i,this._bandwidthService=new T_,this._mapCache={},this._keyCache={};var n=this.hls.config,e=n.retryCount,s=n.retryDelay,a=n.loadTimeout,o=n.fetchOptions;this._segmentLoader=new ii(de(de({},o),{},{responseType:"arraybuffer",retry:e,retryDelay:s,timeout:a,onRetryError:this._onLoaderRetry})),this._audioSegmentLoader=new ii(de(de({},o),{},{responseType:"arraybuffer",retry:e,retryDelay:s,timeout:a,onRetryError:this._onLoaderRetry})),this._keyLoader=new ii(de(de({},o),{},{responseType:"arraybuffer",retry:e,retryDelay:s,timeout:a,onRetryError:this._onLoaderRetry}))}return Ve(t,[{key:"speedInfo",value:function(){return{speed:this._bandwidthService.getLatestSpeed(),avgSpeed:this._bandwidthService.getAvgSpeed()}}},{key:"load",value:function(r,n,e){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:e,a=[];return r&&(a[0]=this.loadVideoSegment(r,e)),n&&(a[1]=this.loadAudioSegment(n,s)),Promise.all(a)}},{key:"loadVideoSegment",value:function(r,n){return this._loadSegment(this._segmentLoader,r,n)}},{key:"loadAudioSegment",value:function(r,n){return this._loadSegment(this._audioSegmentLoader,r,n)}},{key:"_loadSegment",value:function(){var i=ge(K().mark(function n(e,s,a){var o=this,u,l,c,f,h,d,p,m,_,v,y,S,E,T,A;return K().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return p=[],this.hls.emit(J.LOAD_START,{url:s.url}),p[0]=e.load(s.url),a&&s.initSegment&&(_=s.initSegment.url,l=this._mapCache[_],l||(this.hls.emit(J.LOAD_START,{url:_}),p[1]=e.load(_).then(function(F){if(F){var I=Object.keys(o._mapCache);I>30&&(o._mapCache={}),l=o._mapCache[_]=F.data,o._emitOnLoaded(F,_)}})),v=(m=s.initSegment.key)===null||m===void 0?void 0:m.url,v&&(d=s.initSegment.key.iv,h=this._keyCache[v],h||(this.hls.emit(J.LOAD_START,{url:v}),p[2]=this._keyLoader.load(v).then(function(F){F&&(h=o._keyCache[v]=F.data,o._emitOnLoaded(F,v))})))),y=(u=s.key)===null||u===void 0?void 0:u.url,y&&s.key.isSegmentEncrypted()&&(f=s.key.iv,c=this._keyCache[y],c||(this.hls.emit(J.LOAD_START,{url:y}),p[3]=this._keyLoader.load(y).then(function(F){F&&(c=o._keyCache[y]=F.data,o._emitOnLoaded(F,y))}))),D.next=8,Promise.all(p);case 8:if(S=D.sent,E=Tn(S,1),T=E[0],T){D.next=13;break}return D.abrupt("return");case 13:return A=T.data,this._emitOnLoaded(T,s.url),D.abrupt("return",{data:A,map:l,key:c,mapKey:h,keyIv:f,mapKeyIv:d});case 16:case"end":return D.stop()}},n,this)}));function r(n,e,s){return i.apply(this,arguments)}return r}()},{key:"reset",value:function(){this.error=null,this._mapCache={},this._keyCache={},this._bandwidthService.reset()}},{key:"cancel",value:function(){var i=ge(K().mark(function n(){return K().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,Promise.all([this._keyLoader.cancel(),this._segmentLoader.cancel(),this._audioSegmentLoader.cancel()]);case 2:case"end":return s.stop()}},n,this)}));function r(){return i.apply(this,arguments)}return r}()}]),t}(),it=new on("hls"),hi=function(t){yo(r,t);var i=_o(r);function r(n){var e;return ze(this,r),e=i.call(this),b(ne(e),"version",r.version),b(ne(e),"media",null),b(ne(e),"config",null),b(ne(e),"_manifestLoader",null),b(ne(e),"_segmentLoader",null),b(ne(e),"_playlist",null),b(ne(e),"_bufferService",null),b(ne(e),"_gapService",null),b(ne(e),"_seiService",null),b(ne(e),"_stats",null),b(ne(e),"_prevSegSn",null),b(ne(e),"_prevSegCc",null),b(ne(e),"_tickTimer",null),b(ne(e),"_tickInterval",500),b(ne(e),"_segmentProcessing",!1),b(ne(e),"_reloadOnPlay",!1),b(ne(e),"_switchUrlOpts",null),b(ne(e),"_isProcessQuotaExceeded",!1),b(ne(e),"_loadSegment",ge(K().mark(function s(){var a,o,u,l,c;return K().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:if(!(e._segmentProcessing||!e.media)){h.next=2;break}return h.abrupt("return");case 2:if(a=e._playlist.nextSegment,o=ne(e),u=o.config,a){h.next=6;break}return h.abrupt("return");case 6:if(e.isLive){h.next=16;break}if(l=e.bufferInfo(),e.media.paused&&!e.media.currentTime&&(l=e.bufferInfo(l.nextStart||.5)),c=Math.abs(l.end-e.media.duration)<.1,!(l.remaining>=u.preloadTime||c)){h.next=13;break}return e._tryEos(),h.abrupt("return");case 13:if(!(u.preferMMSStreaming&&!e._bufferService.msStreaming)){h.next=15;break}return h.abrupt("return");case 15:!e._urlSwitching&&e._prevSegSn!==a.sn-1&&l.end&&Math.abs(a.start-l.end)>1&&e._playlist.setNextSegmentByIndex(e._playlist.findSegmentIndexByTime(l.end+.1));case 16:return h.abrupt("return",e._loadSegmentDirect());case 17:case"end":return h.stop()}},s)}))),b(ne(e),"_onLoadeddata",function(){e.isLive&&!e.config.mseLowLatency&&e.media.duration!==1/0&&e._bufferService.updateDuration(1/0).catch(function(s){})}),b(ne(e),"_onPlay",ge(K().mark(function s(){return K().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(!(e.media.seeking&&e.media.currentTime===0)){o.next=3;break}return it.debug("replay currentTime 0, return"),o.abrupt("return");case 3:if(clearTimeout(e._disconnectTimer),!e._reloadOnPlay){o.next=9;break}e._reloadOnPlay=!1,e.replay(!0),o.next=12;break;case 9:return o.next=11,e._loadSegment();case 11:e._startTick();case 12:case"end":return o.stop()}},s)}))),b(ne(e),"_onPause",function(){if(e.isLive){if(!e._reloadOnPlay){var s=e.config.disconnectTime;if(s==null&&(s=e._playlist.dvrWindow),!Number.isFinite(s))return;clearTimeout(e._disconnectTimer),e._disconnectTimer=setTimeout(function(){e._reloadOnPlay=!0,e._clear()},s||0)}}else e._stopTick()}),b(ne(e),"_onSeeking",ge(K().mark(function s(){var a,o,u,l,c,f,h;return K().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:if(e.media){p.next=2;break}return p.abrupt("return");case 2:if(e._onCheckQuotaExceeded(),a=e.media.currentTime,o=e._playlist.seekRange,!o){p.next=10;break}if(u=ng(a,o[0],e.isLive?o[1]:e.media.duration),!(u>=0&&Math.abs(a-u)>=.1)){p.next=10;break}return e.media.currentTime=u,p.abrupt("return");case 10:if(l=e._playlist.currentSegment,c=at.info(at.get(e.media),a,.1),!l){p.next=17;break}if(!(c.end&&Math.abs(c.end-l.end)<.2)){p.next=15;break}return p.abrupt("return");case 15:if(!(e.isLive&&c.end)){p.next=17;break}return p.abrupt("return");case 17:if(f=e._playlist.findSegmentIndexByTime(a),h=e._playlist.getSegmentByIndex(f),!(f==null||!h||e._segmentProcessing&&h===e._playlist.nextSegment)){p.next=21;break}return p.abrupt("return");case 21:return it.debug("seek to",a,h),e._playlist.setNextSegmentByIndex(f),e._stopTick(),p.next=26,e._segmentLoader.cancel();case 26:if(e._segmentProcessing=!1,!(!c.end||e.isLive)){p.next=30;break}return p.next=30,e._loadSegmentDirect(!0);case 30:e._startTick();case 31:case"end":return p.stop()}},s)}))),b(ne(e),"_onTimeupdate",function(){if(e.media){var s=e.config;if(s.isLive&&s.maxLatency&&s.targetLatency&&e.media){var a=e._playlist.liveEdge;if(!a)return;var o=a-e.media.currentTime;o>=s.maxLatency&&(it.debug("latency jump, currentTime:".concat(e.media.currentTime,", liveEdge:").concat(a,",  latency=").concat(o)),e.media.currentTime=a-s.targetLatency)}if(s.seiInTime){var u;(u=e._seiService)===null||u===void 0||u.throw(e.media.currentTime)}e.config.allowedStreamTrackChange&&!e.config.softDecode&&e._checkStreamTrackChange(e.media.currentTime)}}),b(ne(e),"_tick",function(){if(e.media){e._startTick();var s=e.media,a=at.get(s),o=e._segmentLoader.error;if(e._onCheckQuotaExceeded(),e._isProcessQuotaExceeded&&(e._bufferService.isFull()||(e._isProcessQuotaExceeded=!1,e._segmentProcessing=!1)),o){var u=.5;(!s.readyState||e.bufferInfo(u).remaining<1)&&(o.fatal=!0,e._emitError(Ce.network(o)));return}at.end(a)>=.1&&s.readyState&&(__(s)?(e._loadSegment(),e._gapService&&e._gapService.do(s,e.config.maxJumpDistance,e.isLive)):s.readyState<2&&e._gapService&&e._gapService.do(s,e.config.maxJumpDistance,s.currentTime?e.isLive:!0)),e.isLive||e._tryEos()}}),e.config=n=iS(n),e.media=e.config.media,e._manifestLoader=new yS(ne(e)),e._segmentLoader=new SS(ne(e)),e._playlist=new _S(ne(e)),e._bufferService=new rS(ne(e)),n.seiInTime&&(e._seiService=new w_(ne(e))),n.softDecode||(e._gapService=new k_),e._stats=new C_(ne(e),9e4),e.media.addEventListener("loadeddata",e._onLoadeddata),e.media.addEventListener("play",e._onPlay),e.media.addEventListener("pause",e._onPause),e.media.addEventListener("seeking",e._onSeeking),e.media.addEventListener("timeupdate",e._onTimeupdate),e}return Ve(r,[{key:"isLive",get:function(){return this._playlist.isLive}},{key:"streams",get:function(){return this._playlist.streams}},{key:"currentStream",get:function(){return this._playlist.currentStream}},{key:"hasSubtitle",get:function(){return this._playlist.hasSubtitle}},{key:"totalDuration",get:function(){return this._playlist.totalDuration}},{key:"baseDts",get:function(){var e;return(e=this._bufferService)===null||e===void 0?void 0:e.baseDts}},{key:"speedInfo",value:function(){return this._segmentLoader.speedInfo()}},{key:"bufferInfo",value:function(){var e,s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:.1;return at.info(at.get(this.media),(e=this.media)===null||e===void 0?void 0:e.currentTime,s)}},{key:"getStats",value:function(){return this._stats.getStats()}},{key:"playbackQuality",value:function(){return S_(this.media)}},{key:"load",value:function(){var n=ge(K().mark(function s(a){var o,u=arguments;return K().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return o=u.length>1&&u[1]!==void 0?u[1]:!1,a&&(this.config.url=a),a=this.config.url,c.next=5,this._reset(o);case 5:return c.next=7,this._loadData(a);case 7:this._startTick();case 8:case"end":return c.stop()}},s,this)}));function e(s){return n.apply(this,arguments)}return e}()},{key:"_loadData",value:function(){var n=ge(K().mark(function s(a){var o,u,l,c,f,h,d,p,m,_,v;return K().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:try{a&&(a=a.trim())}catch{}if(a){S.next=3;break}throw this._emitError(new Ce(oe.OTHER,oe.SUB_TYPES.OPTION,null,null,"m3u8 url is missing"));case 3:return S.next=5,this._loadM3U8(a);case 5:if(o=S.sent,u=this._playlist.currentStream,!(this._urlSwitching&&!this.isLive)){S.next=17;break}if(u.bitrate===0&&(l=this._switchUrlOpts)!==null&&l!==void 0&&l.bitrate&&(u.bitrate=(c=this._switchUrlOpts)===null||c===void 0?void 0:c.bitrate),f=this._getSeamlessSwitchPoint(),this.config.startTime=f,h=this._playlist.findSegmentIndexByTime(f),d=this._playlist.getSegmentByIndex(h+1),!d){S.next=17;break}return p=d.start,S.next=17,this._bufferService.removeBuffer(p);case 17:if(this._urlSwitching&&this.isLive&&(m=this._playlist.setNextSegmentBySN(this._prevSegSn),it.log("segment nb=".concat(this._prevSegSn," index of ").concat(m," in the new playlist")),m===-1&&(this._prevSegCc=null,this._prevSegSn=null)),o){S.next=20;break}return S.abrupt("return");case 20:if(!this.isLive){S.next=31;break}if(this._bufferService.setLiveSeekableRange(0,4294967295),it.log("totalDuration first time got:",this._playlist.totalDuration),it.log("nb segments got:",this._playlist.nbSegments),this.config.targetLatency<this._playlist.totalDuration&&(this.config.targetLatency=this._playlist.totalDuration,this.config.maxLatency=1.5*this.config.targetLatency),o.isMaster||this._pollM3U8(a),!(this._playlist.nbSegments<this.config.minSegmentsStartPlay)){S.next=28;break}return S.abrupt("return");case 28:return S.next=30,this._loadSegment();case 30:return S.abrupt("return");case 31:return S.next=33,this._bufferService.updateDuration(u.totalDuration);case 33:return _=this.config.startTime,_&&((v=this._switchUrlOpts)!==null&&v!==void 0&&v.seamless||(this.media.currentTime=_),this._playlist.setNextSegmentByIndex(this._playlist.findSegmentIndexByTime(_)||0)),S.next=37,this._loadSegment();case 37:case"end":return S.stop()}},s,this)}));function e(s){return n.apply(this,arguments)}return e}()},{key:"replay",value:function(){var n=ge(K().mark(function s(a){return K().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return this.config.startTime=0,u.next=3,this.load();case 3:return this._reloadOnPlay=!1,u.abrupt("return",this.media.play(!a));case 5:case"end":return u.stop()}},s,this)}));function e(s){return n.apply(this,arguments)}return e}()},{key:"switchURL",value:function(){var n=ge(K().mark(function s(a){var o,u,l,c,f,h,d,p=arguments;return K().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:o=p.length>1&&p[1]!==void 0?p[1]:{},u={seamless:!1,startTime:0,bitrate:0},_.t0=za(o),_.next=_.t0==="number"?5:_.t0==="boolean"?7:_.t0==="object"?9:11;break;case 5:return o={startTime:o},_.abrupt("break",12);case 7:return o={seamless:o},_.abrupt("break",12);case 9:for(l in o)(o[l]===void 0||o[l]===null)&&delete o[l];return _.abrupt("break",12);case 11:throw"unsupported switchURL args: ".concat(o);case 12:if(o=Object.assign({},u,o),c=o,f=c.seamless,h=c.startTime,this.config.url=a,this.config.startTime=h,this._switchUrlOpts=o,f){_.next=38;break}if(_.prev=18,!this.config.softDecode){_.next=23;break}_.t1=this.load(a),_.next=26;break;case 23:return _.next=25,this.load(a);case 25:_.t1=_.sent;case 26:d=_.t1,_.next=33;break;case 29:throw _.prev=29,_.t2=_.catch(18),this.emit(fe.SWITCH_URL_FAILED,_.t2),_.t2;case 33:return this._reloadOnPlay=!1,d&&this.emit(fe.SWITCH_URL_SUCCESS,{url:a}),_.abrupt("return",this.media.play(!0));case 38:return this._urlSwitching=!0,this.isLive||(this._prevSegSn=null,this._prevSegCc=null),this._playlist.reset(),this._bufferService.seamlessSwitch(),_.next=44,this._clear();case 44:return _.next=46,this._loadData(a);case 46:this._startTick();case 47:this._switchUrlOpts=null;case 48:case"end":return _.stop()}},s,this,[[18,29]])}));function e(s){return n.apply(this,arguments)}return e}()},{key:"switchStream",value:function(){var n=ge(K().mark(function s(a){var o,u,l,c,f,h=arguments;return K().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:if(o=h.length>1&&h[1]!==void 0?h[1]:!0,u=this.currentStream,l=this.streams,!(!u||u.id===a||!l||l.length<2)){p.next=5;break}return p.abrupt("return");case 5:if(c=l.find(function(m){return m.id===a}),c){p.next=8;break}return p.abrupt("return");case 8:return p.prev=8,p.next=11,this._clear();case 11:if(!o){p.next=14;break}return p.next=14,this._bufferService.clearAllBuffer();case 14:p.next=19;break;case 16:throw p.prev=16,p.t0=p.catch(8),this._emitError(Ce.create(p.t0));case 19:if(u.currentAudioStream&&c.audioStreams.length>2&&(f=u.currentAudioStream.id,c.currentAudioStream=c.audioStreams.find(function(m){return m.id===f})||c.currentAudioStream),this._playlist.currentStream=c,p.prev=21,!(this.isLive||!c.segments.length)){p.next=25;break}return p.next=25,this._refreshM3U8();case 25:return this._playlist.setNextSegmentByIndex(this._playlist.findSegmentIndexByTime(this.media.currentTime)||0),this._prevSegCc=null,p.next=29,this._loadSegmentDirect();case 29:p.next=35;break;case 31:throw p.prev=31,p.t1=p.catch(21),this._playlist.currentStream=u,p.t1;case 35:return this._startTick(),p.abrupt("return",c);case 37:case"end":return p.stop()}},s,this,[[8,16],[21,31]])}));function e(s){return n.apply(this,arguments)}return e}()},{key:"switchAudioStream",value:function(){var n=ge(K().mark(function s(a){var o,u,l,c,f=arguments;return K().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(o=f.length>1&&f[1]!==void 0?f[1]:!0,u=this.currentStream,u){d.next=4;break}return d.abrupt("return");case 4:if(l=u.currentAudioStream,!(!l||l.id===a||u.audioStreams.length<2)){d.next=7;break}return d.abrupt("return");case 7:if(c=u.audioStreams.find(function(p){return p.id===a}),c){d.next=10;break}return d.abrupt("return");case 10:return d.prev=10,d.next=13,this._clear();case 13:if(!o){d.next=16;break}return d.next=16,this._bufferService.clearAllBuffer();case 16:d.next=21;break;case 18:throw d.prev=18,d.t0=d.catch(10),this._emitError(Ce.create(d.t0));case 21:if(u.currentAudioStream=c,d.prev=22,!(this.isLive||!c.segments.length)){d.next=26;break}return d.next=26,this._refreshM3U8();case 26:return this._playlist.setNextSegmentByIndex(this._playlist.findSegmentIndexByTime(this.media.currentTime)||0),this._prevSegCc=null,d.next=30,this._loadSegmentDirect();case 30:d.next=36;break;case 32:throw d.prev=32,d.t1=d.catch(22),u.currentAudioStream=l,d.t1;case 36:return this._startTick(),d.abrupt("return",c);case 38:case"end":return d.stop()}},s,this,[[10,18],[22,32]])}));function e(s){return n.apply(this,arguments)}return e}()},{key:"switchSubtitleStream",value:function(){var n=ge(K().mark(function s(a){return K().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return this._playlist.switchSubtitle(a),u.next=3,this._manifestLoader.stopPoll();case 3:return u.next=5,this._refreshM3U8();case 5:case"end":return u.stop()}},s,this)}));function e(s){return n.apply(this,arguments)}return e}()},{key:"destroy",value:function(){var n=ge(K().mark(function s(){var a;return K().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(this.media){u.next=2;break}return u.abrupt("return");case 2:return this.removeAllListeners(),this._playlist.reset(),this._segmentLoader.reset(),(a=this._seiService)===null||a===void 0||a.reset(),this.media.removeEventListener("loadeddata",this._onLoadeddata),this.media.removeEventListener("play",this._onPlay),this.media.removeEventListener("pause",this._onPause),this.media.removeEventListener("seeking",this._onSeeking),this.media.removeEventListener("timeupdate",this._onTimeupdate),u.next=13,Promise.all([this._clear(),this._bufferService.destroy()]);case 13:this.media=null;case 14:case"end":return u.stop()}},s,this)}));function e(){return n.apply(this,arguments)}return e}()},{key:"_loadM3U8",value:function(){var n=ge(K().mark(function s(a){var o,u,l,c,f,h,d;return K().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:if(m.prev=0,c=(u=this.config.manifestList)===null||u===void 0||(l=u.filter(function(_){return _.url===a})[0])===null||l===void 0?void 0:l.manifest,!c){m.next=6;break}m.t0=this._manifestLoader.parseText(c,a),m.next=9;break;case 6:return m.next=8,this._manifestLoader.load(a);case 8:m.t0=m.sent;case 9:f=m.t0,h=Tn(f,1),o=h[0],m.next=17;break;case 14:throw m.prev=14,m.t1=m.catch(0),this._emitError(Ce.create(m.t1));case 17:if(o){m.next=19;break}return m.abrupt("return");case 19:if(this._playlist.upsertPlaylist(o),!o.isMaster){m.next=24;break}return(d=this._playlist.currentStream.subtitleStreams)!==null&&d!==void 0&&d.length&&this.emit(fe.SUBTITLE_PLAYLIST,{list:this._playlist.currentStream.subtitleStreams}),m.next=24,this._refreshM3U8();case 24:return this.emit(fe.STREAM_PARSED),m.abrupt("return",o);case 26:case"end":return m.stop()}},s,this,[[0,14]])}));function e(s){return n.apply(this,arguments)}return e}()},{key:"_refreshM3U8",value:function(){var e,s,a=this,o=this._playlist.currentStream;if(!o||!o.url)throw this._emitError(Ce.create(null,null,new Error("m3u8 url is not defined")));var u=o.url,l=(e=o.currentAudioStream)===null||e===void 0?void 0:e.url,c=(s=o.currentSubtitleStream)===null||s===void 0?void 0:s.url;return this._manifestLoader.load(u,l,c).then(function(f){var h=Tn(f,3),d=h[0],p=h[1],m=h[2];d&&(a._playlist.upsertPlaylist(d,p,m),a.isLive&&a._pollM3U8(u,l,c))}).catch(function(f){throw a._emitError(Ce.create(f))})}},{key:"_pollM3U8",value:function(e,s,a){var o=this,u=this._playlist.isEmpty,l;if(this._playlist.lowLatency)l=(this._playlist.currentStream.partTargetDuration*2||0)*1e3;else{var c;l=(((c=this._playlist.lastSegment)===null||c===void 0?void 0:c.duration)||0)*1e3}this._manifestLoader.poll(e,s,a,function(f,h,d){o._playlist.upsertPlaylist(f,h,d),o._playlist.clearOldSegment();var p=f&&u&&!o._playlist.isEmpty;(p||!o._playlist.hadSegmentLoaded&&o._playlist.nbSegments>=o.config.minSegmentsStartPlay)&&o._loadSegment(),u&&(u=o._playlist.isEmpty)},function(f){o._emitError(Ce.create(f))},l)}},{key:"_loadSegmentDirect",value:function(){var n=ge(K().mark(function s(a){var o,u,l,c,f,h;return K().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:if(o=this._playlist.nextSegment,o){p.next=3;break}return p.abrupt("return");case 3:return u=!1,l=null,p.prev=5,this._segmentProcessing=!0,it.log("load segment, sn:".concat(o.sn,", [").concat(o.start,", ").concat(o.end,"], partIndex:").concat(o.partIndex)),p.next=10,this._reqAndBufferSegment(o,this._playlist.getAudioSegment(o));case 10:u=p.sent,p.next=16;break;case 13:p.prev=13,p.t0=p.catch(5),l=p.t0;case 16:return p.prev=16,this._segmentProcessing=!1,p.finish(16);case 19:if(!l){p.next=26;break}if(!this._bufferService.isFull()){p.next=25;break}return it.log("load segment, sn:".concat(o.sn,", partIndex:").concat(o.partIndex)),this._segmentProcessing=!0,this._isProcessQuotaExceeded=!0,p.abrupt("return",!1);case 25:return p.abrupt("return",this._emitError(Ce.create(l)));case 26:return u&&(f=this.bufferInfo().end,this.isLive&&!this.media.seeking&&f&&Math.abs(o.end-f)>1&&(it.warn("segment: ".concat(o.sn," expected end=").concat(o.end,", real end=").concat(f)),this._playlist.feedbackLiveEdge(o,f)),h=((c=this._playlist.currentStream)===null||c===void 0?void 0:c.url)===o.parentUrl,this._urlSwitching&&!h&&(it.warn("pre playlist segment appended!"),this._bufferService.seamlessSwitch()),this.isLive&&this._urlSwitching&&h&&(this._urlSwitching=!1,this.emit(fe.SWITCH_URL_SUCCESS,{url:this.config.url})),this._playlist.moveSegmentPointer(),o.isLast?this._end():a||this._loadSegment()),p.abrupt("return",u);case 28:case"end":return p.stop()}},s,this,[[5,13,16,19]])}));function e(s){return n.apply(this,arguments)}return e}()},{key:"_reqAndBufferSegment",value:function(){var n=ge(K().mark(function s(a,o){var u,l,c,f,h,d,p,m,_,v,y;return K().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return l=a?a.cc:o.cc,c=this._prevSegCc!==l,f=[],E.prev=3,E.next=6,this._segmentLoader.load(a,o,c);case 6:f=E.sent,E.next=14;break;case 9:throw E.prev=9,E.t0=E.catch(3),E.t0.fatal=!1,this._segmentLoader.error=E.t0,E.t0;case 14:if(f[0]){E.next=16;break}return E.abrupt("return");case 16:return E.next=18,(u=this._bufferService).decryptBuffer.apply(u,$1(f));case 18:if(h=E.sent,h){E.next=21;break}return E.abrupt("return");case 21:return d=a?a.sn:o.sn,p=a?a.start:o.start,m=this._playlist.currentStream,this._bufferService.createSource(h[0],h[1],m==null?void 0:m.videoCodec,m==null?void 0:m.audioCodec),_=Date.now(),v=this._prevSegSn===d-1,this.isLive&&this._urlSwitching&&(y=this.bufferInfo().end,this._playlist.updateSegmentsRanges(d,y),it.warn("update the new playlist liveEdge, segment id=".concat(d,", buffer start=").concat(y,", liveEdge=").concat(this._playlist.liveEdge)),p=y),E.next=30,this._bufferService.appendBuffer(a,o,h[0],h[1],c,v,p);case 30:return this.emit(fe.APPEND_COST,{elapsed:Date.now()-_,url:a.url}),E.next=33,this._bufferService.evictBuffer(this.config.bufferBehind);case 33:return this._prevSegCc=l,this._prevSegSn=d,E.abrupt("return",!0);case 36:case"end":return E.stop()}},s,this,[[3,9]])}));function e(s,a){return n.apply(this,arguments)}return e}()},{key:"_onCheckQuotaExceeded",value:function(){var n=ge(K().mark(function s(){var a,o,u,l,c,f;return K().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:a=this.media.currentTime,o=this.media.buffered,u=!1,l=0;case 4:if(!(l<o.length)){d.next=11;break}if(!(o.start(0)>=a&&a<o.end(l))){d.next=8;break}return u=!0,d.abrupt("break",11);case 8:l++,d.next=4;break;case 11:if(!this._bufferService.isFull()){d.next=17;break}if(c=u?this.config.bufferBehind:5,f=this.media.currentTime,!(f-c>0)){d.next=17;break}return d.next=17,this._bufferService.removeBuffer(0,f-c);case 17:case"end":return d.stop()}},s,this)}));function e(){return n.apply(this,arguments)}return e}()},{key:"_checkStreamTrackChange",value:function(e){var s=this._playlist.checkSegmentTrackChange(e,this._bufferService.nbSb);s&&this.switchURL(this.config.url,s.start+.2)}},{key:"_clear",value:function(){var n=ge(K().mark(function s(){return K().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return clearTimeout(this._disconnectTimer),this._stopTick(),o.next=4,Promise.all([this._segmentLoader.cancel(),this._manifestLoader.stopPoll()]);case 4:this._segmentProcessing=!1;case 5:case"end":return o.stop()}},s,this)}));function e(){return n.apply(this,arguments)}return e}()},{key:"_reset",value:function(){var n=ge(K().mark(function s(){var a,o,u=arguments;return K().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return o=u.length>0&&u[0]!==void 0?u[0]:!1,this._reloadOnPlay=!1,this._prevSegSn=null,this._prevSegCc=null,this._switchUrlOpts=null,this._playlist.reset(),this._segmentLoader.reset(),(a=this._seiService)===null||a===void 0||a.reset(),this._stats.reset(),c.next=11,this._clear();case 11:return c.abrupt("return",this._bufferService.reset(o));case 12:case"end":return c.stop()}},s,this)}));function e(){return n.apply(this,arguments)}return e}()},{key:"_end",value:function(){this._clear(),this._bufferService.endOfStream(),(this.media.readyState<=2||this.media.buffered.length>1)&&this._startTick()}},{key:"_stopTick",value:function(){this._tickTimer&&clearTimeout(this._tickTimer),this._tickTimer=null}},{key:"_startTick",value:function(){this._stopTick(),this._tickTimer=setTimeout(this._tick,this._tickInterval)}},{key:"_emitError",value:function(e){var s,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(((s=e.originError)===null||s===void 0?void 0:s.fatal)===!1)it.warn(e);else{var o,u,l;it.table(e),it.error(e),it.error((o=this.media)===null||o===void 0?void 0:o.error),(u=this.media)!==null&&u!==void 0&&u.readyState&&this.media.pause(),this._stopTick(),this._urlSwitching&&(this._urlSwitching=!1,this.emit(fe.SWITCH_URL_FAILED,e)),this.emit(fe.ERROR,e),a&&this._end(),(l=this._seiService)===null||l===void 0||l.reset()}return e}},{key:"_getSeamlessSwitchPoint",value:function(){var e=this.media,s=e.currentTime;if(!e.paused){var a,o=this._playlist.findSegmentIndexByTime(e.currentTime),u=this._playlist.getSegmentByIndex(o),l=(a=this._stats)===null||a===void 0?void 0:a.getStats().downloadSpeed;if(l&&u){var c=u.duration*this._playlist.currentStream.bitrate/l+1;s+=c}else s+=5}return s}},{key:"_tryEos",value:function(){var e,s,a=this.media,o=this._playlist,u=o.nextSegment,l=o.lastSegment,c=!u&&a.readyState&&a.duration>0&&((e=this._bufferService)===null||e===void 0?void 0:e.msIsOpened)&&!((s=this._bufferService)!==null&&s!==void 0&&s.msHasOpTasks);if(c){var f=this.bufferInfo();a.paused&&!a.currentTime&&(f=this.bufferInfo(f.nextStart||.5));var h=Math.abs(f.end-a.duration)<.1||!this.isLive&&l&&f.end>=l.start+l.duration;h&&this._bufferService.endOfStream()}}}],[{key:"isSupported",value:function(e){return!e||e==="video"||e==="audio"?dt.isSupported():typeof WebAssembly<"u"}},{key:"enableLogger",value:function(){on.enable(),Ka.enable()}},{key:"disableLogger",value:function(){on.disable(),Ka.disable()}}]),r}(gi);b(hi,"version","3.0.18");try{localStorage.getItem("xgd")?hi.enableLogger():hi.disableLogger()}catch{}var ES=function(){function t(i,r){var n=this;ze(this,t),b(this,"_opts",null),b(this,"_plugin",null),b(this,"_onLowDecode",function(){var e,s,a,o,u=n._opts,l=u.media,c=u.innerDegrade;(e=n._plugin)===null||e===void 0||(s=e.player)===null||s===void 0||s.emit("lowdecode",l.degradeInfo),(a=n._plugin)===null||a===void 0||(o=a.player)===null||o===void 0||o.emit("core_event",de(de({},l.degradeInfo),{},{eventName:fe.LOWDECODE})),c===1&&n._degrade(l.src)}),b(this,"_degrade",function(e){var s=n._plugin.player,a=s.video;if(!(a&&a.TAG!=="MVideo")){var o=s.video.degradeVideo;s.video=o,a.degrade(e),e&&(s.config.url=e);var u=s.root.firstChild;u.TAG==="MVideo"&&s.root.replaceChild(o,u);var l=n._plugin.constructor.pluginName.toLowerCase();s.unRegisterPlugin(l),s.once("canplay",function(){s.play()})}}),b(this,"forceDegradeToVideo",function(e){var s=n._opts.innerDegrade;s===1&&n._degrade(e)}),this._opts=i,this._plugin=r,this._init()}return Ve(t,[{key:"_init",value:function(){var r=this._opts,n=r.media,e=r.preloadTime,s=r.innerDegrade,a=r.isLive;if(n){if(!a&&n.setPlayMode){n.setPlayMode("VOD");return}s&&n.setAttribute("innerdegrade",s),e&&n.setAttribute("preloadtime",e),this._bindEvents()}}},{key:"_bindEvents",value:function(){var r=this._opts.media;r.addEventListener("lowdecode",this._onLowDecode)}},{key:"destroy",value:function(){var r,n;(r=this._opts)===null||r===void 0||(n=r.media)===null||n===void 0||n.removeEventListener("lowdecode",this._onLowDecode),this._plugin=null}}]),t}();function kS(t,i){var r=i.player,n=r.currentTime,e={startTime:n};switch(za(t)){case"boolean":e.seamless=t;break;case"object":Object.assign(e,t);break}return e}var Ya=function(t){yo(r,t);var i=_o(r);function r(){var n;ze(this,r);for(var e=arguments.length,s=new Array(e),a=0;a<e;a++)s[a]=arguments[a];return n=i.call.apply(i,[this].concat(s)),b(ne(n),"hls",null),b(ne(n),"pluginExtension",null),b(ne(n),"getStats",function(){var o;return(o=n.hls)===null||o===void 0?void 0:o.getStats()}),b(ne(n),"_onSwitchSubtitle",function(o){var u,l=o.lang;(u=n.hls)===null||u===void 0||u.switchSubtitleStream(l)}),b(ne(n),"_onSwitchURL",function(o,u){return new Promise(function(l,c){var f=ne(n),h=f.player,d=f.hls;if(d){var p,m,_=kS(u,ne(n));h.config.url=o,d.switchURL(o,_).then(function(){return l(!0)}).catch(c),!_.seamless&&(p=n.player.config)!==null&&p!==void 0&&(m=p.hls)!==null&&m!==void 0&&m.keepStatusAfterSwitch&&n._keepPauseStatus()}else c()})}),b(ne(n),"_keepPauseStatus",function(){var o=n.player.paused;o&&n.player.once("canplay",function(){n.player.pause()})}),n}return Ve(r,[{key:"core",get:function(){return this.hls}},{key:"version",get:function(){var e;return(e=this.hls)===null||e===void 0?void 0:e.version}},{key:"softDecode",get:function(){var e,s,a=(e=this.player)===null||e===void 0||(s=e.config)===null||s===void 0?void 0:s.mediaType;return!!a&&a!=="video"&&a!=="audio"}},{key:"beforePlayerInit",value:function(){var e=this,s=this.player.config,a=s.hls||{};if(!(!s.url&&!s.__allowHlsEmptyUrl__||!a.preferMMS&&dt.isMMSOnly())){if(this.hls&&this.hls.destroy(),this.player.switchURL=this._onSwitchURL,this.player.handleSource=!1,a.innerDegrade=a.innerDegrade||s.innerDegrade,(a.disconnectTime===null||a.disconnectTime===void 0)&&(a.disconnectTime=0),this.hls=new hi(de({softDecode:this.softDecode,isLive:s.isLive,media:this.player.media||this.player.video,startTime:s.startTime,url:s.url},a)),this.softDecode||an.defineGetterOrSetter(this.player,{url:{get:function(){var l,c;return(l=e.hls)===null||l===void 0||(c=l.media)===null||c===void 0?void 0:c.src},configurable:!0}}),this.softDecode&&(this.pluginExtension=new ES(de({isLive:s.isLive,media:this.player.video},a),this),this.player.forceDegradeToVideo=function(){for(var u,l=arguments.length,c=new Array(l),f=0;f<l;f++)c[f]=arguments[f];return(u=e.pluginExtension)===null||u===void 0?void 0:u.forceDegradeToVideo.apply(u,c)}),s.isLive){var o;(o=this.player)===null||o===void 0||o.useHooks("replay",function(){var u;return(u=e.hls)===null||u===void 0?void 0:u.replay()})}this.on(Tv,this._onSwitchSubtitle),this.on(ms,this._onSwitchURL),this.on(vo,this.destroy.bind(this)),this._transError(),this._transCoreEvent(J.TTFB),this._transCoreEvent(J.LOAD_START),this._transCoreEvent(J.LOAD_RESPONSE_HEADERS),this._transCoreEvent(J.LOAD_COMPLETE),this._transCoreEvent(J.LOAD_RETRY),this._transCoreEvent(J.SOURCEBUFFER_CREATED),this._transCoreEvent(J.MEDIASOURCE_OPENED),this._transCoreEvent(J.REMOVE_BUFFER),this._transCoreEvent(J.BUFFEREOS),this._transCoreEvent(J.KEYFRAME),this._transCoreEvent(J.METADATA_PARSED),this._transCoreEvent(J.DEMUXED_TRACK),this._transCoreEvent(J.SEI),this._transCoreEvent(J.SEI_IN_TIME),this._transCoreEvent(J.SPEED),this._transCoreEvent(J.HLS_MANIFEST_LOADED),this._transCoreEvent(J.HLS_LEVEL_LOADED),this._transCoreEvent(J.STREAM_EXCEPTION),this._transCoreEvent(J.SWITCH_URL_SUCCESS),this._transCoreEvent(J.SWITCH_URL_FAILED),this._transCoreEvent(fe.NO_AUDIO_TRACK),this._transCoreEvent(fe.STREAM_PARSED),this._transCoreEvent(fe.SUBTITLE_SEGMENTS),this._transCoreEvent(fe.SUBTITLE_PLAYLIST),this._transCoreEvent(fe.APPEND_COST),s.url&&this.hls.load(s.url,!0).catch(function(u){})}}},{key:"destroy",value:function(){var e;this.hls&&(this.hls.destroy(),this.hls=null),(e=this.pluginExtension)===null||e===void 0||e.destroy(),this.pluginExtension=null}},{key:"_transError",value:function(){var e=this;this.hls.on(fe.ERROR,function(s){e.player&&e.player.emit(yi,new as(e.player,s))})}},{key:"_transCoreEvent",value:function(e){var s=this;this.hls.on(e,function(a){s.player&&(s.player.emit("core_event",de(de({},a),{},{eventName:e})),e===J.SEI_IN_TIME&&s.hls.hasSubtitle&&s._emitSeiPaylodTime(a))})}},{key:"_emitSeiPaylodTime",value:function(e){try{var s=JSON.parse(Array.from(e.data.payload).map(function(a){return String.fromCharCode(a)}).join("").slice(0,-1));if(!s.rtmp_dts)return;this.player.emit("core_event",{eventName:fe.SEI_PAYLOAD_TIME,time:s.rtmp_dts})}catch{}}}],[{key:"pluginName",get:function(){return"hls"}},{key:"isSupported",value:function(e,s){return hi.isSupported(e,s)}}]),r}(an);b(Ya,"Hls",hi);b(Ya,"EVENT",fe);const wS=()=>{const[t,i]=Jt.useState(""),[r,n]=Jt.useState(""),[e,s]=Jt.useState(!1),[a,o]=Jt.useState(""),u=Jt.useCallback(()=>{if(!t.trim()){o(" m3u8 ");return}n(t)},[t]),l=Jt.useCallback(()=>{const c="https://sf1-cdn-tos.huoshanstatic.com/obj/media-fe/xgplayer_doc_video/hls/xgplayer-demo.m3u8";i(c),n(c)},[]);return Jt.useEffect(()=>{let c=null;if(o(""),r){s(!0);try{const f={id:"m3u8player",url:r,playsinline:!0,fluid:!0,autoplay:!1,playbackRate:[.5,1,1.5,2],screenShot:!0,download:!0,lang:"zh-cn",volume:.7,cssFullscreen:!0,controls:!0,preload:"metadata",poster:"",defaultPlaybackRate:1};if(document.createElement("video").canPlayType("application/vnd.apple.mpegurl"))c=new Ut(f);else if(Ya.isSupported())c=new Ut({...f,plugins:[Ya]});else throw new Error(" HLS ");c.on("error",h=>{console.error(":",h),o("")}),c.on("ready",()=>{s(!1)}),c.on("waiting",()=>{s(!0)}),c.on("playing",()=>{s(!1)})}catch(f){o(f instanceof Error?f.message:""),s(!1)}return()=>{c&&c.destroy(),s(!1)}}},[r]),_e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 py-4 px-4 md:px-6 lg:px-8",children:_e.jsx("div",{className:"max-w-6xl mx-auto w-full",children:_e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden transition-all duration-300 hover:shadow-xl",children:[_e.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 py-5 px-6 sm:px-8",children:[_e.jsx("h1",{className:"text-2xl md:text-3xl lg:text-4xl font-bold text-white text-center leading-tight",children:"M3U8 "}),_e.jsx("p",{className:"text-blue-100 text-center mt-1 text-sm sm:text-base",children:" m3u8 "})]}),_e.jsxs("div",{className:"p-4 sm:p-6 md:p-8 space-y-5",children:[_e.jsx("div",{className:"space-y-3",children:_e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[_e.jsx("input",{type:"text",className:"border border-slate-200 p-3 flex-1 rounded-lg text-sm sm:text-base focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 placeholder-slate-400 bg-slate-50 hover:bg-white",placeholder:" m3u8 https://sf1-cdn-tos.huoshanstatic.com/obj/media-fe/xgplayer_doc_video/hls/xgplayer-demo.m3u8",value:t,onChange:c=>i(c.target.value)}),_e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 min-w-[160px] sm:min-w-auto",children:[_e.jsx("button",{onClick:l,className:"bg-gradient-to-r from-slate-100 to-slate-200 text-slate-700 py-3 px-5 rounded-lg hover:from-slate-200 hover:to-slate-300 whitespace-nowrap text-sm sm:text-base font-medium transition-all duration-200 shadow-sm hover:shadow-md transform hover:-translate-y-0.5 active:translate-y-0",children:""}),_e.jsx("button",{onClick:u,className:"bg-gradient-to-r from-blue-500 to-indigo-500 text-white py-3 px-5 rounded-lg hover:from-blue-600 hover:to-indigo-600 whitespace-nowrap text-sm sm:text-base font-medium transition-all duration-200 shadow-md hover:shadow-lg transform hover:-translate-y-0.5 active:translate-y-0 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:ring-offset-2",children:""})]})]})}),a&&_e.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 px-5 py-3 rounded-lg flex items-center gap-2 shadow-sm transition-all duration-300 animate-fadeIn",children:[_e.jsx("svg",{className:"w-5 h-5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:_e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),_e.jsx("span",{children:a})]}),_e.jsxs("div",{className:"relative group",children:[e&&_e.jsx("div",{className:"absolute inset-0 bg-black/90 flex items-center justify-center z-10 rounded-xl transition-all duration-300 animate-fadeIn",children:_e.jsxs("div",{className:"text-center",children:[_e.jsx("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mb-3"}),_e.jsx("div",{className:"text-white text-lg font-medium",children:"..."})]})}),_e.jsx("div",{id:"m3u8player",className:"w-full aspect-[16/9] bg-slate-900 rounded-xl overflow-hidden shadow-lg transition-all duration-300 group-hover:shadow-xl"})]}),_e.jsx("div",{className:"text-xs text-slate-500 text-center pt-1 transition-all duration-300 animate-fadeIn",children:" m3u8     "})]})]})})})},TS=()=>_e.jsx("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center",children:_e.jsx(wS,{})});Eu.createRoot(document.getElementById("root")).render(_e.jsx(_g.StrictMode,{children:_e.jsx(TS,{})}));
